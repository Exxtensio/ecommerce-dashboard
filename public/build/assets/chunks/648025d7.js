import{a as e}from"./38c37879.js";import{n as t}from"./3850fa65.js";import{l as r}from"./304854e2.js";import{u as i}from"./cc31a9d7.js";import{r as n,s,a0 as o,h as a,m as l,w as c,d,X as h}from"./e1f92d6d.js";import{a as p}from"./35c30f44.js";import{R as u}from"./7cfaeace.js";function m(e,t){let r;return function(...i){clearTimeout(r),r=setTimeout((()=>e.apply(this,i)),t)}}function g(e,t){return document.dispatchEvent(new CustomEvent(`inertia:${e}`,t))}var f=e=>g("finish",{detail:{visit:e}}),v=e=>g("navigate",{detail:{page:e}});function y(e){return e instanceof File||e instanceof Blob||e instanceof FileList&&e.length>0||e instanceof FormData&&Array.from(e.values()).some((e=>y(e)))||"object"==typeof e&&null!==e&&Object.values(e).some((e=>y(e)))}function b(e,t=new FormData,r=null){e=e||{};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&S(t,w(r,i),e[i]);return t}function w(e,t){return e?e+"["+t+"]":t}function S(e,t,r){return Array.isArray(r)?Array.from(r.keys()).forEach((i=>S(e,w(t,i.toString()),r[i]))):r instanceof Date?e.append(t,r.toISOString()):r instanceof File?e.append(t,r,r.name):r instanceof Blob?e.append(t,r):"boolean"==typeof r?e.append(t,r?"1":"0"):"string"==typeof r?e.append(t,r):"number"==typeof r?e.append(t,`${r}`):null==r?e.append(t,""):void b(r,e,t)}var E={modal:null,listener:null,show(e){"object"==typeof e&&(e=`All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>${JSON.stringify(e)}`);let t=document.createElement("html");t.innerHTML=e,t.querySelectorAll("a").forEach((e=>e.setAttribute("target","_top"))),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.boxSizing="border-box",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",(()=>this.hide()));let r=document.createElement("iframe");if(r.style.backgroundColor="white",r.style.borderRadius="5px",r.style.width="100%",r.style.height="100%",this.modal.appendChild(r),document.body.prepend(this.modal),document.body.style.overflow="hidden",!r.contentWindow)throw new Error("iframe not yet ready.");r.contentWindow.document.open(),r.contentWindow.document.write(t.outerHTML),r.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape(e){27===e.keyCode&&this.hide()}};function k(e){return new URL(e.toString(),window.location.toString())}function x(e){return(e=new URL(e.href)).hash="",e}var P=typeof window>"u",T={buildDOMElement(e){let t=document.createElement("template");t.innerHTML=e;let r=t.content.firstChild;if(!e.startsWith("<script "))return r;let i=document.createElement("script");return i.innerHTML=r.innerHTML,r.getAttributeNames().forEach((e=>{i.setAttribute(e,r.getAttribute(e)||"")})),i},isInertiaManagedElement:e=>e.nodeType===Node.ELEMENT_NODE&&null!==e.getAttribute("inertia"),findMatchingElementIndex(e,t){let r=e.getAttribute("inertia");return null!==r?t.findIndex((e=>e.getAttribute("inertia")===r)):-1},update:m((function(e){let t=e.map((e=>this.buildDOMElement(e)));Array.from(document.head.childNodes).filter((e=>this.isInertiaManagedElement(e))).forEach((e=>{var r,i;let n=this.findMatchingElementIndex(e,t);if(-1===n)return void(null==(r=null==e?void 0:e.parentNode)||r.removeChild(e));let s=t.splice(n,1)[0];s&&!e.isEqualNode(s)&&(null==(i=null==e?void 0:e.parentNode)||i.replaceChild(s,e))})),t.forEach((e=>document.head.appendChild(e)))}),1)};function C(e,t,r){let i={},n=0;function s(){let e=t(""),r={...e?{title:`<title inertia="">${e}</title>`}:{}},n=Object.values(i).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,r)=>{if(-1===r.indexOf("<"))return e;if(0===r.indexOf("<title ")){let i=r.match(/(<title [^>]+>)(.*?)(<\/title>)/);return e.title=i?`${i[1]}${t(i[2])}${i[3]}`:r,e}let i=r.match(/ inertia="[^"]+"/);return i?e[i[0]]=r:e[Object.keys(e).length]=r,e}),r);return Object.values(n)}function o(){e?r(s()):T.update(s())}return o(),{forceUpdate:o,createProvider:function(){let e=function(){let e=n+=1;return i[e]=[],e.toString()}();return{update:t=>function(e,t=[]){null!==e&&Object.keys(i).indexOf(e)>-1&&(i[e]=t),o()}(e,t),disconnect:()=>function(e){null===e||-1===Object.keys(i).indexOf(e)||(delete i[e],o())}(e)}}}}var O=null;function j(e){document.addEventListener("inertia:start",$.bind(null,e)),document.addEventListener("inertia:progress",V),document.addEventListener("inertia:finish",I)}function $(e){O=setTimeout((()=>i.start()),e)}function V(e){var t;i.isStarted()&&(null==(t=e.detail.progress)?void 0:t.percentage)&&i.set(Math.max(i.status,e.detail.progress.percentage/100*.9))}function I(e){clearTimeout(O),i.isStarted()&&(e.detail.visit.completed?i.done():e.detail.visit.interrupted?i.set(0):e.detail.visit.cancelled&&(i.done(),i.remove()))}function L({delay:e=250,color:t="#29d",includeCSS:r=!0,showSpinner:n=!1}={}){j(e),i.configure({showSpinner:n}),r&&function(e){let t=document.createElement("style");t.type="text/css",t.textContent=`\n    #nprogress {\n      pointer-events: none;\n    }\n\n    #nprogress .bar {\n      background: ${e};\n\n      position: fixed;\n      z-index: 1031;\n      top: 0;\n      left: 0;\n\n      width: 100%;\n      height: 2px;\n    }\n\n    #nprogress .peg {\n      display: block;\n      position: absolute;\n      right: 0px;\n      width: 100px;\n      height: 100%;\n      box-shadow: 0 0 10px ${e}, 0 0 5px ${e};\n      opacity: 1.0;\n\n      -webkit-transform: rotate(3deg) translate(0px, -4px);\n          -ms-transform: rotate(3deg) translate(0px, -4px);\n              transform: rotate(3deg) translate(0px, -4px);\n    }\n\n    #nprogress .spinner {\n      display: block;\n      position: fixed;\n      z-index: 1031;\n      top: 15px;\n      right: 15px;\n    }\n\n    #nprogress .spinner-icon {\n      width: 18px;\n      height: 18px;\n      box-sizing: border-box;\n\n      border: solid 2px transparent;\n      border-top-color: ${e};\n      border-left-color: ${e};\n      border-radius: 50%;\n\n      -webkit-animation: nprogress-spinner 400ms linear infinite;\n              animation: nprogress-spinner 400ms linear infinite;\n    }\n\n    .nprogress-custom-parent {\n      overflow: hidden;\n      position: relative;\n    }\n\n    .nprogress-custom-parent #nprogress .spinner,\n    .nprogress-custom-parent #nprogress .bar {\n      position: absolute;\n    }\n\n    @-webkit-keyframes nprogress-spinner {\n      0%   { -webkit-transform: rotate(0deg); }\n      100% { -webkit-transform: rotate(360deg); }\n    }\n    @keyframes nprogress-spinner {\n      0%   { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  `,document.head.appendChild(t)}(t)}var F=new class{constructor(){this.visitId=null}init({initialPage:e,resolveComponent:t,swapComponent:r}){this.page=e,this.resolveComponent=t,this.swapComponent=r,this.setNavigationType(),this.clearRememberedStateOnReload(),this.isBackForwardVisit()?this.handleBackForwardVisit(this.page):this.isLocationVisit()?this.handleLocationVisit(this.page):this.handleInitialPageVisit(this.page),this.setupEventListeners()}setNavigationType(){this.navigationType=window.performance&&window.performance.getEntriesByType("navigation").length>0?window.performance.getEntriesByType("navigation")[0].type:"navigate"}clearRememberedStateOnReload(){var e;"reload"===this.navigationType&&(null==(e=window.history.state)?void 0:e.rememberedState)&&delete window.history.state.rememberedState}handleInitialPageVisit(e){this.page.url+=window.location.hash,this.setPage(e,{preserveState:!0}).then((()=>v(e)))}setupEventListeners(){window.addEventListener("popstate",this.handlePopstateEvent.bind(this)),document.addEventListener("scroll",m(this.handleScrollEvent.bind(this),100),!0)}scrollRegions(){return document.querySelectorAll("[scroll-region]")}handleScrollEvent(e){"function"==typeof e.target.hasAttribute&&e.target.hasAttribute("scroll-region")&&this.saveScrollPositions()}saveScrollPositions(){this.replaceState({...this.page,scrollRegions:Array.from(this.scrollRegions()).map((e=>({top:e.scrollTop,left:e.scrollLeft})))})}resetScrollPositions(){window.scrollTo(0,0),this.scrollRegions().forEach((e=>{"function"==typeof e.scrollTo?e.scrollTo(0,0):(e.scrollTop=0,e.scrollLeft=0)})),this.saveScrollPositions(),window.location.hash&&setTimeout((()=>{var e;return null==(e=document.getElementById(window.location.hash.slice(1)))?void 0:e.scrollIntoView()}))}restoreScrollPositions(){this.page.scrollRegions&&this.scrollRegions().forEach(((e,t)=>{let r=this.page.scrollRegions[t];r&&("function"==typeof e.scrollTo?e.scrollTo(r.left,r.top):(e.scrollTop=r.top,e.scrollLeft=r.left))}))}isBackForwardVisit(){return window.history.state&&"back_forward"===this.navigationType}handleBackForwardVisit(e){window.history.state.version=e.version,this.setPage(window.history.state,{preserveScroll:!0,preserveState:!0}).then((()=>{this.restoreScrollPositions(),v(e)}))}locationVisit(e,t){try{let r={preserveScroll:t};window.sessionStorage.setItem("inertiaLocationVisit",JSON.stringify(r)),window.location.href=e.href,x(window.location).href===x(e).href&&window.location.reload()}catch{return!1}}isLocationVisit(){try{return null!==window.sessionStorage.getItem("inertiaLocationVisit")}catch{return!1}}handleLocationVisit(e){var t,r;let i=JSON.parse(window.sessionStorage.getItem("inertiaLocationVisit")||"");window.sessionStorage.removeItem("inertiaLocationVisit"),e.url+=window.location.hash,e.rememberedState=(null==(t=window.history.state)?void 0:t.rememberedState)??{},e.scrollRegions=(null==(r=window.history.state)?void 0:r.scrollRegions)??[],this.setPage(e,{preserveScroll:i.preserveScroll,preserveState:!0}).then((()=>{i.preserveScroll&&this.restoreScrollPositions(),v(e)}))}isLocationVisitResponse(e){return!(!e||409!==e.status||!e.headers["x-inertia-location"])}isInertiaResponse(e){return!!(null==e?void 0:e.headers["x-inertia"])}createVisitId(){return this.visitId={},this.visitId}cancelVisit(e,{cancelled:t=!1,interrupted:r=!1}){e&&!e.completed&&!e.cancelled&&!e.interrupted&&(e.cancelToken.abort(),e.onCancel(),e.completed=!1,e.cancelled=t,e.interrupted=r,f(e),e.onFinish(e))}finishVisit(e){!e.cancelled&&!e.interrupted&&(e.completed=!0,e.cancelled=!1,e.interrupted=!1,f(e),e.onFinish(e))}resolvePreserveOption(e,t){return"function"==typeof e?e(t):"errors"===e?Object.keys(t.props.errors||{}).length>0:e}cancel(){this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}visit(i,{method:n="get",data:s={},replace:o=!1,preserveScroll:a=!1,preserveState:l=!1,only:c=[],except:d=[],headers:h={},errorBag:p="",forceFormData:u=!1,onCancelToken:m=()=>{},onBefore:f=()=>{},onStart:v=()=>{},onProgress:w=()=>{},onFinish:S=()=>{},onCancel:P=()=>{},onSuccess:T=()=>{},onError:C=()=>{},queryStringArrayFormat:O="brackets"}={}){let j="string"==typeof i?k(i):i;if((y(s)||u)&&!(s instanceof FormData)&&(s=b(s)),!(s instanceof FormData)){let[e,i]=function(e,i,n,s="brackets"){let o=/^https?:\/\//.test(i.toString()),a=o||i.toString().startsWith("/"),l=!a&&!i.toString().startsWith("#")&&!i.toString().startsWith("?"),c=i.toString().includes("?")||"get"===e&&Object.keys(n).length,d=i.toString().includes("#"),h=new URL(i.toString(),"http://localhost");return"get"===e&&Object.keys(n).length&&(h.search=r.stringify(t(r.parse(h.search,{ignoreQueryPrefix:!0}),n),{encodeValuesOnly:!0,arrayFormat:s}),n={}),[[o?`${h.protocol}//${h.host}`:"",a?h.pathname:"",l?h.pathname.substring(1):"",c?h.search:"",d?h.hash:""].join(""),n]}(n,j,s,O);j=k(e),s=i}let $={url:j,method:n,data:s,replace:o,preserveScroll:a,preserveState:l,only:c,except:d,headers:h,errorBag:p,forceFormData:u,queryStringArrayFormat:O,cancelled:!1,completed:!1,interrupted:!1};if(!1===f($)||!g("before",{cancelable:!0,detail:{visit:$}}))return;this.activeVisit&&this.cancelVisit(this.activeVisit,{interrupted:!0}),this.saveScrollPositions();let V=this.createVisitId();this.activeVisit={...$,onCancelToken:m,onBefore:f,onStart:v,onProgress:w,onFinish:S,onCancel:P,onSuccess:T,onError:C,queryStringArrayFormat:O,cancelToken:new AbortController},m({cancel:()=>{this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}}),(e=>{g("start",{detail:{visit:e}})})($),v($);let I=!(!c.length&&!d.length);e({method:n,url:x(j).href,data:"get"===n?{}:s,params:"get"===n?s:{},signal:this.activeVisit.cancelToken.signal,headers:{...h,Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Inertia":!0,...I?{"X-Inertia-Partial-Component":this.page.component}:{},...c.length?{"X-Inertia-Partial-Data":c.join(",")}:{},...d.length?{"X-Inertia-Partial-Except":d.join(",")}:{},...p&&p.length?{"X-Inertia-Error-Bag":p}:{},...this.page.version?{"X-Inertia-Version":this.page.version}:{}},onUploadProgress:e=>{s instanceof FormData&&(e.percentage=e.progress?Math.round(100*e.progress):0,(e=>{g("progress",{detail:{progress:e}})})(e),w(e))}}).then((e=>{var t;if(!this.isInertiaResponse(e))return Promise.reject({response:e});let r=e.data;I&&r.component===this.page.component&&(r.props={...this.page.props,...r.props}),a=this.resolvePreserveOption(a,r),(l=this.resolvePreserveOption(l,r))&&(null==(t=window.history.state)?void 0:t.rememberedState)&&r.component===this.page.component&&(r.rememberedState=window.history.state.rememberedState);let i=j,n=k(r.url);return i.hash&&!n.hash&&x(i).href===n.href&&(n.hash=i.hash,r.url=n.href),this.setPage(r,{visitId:V,replace:o,preserveScroll:a,preserveState:l})})).then((()=>{let e=this.page.props.errors||{};if(Object.keys(e).length>0){let t=p?e[p]?e[p]:{}:e;return(e=>{g("error",{detail:{errors:e}})})(t),C(t)}return(e=>{g("success",{detail:{page:e}})})(this.page),T(this.page)})).catch((e=>{if(this.isInertiaResponse(e.response))return this.setPage(e.response.data,{visitId:V});if(this.isLocationVisitResponse(e.response)){let t=k(e.response.headers["x-inertia-location"]),r=j;r.hash&&!t.hash&&x(r).href===t.href&&(t.hash=r.hash),this.locationVisit(t,!0===a)}else{if(!e.response)return Promise.reject(e);(e=>g("invalid",{cancelable:!0,detail:{response:e}}))(e.response)&&E.show(e.response.data)}})).then((()=>{this.activeVisit&&this.finishVisit(this.activeVisit)})).catch((t=>{if(!e.isCancel(t)){let e=(e=>g("exception",{cancelable:!0,detail:{exception:e}}))(t);if(this.activeVisit&&this.finishVisit(this.activeVisit),e)return Promise.reject(t)}}))}setPage(e,{visitId:t=this.createVisitId(),replace:r=!1,preserveScroll:i=!1,preserveState:n=!1}={}){return Promise.resolve(this.resolveComponent(e.component)).then((s=>{t===this.visitId&&(e.scrollRegions=e.scrollRegions||[],e.rememberedState=e.rememberedState||{},(r=r||k(e.url).href===window.location.href)?this.replaceState(e):this.pushState(e),this.swapComponent({component:s,page:e,preserveState:n}).then((()=>{i||this.resetScrollPositions(),r||v(e)})))}))}pushState(e){this.page=e,window.history.pushState(e,"",e.url)}replaceState(e){this.page=e,window.history.replaceState(e,"",e.url)}handlePopstateEvent(e){if(null!==e.state){let t=e.state,r=this.createVisitId();Promise.resolve(this.resolveComponent(t.component)).then((e=>{r===this.visitId&&(this.page=t,this.swapComponent({component:e,page:t,preserveState:!1}).then((()=>{this.restoreScrollPositions(),v(t)})))}))}else{let e=k(this.page.url);e.hash=window.location.hash,this.replaceState({...this.page,url:e.href}),this.resetScrollPositions()}}get(e,t={},r={}){return this.visit(e,{...r,method:"get",data:t})}reload(e={}){return this.visit(window.location.href,{...e,preserveScroll:!0,preserveState:!0})}replace(e,t={}){return console.warn(`Inertia.replace() has been deprecated and will be removed in a future release. Please use Inertia.${t.method??"get"}() instead.`),this.visit(e,{preserveState:!0,...t,replace:!0})}post(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"post",data:t})}put(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"put",data:t})}patch(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"patch",data:t})}delete(e,t={}){return this.visit(e,{preserveState:!0,...t,method:"delete"})}remember(e,t="default"){var r;P||this.replaceState({...this.page,rememberedState:{...null==(r=this.page)?void 0:r.rememberedState,[t]:e}})}restore(e="default"){var t,r;if(!P)return null==(r=null==(t=window.history.state)?void 0:t.rememberedState)?void 0:r[e]}on(e,t){let r=e=>{let r=t(e);e.cancelable&&!e.defaultPrevented&&!1===r&&e.preventDefault()};return document.addEventListener(`inertia:${e}`,r),()=>document.removeEventListener(`inertia:${e}`,r)}},N={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),"string"==typeof this.$options.remember&&(this.$options.remember={data:[this.$options.remember]}),"string"==typeof this.$options.remember.data&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,t=F.restore(e),r=this.$options.remember.data.filter((e=>!(null!==this[e]&&"object"==typeof this[e]&&!1===this[e].__rememberable))),i=e=>null!==this[e]&&"object"==typeof this[e]&&"function"==typeof this[e].__remember&&"function"==typeof this[e].__restore;r.forEach((n=>{void 0!==this[n]&&void 0!==t&&void 0!==t[n]&&(i(n)?this[n].__restore(t[n]):this[n]=t[n]),this.$watch(n,(()=>{F.remember(r.reduce(((e,t)=>({...e,[t]:p(i(t)?this[t].__remember():this[t])})),{}),e)}),{immediate:!0,deep:!0})}))}};function A(e,t){let r="string"==typeof e?e:null,i="string"==typeof e?t:e,n=r?F.restore(r):null,s=p("object"==typeof i?i:i()),o=null,a=null,d=e=>e,h=l({...n?n.data:p(s),isDirty:!1,errors:n?n.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(s).reduce(((e,t)=>(e[t]=this[t],e)),{})},transform(e){return d=e,this},defaults(e,t){if("function"==typeof i)throw new Error("You cannot call `defaults()` when using a function to define your form data.");return s=typeof e>"u"?this.data():Object.assign({},p(s),"string"==typeof e?{[e]:t}:e),this},reset(...e){let t=p("object"==typeof i?s:i()),r=p(t);return 0===e.length?(s=r,Object.assign(this,t)):Object.keys(t).filter((t=>e.includes(t))).forEach((e=>{s[e]=r[e],this[e]=t[e]})),this},setError(e,t){return Object.assign(this.errors,"string"==typeof e?{[e]:t}:e),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...e){return this.errors=Object.keys(this.errors).reduce(((t,r)=>({...t,...e.length>0&&!e.includes(r)?{[r]:this.errors[r]}:{}})),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(e,t,r={}){let i=d(this.data()),n={...r,onCancelToken:e=>{if(o=e,r.onCancelToken)return r.onCancelToken(e)},onBefore:e=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(a),r.onBefore)return r.onBefore(e)},onStart:e=>{if(this.processing=!0,r.onStart)return r.onStart(e)},onProgress:e=>{if(this.progress=e,r.onProgress)return r.onProgress(e)},onSuccess:async e=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,a=setTimeout((()=>this.recentlySuccessful=!1),2e3);let t=r.onSuccess?await r.onSuccess(e):null;return s=p(this.data()),this.isDirty=!1,t},onError:e=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(e),r.onError)return r.onError(e)},onCancel:()=>{if(this.processing=!1,this.progress=null,r.onCancel)return r.onCancel()},onFinish:e=>{if(this.processing=!1,this.progress=null,o=null,r.onFinish)return r.onFinish(e)}};"delete"===e?F.delete(t,{...n,data:i}):F[e](t,i,n)},get(e,t){this.submit("get",e,t)},post(e,t){this.submit("post",e,t)},put(e,t){this.submit("put",e,t)},patch(e,t){this.submit("patch",e,t)},delete(e,t){this.submit("delete",e,t)},cancel(){o&&o.cancel()},__rememberable:null===r,__remember(){return{data:this.data(),errors:this.errors}},__restore(e){Object.assign(this,e.data),this.setError(e.errors)}});return c(h,(e=>{h.isDirty=!u(h.data(),s),r&&F.remember(p(e.__remember()),r)}),{immediate:!0,deep:!0}),h}var R=n(null),M=n(null),_=s(null),B=n(null),D=null,q=d({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:t,resolveComponent:r,titleCallback:i,onHeadUpdate:n}){R.value=t?h(t):null,M.value=e,B.value=null;let s=typeof window>"u";return D=C(s,i,n),s||(F.init({initialPage:e,resolveComponent:r,swapComponent:async e=>{R.value=h(e.component),M.value=e.page,B.value=e.preserveState?B.value:Date.now()}}),F.on("navigate",(()=>D.forceUpdate()))),()=>{if(R.value){R.value.inheritAttrs=!!R.value.inheritAttrs;let e=a(R.value,{...M.value.props,key:B.value});return _.value&&(R.value.layout=_.value,_.value=null),R.value.layout?"function"==typeof R.value.layout?R.value.layout(a,e):(Array.isArray(R.value.layout)?R.value.layout:[R.value.layout]).concat(e).reverse().reduce(((e,t)=>(t.inheritAttrs=!!t.inheritAttrs,a(t,{...M.value.props},(()=>e))))):e}}}}),U={install(e){F.form=A,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>F}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>M.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>D}),e.mixin(N)}};async function H({id:e="app",resolve:t,setup:r,title:i,progress:n={},page:s,render:l}){let c=typeof window>"u",d=c?null:document.getElementById(e),h=s||JSON.parse(d.dataset.page),p=e=>Promise.resolve(t(e)).then((e=>e.default||e)),u=[],m=await p(h.component).then((e=>r({el:d,App:q,props:{initialPage:h,initialComponent:e,resolveComponent:p,titleCallback:i,onHeadUpdate:c?e=>u=e:null},plugin:U})));if(!c&&n&&L(n),c){let t=await l(o({render:()=>a("div",{id:e,"data-page":JSON.stringify(h),innerHTML:m?l(m):""})}));return{head:u,body:t}}}var W=d({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag:e=>["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1,renderTagStart(e){e.props=e.props||{},e.props.inertia=void 0!==e.props["head-key"]?e.props["head-key"]:"";let t=Object.keys(e.props).reduce(((t,r)=>{let i=e.props[r];return["key","head-key"].includes(r)?t:""===i?t+` ${r}`:t+` ${r}="${i}"`}),"");return`<${e.type}${t}>`},renderTagChildren(e){return"string"==typeof e.children?e.children:e.children.reduce(((e,t)=>e+this.renderTag(t)),"")},isFunctionNode:e=>"function"==typeof e.type,isComponentNode:e=>"object"==typeof e.type,isCommentNode:e=>/(comment|cmt)/i.test(e.type.toString()),isFragmentNode:e=>/(fragment|fgt|symbol\(\))/i.test(e.type.toString()),isTextNode:e=>/(text|txt)/i.test(e.type.toString()),renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e))return"";if(this.isCommentNode(e))return"";let t=this.renderTagStart(e);return e.children&&(t+=this.renderTagChildren(e)),this.isUnaryTag(e)||(t+=`</${e.type}>`),t},addTitleElement(e){return this.title&&!e.find((e=>e.startsWith("<title")))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap((e=>this.resolveNode(e))).map((e=>this.renderTag(e))).filter((e=>e)))},resolveNode(e){return this.isFunctionNode(e)?this.resolveNode(e.type()):this.isComponentNode(e)?(console.warn("Using components in the <Head> component is not supported."),[]):this.isTextNode(e)&&e.children?e:this.isFragmentNode(e)&&e.children?e.children.flatMap((e=>this.resolveNode(e))):this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}});export{F,W as Z,H as j};
