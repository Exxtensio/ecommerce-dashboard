var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=(e,i)=>{for(var s in i)t(e,s,{get:i[s],enumerable:!0})},s=(i,s,n,a)=>{for(var o,r=a>1?void 0:a?e(s,n):s,l=i.length-1;l>=0;l--)(o=i[l])&&(r=(a?o(s,n,r):o(r))||r);return a&&r&&t(s,n,r),r},n={};i(n,{error:()=>l,errorOnce:()=>d,log:()=>o,logGroup:()=>p,reset:()=>u,table:()=>c,warn:()=>r,warnOnce:()=>h});var a=new Set;function o(...t){console.log(...t)}function r(t,...e){console.warn(`AG Charts - ${t}`,...e)}function l(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error(`AG Charts - ${t}`,...e)}function c(...t){console.table(...t)}function h(t,...e){const i=`Logger.warn: ${t}`;a.has(i)||(r(t,...e),a.add(i))}function d(t,...e){const i=`Logger.error: ${t}`;a.has(i)||(l(t,...e),a.add(i))}function u(){a.clear()}function p(t,e){console.groupCollapsed(t);try{return e()}finally{console.groupEnd()}}var g=class{static[Symbol.iterator](){return this.registeredModules.values()}static register(t){const e=this.registeredModules.get(t.name);if(e&&(e.enterprise||!t.enterprise))throw new Error(`AG Charts - Module '${t.name}' already registered`);this.registeredModules.set(t.name,t)}static registerMany(t){for(const e of t)this.register(e)}static reset(){this.registeredModules.clear()}static detectChartDefinition(t){return this.detectDefinition("chart",t)}static detectSeriesDefinition(t){return this.detectDefinition("series",t)}static detectDefinition(t,e){for(const i of this.registeredModules.values())if(i.type===t&&i.detect(e))return i;throw new Error(`AG Charts - Unknown ${t} type; Check options are correctly structured and series types are specified`)}};g.registeredModules=new Map;var m=class{constructor(){this.events=new Map}on(t,e){var i;return this.events.has(t)||this.events.set(t,new Set),null==(i=this.events.get(t))||i.add(e),()=>this.off(t,e)}off(t,e){const i=this.events.get(t);i&&(i.delete(e),0===i.size&&this.events.delete(t))}emit(t,e){var i;null==(i=this.events.get(t))||i.forEach((t=>t(e)))}clear(t){t?this.events.delete(t):this.events.clear()}};function y(t){return void 0===t?[]:Array.isArray(t)?t:[t]}function f(t,e){return t.reduce(((t,i)=>{const s=e(i);return t[s]??(t[s]=[]),t[s].push(i),t}),{})}function x(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!x(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function v(t,e,i=0){if(0===t.length)return[];const s=[];for(let n=0;n<e;n++)s.push(t.at((n+i)%t.length));return s}function b(t,e,i){if(t>e)return;let s;for(;e>=t;){const n=Math.floor((e+t)/2);i(n)?(s=n,t=n+1):e=n-1}return s}function M(t,e,i){if(t>e)return;let s;for(;e>=t;){const n=Math.floor((e+t)/2);i(n)?(s=n,e=n-1):t=n+1}return s}function S(t,e,i){const{leading:s=!0,trailing:n=!0}=i??{};let a,o,r=!1;function l(){n&&o?(a=setTimeout(l,e),t(...o)):r=!1,o=null}return Object.assign((function(...i){r?o=i:(r=!0,a=setTimeout(l,e),s?t(...i):o=i)}),{cancel(){clearTimeout(a),r=!1,o=null}})}function*I(...t){for(const e of t)yield*e}function D(t){for(const e of t)return e;throw new Error("AG Charts - no first() value found")}function A(t,e=1/0){switch(typeof t){case"undefined":return"undefined";case"number":if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";default:return(t=JSON.stringify(t)).length>e?`${t.slice(0,e)}... (+${t.length-e} characters)`:t}}function L(t){return null!=t}function N(t){return Array.isArray(t)}function k(t){return"boolean"==typeof t}function w(t){return t instanceof Date}function C(t){return w(t)&&!isNaN(Number(t))}function T(t){return"function"==typeof t}function E(t){return"object"==typeof t&&null!==t&&!N(t)}function O(t){return"object"==typeof t&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function R(t){return"string"==typeof t}function j(t){return"number"==typeof t}function P(t){return Number.isFinite(t)}function z(t){return"symbol"==typeof t}var B=Symbol("description"),F=Symbol("required");function G(t,e,i=""){if(!E(t))return{valid:null,errors:[{path:i,value:t,message:U(i,t,"an object")}]};const s=new Set(Object.keys(t)),n=[],a={};function o(t){return N(e)?`${i}[${t}]`:i?`${i}.${t}`:t}for(const[r,l]of Object.entries(e)){s.delete(r);const e=t[r];if(l[F]||void 0!==e)if(T(l))l(e,t)?a[r]=e:n.push({key:r,path:i,value:e,message:U(o(r),e,l)});else{const t=G(e,l,o(r));a[r]=t.valid,n.push(...t.errors)}}for(const r of s)n.push({key:r,path:i,unknown:!0,message:`Unknown option \`${o(r)}\`, ignoring.`});return{valid:a,errors:n}}function U(t,e,i){const s=R(i)?i:i[B],n=s?`; expecting ${s}`:"";return`${t?`Option \`${t}\``:"Value"} cannot be set to \`${A(e)}\`${n}, ignoring.`}function Y(t,e){return Object.assign(((e,i)=>t(e,i)),{[B]:e})}var W=(...t)=>Y(((e,i)=>t.every((t=>t(e,i)))),t.map((t=>t[B])).filter(Boolean).join(" and ")),V=(...t)=>Y(((e,i)=>t.some((t=>t(e,i)))),t.map((t=>t[B])).filter(Boolean).join(" or "));Y(N,"an array"),Y(k,"a boolean"),Y(T,"a function");var _=Y(P,"a number"),H=Y(E,"an object"),Z=Y(R,"a string"),K=Y((t=>w(t)||(P(t)||R(t))&&C(new Date(t))),"a date");((t,e=!0)=>{Y((i=>P(i)&&(i>t||e&&i===t)),`a number greater than ${e?"or equal to ":""}${t}`)})(0);var $,X,Q=Y((t=>P(t)&&t>=$&&t<=X),`a number between ${$=0} and ${X=1} inclusive`),q=t=>P(t)||C(t),J=t=>Y(((e,i)=>!q(e)||!q(i[t])||e<i[t]),`to be less than ${t}`);function tt(...t){E(t[0])&&(t=Object.values(t[0]));return Y((e=>t.includes(e)),`a keyword such as ${function(t,e="and",i=String,s=1/0){if(1===t.length)return i(t[0]);const n=(t=t.map(i)).pop();if(t.length>=s){const i=t.length-(s-1);return`${t.slice(0,s-1).join(", ")}, and ${i} more ${e} ${n}`}return`${t.join(", ")} ${e} ${n}`}(t,"or",(t=>`'${t}'`),6)}`)}var et=(t,e)=>Y(((e,i)=>N(e)&&e.every((e=>t(e,i)))),`${t[B]} array`),it={};i(it,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Ae,fromToMotion:()=>Le,staticFromToMotion:()=>Ne});var st={};function nt(t){var e;return t?null==(e=st.document)?void 0:e[t]:st.document}function at(t){var e;return t?null==(e=st.window)?void 0:e[t]:st.window}function ot(t){st.document=t}function rt(t){st.window=t}function lt(t,e,i){const s=nt().createElement(t);if("object"==typeof e&&(i=e,e=void 0),e)for(const n of e.split(" "))s.classList.add(n);return i&&Object.assign(s.style,i),s}function ct(t){return nt().createElementNS("http://www.w3.org/2000/svg",t)}function ht(t,e){const i=nt("body"),s=lt("a",{display:"none"});s.href=t,s.download=e,i.appendChild(s),s.click(),setTimeout((()=>i.removeChild(s)))}"undefined"!=typeof window?st.window=window:"undefined"!=typeof global&&(st.window=global.window),"undefined"!=typeof document?st.document=document:"undefined"!=typeof global&&(st.document=global.document);var dt=new Map;function ut(){dt.clear()}function pt(t){const e=t.constructor,i=Object.hasOwn(e,"className")?e.className:e.name;if(!i)throw new Error(`The ${e} is missing the 'className' property.`);const s=(dt.get(i)??0)+1;return dt.set(i,s),`${i}-${s}`}function gt(){var t;return(null==(t=crypto.randomUUID)?void 0:t.call(crypto))??function(){const t=new Uint8Array(16);crypto.getRandomValues(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;let e="";for(let i=0;i<t.length;i++)4!==i&&6!==i&&8!==i&&10!==i||(e+="-"),e+=t[i].toString(16).padStart(2,"0");return e}()}var mt={containsPoint:function(t,e,i){return e>=t.x&&e<=t.x+t.width&&i>=t.y&&i<=t.y+t.height},isEmpty:function(t){return null==t||0===t.height||0===t.width||isNaN(t.height)||isNaN(t.width)},normalize:function(t){let{x:e,y:i,width:s,height:n}=t;if((null==s||s>0)&&(null==n||n>0))return t;null!=e&&null!=s&&s<0&&(s=-s,e-=s);null!=i&&null!=n&&n<0&&(n=-n,i-=n);return{x:e,y:i,width:s,height:n}}};var yt=Symbol("interpolate"),ft=t=>null!=t[yt];function xt(t,e,i,s=1/0){const n={nearest:void 0,distanceSquared:s};for(const a of i){const i=a.distanceSquared(t,e);if(0===i)return{nearest:a,distanceSquared:0};i<n.distanceSquared&&(n.nearest=a,n.distanceSquared=i)}return n}function vt(t,e,i,s=1/0){var n;const{x:a=t,y:o=e}=(null==(n=i.transformPoint)?void 0:n.call(i,t,e))??{},r={nearest:void 0,distanceSquared:s};for(const l of i.children){const{nearest:t,distanceSquared:e}=l.nearestSquared(a,o,r.distanceSquared);if(0===e)return{nearest:t,distanceSquared:e};e<r.distanceSquared&&(r.nearest=t,r.distanceSquared=e)}return r}function bt(t,e,i){return Math.min(i,Math.max(t,e))}function Mt(t,e){const[i,s]=St(e);return bt(i,t,s)}function St(t){if(0===t.length)return[];const e=[1/0,-1/0];for(const i of t)i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i);return e}function It(t){const[e,i]=St(t);return i-e}function Dt(t,e,i=1e-10){return t>=e[0]-i&&t<=e[1]+i}function At(t,e,i=1e-10){return t===e||Math.abs(t-e)<i}function Lt(t){return-1===Math.sign(t)||Object.is(t,-0)}function Nt(t){return t%1==0}function kt(t,e=2){const i=10**e;return Math.round(t*i)/i}function wt(t,e){return Math.floor(t%e+(t<0?e:0))}function Ct(t){var e;if(Math.floor(t)===t)return 0;let i=String(t),s=0;if(t<1e-6||t>=1e21){let t;[i,t]=i.split("e"),null!=t&&(s=Number(t))}const n=(null==(e=i.split(".")[1])?void 0:e.length)??0;return Math.max(n-s,0)}var Tt=class t{constructor(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s}static fromDOMRect({x:e,y:i,width:s,height:n}){return new t(e,i,s,n)}static merge(e){let i=1/0,s=1/0,n=-1/0,a=-1/0;for(const t of e)t.x<i&&(i=t.x),t.y<s&&(s=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>a&&(a=t.y+t.height);return new t(i,s,n-i,a-s)}static nearestBox(t,e,i){return xt(t,e,i)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON:()=>({})}}clone(){const{x:e,y:i,width:s,height:n}=this;return new t(e,i,s,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return mt.containsPoint(this,t,e)}intersection(e){if(!this.collidesBBox(e))return;const i=bt(e.x,this.x,e.x+e.width),s=bt(e.y,this.y,e.y+e.height),n=bt(e.x,this.x+this.width,e.x+e.width),a=bt(e.y,this.y+this.height,e.y+e.height);return new t(i,s,n-i,a-s)}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;const i=t-bt(this.x,t,this.x+this.width),s=e-bt(this.y,e,this.y+this.height);return i*i+s*s}shrink(t,e){if("number"==typeof t)this.applyMargin(t,e);else for(const[i,s]of Object.entries(t))this.applyMargin(s,i);return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(t,e){if("number"==typeof t)this.applyMargin(-t,e);else for(const[i,s]of Object.entries(t))this.applyMargin(-s,i);return this}applyMargin(t,e){switch(e){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=2*t;break;case"horizontal":this.x+=t,this.width-=2*t;break;case void 0:this.x+=t,this.y+=t,this.width-=2*t,this.height-=2*t}}translate(t,e){return this.x+=t,this.y+=e,this}[yt](e,i){return new t(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}};Tt.zero=Object.freeze(new Tt(0,0,0,0)),Tt.NaN=Object.freeze(new Tt(NaN,NaN,NaN,NaN));var Et=Tt;function Ot(t){return function(e,i){const s=`__${i}`;e[i]||function(t,e,i,s){const{type:n="normal",changeCb:a,convertor:o,checkDirtyOnAssignment:r=!1}=s??{},l={type:n,changeCb:a,checkDirtyOnAssignment:r,convertor:o};let c;switch(n){case"normal":c=function(t,e){const{changeCb:i}=e;return function(e){return e!==this[t]?(this[t]=e,this.markDirty(),null==i||i(this),e):Rt}}(i,l);break;case"transform":c=function(t){return function(e){return e!==this[t]?(this[t]=e,this.markDirtyTransform(),e):Rt}}(i);break;case"path":c=function(t){return function(e){return e!==this[t]?(this[t]=e,this._dirtyPath||(this._dirtyPath=!0,this.markDirty()),e):Rt}}(i)}c=function(t,e){const{checkDirtyOnAssignment:i}=e;if(i)return function(e){const i=t.call(this,e);return!0===(null==e?void 0:e._dirty)&&this.markDirty(),i};return t}(function(t,e){const{changeCb:i}=e;if(i)return function(e){const s=t.call(this,e);return s!==Rt&&i.call(this,this),s};return t}(function(t,e){const{convertor:i}=e;if(i)return function(e){t.call(this,i(e))};return t}(c,l),l),l);const h=function(){return this[i]};Object.defineProperty(t,e,{set:c,get:h,enumerable:!0,configurable:!0})}(e,i,s,t)}}var Rt=Symbol("no-change");var jt=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(jt||{}),Pt=class t{constructor(e){this.serialNumber=t._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=pt(this),this.pointerEvents=0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=null==e?void 0:e.name,this.tag=(null==e?void 0:e.tag)??NaN,this.zIndex=(null==e?void 0:e.zIndex)??0}static toSVG(t,e,i){var s,n;const a=null==t?void 0:t.toSVG();if(null==a||!a.elements.length&&!(null==(s=a.defs)?void 0:s.length))return;const o=ct("svg");if(o.setAttribute("width",String(e)),o.setAttribute("height",String(i)),o.setAttribute("viewBox",`0 0 ${e} ${i}`),null==(n=a.defs)?void 0:n.length){const t=ct("defs");t.append(...a.defs),o.append(t)}return o.append(...a.elements),o.outerHTML}static*extractBBoxes(t,e){for(const i of t)if(!e||i.visible&&!i.transitionOut){const t=i.getBBox();t&&(yield t)}}get datum(){var t;return this._datum??(null==(t=this.parentNode)?void 0:t.datum)}set datum(t){this._datum!==t&&(this._previousDatum=this._datum,this._datum=t)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}preRender(t,e=1){this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=e,this.childNodeCounts.thisComplexity=e;for(const i of this.children()){const e=i.preRender(t);this.childNodeCounts.groups+=e.groups,this.childNodeCounts.nonGroups+=e.nonGroups,this.childNodeCounts.complexity+=e.complexity}return this.childNodeCounts}render(t){const{stats:e}=t;if(this._dirty=!1,t.debugNodeSearch){const e=this.name??this.id;t.debugNodeSearch.some((t=>"string"==typeof t?t===e:t.test(e)))&&(t.debugNodes[this.name??this.id]=this)}e&&(e.nodesRendered++,e.opsPerformed+=this.childNodeCounts.thisComplexity)}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this.children())e._setLayerManager(t)}sortChildren(t){if(this.dirtyZIndex=!1,!this.childNodes)return;const e=[...this.childNodes].sort(t);this.childNodes.clear();for(const i of e)this.childNodes.add(i)}*traverseUp(t){let e=this;for(t&&(yield e);e=e.parentNode;)yield e}*children(){if(this.childNodes)for(const t of this.childNodes)yield t}*descendants(){for(const t of this.children())yield t,yield*t.descendants()}isLeaf(){var t;return!(null==(t=this.childNodes)?void 0:t.size)}isRoot(){return!this.parentNode}append(t){var e,i;this.childNodes??(this.childNodes=new Set);for(const s of null!=(i=t)&&"object"==typeof i&&Symbol.iterator in i?i:[i])null==(e=s.parentNode)||e.removeChild(s),this.childNodes.add(s),s.parentNode=this,s._setLayerManager(this.layerManager);this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(t){return this.append(t),t}removeChild(t){var e;return!!(null==(e=this.childNodes)?void 0:e.delete(t))&&(delete t.parentNode,t._setLayerManager(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(),!0)}remove(){var t;return(null==(t=this.parentNode)?void 0:t.removeChild(this))??!1}clear(){var t;for(const e of this.children())delete e.parentNode,e._setLayerManager();null==(t=this.childNodes)||t.clear(),this.invalidateCachedBBox()}destroy(){var t;null==(t=this.parentNode)||t.removeChild(this)}setProperties(t,e){if(e)for(const i of e)this[i]=t[i];else Object.assign(this,t);return this}containsPoint(t,e){return!1}pickNode(t,e,i=!1){if(!this.visible||1===this.pointerEvents||!this.containsPoint(t,e))return;const s=[...this.children()];if(s.length>1e3)for(let n=s.length-1;n>=0;n--){const i=s[n],a=i.containsPoint(t,e)?i.pickNode(t,e):void 0;if(a)return a}else if(s.length)for(let n=s.length-1;n>=0;n--){const i=s[n].pickNode(t,e);if(i)return i}else if(!this.isContainerNode)return this}invalidateCachedBBox(){var t;null!=this.cachedBBox&&(this.cachedBBox=void 0,null==(t=this.parentNode)||t.invalidateCachedBBox())}getBBox(){return null==this.cachedBBox&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(){const{_dirty:t}=this;null==this.cachedBBox&&t||(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty){this._dirty=!1;for(const t of this.children())t.markClean()}}onZIndexChange(){const{parentNode:t}=this;t&&(t.dirtyZIndex=!0)}toSVG(){}};Pt._nextSerialNumber=0,s([Ot()],Pt.prototype,"visible",2),s([Ot({changeCb:t=>t.onZIndexChange()})],Pt.prototype,"zIndex",2);var zt=Pt,Bt=(t,e,i)=>t*(1-i)+e*i,Ft=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*((i+.055)/1.055)**2.4},Gt=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t},Ut=class t{constructor(t,e,i,s=1){this.r=bt(0,t||0,1),this.g=bt(0,e||0,1),this.b=bt(0,i||0,1),this.a=bt(0,s||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!t.parseHex(e):e.indexOf("rgb")>=0?!!t.stringToRgba(e):t.nameToHex.has(e.toLowerCase())}static fromString(e){if(e.indexOf("#")>=0)return t.fromHexString(e);const i=t.nameToHex.get(e.toLowerCase());if(i)return t.fromHexString(i);if(e.indexOf("rgb")>=0)return t.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map((t=>parseInt(t,16))).map((t=>t+16*t))}if((null==e?void 0:e.length)>=3&&e.every((t=>t>=0)))return 3===e.length&&e.push(255),e}static fromHexString(e){const i=t.parseHex(e);if(i){const[e,s,n,a]=i;return new t(e/255,s/255,n/255,a/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(t){let e=-1,i=-1;for(let a=0;a<t.length;a++){const s=t[a];if(-1===e&&"("===s)e=a;else if(")"===s){i=a;break}}if(-1===e||-1===i)return;const s=t.substring(e+1,i).split(","),n=[];for(let a=0;a<s.length;a++){const t=s[a];let e=parseFloat(t);if(!Number.isFinite(e))return;t.indexOf("%")>=0?(e=bt(0,e,100),e/=100):3===a?e=bt(0,e,1):(e=bt(0,e,255),e/=255),n.push(e)}return n}static fromRgbaString(e){const i=t.stringToRgba(e);if(i){if(3===i.length)return new t(i[0],i[1],i[2]);if(4===i.length)return new t(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(4===e.length)return new t(e[0],e[1],e[2],e[3]);if(3===e.length)return new t(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,s,n=1){const a=t.HSBtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static fromHSL(e,i,s,n=1){const a=t.HSLtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static fromOKLCH(e,i,s,n=1){const a=t.OKLCHtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let e="#"+t.padHex(Math.round(255*this.r).toString(16))+t.padHex(Math.round(255*this.g).toString(16))+t.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=t.padHex(Math.round(255*this.a).toString(16))),e}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return t.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,e,i){const s=Ft(t),n=Ft(e),a=Ft(i),o=Math.cbrt(.4122214708*s+.5363325363*n+.0514459929*a),r=Math.cbrt(.2119034982*s+.6806995451*n+.1073969566*a),l=Math.cbrt(.0883024619*s+.2817188376*n+.6299787005*a),c=.2104542553*o+.793617785*r-.0040720468*l,h=1.9779984951*o-2.428592205*r+.4505937099*l,d=.0259040371*o+.7827717662*r-.808675766*l,u=180*Math.atan2(d,h)/Math.PI;return[c,Math.hypot(h,d),u>=0?u:u+360]}static OKLCHtoRGB(t,e,i){const s=t,n=e*Math.cos(i*Math.PI/180),a=e*Math.sin(i*Math.PI/180),o=(s+.3963377774*n+.2158037573*a)**3,r=(s-.1055613458*n-.0638541728*a)**3,l=(s-.0894841775*n-1.291485548*a)**3,c=-1.2684380046*o+2.6097574011*r-.3413193965*l,h=-.0041960863*o-.7034186147*r+1.707614701*l;return[Gt(4.0767416621*o-3.3077115913*r+.2309699292*l),Gt(c),Gt(h)]}static RGBtoHSL(t,e,i){const s=Math.min(t,e,i),n=Math.max(t,e,i),a=(n+s)/2;let o,r;if(n===s)o=0,r=0;else{const l=n-s;r=a>.5?l/(2-n-s):l/(n+s),o=n===t?(e-i)/l+(e<i?6:0):n===e?(i-t)/l+2:(t-e)/l+4,o*=60}return[o,r,a]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const s=i<.5?i*(1+e):i+e-i*e,n=2*i-s;function a(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(s-n)*t:t<.5?s:t<2/3?n+(s-n)*(2/3-t)*6:n}return[a((t=(t%360+360)%360)/360+1/3),a(t/360),a(t/360-1/3)]}static RGBtoHSB(t,e,i){const s=Math.min(t,e,i),n=Math.max(t,e,i);let a=0;if(s!==n){const o=n-s,r=(n-t)/o,l=(n-e)/o,c=(n-i)/o;a=t===n?c-l:e===n?2+r-c:4+l-r,a/=6,a<0&&(a+=1)}return[360*a,0===n?0:(n-s)/n,n]}static HSBtoRGB(t,e,i){t=(t%360+360)%360/360;let s=0,n=0,a=0;if(0===e)s=n=a=i;else{const o=6*(t-Math.floor(t)),r=o-Math.floor(o),l=i*(1-e),c=i*(1-e*r),h=i*(1-e*(1-r));switch(o|0){case 0:s=i,n=h,a=l;break;case 1:s=c,n=i,a=l;break;case 2:s=l,n=i,a=h;break;case 3:s=l,n=c,a=i;break;case 4:s=h,n=l,a=i;break;case 5:s=i,n=l,a=c}}return[s,n,a]}static mix(e,i,s){return new t(Bt(e.r,i.r,s),Bt(e.g,i.g,s),Bt(e.b,i.b,s),Bt(e.a,i.a,s))}};Ut.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var Yt=Ut;function Wt(t,e){if("string"==typeof t)try{t=Yt.fromString(t)}catch{t=Yt.fromArray([0,0,0])}if("string"==typeof e)try{e=Yt.fromString(e)}catch{e=Yt.fromArray([0,0,0])}return i=>Yt.mix(t,e,i).toRgbaString()}var Vt=Symbol("BREAK"),_t="__decorator_config";function Ht(t,e){null==Object.getOwnPropertyDescriptor(t,_t)&&Object.defineProperty(t,_t,{value:{}});const i=t[_t],s=e.toString();if(void 0!==i[s])return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const a=Object.getOwnPropertyDescriptor(t,e),o=null==a?void 0:a.set,r=null==a?void 0:a.get;return Object.defineProperty(t,e,{set:function(t){const{setters:a,observers:l}=i[s];let c;a.some((t=>t.length>2))&&(c=r?r.call(this):n.get(this));for(const i of a)if((t=i(this,e,t,c))===Vt)return;o?o.call(this,t):n.set(this,t);for(const e of l)e(this,t,c)},get:function(){let t=r?r.call(this):n.get(this);for(const n of i[s].getters)if(t=n(this,e,t),t===Vt)return;return t},enumerable:!0,configurable:!1}),i[s]}function Zt(t,e,i){return(s,n)=>{const a=Ht(s,n);a.setters.push(t),e&&a.getters.unshift(e),i&&Object.assign(a,i)}}function Kt(t){return(e,i)=>{Ht(e,i).observers.push(t)}}function $t(t){return void 0!==t&&_t in t}function Xt(t){const e=new Set;for(;$t(t);)e.add(null==t?void 0:t[_t]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap((t=>Object.keys(t)))}function Qt(t){return Xt(t).reduce(((e,i)=>(e[i]=t[i]??null,e)),{})}function qt(t,e){return Array.isArray(t)?!!Array.isArray(e)&&(t.length===e.length&&t.every(((t,i)=>qt(t,e[i])))):O(t)?!!O(e)&&Jt(t,e,qt):t===e}function Jt(t,e,i){for(const s of Object.keys(e))if(!(s in t))return!1;for(const s of Object.keys(t)){if(!(s in e))return!1;if(!i(t[s],e[s]))return!1}return!0}function te(...t){const e={};for(const i of t){if(!E(i))continue;const t=$t(i)?Xt(i):Object.keys(i);for(const s of t)O(e[s])&&O(i[s])?e[s]=te(e[s],i[s]):e[s]??(e[s]=i[s])}return e}function ee(t,...e){return e&&N(t)?t.map((t=>te(t,...e))):t}function ie(t,e){return Object.entries(t).reduce(((i,[s,n])=>(i[s]=e(n,s,t),i)),{})}function se(t,e){const i={...t};for(const s of e)delete i[s];return i}function ne(t,e){return(N(e)?e:e.split(".")).reduce(((t,e)=>t[e]),t)}var ae=new Set(["__proto__","constructor","prototype"]);function oe(t,e,i){const s=N(e)?e.slice():e.split("."),n=s.pop();if(s.some((t=>ae.has(t))))return;const a=s.reduce(((t,e)=>t[e]),t);return a[n]=i,a[n]}function re(t,e,i){if(void 0===i)return e;for(const s of t){const t=i[s];void 0!==t&&(e[s]=t)}return e}function le(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((e=>{const i=t[e];null===i||"object"!=typeof i&&"function"!=typeof i||Object.isFrozen(i)||le(i)})),t}var ce={};i(ce,{easeIn:()=>de,easeInOut:()=>pe,easeInOutQuad:()=>ye,easeInQuad:()=>ge,easeOut:()=>ue,easeOutQuad:()=>me,inverseEaseOut:()=>fe,linear:()=>he});var he=t=>t,de=t=>1-Math.cos(t*Math.PI/2),ue=t=>Math.sin(t*Math.PI/2),pe=t=>-(Math.cos(t*Math.PI)-1)/2,ge=t=>t*t,me=t=>1-(1-t)**2,ye=t=>t<.5?2*t*t:1-(-2*t+2)**2/2,fe=t=>2*Math.asin(t)/Math.PI,xe=.2,ve=["initial","remove","update","add","trailing","end","none"],be={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:xe,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},Me=(t=>(t.Loop="loop",t.Reverse="reverse",t))(Me||{});function Se(t){return t.every((t=>t instanceof zt))?{nodes:t,selections:[]}:{nodes:[],selections:t}}function Ie(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every(((t,i)=>Ie(t,e[i]))):ft(t)&&ft(e)?t.equals(e):!(!O(t)||!O(e))&&Jt(t,e,Ie))}var De=class{constructor(t){var e,i,s;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=t.autoplay??!0,this.ease=t.ease??he,this.phase=t.phase;const n=t.duration??be[this.phase].animationDuration;this.duration=n*t.defaultDuration,this.delay=(t.delay??0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,!0===t.skip&&(null==(e=this.onUpdate)||e.call(this,t.to,!1,this),null==(i=this.onStop)||i.call(this,this),null==(s=this.onComplete)||s.call(this,this),this.isComplete=!0),!1!==t.collapsable&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return Ie(t.from,t.to)?0:e}play(t=!1){var e,i;this.isPlaying||this.isComplete||(this.isPlaying=!0,null==(e=this.onPlay)||e.call(this,this),this.autoplay&&(this.autoplay=!1,t&&(null==(i=this.onUpdate)||i.call(this,this.from,!0,this))))}stop(){var t;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,null==(t=this.onStop)||t.call(this,this))}update(t){var e,i;if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const s=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);null==(e=this.onUpdate)||e.call(this,n,!1,this);const a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,null==(i=this.onComplete)||i.call(this,this),t-(a-s)):0}get delta(){return this.ease(bt(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e||ft(e))return this.interpolateValue(t,e);const i=[];for(const s of Object.keys(e)){const n=this.interpolateValue(t[s],e[s]);null!=n&&i.push([s,n])}return t=>{const e={};for(const[s,n]of i)e[s]=n(t);return e}}interpolateValue(t,e){if(null!=t&&null!=e){if(ft(t))return i=>t[yt](e,i);try{switch(typeof t){case"number":return function(t,e){return i=>Number(t)*(1-i)+Number(e)*i}(t,e);case"string":return Wt(t,e);case"boolean":if(t===e)return()=>t}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}},Ae={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Le(t,e,i,s,n,a,o){const{fromFn:r,toFn:l,applyFn:c=(t,e)=>t.setProperties(e)}=n,{nodes:h,selections:d}=Se(s),u=(s,n)=>{let h,d=0,u=0;for(const p of n){const g=s[d]===p,m={last:u>=n.length-1,lastLive:d>=s.length-1,prev:n[u-1],prevFromProps:h,prevLive:s[d-1],next:n[u+1],nextLive:s[d+(g?1:0)]},y=`${t}_${e}_${p.id}`;i.stopByAnimationId(y);let f="unknown";g?a&&o&&(f=ke(p,p.datum,a,o)):f="removed",p.transitionOut="removed"===f;const{phase:x,start:v,finish:b,delay:M,duration:S,...I}=r(p,p.datum,f,m),{phase:D,start:A,finish:L,delay:N,duration:k,...w}=l(p,p.datum,f,m),C=null==b;i.animate({id:y,groupId:t,phase:x??D??"update",duration:S??k,delay:M??N,from:I,to:w,ease:ue,collapsable:C,onPlay:()=>{const t={...v,...A,...I};c(p,t,"start")},onUpdate(t){c(p,t,"update")},onStop:()=>{const t={...v,...A,...I,...w,...b,...L};c(p,t,"end")}}),g&&d++,u++,h=I}};let p=0;for(const g of d){const s=g.nodes();u(s.filter((t=>!g.isGarbage(t))),s),i.animate({id:`${t}_${e}_selection_${p}`,groupId:t,phase:"end",from:0,to:1,ease:ue,onStop(){g.cleanup()}}),p++}u(h,h)}function Ne(t,e,i,s,n,a,o){const{nodes:r,selections:l}=Se(s),{start:c,finish:h,phase:d}=o;i.animate({id:`${t}_${e}`,groupId:t,phase:d??"update",from:n,to:a,ease:ue,onPlay:()=>{if(c){for(const t of r)t.setProperties(c);for(const t of l)for(const e of t.nodes())e.setProperties(c)}},onUpdate(t){for(const e of r)e.setProperties(t);for(const e of l)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of r)t.setProperties({...a,...h});for(const t of l){for(const e of t.nodes())e.setProperties({...a,...h});t.cleanup()}}})}function ke(t,e,i,s){const n=i(t,e);return s.added.has(n)?"added":s.removed.has(n)?"removed":"updated"}var we=class{ticks(t,e,i){}niceDomain(t,e=this.domain){return e}tickFormatter(t){}datumFormatter(t){}get bandwidth(){}get step(){}get inset(){}},Ce=class t extends we{constructor(t=[],e=[]){super(),this.domain=t,this.range=e,this.defaultClamp=!1}static is(e){return e instanceof t}normalizeDomains(...t){let e,i,s=1/0,n=-1/0;for(const a of t)for(const t of a){const a=t.valueOf();a<s&&(s=a,e=t),a>n&&(n=a,i=t)}if(null!=e&&null!=i){return{domain:[e,i],animatable:!0}}return{domain:[],animatable:!1}}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){const{domain:e}=this,i=this.getPixelRange();if(0===e.length)return i;const s=Math.abs(e[1].valueOf()-e[0].valueOf())/t+1,n=Math.floor(i),a=Math.min(s,n);return i/Math.max(1,a)}convert(t,e=this.defaultClamp){const{domain:i}=this;if(!i||i.length<2)return NaN;const s=Number(this.transform(i[0])),n=Number(this.transform(i[1])),a=Number(this.transform(t)),{range:o}=this,[r,l]=o;if(e){const[t,e]=St([s,n]);if(a<t)return r;if(a>e)return l}return s===n?(r+l)/2:a===s?r:a===n?l:r+(a-s)/(n-s)*(l-r)}invert(t,e){const i=this.domain.map((t=>this.transform(t))),[s,n]=i,{range:a}=this,[o,r]=a;let l;return l=o===r?this.toDomain((Number(s)+Number(n))/2):this.toDomain(Number(s)+(t-o)/(r-o)*(Number(n)-Number(s))),this.transformInvert(l)}getPixelRange(){const[t,e]=this.range;return Math.abs(e-t)}};Ce.defaultTickCount=5;var Te=Ce;i({},{TimeInterval:()=>Ee,day:()=>Ke,friday:()=>ei,hour:()=>Ze,millisecond:()=>Re,minute:()=>_e,monday:()=>Qe,month:()=>si,saturday:()=>ii,second:()=>We,sunday:()=>Xe,thursday:()=>ti,tuesday:()=>qe,utcDay:()=>ri,utcHour:()=>oi,utcMinute:()=>ai,utcMonth:()=>li,utcYear:()=>ci,wednesday:()=>Je,year:()=>ni});var Ee=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,{extend:i=!1,visibleRange:s=[0,1]}={}){var n;let a=!1;t.getTime()>e.getTime()&&([t,e]=[e,t],a=!0);const o=null==(n=this._rangeCallback)?void 0:n.call(this,t,e),r=this._encode(i?this.floor(t):this.ceil(t)),l=this._encode(i?this.ceil(e):this.floor(e));if(l<r)return[];const c=l-r;let h,d;a?(h=Math.ceil(r+(1-s[1])*c),d=Math.floor(r+(1-s[0])*c)):(h=Math.floor(r+s[0]*c),d=Math.ceil(r+s[1]*c));const u=[];for(let p=h;p<=d;p+=1){const t=this._decode(p);u.push(t)}return null==o||o(),u}},Oe=class extends Ee{getOffset(t,e){return Math.floor(this._encode(new Date(t)))%e}every(t,e){let i,s=0;const a=t;a!==(t=Math.max(1,Math.round(t)))&&n.warnOnce(`interval step of [${a}] rounded to [${t}].`);const{snapTo:o="start"}=e??{};if("string"==typeof o){const e=s;i=(i,n)=>{const a="start"===o?i:n;return s=this.getOffset(a,t),()=>s=e}}else"number"==typeof o?s=this.getOffset(new Date(o),t):o instanceof Date&&(s=this.getOffset(o,t));return new Ee((e=>Math.floor((this._encode(e)-s)/t)),(e=>this._decode(e*t+s)),i)}};var Re=new Oe((function(t){return t.getTime()}),(function(t){return new Date(t)})),je=1e3,Pe=6e4,ze=36e5,Be=864e5,Fe=6048e5,Ge=2592e6,Ue=31536e6,Ye=(new Date).getTimezoneOffset()*Pe;var We=new Oe((function(t){return Math.floor((t.getTime()-Ye)/je)}),(function(t){return new Date(Ye+t*je)})),Ve=(new Date).getTimezoneOffset()*Pe;var _e=new Oe((function(t){return Math.floor((t.getTime()-Ve)/Pe)}),(function(t){return new Date(Ve+t*Pe)})),He=(new Date).getTimezoneOffset()*Pe;var Ze=new Oe((function(t){return Math.floor((t.getTime()-He)/ze)}),(function(t){return new Date(He+t*ze)}));var Ke=new Oe((function(t){const e=t.getTimezoneOffset()*Pe;return Math.floor((t.getTime()-e)/Be)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}));function $e(t){const e=(7+t-4)%7;return new Oe((function(t){const i=t.getTimezoneOffset()*Pe;return Math.floor((t.getTime()-i)/Fe-e/7)}),(function(t){const i=new Date(1970,0,1);return i.setDate(i.getDate()+7*t+e),i}))}var Xe=$e(0),Qe=$e(1),qe=$e(2),Je=$e(3),ti=$e(4),ei=$e(5),ii=$e(6);var si=new Oe((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));var ni=new Oe((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));var ai=new Oe((function(t){return Math.floor(t.getTime()/Pe)}),(function(t){return new Date(t*Pe)}));var oi=new Oe((function(t){return Math.floor(t.getTime()/ze)}),(function(t){return new Date(t*ze)}));var ri=new Oe((function(t){return Math.floor(t.getTime()/Be)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));var li=new Oe((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));var ci=new Oe((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e})),hi={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function di(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+6e4*i;return Math.floor(s/864e5)}function ui(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,s=new Date(t.getFullYear(),0,i+1);return s<=t?Math.floor(di(t,s)/7)+1:0}function pi(t,e=t.getFullYear()){const i=new Date(e,0,1).getDay(),s=new Date(e,0,(4-i+7)%7-3+1);return s<=t?Math.floor(di(t,s)/7)+1:pi(t,e-1)}var gi={a:t=>hi.shortDays[t.getDay()],A:t=>hi.days[t.getDay()],b:t=>hi.shortMonths[t.getMonth()],B:t=>hi.months[t.getMonth()],c:"%x, %X",d:(t,e)=>yi(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>yi(1e3*t.getMilliseconds(),6,e??"0"),H:(t,e)=>yi(t.getHours(),2,e??"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":yi(i,2,e??"0")},j:(t,e)=>yi(di(t)+1,3,e??"0"),m:(t,e)=>yi(t.getMonth()+1,2,e??"0"),M:(t,e)=>yi(t.getMinutes(),2,e??"0"),L:(t,e)=>yi(t.getMilliseconds(),3,e??"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>yi(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>yi(ui(t,0),2,e??"0"),V:(t,e)=>yi(pi(t),2,e??"0"),w:(t,e)=>yi(t.getDay(),2,e??"0"),W:(t,e)=>yi(ui(t,1),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>yi(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>yi(t.getFullYear(),4,e??"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${yi(Math.floor(i/60),2,"0")}${yi(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},mi={_:" ",0:"0","-":""};function yi(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function fi(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const s=i>0?t.substring(0,i):t;e.push(s)}if(i<0)break;const s=t[i+1],n=mi[s];null!=n&&i++;const a=t[i+1],o=gi[a];if("function"==typeof o)e.push([o,n]);else if("string"==typeof o){const t=fi(o);e.push([t,n])}else e.push(`${n??""}${a}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map((t=>"string"==typeof t?t:t[0](i,t[1]))).join("")}}function xi(t){return t instanceof Date?t.getTime():t}function vi(t,e,i){const s=fi(bi(t,e,i));return t=>s(t)}function bi(t,e,i=0){let s=1/0;for(let c=1;c<t.length;c++)s=Math.min(s,Math.abs(t[c].valueOf()-t[c-1].valueOf()));const[n,a]=0===e.length?[0,0]:St([e[0].valueOf(),e[e.length-1].valueOf()]),o=new Date(n).getFullYear(),r=new Date(a).getFullYear()-o>0,l=isFinite(s)?function(t,e){if(t<je)return 0;if(t<Pe)return 1;if(t<ze)return 2;if(t<Be)return 3;if(t<Fe)return 4;if(t<24192e5||t<26784e5&&function(t){let e=new Date(t[0]).getMonth();for(let i=1;i<t.length;i++){const s=new Date(t[i]).getMonth();if(e===s)return!0;e=s}return!1}(e))return 5;if(t<Ue)return 6;return 7}(s,t):function(t){if(We.floor(t)<t)return 0;if(_e.floor(t)<t)return 1;if(Ze.floor(t)<t)return 2;if(Ke.floor(t)<t)return 3;if(si.floor(t)<t)return Xe.floor(t)<t?4:5;if(ni.floor(t)<t)return 6;return 7}(t[0]);return function(t,e,i){const s=xi(i[0]),n=xi(i.at(-1)),a=Math.abs(n-s),o=e||7===t,r=[["hour",216e5,12096e5,3,"%I %p"],["hour",Pe,216e5,3,"%I:%M"],["second",1e3,216e5,1,":%S"],["ms",0,216e5,0,".%L"],["am/pm",Pe,216e5,3,"%p"]," ",["day",Be,Fe,4,"%a"],["month",0===a?0:Fe,314496e5,5,"%b %d"],["month",3024e6,31536e7,6,"%B"]," ",["year",o?0:Ue,1/0,7,"%Y"]].filter((e=>{if("string"==typeof e)return!0;const[i,s,n,o]=e;return o>=t&&s<=a&&a<n})).reduce(((t,e)=>("string"==typeof e?t.result.push(e):t.used.has(e[0])||(t.result.push(e),t.used.add(e[0])),t)),{result:[],used:new Set}).result,l=r.findIndex((t=>"string"!=typeof t)),c=r.findLastIndex((t=>"string"!=typeof t));return r.slice(l,c+1).map((t=>"string"==typeof t?t:t[4])).join("").replaceAll(/\s+/g," ").trim()}(Math.max(l-i,0),r,t)}var Mi=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(t){this[i]!==t&&(this[i]=t,this.invalid=!0)},enumerable:!0,configurable:!1})};function Si(t,e,i){if(null==i||0===i[0]&&1===i[1])return t;const s=bt(0,Math.floor(i[0]*t.length),t.length),n=bt(0,Math.ceil(i[1]*t.length),t.length),a=e?t.length-n:s,o=e?t.length-s:n;return t.slice(a,o)}var Ii=class t extends we{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(e){return e instanceof t}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=bt(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this.invalid=!0,this._paddingInner=bt(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this.invalid=!0,this._paddingOuter=bt(0,t,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&n.warnOnce("Expected update to not invalidate scale"))}ticks(t,e=this.domain,i){return Si(e,!1,i)}convert(t,e){this.refresh();const i=this.getIndex(t);return null==i||i<0||i>=this.domain.length?NaN:this.ordinalRange(i)}invertNearestIndex(t){this.refresh();const{domain:e}=this;if(0===e.length)return-1;let i=0,s=e.length-1,n=1/0,a=0;for(;i<=s;){const e=(s+i)/2|0,o=this.ordinalRange(e),r=Math.abs(o-t);if(0===r)return e;r<n&&(n=r,a=e),o<t?i=e+1:s=e-1}return a}update(){const t=this.domain.length;if(0===t)return;const[e,i]=this.range;let{_paddingInner:s}=this;const{_paddingOuter:n,round:a}=this,o=i-e;let r;1===t?(s=0,r=o*(1-2*n)):r=o/Math.max(1,t-s+2*n);const l=a?Math.floor(r):r;let c=e+(o-l*(t-s))/2,h=l*(1-s);a&&(c=Math.round(c),h=Math.round(h)),this._step=l,this._inset=c,this._bandwidth=h,this._rawBandwidth=r*(1-s)}ordinalRange(t){const{_inset:e,_step:i,range:s}=this;return bt(Math.min(s[0],s[1]),e+i*t,Math.max(s[0],s[1]))}};s([Mi],Ii.prototype,"range",2),s([Mi],Ii.prototype,"round",2),s([Mi],Ii.prototype,"interval",2);var Di=Ii,Ai=class extends Di{constructor(){super(...arguments),this.type="band",this.index=void 0,this._domain=[]}set domain(t){this._domain!==t&&(this.invalid=!0,this._domain=t,this.index=void 0)}get domain(){return this._domain}normalizeDomains(...t){let e;const i=new Set;let s=!0;for(const n of t)i.has(n)||(i.add(n),null==e?e=Li(n):(s&&(s=Ni(n,e)),e=Li([...e,...n])));return e??(e=[]),{domain:e,animatable:s}}toDomain(t){}invert(t,e=!1){this.refresh();const i=e?this.bandwidth/2:0,s=this.invertNearestIndex(Math.max(0,t-i));return e||t===this.ordinalRange(s)?this.domain[s]:void 0}getIndex(t){let{index:e}=this;if(null==e){const{domain:t}=this;e=new Map;for(let i=0;i<t.length;i++)e.set(xi(t[i]),i);this.index=e}return e.get(xi(t))}};function Li(t){let e;const i=new Set;for(const s of t){const n=xi(s),a=i.size;i.add(n);i.size!==a?null==e||e.push(s):e??(e=t.slice(0,i.size))}return e??t}function Ni(t,e){let i=-1;for(const s of t){const t=e.indexOf(s);if(-1===t)i=1/0;else{if(t<=i)return!1;i=t}}return!0}var ki=class{set(t){const{className:e=this.constructor.name}=this.constructor;if("object"!=typeof t)return n.warn(`unable to set ${e} - expecting a properties object`),this;const i=new Set(Object.keys(t));for(const s of Xt(this))if(i.has(s)){const e=t[s],a=this;if(Ci(a[s]))if(a[s]instanceof wi){const t=a[s].reset(e);null!=t?a[s]=t:n.warn(`unable to set [${s}] - expecting a properties array`)}else a[s].set(e);else a[s]=e;i.delete(s)}for(const s of i)n.warn(`unable to set [${s}] in ${e} - property is unknown`);return this}isValid(t){return Xt(this).every((e=>{const{optional:i}=function(t,e){const i=e.toString();for(;$t(t);){const e=t[_t];if(Object.hasOwn(e,i))return e[i];t=Object.getPrototypeOf(t)}}(this,e),s=!0===i||void 0!==this[e];return s||n.warnOnce(`${t??""}[${e}] is required.`),s}))}toJson(){return Xt(this).reduce(((t,e)=>{const i=this[e];return t[e]=Ci(i)?i.toJson():i,t}),{})}},wi=class t extends Array{constructor(t,...e){super(e.length);const i=(s=t,Boolean(null==(a=null==(n=null==s?void 0:s.prototype)?void 0:n.constructor)?void 0:a.name)?e=>(new t).set(e):t);var s,n,a;Object.defineProperty(this,"itemFactory",{value:i,enumerable:!1,configurable:!1}),this.set(e)}set(t){if(N(t)){this.length=t.length;for(let e=0;e<t.length;e++)this[e]=this.itemFactory(t[e])}return this}reset(e){if(Array.isArray(e))return new t(this.itemFactory,...e)}toJson(){return this.map((t=>{var e;return(null==(e=null==t?void 0:t.toJson)?void 0:e.call(t))??t}))}};function Ci(t){return t instanceof ki||t instanceof wi}function Ti(t,e={}){const{optional:i=!1,property:s}=e;return Zt(((a,o,r)=>{const l={...e,target:a,property:o};if(i&&void 0===r||t(r,l))return Ci(a[o])&&!Ci(r)?(a[o].set(r),a[o]):r;const c=s??String(o).replace(/^_*/,""),h=a.constructor.className??a.constructor.name.replace(/Properties$/,""),d=A(r,50);return n.warn(`Property [${c}] of [${h}] cannot be set to [${d}]${t.message?`; expecting ${Ns(t,l)}`:""}, ignoring.`),Vt}),void 0,{optional:i})}var Ei,Oi=(...t)=>{const e=[];return Ls(((i,s)=>(e.length=0,t.every((t=>{const n=t(i,s);return n||e.push(Ns(t,s)),n})))),(()=>e.filter(Boolean).join(" AND ")))},Ri=(...t)=>Ls(((e,i)=>t.some((t=>t(e,i)))),(e=>t.map(function(t){return e=>Ns(e,t)}(e)).filter(Boolean).join(" OR "))),ji=ks(Ls(((t,e)=>Ci(t)||E(t)&&Ci(e.target[e.property])),"a properties object")),Pi=ks(Ls((t=>E(t)),"an object")),zi=Ls(k,"a boolean"),Bi=Ls(T,"a function"),Fi=Ls(R,"a string"),Gi=(Ei=Ls(P,"a number"),Object.assign(Ei,{restrict({min:t,max:e}={}){const i=["a number"],s=j(t),n=j(e);return s&&n?i.push(`between ${t} and ${e} inclusive`):s?i.push(`greater than or equal to ${t}`):n&&i.push(`less than or equal to ${e}`),Ls((i=>P(i)&&(!s||i>=t)&&(!n||i<=e)),i.join(" "))}})),Ui=Ls((t=>j(t)&&!isNaN(t)),"a real number"),Yi=Ls((t=>j(t)&&isNaN(t)),"NaN"),Wi=Gi.restrict({min:0}),Vi=Gi.restrict({min:0,max:1}),_i=Ri(Gi,Yi),Hi=function(t){return Object.assign(t,{restrict({length:t,minLength:e}={}){let i="an array";return j(e)&&e>0?i="a non-empty array":j(t)&&(i=`an array of length ${t}`),Ls((i=>N(i)&&(!j(t)||i.length===t)&&(!j(e)||i.length>=e)),i)}})}(Ls(N,"an array")),Zi=(t,e)=>Ls(((e,i)=>N(e)&&e.every((e=>t(e,i)))),(t=>{const i=Ns(Hi,t)??"";return"function"==typeof e?`${i} of ${e(t)}`:e?`${i} of ${e}`:i})),Ki=t=>P(t)||C(t),$i=t=>Ls(((e,i)=>!Ki(e)||!Ki(i.target[t])||e<i.target[t]),`to be less than ${t}`),Xi=t=>Ls(((e,i)=>!Ki(e)||!Ki(i.target[t])||e>i.target[t]),`to be greater than ${t}`),Qi=Ls(C,"Date object"),qi=Ri(Qi,Wi),Ji="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",ts=Ls((t=>R(t)&&Yt.validColorString(t)),`color String. ${Ji}`),es=ks(Ls((t=>E(t)&&"gradient"===t.type),"a color gradient object")),is=Ls(Zi(ts),`color strings. ${Ji}`),ss=Zi(zi,"boolean values"),ns=Zi(Gi,"numbers"),as=Zi(Fi,"strings"),os=Ls(Zi(Qi),"Date objects"),rs=Ls(Zi(ji),"objects"),ls=Is(["butt","round","square"],"a line cap"),cs=Is(["round","bevel","miter"],"a line join"),hs=Is(["solid","dashed","dotted"],"a line style"),ds=Ls(Zi(Wi),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),us=Is(["top","right","bottom","left"],"a position"),ps=Is(["normal","italic","oblique"],"a font style"),gs=Ri(Is(["normal","bold","bolder","lighter"],"a font weight"),Gi.restrict({min:1,max:1e3})),ms=Is(["never","always","hyphenate","on-space"],"a text wrap strategy"),ys=Is(["left","center","right"],"a text align"),fs=Is(["top","middle","bottom"],"a vertical align"),xs=Is(["ellipsis","hide"],"an overflow strategy"),vs=Is(["horizontal","vertical"],"a direction"),bs=Is(["inside","outside"],"a placement"),Ms=Ri(Is(["exact","nearest"],"interaction range"),Gi),Ss=Is(["top","bottom","left","right"]);function Is(t,e="a"){return Ls(((e,i)=>{const s=t.find((t=>{const i="string"==typeof t?t:t.value;return e===i}));if(null==s)return!1;if("string"!=typeof s&&(!0===s.deprecated||null!=s.deprecatedTo)){const t=[`Property [%s] with value '${s.value}' is deprecated.`];s.deprecatedTo&&t.push(`Use ${s.deprecatedTo} instead.`),n.warnOnce(t.join(" "),i.property)}return!0}),`${e} keyword such as ${function(t){const e=t.filter((t=>"string"==typeof t||!0!==t.undocumented)).map((t=>`'${"string"==typeof t?t:t.value}'`));if(1===e.length)return e[0];const i=e.pop();return`${e.join(", ")} or ${i}`}(t)}`)}var Ds=Ri(Oi(Gi.restrict({min:1}),$i("maxSpacing")),Yi),As=Ri(Oi(Gi.restrict({min:1}),Xi("minSpacing")),Yi);function Ls(t,e){return t.message=e,t}function Ns(t,e){return T(t.message)?t.message(e):t.message}function ks(t){return Object.assign(t,{restrict:e=>Ls((t=>t instanceof e),(i=>Ns(t,i)??`an instance of ${e.name}`))})}var ws={};function Cs(t,e){const{nodes:i,selections:s}=Se(t);for(const n of s){for(const t of n.nodes()){const i=e(t,t.datum);t.setProperties(i)}n.cleanup()}for(const n of i){const t=e(n,n.datum);n.setProperties(t)}}i(ws,{resetMotion:()=>Cs});var Ts=Date.now(),Es={create:(...t)=>Object.assign(((...e)=>{Es.check(...t)&&("function"==typeof e[0]&&(e=y(e[0]())),(()=>{const t=Date.now()-Ts;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);n.log(`**** ${e}s since last log message ****`)}Ts=Date.now()})(),n.log(...e))}),{check:()=>Es.check(...t),group:(e,i)=>Es.check(...t)?n.logGroup(e,i):i()}),check(...t){0===t.length&&t.push(!0);return y(at("agChartsDebug")).some((e=>t.includes(e)))}};function Os({context:t,pixelRatio:e,width:i,height:s}){t.save(),t.resetTransform(),t.clearRect(0,0,Math.ceil(i*e),Math.ceil(s*e)),t.restore()}function Rs(t){if(Es.check("canvas")){const e=t.save.bind(t),i=t.restore.bind(t);let s=0;Object.assign(t,{save(){e(),s++},restore(){if(0===s)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(0!==s)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}function js(t,e,i){return[Math.round(t*i),Math.round(e*i)]}var Ps=class{constructor(t){const{width:e,height:i,pixelRatio:s,willReadFrequently:n=!1}=t;this.width=e,this.height=i,this.pixelRatio=s;const[a,o]=js(e,i,s);this.canvas=new OffscreenCanvas(a,o),this.context=this.canvas.getContext("2d",{willReadFrequently:n}),this.context.setTransform(s,0,0,s,0,0),Rs(this.context)}drawImage(t,e=0,i=0){return t.drawImage(this.canvas,e,i)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(t,e,i){if(!(t>0&&e>0))return;const{canvas:s,context:n}=this;if(t!==this.width||e!==this.height||i!==this.pixelRatio){const[n,a]=js(t,e,i);s.width=n,s.height=a}n.setTransform(i,0,0,i,0,0),this.width=t,this.height=e,this.pixelRatio=i}clear(){Os(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},zs=t=>{const e=Yt.fromString(t),[i,s,n]=Yt.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:s,h:n,a:e.a}},Bs=1e-6,Fs=t=>t.c<Bs||t.l<Bs||t.l>1-Bs,Gs=class extends we{constructor(){super(...arguments),this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(zs)}update(){const{domain:t,range:e}=this;t.length<2&&(n.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let i=1;i<t.length;i++){if(t[i-1]>=t[i]){n.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort(((t,e)=>t-e));break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(zs)}normalizeDomains(...t){return{domain:t.flat(),animatable:!0}}toDomain(){}convert(t){this.refresh();const{domain:e,range:i,parsedRange:s}=this,n=e[0],a=e.at(-1),o=i[0],r=i[i.length-1];if(t<=n)return o;if(t>=a)return r;let l,c;if(2===e.length){const e=(t-n)/(a-n),s=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),c=(e-l*s)/s}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];c=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let s;if(i=bt(0,i,1),Fs(t))s=e.h;else if(Fs(e))s=t.h;else{const n=t.h;let a=e.h;const o=e.h-t.h;o>180?a-=360:o<-180&&(a+=360),s=n*(1-i)+a*i}const n=t.c*(1-i)+e.c*i,a=t.l*(1-i)+e.l*i,o=t.a*(1-i)+e.a*i;return Yt.fromOKLCH(a,n,s,o)})(s[l],s[l+1],c).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&n.warnOnce("Expected update to not invalidate scale"))}};s([Mi],Gs.prototype,"domain",2),s([Mi],Gs.prototype,"range",2);var Us=class{constructor(t,e=[],i){this.colorSpace=t,this.stops=e,this.bbox=i,this._cache=void 0}createGradient(t,e){const i=this.bbox??e;if(null!=this._cache&&this._cache.ctx===t&&this._cache.bbox.equals(i))return this._cache.gradient;const{stops:s,colorSpace:n}=this;if(0===s.length)return;if(1===s.length)return s[0].color;let a=this.createCanvasGradient(t,i);if(null==a)return;const o="oklch"===n;let r=s[0];a.addColorStop(r.offset,r.color);for(let l=1;l<s.length;l+=1){const t=s[l];if(o){const e=new Gs;e.domain=[r.offset,t.offset],e.range=[r.color,t.color];for(let i=r.offset+.05;i<t.offset;i+=.05)a.addColorStop(i,e.convert(i))}a.addColorStop(t.offset,t.color),r=t}return"createPattern"in a&&(a=a.createPattern()),this._cache={ctx:t,bbox:i,gradient:a},a}},Ys=2*Math.PI,Ws=Math.PI/2;function Vs(t){return t%=Ys,t+=Ys,t%=Ys}function _s(t){return t%=Ys,(t+=Ys)!==Ys&&(t%=Ys),t}function Hs(t){return(t%=Ys)<-Math.PI?t+=Ys:t>=Math.PI&&(t-=Ys),t}function Zs(t,e,i){const s=Vs(t),n=Vs(e),a=Vs(i);return n<a?n<=s&&s<=a:!(n>a)||(n<=s||s<=a)}function Ks(t){return t/180*Math.PI}function $s(t){return t/Math.PI*180}function Xs(t,e){return t=Vs(t),(e=Vs(e))-t+(t>e?Ys:0)}function Qs(t){const e=Vs(t);return e<=Ws?e/Ws:e<=Math.PI?(Math.PI-e)/Ws:e<=1.5*Math.PI?(e-Math.PI)/Ws:(Ys-e)/Ws}var qs=class extends Us{constructor(t,e,i=0,s){super(t,e,s),this.angle=i}createCanvasGradient(t,e){const{angle:i}=this,s=Vs(Ks(i+90)),n=Math.cos(s),a=Math.sin(s),o=e.width,r=e.height,l=e.x+.5*o,c=e.y+.5*r,h=Math.sqrt(r*r+o*o)/2,d=Math.atan2(r,o);let u;u=s<Math.PI/2?s:s<Math.PI?Math.PI-s:s<1.5*Math.PI?s-Math.PI:2*Math.PI-s;const p=h*Math.abs(Math.cos(u-d));return t.createLinearGradient(l+n*p,c+a*p,l-n*p,c-a*p)}},Js=class extends ki{constructor(){super(...arguments),this.color="black"}};function tn(t){return t.flatMap(((e,i)=>{var s;const{offset:n}=e,a=null==(s=t.at(i+1))?void 0:s.color;return null!=a?[e,{offset:n,color:a}]:[e]}))}function en(t,e,i,s="continuous"){var a;if(0===t.length)return function(t,e){const i="discrete"===e?1:0,s=t.map(((t,e,{length:s})=>({offset:(e+i)/(s-1+i),color:t})));return"discrete"===e?tn(s):s}(e,s);if(!function(t){let e;for(const{stop:i}of t)if(null!=i){if(null!=e&&i<e)return!1;e=i}return!0}(t))return n.warnOnce("[fills] must have the stops defined in ascending order"),[];const o=Math.min(...i),r=Math.max(...i),l="discrete"===s,c=new Float64Array(t.length);let h=0,d=-1;for(let n=0;n<t.length;n+=1){const e=t[n];if(n>=d){d=t.length-1;for(let e=n+1;e<t.length;e+=1)if(null!=t[e].stop){d=e;break}}let{stop:i}=e;if(null==i){const e=t[h].stop,s=e??o,a=l&&null==e?1:0;i=s+((t[d].stop??r)-s)*(n-h+a)/(d-h+a)}else h=n;c[n]=Math.max(0,Math.min(1,(i-o)/(r-o)))}let u,p=null==(a=t.find((t=>null!=t.color)))?void 0:a.color;const g=t.map((({color:t},i)=>{const s=c[i];return null!=t?p=t:null!=p?t=p:(null==u&&(u=new Gs,u.domain=[0,1],u.range=e),t=u.convert(s)),{offset:s,color:t}}));return"discrete"===s?tn(g):g}function sn(t){return null!==t&&E(t)&&"gradient"==t.type}function nn(t,e,i){const s=Math.round(e*t)/t;return null==i?s:0===i?0:i<1?Math.ceil(i*t)/t:Math.round((i+e)*t)/t-s}function an(t,e){return Math.floor(e*t)/t}s([Ti(Gi,{optional:!0})],Js.prototype,"stop",2),s([Ti(ts,{optional:!0})],Js.prototype,"color",2);var on=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,rn=class t extends zt{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=t.defaultStyles.fill,this.stroke=t.defaultStyles.stroke,this.strokeWidth=t.defaultStyles.strokeWidth,this.lineDash=t.defaultStyles.lineDash,this.lineDashOffset=t.defaultStyles.lineDashOffset,this.lineCap=t.defaultStyles.lineCap,this.lineJoin=t.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=t.defaultStyles.opacity,this.fillShadow=t.defaultStyles.fillShadow,this.gradientFillOptions={domain:[0,1],defaultColorRange:t.defaultStyles.defaultColorRange}}restoreOwnStyles(){const{defaultStyles:t}=this.constructor;Object.assign(this,t)}getGradient(t){let e;if(t instanceof Us)return t;if("string"==typeof t&&(null==t?void 0:t.startsWith("linear-gradient"))&&(e=on.exec(t))){const t=parseFloat(e[1]),i=[],s=e[2],n=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=n.exec(s);)i.push(a[0]);return new qs("rgb",i.map(((t,e)=>({color:t,offset:e/(i.length-1)}))),t)}return sn(t)?this.createLinearGradient(t):void 0}createLinearGradient(t){const{colorStops:e=[],direction:i}=t,s="horizontal"===i,{domain:n,defaultColorRange:a=[]}=this.gradientFillOptions,o=en(e,a,n);return new qs("oklch",o,s?0:90)}onFillChange(){this.fillGradient=this.getGradient(this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(t,e){var i,s;return nn((null==(s=null==(i=this.layerManager)?void 0:i.canvas)?void 0:s.pixelRatio)??1,t,e)}fillStroke(t,e){this.renderFill(t,e),this.renderStroke(t,e)}renderFill(t,e){if(this.fill){const{globalAlpha:i}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),this.executeFill(t,e),t.globalAlpha=i}t.shadowColor="rgba(0, 0, 0, 0)"}executeFill(t,e){e?t.fill(e):t.fill()}applyFill(t){var e;const i=this.gradientFillOptions.bbox??this.getBBox();t.fillStyle=(null==(e=this.fillGradient)?void 0:e.createGradient(t,i))??("string"==typeof this.fill?this.fill:void 0)??"black"}applyStroke(t){var e;t.strokeStyle=(null==(e=this.strokeGradient)?void 0:e.createGradient(t,this.getBBox()))??("string"==typeof this.stroke?this.stroke:void 0)??"black"}applyFillAlpha(t){t.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(t){var e;const i=(null==(e=this.layerManager)?void 0:e.canvas.pixelRatio)??1,s=this.fillShadow;(null==s?void 0:s.enabled)&&(t.shadowColor=s.color,t.shadowOffsetX=s.xOffset*i,t.shadowOffsetY=s.yOffset*i,t.shadowBlur=s.blur*i)}renderStroke(t,e){if(this.stroke&&this.strokeWidth){const{globalAlpha:i}=t;this.applyStroke(t),t.globalAlpha*=this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),null!=this.miterLimit&&(t.miterLimit=this.miterLimit),this.executeStroke(t,e),t.globalAlpha=i}}executeStroke(t,e){e?t.stroke(e):t.stroke()}containsPoint(t,e){return this.isPointInPath(t,e)}applySvgFillAttributes(t){const{fill:e,fillOpacity:i}=this;t.setAttribute("fill","string"==typeof e?e:"none"),t.setAttribute("fill-opacity",String(i))}applySvgStrokeAttributes(t){const{stroke:e,strokeOpacity:i,strokeWidth:s,lineDash:n,lineDashOffset:a}=this;if(null!=e&&(t.setAttribute("stroke","string"==typeof e?e:"none"),t.setAttribute("stroke-opacity",String(i)),t.setAttribute("stroke-width",String(s))),!0===(null==n?void 0:n.some((t=>0!==t)))){const e=n.length%2==1?[...n,...n]:n;t.setAttribute("stroke-dasharray",e.join(" ")),t.setAttribute("stroke-dashoffset",String(a))}}};rn.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0,defaultColorRange:["#5090dc","#ef5452"]},s([Ot()],rn.prototype,"fillOpacity",2),s([Ot()],rn.prototype,"strokeOpacity",2),s([Ot({changeCb:t=>t.onFillChange()})],rn.prototype,"fill",2),s([Ot({changeCb:t=>t.onStrokeChange()})],rn.prototype,"stroke",2),s([Ot()],rn.prototype,"strokeWidth",2),s([Ot()],rn.prototype,"lineDash",2),s([Ot()],rn.prototype,"lineDashOffset",2),s([Ot()],rn.prototype,"lineCap",2),s([Ot()],rn.prototype,"lineJoin",2),s([Ot()],rn.prototype,"miterLimit",2),s([Ot({convertor:t=>bt(0,t,1)})],rn.prototype,"opacity",2),s([Ot({checkDirtyOnAssignment:!0})],rn.prototype,"fillShadow",2),s([Ot({changeCb:t=>t.onFillChange()})],rn.prototype,"gradientFillOptions",2);var ln=rn,cn=[1,0,0,1,0,0],hn=class t{get e(){return[...this.elements]}constructor(t=cn){this.elements=[...t]}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return At(t[0],1)&&At(t[1],0)&&At(t[2],0)&&At(t[3],1)&&At(t[4],0)&&At(t[5],0)}AxB(t,e,i){const s=t[0]*e[0]+t[2]*e[1],n=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],r=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=i??t)[0]=s,i[1]=n,i[2]=a,i[3]=o,i[4]=r,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(e){const i=new Array(6);return e instanceof t?this.AxB(this.elements,e.elements,i):this.AxB(this.elements,[e.a,e.b,e.c,e.d,e.e,e.f],i),new t(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,new t([a,-s,-n,i,n*r-a*o,s*o-i*r])}invertSelf(){const t=this.elements;let e=t[0],i=t[1],s=t[2],n=t[3];const a=t[4],o=t[5],r=1/(e*n-i*s);return e*=r,i*=r,s*=r,n*=r,t[0]=n,t[1]=-i,t[2]=-s,t[3]=e,t[4]=s*o-n*a,t[5]=i*a-e*o,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,s=i[0],n=i[1],a=i[2],o=i[3],r=.5*t.width,l=.5*t.height,c=t.x+r,h=t.y+l,d=Math.abs(r*s)+Math.abs(l*a),u=Math.abs(r*n)+Math.abs(l*o);return e??(e=new Et(0,0,0,0)),e.x=c*s+h*a+i[4]-d,e.y=c*n+h*o+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static updateTransformMatrix(t,e,i,s,n,a,o){const r=e,l=i;let c,h;1===r&&1===l?(c=0,h=0):(c=(null==o?void 0:o.scalingCenterX)??0,h=(null==o?void 0:o.scalingCenterY)??0);const d=s,u=Math.cos(d),p=Math.sin(d);let g,m;0===d?(g=0,m=0):(g=(null==o?void 0:o.rotationCenterX)??0,m=(null==o?void 0:o.rotationCenterY)??0);const y=n,f=a,x=c*(1-r)-g,v=h*(1-l)-m;return t.setElements([u*r,p*r,-p*l,u*l,u*x-p*v+g+y,p*x+u*v+m+f]),t}};function dn(t){return pn(t.constructor)}var un=Symbol("isMatrixTransform");function pn(t){return!0===t[un]}function gn(t){var e;const i=t;if(pn(t))return t;const s=Symbol("matrix_combined_transform");class n extends i{constructor(){super(...arguments),this[e]=new hn,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}updateMatrix(t){}computeTransformMatrix(){this._dirtyTransform&&(this[s].setElements(cn),this.updateMatrix(this[s]),this._dirtyTransform=!1)}toParent(t){return this.computeTransformMatrix(),this[s].identity?t.clone():this[s].transformBBox(t)}toParentPoint(t,e){return this.computeTransformMatrix(),this[s].identity?{x:t,y:e}:this[s].transformPoint(t,e)}fromParent(t){return this.computeTransformMatrix(),this[s].identity?t.clone():this[s].inverse().transformBBox(t)}fromParentPoint(t,e){return this.computeTransformMatrix(),this[s].identity?{x:t,y:e}:this[s].inverse().transformPoint(t,e)}computeBBox(){const t=super.computeBBox();return t?this.toParent(t):t}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(t,e,i=!1){return i||({x:t,y:e}=this.fromParentPoint(t,e)),super.pickNode(t,e)}render(t){this.computeTransformMatrix();const{ctx:e}=t,i=this[s];let n=!1;i.identity||(e.save(),n=!0,i.toContext(e)),super.render(t),n&&e.restore()}toSVG(){this.computeTransformMatrix();const t=super.toSVG(),e=this[s];if(e.identity||null==t)return t;const i=ct("g");i.append(...t.elements);const[n,a,o,r,l,c]=e.e;return i.setAttribute("transform",`matrix(${n} ${a} ${o} ${r} ${l} ${c})`),{elements:[i],defs:t.defs}}}return e=s,n[un]=!0,n}function mn(t){var e;const i=t,n=Symbol("matrix_rotation");class a extends(gn(i)){constructor(){super(...arguments),this[e]=new hn,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(t){super.updateMatrix(t);const{rotation:e,rotationCenterX:i,rotationCenterY:s}=this;0!==e&&(hn.updateTransformMatrix(this[n],1,1,e,0,0,{rotationCenterX:i,rotationCenterY:s}),t.multiplySelf(this[n]))}}return e=n,s([Ot({type:"transform"})],a.prototype,"rotationCenterX",2),s([Ot({type:"transform"})],a.prototype,"rotationCenterY",2),s([Ot({type:"transform"})],a.prototype,"rotation",2),a}function yn(t){var e;const i=t,n=Symbol("matrix_scale");class a extends(gn(i)){constructor(){super(...arguments),this[e]=new hn,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(t){super.updateMatrix(t);const{scalingX:e,scalingY:i,scalingCenterX:s,scalingCenterY:a}=this;1===e&&1===i||(hn.updateTransformMatrix(this[n],e,i,0,0,0,{scalingCenterX:s,scalingCenterY:a}),t.multiplySelf(this[n]))}}return e=n,s([Ot({type:"transform"})],a.prototype,"scalingX",2),s([Ot({type:"transform"})],a.prototype,"scalingY",2),s([Ot({type:"transform"})],a.prototype,"scalingCenterX",2),s([Ot({type:"transform"})],a.prototype,"scalingCenterY",2),a}function fn(t){var e;const i=t,n=Symbol("matrix_translation");class a extends(gn(i)){constructor(){super(...arguments),this[e]=new hn,this.translationX=0,this.translationY=0}updateMatrix(t){super.updateMatrix(t);const{translationX:e,translationY:i}=this;0===e&&0===i||(hn.updateTransformMatrix(this[n],1,1,0,e,i),t.multiplySelf(this[n]))}}return e=n,s([Ot({type:"transform"})],a.prototype,"translationX",2),s([Ot({type:"transform"})],a.prototype,"translationY",2),a}var xn,vn=class{static fromCanvas(t,e){const i=[];for(const s of t.traverseUp())dn(s)&&i.unshift(s);for(const s of i)e=s.fromParent(e);return dn(t)&&(e=t.fromParent(e)),e}static toCanvas(t,e){null==e?e=t.getBBox():dn(t)&&(e=t.toParent(e));for(const i of t.traverseUp())dn(i)&&(e=i.toParent(e));return e}static fromCanvasPoint(t,e,i){const s=[];for(const n of t.traverseUp())dn(n)&&s.unshift(n);for(const n of s)({x:e,y:i}=n.fromParentPoint(e,i));return dn(t)&&({x:e,y:i}=t.fromParentPoint(e,i)),{x:e,y:i}}static toCanvasPoint(t,e,i){dn(t)&&({x:e,y:i}=t.toParentPoint(e,i));for(const s of t.traverseUp())dn(s)&&({x:e,y:i}=s.toParentPoint(e,i));return{x:e,y:i}}},bn=(t,e)=>Math.sign(t-e);function Mn(t,e){if("number"==typeof t&&"number"==typeof e)return bn(t,e);const i="number"==typeof t?[t]:t,s="number"==typeof e?[e]:e,n=Math.min(i.length,s.length);for(let a=0;a<n;a+=1){const t=bn(i[a],s[a]);if(0!==t)return t}return bn(i.length,s.length)}var Sn=class t extends zt{constructor(t){super(t),this.opacity=1,this.renderToOffscreenCanvas=!1,this.optimizeForInfrequentRedraws=!1,this.layer=void 0,this.image=void 0,this._lastWidth=NaN,this._lastHeight=NaN,this._lastDevicePixelRatio=NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=!0===(null==t?void 0:t.renderToOffscreenCanvas)}static is(e){return e instanceof t}static computeChildrenBBox(t,e=!0){return Et.merge(zt.extractBBoxes(t,e))}static compareChildren(t,e){return Mn(t.zIndex,e.zIndex)||t.serialNumber-e.serialNumber}containsPoint(t,e){return!0}computeBBox(){return t.computeChildrenBBox(this.children())}computeSafeClippingBBox(t){const e=this.computeBBox();if(!e.isFinite())return;let i=0;for(const h of this.descendants())h instanceof ln&&(i=Math.max(i,h.strokeWidth));const s=Math.max(1,i/2*4),{x:n,y:a}=vn.toCanvasPoint(this,0,0),o=an(t,n+e.x-s)-n,r=an(t,a+e.y-s)-a,l=Math.ceil(e.x+e.width-o+s),c=Math.ceil(e.y+e.height-r+s);return new Et(o,r,l,c)}prepareSharedCanvas(t,e,i){return null==xn||xn.pixelRatio!==i?xn=new Ps({width:t,height:e,pixelRatio:i}):xn.resize(t,e,i),xn}isDirty(t){const{width:e,height:i,devicePixelRatio:s}=t,{dirty:n,dirtyZIndex:a,layer:o}=this,r=null!=o&&(this._lastWidth!==e||this._lastHeight!==i),l=this._lastDevicePixelRatio!==s;if(this._lastWidth=e,this._lastHeight=i,this._lastDevicePixelRatio=s,n||a||r||l)return!0;for(const c of this.children())if(c.dirty)return!0;return!1}preRender(t){var e,i;const s=super.preRender(t,0);return s.groups+=1,s.nonGroups-=1,this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&s.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=null==(e=this._layerManager)?void 0:e.addLayer({name:this.name})):null!=this.layer&&(null==(i=this._layerManager)||i.removeLayer(this.layer),this.layer=void 0),s}render(e){const{layer:i,renderToOffscreenCanvas:s}=this,n={...e};if(!s)return this.renderInContext(n),void super.render(n);const{ctx:a,stats:o,devicePixelRatio:r}=e;let{image:l}=this;if(this.isDirty(e)){null==l||l.bitmap.close(),l=void 0;const e=i?void 0:this.computeSafeClippingBBox(r),s=(t,...e)=>{var i;const s=t.context;n.ctx=s,t.clear(),s.save(),s.setTransform(...e),s.globalAlpha=1,this.renderInContext(n),s.restore(),null==(i=s.verifyDepthZero)||i.call(s)};if(i)s(i,a.getTransform());else if(e){const{x:t,y:i,width:n,height:a}=e,o=this.prepareSharedCanvas(n,a,r);s(o,r,0,0,r,-t*r,-i*r),l={bitmap:o.transferToImageBitmap(),x:t,y:i,width:n,height:a}}else this.dirtyZIndex&&this.sortChildren(t.compareChildren);this.image=l,o&&o.layersRendered++}else this.skipRender(n),o&&o.layersSkipped++;const{globalAlpha:c}=a;if(a.globalAlpha=c*this.opacity,i)a.save(),a.resetTransform(),i.drawImage(a),a.restore();else if(l){const{bitmap:t,x:e,y:i,width:s,height:n}=l;a.drawImage(t,0,0,s*r,n*r,e,i,s,n)}a.globalAlpha=c,super.render(n)}skipRender(t){const{stats:e}=t;for(const i of this.children())i.markClean(),e&&(e.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,e.opsSkipped+=this.childNodeCounts.complexity)}applyClip(t,e){const{x:i,y:s,width:n,height:a}=e;t.beginPath(),t.rect(i,s,n,a),t.clip()}renderInContext(e){const{ctx:i,stats:s}=e;this.dirtyZIndex&&this.sortChildren(t.compareChildren),i.save(),i.globalAlpha*=this.opacity,null!=this.clipRect&&(this.applyClip(i,this.clipRect),e.clipBBox=vn.toCanvas(this,this.clipRect));for(const t of this.children())t.visible?(i.save(),t.render(e),i.restore()):(t.markClean(),s&&(s.nodesSkipped+=t.childNodeCounts.nonGroups+t.childNodeCounts.groups,s.opsSkipped+=t.childNodeCounts.complexity));i.restore()}setClipRect(t){this.clipRect=t?vn.fromCanvas(this,t):void 0}setClipRectCanvasSpace(t){this.clipRect=t}_setLayerManager(t){var e;this.layer&&(null==(e=this._layerManager)||e.removeLayer(this.layer),this.layer=void 0),super._setLayerManager(t)}getVisibility(){for(const t of this.traverseUp(!0))if(!t.visible)return!1;return!0}toSVG(){if(!this.visible)return;const t=[],e=[];for(const i of this.children()){const s=i.toSVG();null!=s&&(e.push(...s.elements),null!=s.defs&&t.push(...s.defs))}return{elements:e,defs:t}}};Sn.className="Group",s([Ot({convertor:t=>bt(0,t,1)})],Sn.prototype,"opacity",2);var In=Sn,Dn=class extends(yn(In)){},An=class extends(mn(In)){},Ln=class extends(fn(In)){},Nn=class extends(mn(fn(In))){};var kn=class{constructor(t=5){this.maxCacheSize=t,this.store=new Map}get(t){if(!this.store.has(t))return;const e=this.store.get(t);return this.store.delete(t),this.store.set(t,e),e}has(t){return this.store.has(t)}set(t,e){if(this.store.set(t,e),this.store.size>this.maxCacheSize){const t=this.store.keys();let e=this.store.size-this.maxCacheSize;for(;e>0;){const i=t.next();i.done||this.store.delete(i.value),e--}}return e}clear(){this.store.clear()}},wn=class{static measureText(t,e){return this.getMeasurer(e).measureText(t)}static measureLines(t,e){return this.getMeasurer(e).measureLines(t)}static getMeasurer(t){const e="string"==typeof t.font?t.font:Tn.toFontString(t.font),i=`${e}-${t.textAlign??"start"}-${t.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(e,t,i)}static createFontMeasurer(t,e,i){const s=function(t=0,e=0){return new OffscreenCanvas(t,e).getContext("2d")}();s.font=t,s.textAlign=e.textAlign??"start",s.textBaseline=e.textBaseline??"alphabetic";const n=new Cn(s,e);return this.instanceMap.set(i,n),n}};wn.instanceMap=new kn(10);var Cn=class{constructor(t,e){this.ctx=t,this.measureMap=new kn(100),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline),t.font="string"==typeof e.font?e.font:Tn.toFontString(e.font),this.textMeasurer=new En((t=>this.cachedCtxMeasureText(t)),e.textBaseline??"alphabetic")}textWidth(t,e){return this.textMeasurer.textWidth(t,e)}measureText(t){return this.textMeasurer.measureText(t)}measureLines(t){return this.textMeasurer.measureLines(t)}cachedCtxMeasureText(t){if(!this.measureMap.has(t)){const e=this.ctx.measureText(t);this.measureMap.set(t,{actualBoundingBoxAscent:e.actualBoundingBoxAscent,emHeightAscent:e.emHeightAscent,emHeightDescent:e.emHeightDescent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,actualBoundingBoxLeft:e.actualBoundingBoxLeft,actualBoundingBoxRight:e.actualBoundingBoxRight,alphabeticBaseline:e.alphabeticBaseline,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent,hangingBaseline:e.hangingBaseline,ideographicBaseline:e.ideographicBaseline,width:e.width})}return this.measureMap.get(t)}},Tn=class{static toFontString({fontSize:t=10,fontStyle:e,fontWeight:i,fontFamily:s,lineHeight:n}){let a="";return e&&(a+=`${e} `),i&&(a+=`${i} `),a+=`${t}px`,n&&(a+=`/${n}px`),a+=` ${s}`,a.trim()}static getLineHeight(t){return Math.ceil(t*this.defaultLineHeight)}static getVerticalModifier(t){switch(t){case"hanging":case"top":return 0;case"middle":return.5;default:return 1}}};Tn.EllipsisChar="…",Tn.defaultLineHeight=1.15,Tn.lineSplitter=/\r?\n/g;var En=class{constructor(t,e="alphabetic"){this.measureTextFn=t,this.textBaseline=e,this.charMap=new Map}getMetrics(t){const e=this.measureTextFn(t);return e.fontBoundingBoxAscent??(e.fontBoundingBoxAscent=e.emHeightAscent),e.fontBoundingBoxDescent??(e.fontBoundingBoxDescent=e.emHeightDescent),{width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}}getMultilineMetrics(t){let e=0,i=0,s=0,n=0,a=0;const o=Tn.getVerticalModifier(this.textBaseline),r=[];let l=0;const c=t.length;for(const h of t){const t=this.measureTextFn(h);t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),e<t.width&&(e=t.width),n<t.actualBoundingBoxLeft&&(n=t.actualBoundingBoxLeft),0===l?(i+=t.actualBoundingBoxAscent,s+=t.actualBoundingBoxAscent):a+=t.fontBoundingBoxAscent,l===c-1?i+=t.actualBoundingBoxDescent:a+=t.fontBoundingBoxDescent,r.push({text:h,width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,offsetTop:t.actualBoundingBoxAscent,offsetLeft:t.actualBoundingBoxLeft}),l++}return i+=a,s+=a*o,{width:e,height:i,offsetTop:s,offsetLeft:n,lineMetrics:r}}textWidth(t,e){if(e){let e=0;for(let i=0;i<t.length;i++)e+=this.textWidth(t.charAt(i));return e}return t.length>1?this.measureTextFn(t).width:this.charMap.get(t)??this.charWidth(t)}measureText(t){return this.getMetrics(t)}measureLines(t){const e="string"==typeof t?t.split(Tn.lineSplitter):t;return this.getMultilineMetrics(e)}charWidth(t){const{width:e}=this.measureTextFn(t);return this.charMap.set(t,e),e}},On=class t extends ln{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=t.defaultStyles.textAlign,this.textBaseline=t.defaultStyles.textBaseline}onTextChange(){var t;this.lines=(null==(t=this.text)?void 0:t.split("\n").map((t=>t.trim())))??[]}static computeBBox(t,e,i,s){const{offsetTop:n,offsetLeft:a,width:o,height:r}=wn.measureLines(t,s);return new Et(e-a,i-n,o,r)}computeBBox(){const{x:e,y:i,lines:s,textBaseline:n,textAlign:a}=this;return t.computeBBox(s,e,i,{font:this,textBaseline:n,textAlign:a})}isPointInPath(t,e){const i=this.getBBox();return!!i&&i.containsPoint(t,e)}render(t){const{ctx:e,stats:i}=t;if(!this.lines.length||!this.layerManager)return i&&(i.nodesSkipped+=1),super.render(t);const{fill:s,stroke:n,strokeWidth:a}=this,{pixelRatio:o}=this.layerManager.canvas;if(e.font=Tn.toFontString(this),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,s){this.applyFill(e),e.globalAlpha*=this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*o,e.shadowOffsetY=t.yOffset*o,e.shadowBlur=t.blur*o),this.renderLines(((t,i,s)=>e.fillText(t,i,s)))}if(n&&a){this.applyStroke(e),e.lineWidth=a,e.globalAlpha*=this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:s,lineJoin:n}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),s&&(e.lineCap=s),n&&(e.lineJoin=n),this.renderLines(((t,i,s)=>e.strokeText(t,i,s)))}super.render(t)}renderLines(t){const{lines:e,x:i,y:s}=this,n=this.lineHeight??Tn.getLineHeight(this.fontSize);let a=(n-n*e.length)*Tn.getVerticalModifier(this.textBaseline);for(const o of e)t(o,i,s+a),a+=n}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}toSVG(){var t;if(!this.visible||!this.text)return;const e=ct("text");return this.applySvgFillAttributes(e),e.setAttribute("font-family",(null==(t=this.fontFamily)?void 0:t.split(",")[0])??""),e.setAttribute("font-size",String(this.fontSize)),e.setAttribute("font-style",this.fontStyle??""),e.setAttribute("font-weight",String(this.fontWeight??"")),e.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),e.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),e.setAttribute("x",String(this.x)),e.setAttribute("y",String(this.y)),e.textContent=this.text??"",{elements:[e]}}};On.className="Text",On.defaultStyles={...ln.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"},s([Ot()],On.prototype,"x",2),s([Ot()],On.prototype,"y",2),s([Ot({changeCb:t=>t.onTextChange()})],On.prototype,"text",2),s([Ot()],On.prototype,"fontStyle",2),s([Ot()],On.prototype,"fontWeight",2),s([Ot()],On.prototype,"fontSize",2),s([Ot()],On.prototype,"fontFamily",2),s([Ot()],On.prototype,"textAlign",2),s([Ot()],On.prototype,"textBaseline",2),s([Ot()],On.prototype,"lineHeight",2);var Rn=On,jn=class extends(mn(Rn)){},Pn=class extends(mn(fn(Rn))){},zn="color: green",Bn="color: grey";function Fn(){return Kt((()=>{}))}function Gn(t,e){const i=Xt(e);if(0===i.length)return;const s=Qt(t);for(const n of i)n in s&&(e[n]=s[n])}var Un=class{transitionRoot(t,e){this.parent?this.parent.transitionRoot(t,e):this.transition(t,e)}},Yn=class t extends Un{constructor(t,e,i){super(),this.defaultState=t,this.states=e,this.enterEach=i,this.debug=Es.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,zn)}transition(e,i){var s,n,a,o;if(!this.transitionChild(e,i)||this.state===t.child||this.state===t.parent)return;const r=this.state,l=this.states[this.state];let c=l[e];const h=`%c${this.constructor.name} | ${this.state} -> ${e} ->`;if(Array.isArray(c))c=c.find((t=>{if(!t.guard)return!0;const e=t.guard(i);return e||this.debug(`${h} (guarded)`,t.target,Bn),e}));else if("object"==typeof c&&!(c instanceof t)&&c.guard&&!c.guard(i))return void this.debug(`${h} (guarded)`,c.target,Bn);if(!c)return void this.debug(`${h} ${this.state}`,Bn);const d=this.getDestinationState(c),u=d===this.state?void 0:l.onExit;this.debug(`${h} ${d}`,zn),this.state=d,"function"==typeof c?c(i):"object"!=typeof c||c instanceof t||null==(s=c.action)||s.call(c,i),null==u||u(),null==(n=this.enterEach)||n.call(this,r,d),d!==r&&d!==t.child&&d!==t.parent&&(null==(o=(a=this.states[d]).onEnter)||o.call(a,r,i))}transitionAsync(t,e){setTimeout((()=>{this.transition(t,e)}),0)}is(e){return this.state===t.child&&this.childState?this.childState.is(e):this.state===e}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(e,i){var s,n;return this.state!==t.child||!this.childState||(Gn(this,this.childState),this.childState.transition(e,i),!this.childState.is(t.parent)||(this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.defaultState}`,zn),this.state=this.defaultState,null==(n=(s=this.states[this.state]).onEnter)||n.call(s),this.childState.resetHierarchy(),!1))}getDestinationState(e){let i=this.state;return"string"==typeof e?i=e:e instanceof t?(this.childState=e,this.childState.parent=this,i=t.child):"object"==typeof e&&(e.target instanceof t?(this.childState=e.target,this.childState.parent=this,i=t.child):null!=e.target&&(i=e.target)),i}};Yn.child="__child",Yn.parent="__parent";var Wn=Yn,Vn=class extends Un{constructor(...t){super(),this.stateMachines=t;for(const e of t)e.parent=this}transition(t,e){for(const i of this.stateMachines)Gn(this,i),i.transition(t,e)}transitionAsync(t,e){for(const i of this.stateMachines)Gn(this,i),i.transitionAsync(t,e)}};function _n(t,e){const i=N(t)?t:t.split(".");if(1===i.length){const[t]=i;return Zt(((e,i,s)=>e[t]=s),(e=>e[t]),e)}return Zt(((t,e,s)=>oe(t,i,s)),(t=>ne(t,i)),e)}function Hn(t){return Zt(((e,i,s)=>e[t]=s))}function Zn(t,e){return Zt(((i,s,n)=>i[t][e??s]=n))}function Kn(t){const{newValue:e,oldValue:i,changeValue:s}=t;return Zt(((t,n,a,o)=>(a!==o&&(void 0!==o&&(null==i||i.call(t,o)),void 0!==a&&(null==e||e.call(t,a)),null==s||s.call(t,a,o)),a)))}function $n(t){return Kt(t)}var Xn=class{static wrapText(t,e){return this.wrapLines(t,e).join("\n")}static wrapLines(t,e){const i=this.textWrap(t,e);return"hide"===e.overflow&&i.some((t=>t.endsWith(Tn.EllipsisChar)))?[]:i}static appendEllipsis(t){return t.replace(/[.,]{1,5}$/,"")+Tn.EllipsisChar}static truncateLine(t,e,i,s){const n=e.textWidth(Tn.EllipsisChar);let a=0,o=0;for(;o<t.length;o++){const s=e.textWidth(t.charAt(o));if(a+s>i)break;a+=s}if(t.length===o&&(!s||a+n<=i))return s?t+Tn.EllipsisChar:t;for(t=t.slice(0,o).trimEnd();t.length&&e.textWidth(t)+n>i;)t=t.slice(0,-1).trimEnd();return t+Tn.EllipsisChar}static textWrap(t,e){const i=t.split(Tn.lineSplitter),s=wn.getMeasurer(e);if("never"===e.textWrap)return i.map((t=>this.truncateLine(t.trimEnd(),s,e.maxWidth)));const n=[],a="hyphenate"===e.textWrap,o=null==e.textWrap||"on-space"===e.textWrap;for(const r of i){let t=r.trimEnd();if(""===t){n.push(t);continue}let i=0,l=0,c=0;for(;i<t.length;){const r=t.charAt(i);if(l+=s.textWidth(r)," "===r&&(c=i),l>e.maxWidth){if(0===i)break;const r=s.textWidth(t.slice(0,i+1));if(r<=e.maxWidth){l=r,i++;continue}if(c){const a=this.getWordAt(t,c+1),r=s.textWidth(a);if(r<=e.maxWidth){n.push(t.slice(0,c).trimEnd()),t=t.slice(c).trimStart(),i=0,l=0,c=0;continue}o&&r>e.maxWidth&&n.push(t.slice(0,c).trimEnd(),this.truncateLine(t.slice(c).trimStart(),s,e.maxWidth,!0))}else o&&n.push(this.truncateLine(t,s,e.maxWidth,!0));if(o){t="";break}const h=a?"-":"";let d=t.slice(0,i).trim();for(;d.length&&s.textWidth(d+h)>e.maxWidth;)d=d.slice(0,-1).trimEnd();if(n.push(d+h),!d.length){t="";break}t=t.slice(d.length).trimStart(),i=-1,l=0,c=0}i++}t&&n.push(t)}return this.avoidOrphans(n,s,e),this.clipLines(n,s,e)}static getWordAt(t,e){const i=t.indexOf(" ",e);return-1===i?t.slice(e):t.slice(e,i)}static clipLines(t,e,i){if(!i.maxHeight)return t;const{height:s,lineMetrics:n}=e.measureLines(t);if(s<=i.maxHeight)return t;for(let a=0,o=0;a<n.length;a++){const{lineHeight:s}=n[a];if(o+=s,o>i.maxHeight){if("hide"===i.overflow)return[];const s=t.slice(0,a||1),n=s.pop();return s.concat(this.truncateLine(n,e,i.maxWidth,!0))}}return t}static avoidOrphans(t,e,i){if(!1===i.avoidOrphans||t.length<2)return;const{length:s}=t,n=t[s-1],a=t[s-2];if(a.length<n.length)return;const o=a.lastIndexOf(" ");if(-1===o||o===a.indexOf(" ")||n.includes(" "))return;const r=a.slice(o+1);e.textWidth(n+r)<=i.maxWidth&&(t[s-2]=a.slice(0,o),t[s-1]=r+" "+n)}},Qn=class extends ki{constructor(){super(...arguments),this.id=pt(this),this.node=new jn({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(t,e){return t.layoutManager.addListener("layout:complete",(()=>this.updateA11yText(t,e)))}computeTextWrap(t,e){const{text:i,padding:s,wrapping:n}=this,a=Math.min(this.maxWidth??1/0,t)-2*s,o=this.maxHeight??e-2*s;if(!isFinite(a)&&!isFinite(o))return void(this.node.text=i);const r=Xn.wrapText(i??"",{maxWidth:a,maxHeight:o,font:this,textWrap:n});this.node.text=r,this.truncated=r.includes(Tn.EllipsisChar)}updateA11yText(t,e){var i;const{proxyInteractionService:s}=t;if(this.enabled&&this.text){const i=vn.toCanvas(this.node);if(i){const{id:n}=this;this.proxyText??(this.proxyText=s.createProxyElement({type:"text",domManagerId:n,where:e})),this.proxyText.textContent=this.text,this.proxyText.setBounds(i),this.proxyText.addListener("mousemove",(e=>this.handleMouseMove(t,e))),this.proxyText.addListener("mouseleave",(e=>this.handleMouseLeave(t,e)))}}else null==(i=this.proxyText)||i.destroy(),this.proxyText=void 0}handleMouseMove(t,e){if(null!=e&&this.enabled&&this.node.visible&&this.truncated){const{x:i,y:s}=vn.toCanvas(this.node),n=e.sourceEvent.offsetX+i,a=e.sourceEvent.offsetY+s,o={type:"pointermove",canvasX:n,canvasY:a};t.tooltipManager.updateTooltip(this.id,{canvasX:n,canvasY:a,lastPointerEvent:o,showArrow:!1},{type:"structured",title:this.text})}}handleMouseLeave(t,e){t.tooltipManager.removeTooltip(this.id)}};Qn.SMALL_PADDING=10,Qn.LARGE_PADDING=20,s([Ti(zi),Zn("node","visible")],Qn.prototype,"enabled",2),s([Ti(Fi,{optional:!0}),Zn("node")],Qn.prototype,"text",2),s([Ti(ys,{optional:!0}),Zn("node")],Qn.prototype,"textAlign",2),s([Ti(ps,{optional:!0}),Zn("node")],Qn.prototype,"fontStyle",2),s([Ti(gs,{optional:!0}),Zn("node")],Qn.prototype,"fontWeight",2),s([Ti(Wi),Zn("node")],Qn.prototype,"fontSize",2),s([Ti(Fi),Zn("node")],Qn.prototype,"fontFamily",2),s([Ti(ts,{optional:!0}),Zn("node","fill")],Qn.prototype,"color",2),s([Ti(Wi,{optional:!0})],Qn.prototype,"spacing",2),s([Ti(Wi,{optional:!0})],Qn.prototype,"maxWidth",2),s([Ti(Wi,{optional:!0})],Qn.prototype,"maxHeight",2),s([Ti(ms)],Qn.prototype,"wrapping",2),s([Ti(Wi)],Qn.prototype,"padding",2),s([Ti(Fi)],Qn.prototype,"layoutStyle",2);var qn=(t=>(t.X="x",t.Y="y",t))(qn||{}),Jn=class{constructor(){this.moduleMap=new Map}*modules(){for(const t of this.moduleMap.values())yield t.moduleInstance}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){var e;const i=R(t)?t:t.optionsKey;null==(e=this.moduleMap.get(i))||e.moduleInstance.destroy(),this.moduleMap.delete(i)}getModule(t){var e;return null==(e=this.moduleMap.get(R(t)?t:t.optionsKey))?void 0:e.moduleInstance}isEnabled(t){return this.moduleMap.has(R(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),((e,i)=>t(e.moduleInstance,i)))}destroy(){var t;for(const e of this.moduleMap.keys())null==(t=this.moduleMap.get(e))||t.moduleInstance.destroy();this.moduleMap.clear()}};function ta(t,e){return t.valueOf()-e.valueOf()}function ea(t){const e=t.slice().sort(ta);return null==ia(e)?function(t){let e=NaN;const i=[];for(const s of t){const t=s.valueOf();e!==t&&i.push(s),e=t}return i}(e):e}function ia(t){if(0===t.length)return 1;const e=Number(t[t.length-1])>Number(t[0])?1:-1;let i=-1/0*e;for(const s of t){const t=s.valueOf();if(Math.sign(t-i)!==e)return;i=t}return e}function sa(t){let e,i;const s=oa.exec(t);s&&([,e,t,i]=s);const n=aa.exec(t);if(!n)throw new Error(`The number formatter is invalid: ${t}`);const[,a,o,r,l,c,h,d,u,p,g]=n;return{fill:a,align:o,sign:r,symbol:l,zero:c,width:parseInt(h),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:e,suffix:i}}function na(t){const e="string"==typeof t?sa(t):t,{fill:i,align:s,sign:n="-",symbol:a,zero:o,width:r,comma:l,type:c,prefix:h="",suffix:d="",precision:u}=e;let{trim:p}=e;const g=null==u||isNaN(u);let m,y;if(c)if(c in la&&c in ra)m=g?ra[c]:la[c];else if(c in la)m=la[c];else{if(!(c in ra))throw new Error(`The number formatter type is invalid: ${c}`);m=ra[c]}else m=la.g,p=!0;return y=null==u||g?c?6:12:u,t=>{let e=m(t,y);return p&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),n=t.substring(i);for(let a=s.length-3;a>0;a-=3)s.splice(a,0,e);return`${s.join("")}${n}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const s="+"===i?"+":"";return`${t>=0?s:ua}${e}`}(t,e,n),a&&"#"!==a&&(e=`${a}${e}`),"#"===a&&"x"===c&&(e=`0x${e}`),"s"===c&&(e=`${e}${function(t){return da[ga(t)]}(t)}`),"%"!==c&&"p"!==c||(e=`${e}%`),null==r||isNaN(r)||(e=function(t,e,i=" ",s=">"){let n=t;if(">"!==s&&s){if("<"===s)n=n.padEnd(e,i);else if("^"===s){const t=Math.max(0,e-n.length),s=Math.ceil(t/2),a=Math.floor(t/2);n=n.padStart(s+n.length,i),n=n.padEnd(a+n.length,i)}}else n=n.padStart(e,i);return n}(e,r,i??o,s)),e=`${h}${e}${d}`,e}}var aa=/^(?:(.)?([<>=^]))?([+\-( ])?([$€£¥₣₹#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,oa=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,ra={b:t=>pa(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>pa(t).toString(8),x:t=>pa(t).toString(16),X:t=>ra.x(t).toUpperCase(),n:t=>ra.d(t),"%":t=>`${pa(100*t).toFixed(0)}`},la={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>la.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>la.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>la.g(t,e).toUpperCase(),n:(t,e)=>la.g(t,e),p:(t,e)=>la.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i))-(e-1);if(s<=0)return i.toFixed(-s);const n=10**s;return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=ga(t);return la.r(t/10**i,e)},"%":(t,e)=>la.f(100*t,e)},ca=-24,ha=24,da={[ca]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"µ",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[ha]:"Y"},ua="−";function pa(t){return Math.floor(Math.abs(t))}function ga(t){return bt(ca,t?3*Math.floor(Math.log10(Math.abs(t))/3):0,ha)}var ma=(t,e,i)=>({duration:e*i,timeInterval:t,step:i}),ya=[ma(We,je,1),ma(We,je,5),ma(We,je,15),ma(We,je,30),ma(_e,Pe,1),ma(_e,Pe,5),ma(_e,Pe,15),ma(_e,Pe,30),ma(Ze,ze,1),ma(Ze,ze,3),ma(Ze,ze,6),ma(Ze,ze,12),ma(Ke,Be,1),ma(Ke,Be,2),ma(Xe,Fe,1),ma(Xe,Fe,2),ma(Xe,Fe,3),ma(si,Ge,1),ma(si,Ge,2),ma(si,Ge,3),ma(si,Ge,4),ma(si,Ge,6),ma(ni,Ue,1)],fa=[1,2,5,10];function xa(t,e){return Math.abs(Math.round(t)-t)<e}function va(t,e,i,s,n,a){if(i<2)return[t,e];const o=Ma(t,e,i,s,n);if(!Number.isFinite(o))return[];if(xa(t/o,1e-12)||(t=Math.ceil(t/o)*o),xa(e/o,1e-12)||(e=Math.floor(e/o)*o),null!=a&&0!==a[0]&&1!==a[1]){const i=e-t,s=t+i*a[0],n=e-i*(1-a[1]);return Da(s-s%o,n+n%o,o)}return Da(t,e,o)}function ba(t,e,i,s,n,a){const o=Math.abs(e-t)/Math.max(i,1);let r=0;for(const u of ya){if(o<=u.duration)break;r++}if(0===r){const a=Math.max(Ma(t,e,i,s,n),1);return Re.every(a)}if(r===ya.length){const a=Ma(t/Ue,e/Ue,i,s,n);return ni.every(a)}const l=ya[r-1],c=ya[r],{timeInterval:h,step:d}=o-l.duration<c.duration-o?l:c;return h.every(d)}function Ma(t,e,i,s=0,n=1/0){if(t===e)return bt(1,s,n);if(i<1)return NaN;const a=Math.abs(e-t),o=10**Math.floor(Math.log10(a/i));let r=NaN,l=1/0,c=!1;for(const h of fa){const t=Math.ceil(a/(h*o)),e=t>=s&&t<=n;if(c&&!e)continue;const d=Math.abs(t-i);(l>d||c!==e)&&(c||(c=e),l=d,r=h)}return r*o}function Sa(t){for(let e=t.length-1;e>=0;e-=1)if("0"!==t[e])return e+1;return 0}function Ia(t,e){const i=sa(e??",f");(null==i.precision||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...t.map((t=>{if(!Number.isFinite(t))return 0;const[e,s]=t.toExponential((i.type?6:12)-1).split(/[.e]/g);return("1"!==e&&"-1"!==e?1:0)+Sa(s)+1}))):"f%".includes(i.type)&&(i.precision=Math.max(...t.map((t=>{if(!Number.isFinite(t)||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),s=i.type?6:12,n=Sa(t.toExponential(s-1).split(/[.e]/g)[1]);return Math.max(0,n-e)})))));const s=na(i);return t=>s(Number(t))}function Da(t,e,i){if(!Number.isFinite(i)||i<=0)return[];const s=10**Ct(i),n=Math.min(t,e),a=Math.max(t,e),o=[];for(let r=0;;r+=1){const t=Math.round((n+i*r)*s)/s;if(t>a)break;o.push(t)}return o}function Aa(t,e){return t>=e&&(n.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}function La(t,e,i,s,n,a){a=Math.max(a,t/(n+1)),isNaN(i)&&(i=a),isNaN(s)&&(s=t),i>s&&(i===a?i=s:s=i);const o=Math.max(1,Math.floor(t/(e*i))),r=Math.min(o,Math.ceil(t/(e*s)));return{minTickCount:r,maxTickCount:o,tickCount:bt(r,Math.floor(n/e),o)}}var Na=class extends Te{constructor(){super([],[0,1]),this.type="time"}toDomain(t){return new Date(t)}convert(t,e){return t instanceof Date||(t=new Date(t)),super.convert(t,e)}invert(t){return new Date(super.invert(t))}niceDomain(t,e=this.domain){if(e.length<2)return[];let[i,s]=e;for(let n=0;n<4;n++){const[e,n]=Ca(i,s,t);if(xi(i)===xi(e)&&xi(s)===xi(n))break;i=e,s=n}return[i,s]}ticks(t,e=this.domain,i=[0,1]){const{nice:s,interval:n,tickCount:a=Te.defaultTickCount,minTickCount:o,maxTickCount:r}=t;if(e.length<2)return[];const l=e.map(xi),c=l[0],h=l[l.length-1];if(null!=n){return wa({start:c,stop:h,interval:n,availableRange:this.getPixelRange(),visibleRange:i})??ka({start:c,stop:h,tickCount:a,minTickCount:o,maxTickCount:r,visibleRange:i})}return s&&2===a?e:s&&1===a?e.slice(0,1):ka({start:c,stop:h,tickCount:a,minTickCount:o,maxTickCount:r,visibleRange:i})}_tickFormatter({domain:t,ticks:e,specifier:i},s){return null!=i?fi(i):vi(e,t,s)}tickFormatter(t){return this._tickFormatter(t)}datumFormatter(t){return this._tickFormatter(t,1)}};function ka({start:t,stop:e,tickCount:i,minTickCount:s,maxTickCount:n,visibleRange:a}){const o=ba(t,e,i,s,n);return o?o.range(new Date(t),new Date(e),{visibleRange:a}):[]}function wa({start:t,stop:e,interval:i,availableRange:s,visibleRange:n}){if(!i)return[];if(i instanceof Ee){const a=i.range(new Date(t),new Date(e),{visibleRange:n});if(Aa(a.length,s))return;return a}const a=Math.abs(i);if(Aa(Math.abs(e-t)/a,s))return;const o=ya.findLast((t=>a%t.duration==0));if(o){return o.timeInterval.every(a/(o.duration/o.step)).range(new Date(t),new Date(e),{visibleRange:n})}let r=new Date(Math.min(t,e));const l=new Date(Math.max(t,e)),c=[];for(;r<=l;)c.push(r),r=new Date(r),r.setMilliseconds(r.getMilliseconds()+a);return c}function Ca(t,e,i){const{interval:s}=i,n=Math.min(xi(t),xi(e)),a=Math.max(xi(t),xi(e)),o=t>e;let r;if(s instanceof Ee)r=s;else{r=ba(n,a,"number"==typeof s?(a-n)/Math.max(s,1):i.tickCount??Te.defaultTickCount,i.minTickCount,i.maxTickCount)}if(r){const t=r.range(new Date(n),new Date(a),{extend:!0}),e=o?[...t].reverse():t;return[e[0],e.at(-1)]}return[t,e]}var Ta=class t extends Di{constructor(){super(...arguments),this.type="ordinal-time",this._domain=[],this.isReversed=!1}static is(e){return e instanceof t}set domain(t){t!==this._domain&&(this.invalid=!0,this._domain=t,this.isReversed=t.length>0&&t[0]>t[t.length-1],this.sortedTimestamps=void 0,this.precomputedSteps=void 0)}get domain(){return this._domain}toDomain(t){return new Date(t)}normalizeDomains(...t){const e=t.filter((t=>t.length>0)).map((t=>{let e=ia(t);return null==e&&(t=ea(t.slice()),e=1),{domain:t,sortOrder:e}}));if(0===e.length)return{domain:[],animatable:!1};if(1===e.length)return{domain:e[0].domain,animatable:!0};let i=e.flatMap((t=>t.domain));return i=ea(i),e.every((t=>-1===t.sortOrder))&&i.reverse(),{domain:i,animatable:!0}}ticks({interval:t,maxTickCount:e},i=this.domain,s=[0,1]){if(!i.length)return[];this.refresh();const{isReversed:n}=this;if(null==t)return function(t,e,i,s){const n=[],a=Math.ceil(t.length/e),o=Math.floor(a/2),r=Math.floor(s[0]*t.length),l=Math.ceil(s[1]*t.length);for(let c=r;c<l;c+=1){const e=i?t.length-1-c:c;(a<=0||(e+o)%a==0)&&n.push(t[c])}i&&n.reverse();return n}(i,e,n,s);const[a,o]=[i[0].valueOf(),i.at(-1).valueOf()],r=Math.min(a,o),l=Math.max(a,o),[c,h]=this.range,d=wa({start:r,stop:l,interval:t,availableRange:Math.abs(h-c),visibleRange:s})??[];let u=-1;return d.filter((t=>{const e=this.findInterval(t.valueOf()),i=e===u;return u=e,!i}))}getSortedTimestamps(){let{sortedTimestamps:t}=this;return null==t&&(t=this.domain.map(xi),this.isReversed&&t.reverse(),this.sortedTimestamps=t),t}getPrecomputedSteps(){const{domain:t}=this;let{precomputedSteps:e}=this;const i=t.length<1e4?t.length:Math.ceil(t.length/16);if(null!=e||i<=1)return e;const s=this.getSortedTimestamps();e=new Int32Array(i);const n=s[0],a=s[s.length-1]-n,o=s.length-1;for(let r=0;r<e.length;r+=1)e[r]=this.findIntervalInRange(n+r/i*a,0,o);this.precomputedSteps=e}findIntervalInRange(t,e,i){const s=this.getSortedTimestamps();for(;e<=i;){const n=(e+i)/2|0;if(s[n]===t)return n;s[n]<t?e=n+1:i=n-1}return e}findInterval(t){const e=this.getPrecomputedSteps();let i,s;if(null==e)i=0,s=this.domain.length-1;else{const n=this.getSortedTimestamps(),a=n[0],o=n[n.length-1],r=Math.min((t-a)/(o-a)*e.length|0,e.length-1|0);i=e[r],s=r<e.length-2?e[r+1]:n.length-1}return this.findIntervalInRange(t,i,s)}tickFormatter({domain:t,ticks:e,specifier:i}){return null!=i?fi(i):vi(e,t)}datumFormatter(t){return this.tickFormatter(t)}invert(t,e=!1){this.refresh();const{domain:i}=this;if(e){const e=this.invertNearestIndex(t-this.bandwidth/2);return null!=e?i[e]:void 0}const s=function(t,e,i){if(t>e)return;let s;for(;e>=t;){const n=Math.floor((e+t)/2),a=i(n);null==a?t=n+1:(s=a,e=n-1)}return s}(0,i.length-1,(e=>this.ordinalRange(e)>=t?i[e]:void 0));return s??i[0]}getIndex(t){const e=this.getSortedTimestamps(),i=Number(t);if(i<e[0])return;let s=this.findInterval(i);return this.isReversed&&(s=this.domain.length-s-1),s}};var Ea=class t{constructor(t,e,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Es.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(zt,e)?()=>new e:e}static select(e,i,s=!0){return new t(e,i,s)}static selectAll(t,e){const i=[],s=t=>{e(t)&&i.push(t);for(const e of t.children())s(e)};return s(t),i}static selectByClass(e,...i){return t.selectAll(e,(t=>i.some((e=>t instanceof e))))}static selectByTag(e,i){return t.selectAll(e,(t=>t.tag===i))}createNode(t,e,i){const s=this.nodeFactory(t);return s.datum=t,null==e||e(s),null==i?this._nodes.push(s):this._nodes.splice(i,0,s),this.parentNode.appendChild(s),s}update(t,e,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",t),i){const s=new Map(t.map(((t,e)=>[i(t),[t,e]])));for(const[t,e]of this._nodesMap.entries())if(s.has(e)){const[i]=s.get(e);t.datum=i,this.garbageBin.delete(t),s.delete(e)}else this.garbageBin.add(t);for(const[t,[i,n]]of s.entries())this._nodesMap.set(this.createNode(i,e,n),t)}else{const i=Math.max(t.length,this.data.length);for(let s=0;s<i;s++)s>=t.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(t[s],e):(this._nodes[s].datum=t[s],this.garbageBin.delete(this._nodes[s]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),t.destroy(),!1)))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}each(t){for(const e of this._nodes.entries())t(e[1],e[1].datum,e[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t];yield{node:e,datum:e.datum,index:t}}}select(e){return t.selectAll(this.parentNode,e)}selectByClass(e){return t.selectByClass(this.parentNode,e)}selectByTag(e){return t.selectByTag(this.parentNode,e)}nodes(){return this._nodes}at(t){return this._nodes.at(t)}get length(){return this._nodes.length}};function Oa(t,e,i,s){const n=t-i,a=e-s;return n*n+a*a}function Ra(t,e,i,s,n,a,o){if(i===n&&s===a)return Math.min(o,Oa(t,e,i,s));const r=n-i,l=a-s,c=Math.max(0,Math.min(1,((t-i)*r+(e-s)*l)/(r*r+l*l))),h=i+c*r,d=s+c*l;return Math.min(o,Oa(t,e,h,d))}function ja(t,e,i,s,n,a,o,r,l){r&&([o,a]=[a,o]);if(!Zs(Math.atan2(e-s,t-i),a,o)){const o=i+Math.cos(a)*n,r=s+Math.sin(a)*n,c=i+Math.cos(a)*n,h=s+Math.sin(a)*n;return Math.min(l,Oa(t,e,o,r),Oa(t,e,c,h))}const c=n-Math.sqrt(Oa(t,e,i,s));return Math.min(l,c*c)}var Pa=class extends ln{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new Et(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(t,e)}distanceSquared(t,e){const{x1:i,y1:s,x2:n,y2:a}=this;return Ra(t,e,i,s,n,a,1/0)}render(t){var e;const{ctx:i,devicePixelRatio:s}=t;let{x1:n,y1:a,x2:o,y2:r}=this;if(n===o){const{strokeWidth:t}=this,e=Math.round(n*s)/s+Math.trunc(t*s)%2/(2*s);n=e,o=e}else if(a===r){const{strokeWidth:t}=this,e=Math.round(a*s)/s+Math.trunc(t*s)%2/(2*s);a=e,r=e}i.beginPath(),i.moveTo(n,a),i.lineTo(o,r),this.fillStroke(i),null==(e=this.fillShadow)||e.markClean(),super.render(t)}toSVG(){if(!this.visible)return;const t=ct("line");return t.setAttribute("x1",String(this.x1)),t.setAttribute("y1",String(this.y1)),t.setAttribute("x2",String(this.x2)),t.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(t),{elements:[t]}}};Pa.className="Line",Pa.defaultStyles={...ln.defaultStyles,fill:void 0,strokeWidth:1},s([Ot()],Pa.prototype,"x1",2),s([Ot()],Pa.prototype,"y1",2),s([Ot()],Pa.prototype,"x2",2),s([Ot()],Pa.prototype,"y2",2);var za=new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}),Ba=new Intl.NumberFormat("en-US",{style:"percent"});function Fa(t,e=2){return"number"==typeof t?Ua(t,e):String(t??"")}function Ga(t){return Ba.format(t)}function Ua(t,e){return 2===e?za.format(t):new Intl.NumberFormat("en-US",{maximumFractionDigits:e,useGrouping:!1}).format(t)}var Ya=class extends ln{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Et(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i}=t;let{x1:s,y1:n,x2:a,y2:o}=this;s=this.align(s),n=this.align(n),a=this.align(a),o=this.align(o);const{fill:r,opacity:l,isRange:c}=this;if(!(!c||!r)){const{fillOpacity:t}=this;this.applyFill(i),i.globalAlpha=l*t,i.beginPath(),i.moveTo(s,n),i.lineTo(a,n),i.lineTo(a,o),i.lineTo(s,o),i.closePath(),i.fill()}const{stroke:h,strokeWidth:d,startLine:u,endLine:p}=this;if(!(!u&&!p||!h||!d)){const{strokeOpacity:t,lineDash:e,lineDashOffset:r,lineCap:c,lineJoin:h}=this;this.applyStroke(i),i.globalAlpha=l*t,i.lineWidth=d,e&&i.setLineDash(e),r&&(i.lineDashOffset=r),c&&(i.lineCap=c),h&&(i.lineJoin=h),i.beginPath(),u&&(i.moveTo(s,n),i.lineTo(a,n)),p&&(i.moveTo(a,o),i.lineTo(s,o)),i.stroke()}null==(e=this.fillShadow)||e.markClean(),super.render(t)}};Ya.className="Range",Ya.defaultStyles={...ln.defaultStyles,strokeWidth:1},s([Ot()],Ya.prototype,"x1",2),s([Ot()],Ya.prototype,"y1",2),s([Ot()],Ya.prototype,"x2",2),s([Ot()],Ya.prototype,"y2",2),s([Ot()],Ya.prototype,"startLine",2),s([Ot()],Ya.prototype,"endLine",2),s([Ot()],Ya.prototype,"isRange",2);var Wa=class extends ki{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Tn.toFontString(this)}};function Va(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,s=t.rotation?Vs(Ks(t.rotation)):0,n=!s&&e>=0&&e<=Math.PI?-1:1,a=!s&&i>=0&&i<=Math.PI?-1:1;let o=0;return t.parallel?o=n*Math.PI/2:-1===a&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:n,regularFlipFlag:a}}function _a(t,e,i,s,n){const a=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(s*(a||o?-1:1)==-1)return"end"}else if(s*n==-1)return"end";return"start"}function Ha(t){return P(t)||C(t)||function(t){return null!=t&&Object.hasOwn(t,"valueOf")&&P(t.valueOf())}(t)}function Za(t,e){return null!=t&&(!e||Ha(t))}function Ka(t){return function(t){return null!=t&&Object.hasOwn(t,"toString")&&R(t.toString())}(t)&&Object.hasOwn(t,"id")?t.id:t}s([Ti(zi)],Wa.prototype,"enabled",2),s([Ti(ts,{optional:!0})],Wa.prototype,"color",2),s([Ti(ps,{optional:!0})],Wa.prototype,"fontStyle",2),s([Ti(gs,{optional:!0})],Wa.prototype,"fontWeight",2),s([Ti(Wi)],Wa.prototype,"fontSize",2),s([Ti(Fi)],Wa.prototype,"fontFamily",2),s([Ti(Bi,{optional:!0})],Wa.prototype,"formatter",2);var $a=t=>"value"===t?Ls(((t,e)=>"line"===e.target.type),(t=>"range"===t.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'")):Ls(((t,e)=>"range"===e.target.type),(t=>"line"===t.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'")),Xa=(t,e,i,s,a)=>{const o="line"===t&&void 0!==e,r="range"===t&&void 0!==i;if(!o&&!r)return!0;const[l,c]=i??[e,void 0],h=Te.is(s)||Ta.is(s),d=Za(l,h)&&!isNaN(s.convert(l)),u=Za(c,h)&&!isNaN(s.convert(c));if(o&&d||r&&d&&u)return(null==a?void 0:a())??!0;const p=["Expecting crossLine"];return r?(d||p.push(`range start ${A(l)}`),u||p.push(`${d?"":"and "}range end ${A(c)}`)):p.push(`value ${A(l)}`),p.push("to match the axis scale domain."),n.warnOnce(p.join(" ")),!1},Qa={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},qa={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function Ja({yDirection:t,padding:e=0,position:i="top",bbox:s}){const n=t?Qa:qa,{xTranslationDirection:a,yTranslationDirection:o}=n[i];return{xTranslation:a*(e+s.width/2),yTranslation:o*(e+s.height/2)}}function to({yDirection:t,bbox:e,padding:i=0,position:s="top"}){const n={};return s.startsWith("inside")||("top"!==s||t?"bottom"!==s||t?"left"===s&&t?n.left=i+e.width:"right"===s&&t&&(n.right=i+e.width):n.bottom=i+e.height:n.top=i+e.height),n}var eo=({direction:t,xEnd:e,yStart:i,yEnd:s})=>"y"===t?{x:e/2,y:i}:{x:e,y:isNaN(s)?i:(i+s)/2},io=({direction:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>"y"===t?{x:e,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},so=({direction:t,xEnd:e,yStart:i,yEnd:s})=>"y"===t?{x:e,y:isNaN(s)?i:(i+s)/2}:{x:e/2,y:isNaN(s)?i:s},no=({direction:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>"y"===t?{x:i/2,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:(s+n)/2},ao=({direction:t,xStart:e,xEnd:i,yStart:s})=>"y"===t?{x:e/2,y:s}:{x:i,y:s},oo=({direction:t,xStart:e,yStart:i,yEnd:s})=>"y"===t?{x:e,y:isNaN(s)?i:s}:{x:e,y:i},ro=({direction:t,xEnd:e,yStart:i,yEnd:s})=>"y"===t?{x:e,y:i}:{x:e,y:isNaN(s)?i:s},lo=({direction:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>"y"===t?{x:i,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:n},co={top:{c:eo},bottom:{c:no},left:{c:io},right:{c:so},"top-left":{c:ao},"top-right":{c:ro},"bottom-left":{c:oo},"bottom-right":{c:lo},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},"inside-left":{c:io},"inside-right":{c:so},"inside-top":{c:eo},"inside-bottom":{c:no},"inside-top-left":{c:ao},"inside-bottom-left":{c:oo},"inside-top-right":{c:ro},"inside-bottom-right":{c:lo}},ho=Is(["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"],"crossLine label position"),uo=class extends ki{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};s([Ti(zi,{optional:!0})],uo.prototype,"enabled",2),s([Ti(Fi,{optional:!0})],uo.prototype,"text",2),s([Ti(ps,{optional:!0})],uo.prototype,"fontStyle",2),s([Ti(gs,{optional:!0})],uo.prototype,"fontWeight",2),s([Ti(Wi)],uo.prototype,"fontSize",2),s([Ti(Fi)],uo.prototype,"fontFamily",2),s([Ti(Gi)],uo.prototype,"padding",2),s([Ti(ts,{optional:!0})],uo.prototype,"color",2),s([Ti(ho,{optional:!0})],uo.prototype,"position",2),s([Ti(Gi,{optional:!0})],uo.prototype,"rotation",2),s([Ti(zi,{optional:!0})],uo.prototype,"parallel",2);var po=class extends ki{constructor(){super(),this.id=pt(this),this.label=new uo,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.rangeGroup=new In({name:this.id}),this.lineGroup=new In({name:this.id}),this.labelGroup=new In({name:this.id}),this.crossLineRange=new Ya,this.crossLineLabel=new Pn,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(t){const{enabled:e,data:i,type:s,value:n,range:a,scale:o}=this;if(!(s&&o&&e&&t&&Xa(s,n,a,o)&&0!==i.length))return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updateNodes();const{isRange:r}=this;r!==this._isRange&&(r?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=r}calculateLayout(t,e){if(!t)return;const{scale:i,gridLength:s,sideFlag:n,direction:a,label:{position:o="top"},clippedRange:r,strokeWidth:l=0}=this;if(this.data=[],!i)return;const c=i.bandwidth??0,h=i.step??0,d=(e?-1:1)*(i instanceof Di?(h-c)/2:0),[u,p]=[0,n*s];let[g,m]=this.getRange();const y=void 0===m&&Ta.is(i)?c/2+d:0;let[f,x]=[Number(i.convert(g,!0))-d+y,i.convert(m,!0)+c+d];f=Mt(f,r),x=Mt(x,r),[g,m]=[Number(i.convert(g))+y,i.convert(m)+c];const v=(g===f||m===x||f!==x)&&Math.abs(x-f)>0;if(v&&f>x&&([f,x]=[x,f],[g,m]=[m,g]),g-d>=f&&(g-=d),m+d<=x&&(m+=d),this.isRange=v,this.startLine=l>0&&g>=f&&g<=f+d,this.endLine=l>0&&m>=x-c-d&&m<=x,!v&&!this.startLine&&!this.endLine)return;if(this.data=[f,x],!this.label.enabled)return;const{c:b=eo}=co[o]??{},{x:M,y:S}=b({direction:a,xStart:u,xEnd:p,yStart:f,yEnd:x});this.labelPoint={x:M,y:S}}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){const{crossLineRange:t,sideFlag:e,gridLength:i,data:s,startLine:n,endLine:a,isRange:o,fill:r,fillOpacity:l,stroke:c,strokeWidth:h,lineDash:d}=this;t.x1=0,t.x2=e*i,t.y1=s[0],t.y2=s[1],t.startLine=n,t.endLine=a,t.isRange=o,t.fill=r,t.fillOpacity=l??1,t.stroke=c,t.strokeWidth=h??1,t.strokeOpacity=this.strokeOpacity??1,t.lineDash=d}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:s,rotation:n,position:a="top",padding:o=0},direction:r,parallelFlipRotation:l,regularFlipRotation:c}=this;if(void 0===e||void 0===i)return;const{defaultRotation:h,configuredRotation:d}=Va({rotation:n,parallel:s,regularFlipRotation:c,parallelFlipRotation:l});t.rotation=h+d,t.textBaseline="middle",t.textAlign="center";const u=t.getBBox();if(!u)return;const p="y"===r,{xTranslation:g,yTranslation:m}=Ja({yDirection:p,padding:o,position:a,bbox:u});t.translationX=e+g,t.translationY=i+m}getRange(){const{value:t,range:e,scale:i}=this,s=Te.is(i)||Ta.is(i),n=(null==e?void 0:e[0])??t;let a=null==e?void 0:e[1];return s||void 0!==a||(a=n),s&&n===a&&(a=void 0),[n,a]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new Pn;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:s}={},label:{parallel:n,rotation:a,position:o="top",padding:r=0},direction:l,parallelFlipRotation:c,regularFlipRotation:h}=this;if(void 0===i||void 0===s)return;const{configuredRotation:d}=Va({rotation:a,parallel:n,regularFlipRotation:h,parallelFlipRotation:c});e.rotation=d,e.textBaseline="middle",e.textAlign="center";const u=e.getBBox();if(!u)return;const p="y"===l,{xTranslation:g,yTranslation:m}=Ja({yDirection:p,padding:r,position:o,bbox:u});return e.x=i+g,e.y=s+m,e.getBBox()}calculatePadding(t){const{isRange:e,startLine:i,endLine:s,direction:n,label:{padding:a=0,position:o="top"}}=this;if(!e&&!i&&!s)return;const r=this.computeLabelBBox();if(null==(null==r?void 0:r.x)||null==(null==r?void 0:r.y))return;const l=to({yDirection:"y"===n,padding:a,position:o,bbox:r});t.left=Math.max(t.left??0,l.left??0),t.right=Math.max(t.right??0,l.right??0),t.top=Math.max(t.top??0,l.top??0),t.bottom=Math.max(t.bottom??0,l.bottom??0)}};po.className="CrossLine",s([Ti(zi,{optional:!0})],po.prototype,"enabled",2),s([Ti(Is(["range","line"],"a crossLine type"),{optional:!0})],po.prototype,"type",2),s([Ti(Oi($a("range"),Hi.restrict({length:2})),{optional:!0})],po.prototype,"range",2),s([Ti($a("value"),{optional:!0})],po.prototype,"value",2),s([Ti(ts,{optional:!0})],po.prototype,"fill",2),s([Ti(Vi,{optional:!0})],po.prototype,"fillOpacity",2),s([Ti(ts,{optional:!0})],po.prototype,"stroke",2),s([Ti(Gi,{optional:!0})],po.prototype,"strokeWidth",2),s([Ti(Vi,{optional:!0})],po.prototype,"strokeOpacity",2),s([Ti(ds,{optional:!0})],po.prototype,"lineDash",2),s([Ti(ji)],po.prototype,"label",2);var go=(t=>(t[t.CHART_BACKGROUND=0]="CHART_BACKGROUND",t[t.AXIS_GRID=1]="AXIS_GRID",t[t.AXIS=2]="AXIS",t[t.ZOOM_SELECTION=3]="ZOOM_SELECTION",t[t.SERIES_CROSSLINE_RANGE=4]="SERIES_CROSSLINE_RANGE",t[t.SERIES_LAYER=5]="SERIES_LAYER",t[t.AXIS_FOREGROUND=6]="AXIS_FOREGROUND",t[t.SERIES_CROSSHAIR=7]="SERIES_CROSSHAIR",t[t.SERIES_CROSSLINE_LINE=8]="SERIES_CROSSLINE_LINE",t[t.SERIES_ANNOTATION=9]="SERIES_ANNOTATION",t[t.CHART_ANNOTATION=10]="CHART_ANNOTATION",t[t.CHART_ANNOTATION_FOCUSED=11]="CHART_ANNOTATION_FOCUSED",t[t.STATUS_BAR=12]="STATUS_BAR",t[t.SERIES_LABEL=13]="SERIES_LABEL",t[t.LEGEND=14]="LEGEND",t[t.NAVIGATOR=15]="NAVIGATOR",t[t.FOREGROUND=16]="FOREGROUND",t))(go||{}),mo=["stroke","lineDash"],yo=Zi((t=>E(t)&&Object.keys(t).every((t=>mo.includes(t)))),"objects with gridline style properties such as 'stroke' or 'lineDash'"),fo=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};function xo(t,e=[void 0]){return Zt(((i,s,n)=>e.includes(n)?T(t)?t(n):t:n))}s([Ti(zi)],fo.prototype,"enabled",2),s([Ti(Wi)],fo.prototype,"width",2),s([Ti(yo)],fo.prototype,"style",2);var vo=Ls((t=>P(t)&&t>0||t instanceof Ee),"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),bo=class extends ki{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};s([Ti(vo,{optional:!0})],bo.prototype,"step",2),s([Ti(Hi,{optional:!0})],bo.prototype,"values",2),s([Ti(Ds),xo(NaN)],bo.prototype,"minSpacing",2),s([Ti(As),xo(NaN)],bo.prototype,"maxSpacing",2);var Mo=class extends ki{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.spacing=5,this.minSpacing=NaN,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};s([Ti(zi)],Mo.prototype,"enabled",2),s([Ti(ps,{optional:!0})],Mo.prototype,"fontStyle",2),s([Ti(gs,{optional:!0})],Mo.prototype,"fontWeight",2),s([Ti(Gi.restrict({min:1}))],Mo.prototype,"fontSize",2),s([Ti(Fi)],Mo.prototype,"fontFamily",2),s([Ti(Wi)],Mo.prototype,"spacing",2),s([Ti(_i),xo(NaN)],Mo.prototype,"minSpacing",2),s([Ti(ts,{optional:!0})],Mo.prototype,"color",2),s([Ti(Gi,{optional:!0})],Mo.prototype,"rotation",2),s([Ti(zi)],Mo.prototype,"avoidCollisions",2),s([Ti(zi)],Mo.prototype,"mirrored",2),s([Ti(zi)],Mo.prototype,"parallel",2),s([Ti(Bi,{optional:!0})],Mo.prototype,"itemStyler",2),s([Ti(Bi,{optional:!0})],Mo.prototype,"formatter",2),s([Ti(Fi,{optional:!0})],Mo.prototype,"format",2);var So=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};s([Ti(zi)],So.prototype,"enabled",2),s([Ti(Wi)],So.prototype,"width",2),s([Ti(ts,{optional:!0})],So.prototype,"stroke",2);var Io=class extends ki{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};s([Ti(zi)],Io.prototype,"enabled",2),s([Ti(Wi)],Io.prototype,"width",2),s([Ti(Wi)],Io.prototype,"size",2),s([Ti(ts,{optional:!0})],Io.prototype,"stroke",2);var Do=class extends ki{constructor(){super(...arguments),this.caption=new Qn,this.enabled=!1,this.spacing=Qn.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};s([Ti(zi)],Do.prototype,"enabled",2),s([Ti(Fi,{optional:!0})],Do.prototype,"text",2),s([Ti(Wi,{optional:!0})],Do.prototype,"spacing",2),s([Ti(ps,{optional:!0})],Do.prototype,"fontStyle",2),s([Ti(gs,{optional:!0})],Do.prototype,"fontWeight",2),s([Ti(Wi)],Do.prototype,"fontSize",2),s([Ti(Fi)],Do.prototype,"fontFamily",2),s([Ti(ts,{optional:!0})],Do.prototype,"color",2),s([Ti(ms)],Do.prototype,"wrapping",2),s([Ti(Bi,{optional:!0})],Do.prototype,"formatter",2);var Ao=(t=>(t[t.TickAndDomain=0]="TickAndDomain",t[t.TicksOnly=1]="TicksOnly",t[t.Off=2]="Off",t))(Ao||{});function Lo(t){const[e,i]=St(t.range),s=Math.floor(e),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}var No=2*Math.PI,ko=No/2;function wo(t){const e=(e,i)=>{const[s=t.min,n=t.max]=St(i??[]);return e<s||e>n};return{tick:{fromFn(t,i,s){let n=t.y1+t.translationY,a=t.opacity;return("added"===s||e(t.datum.translationY,t.datum.range))&&(n=i.translationY,a=0),{y:0,translationY:n,opacity:a,phase:Ae[s]}},toFn(t,e,i){const s=e.translationY;let n=1;return"removed"===i&&(n=0),{y:0,translationY:s,opacity:n,finish:{y:s,translationY:0}}},applyFn(t,i){t.setProperties(i),t.visible=!e(t.y)}},line:{fromFn:(t,e)=>({...t.previousDatum??e,phase:Ae.updated}),toFn:(t,e)=>({...e})},label:{fromFn(t,i,s){const n=t.previousDatum??i,a=n.x,o=n.y,r=n.rotationCenterX;let l=Math.round(t.translationY),c=n.rotation,h=t.opacity;return"removed"===s||e(n.y,n.range)?c=i.rotation:("added"===s||e(t.datum.y,t.datum.range))&&(l=Math.round(n.translationY),h=0,c=i.rotation),{x:a,y:o,rotationCenterX:r,translationY:l,rotation:c,opacity:h,phase:Ae[s]}},toFn(t,e,i){var s;const n=e.x,a=e.y,o=e.rotationCenterX,r=Math.round(e.translationY);let l=0,c=1;var h,d;return"added"===i?l=e.rotation:"removed"===i?(c=0,l=e.rotation):(h=(null==(s=t.previousDatum)?void 0:s.rotation)??e.rotation,d=e.rotation,l=Math.abs(d-h)<ko?d:h>d?d+No:d-No),{x:n,y:a,rotationCenterX:o,translationY:r,rotation:l,opacity:c,finish:{rotation:e.rotation}}}},group:{fromFn(t,e){const{rotation:i,translationX:s,translationY:n}=t;return{rotation:i,translationX:s,translationY:n,phase:Ae.updated}},toFn(t,e){const{rotation:i,translationX:s,translationY:n}=e;return{rotation:i,translationX:s,translationY:n}}}}}function Co(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function To(t){const{visible:e,min:i,max:s}=t;return(t,n)=>{const a=n.translationY;return{y:a,translationY:0,opacity:1,visible:e&&a>=i&&a<=s}}}function Eo(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function Oo(){return(t,e)=>({...e})}var Ro=class extends(fn(Pa)){},jo=(t=>(t[t.TickLines=0]="TickLines",t[t.AxisLine=1]="AxisLine",t[t.TickLabels=2]="TickLabels",t))(jo||{}),Po=class t{constructor(e,i){this.moduleCtx=e,this.scale=i,this.id=pt(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new bo,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Nn({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new In({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new In({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new In({name:`${this.id}-Labels`,zIndex:9}),this.gridGroup=new Nn({name:`${this.id}-Axis-grid`,zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new In({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new Nn({name:`${this.id}-CrossLines-Range`,zIndex:4}),this.crossLineLineGroup=new Nn({name:`${this.id}-CrossLines-Line`,zIndex:8}),this.crossLineLabelGroup=new Nn({name:`${this.id}-CrossLines-Label`,zIndex:13}),this.tickLineGroupSelection=Ea.select(this.tickLineGroup,Ro,!1),this.tickLabelGroupSelection=Ea.select(this.tickLabelGroup,Pn,!1),this.gridLineGroupSelection=Ea.select(this.gridLineGroup,Ro,!1),this._crossLines=[],this.line=new So,this.tick=new Io,this.gridLine=new fo,this.label=this.createLabel(),this.defaultTickMinSpacing=t.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.labelFormatter=void 0,this.datumFormatter=void 0,this.scaleFormatterParams=void 0,this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new Do,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.animatable=!0,this._scaleNiceDomainInputDomain=void 0,this._scaleNiceDomainRangeExtent=NaN,this.moduleMap=new Jn,this.range=this.scale.range.slice(),this.crossLines.forEach((t=>this.initCrossLine(t)))}get type(){return this.constructor.type??""}get labelNodes(){return this.tickLabelGroupSelection.nodes()}set crossLines(t){const{CrossLineConstructor:e}=this.constructor;this._crossLines.forEach((t=>this.detachCrossLine(t))),this._crossLines=t.map((t=>{const i=new e;return i.set(t),i})),this._crossLines.forEach((t=>{this.attachCrossLine(t),this.initCrossLine(t)}))}get crossLines(){return this._crossLines}resetAnimation(t){}attachCrossLine(t){this.crossLineRangeGroup.appendChild(t.rangeGroup),this.crossLineLineGroup.appendChild(t.lineGroup),this.crossLineLabelGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineRangeGroup.removeChild(t.rangeGroup),this.crossLineLineGroup.removeChild(t.lineGroup),this.crossLineLabelGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach((t=>t()))}updateScale(){const{range:t,visibleRange:e,scale:i}=this,s=(t[1]-t[0])/(e[1]-e[0]),n=s*e[0],a=t[0]-n;i.range=[a,a+s],this.crossLines.forEach((e=>{e.clippedRange=[t[0],t[1]]}))}setCrossLinesVisible(t){this.crossLineRangeGroup.visible=t,this.crossLineLineGroup.visible=t,this.crossLineLabelGroup.visible=t}attachAxis(t){t.gridNode.appendChild(this.gridGroup),t.axisNode.appendChild(this.axisGroup),t.labelNode.appendChild(this.labelGroup),t.crossLineRangeNode.appendChild(this.crossLineRangeGroup),t.crossLineLineNode.appendChild(this.crossLineLineGroup),t.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(t){t.gridNode.removeChild(this.gridGroup),t.axisNode.removeChild(this.axisGroup),t.labelNode.removeChild(this.labelGroup),t.crossLineRangeNode.removeChild(this.crossLineRangeGroup),t.crossLineLineNode.removeChild(this.crossLineLineGroup),t.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(t){this.labelGroup.append(t)}inRange(t,e=0){const[i,s]=St(this.range);return t>=i-e&&t<=s+e}defaultDatumFormatter(t,e){return Fa(t,e+1)}defaultLabelFormatter(t,e){return Fa(t,e)}onGridLengthChange(t,e){e^t&&this.onGridVisibilityChange(),this.crossLines.forEach((t=>this.initCrossLine(t)))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new Mo}update(){this.updatePosition(),this.updateSelections(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled,this.updateLabels(),this.updateGridLines(),this.updateTickLines(),this.updateCrossLines()}getAxisLineCoordinates(){const[t,e]=St(this.range);return{x:0,y1:t,y2:e}}getLabelStyles(t,e){const{label:i}=this,s={color:i.color,spacing:i.spacing,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight};let n;i.itemStyler&&(n=this.moduleCtx.callbackCache.call(i.itemStyler,{...t,...s}));const{color:a,fontFamily:o,fontSize:r,fontStyle:l,fontWeight:c,spacing:h}=te(n,e,s);return{fill:a,fontFamily:o,fontSize:r,fontStyle:l,fontWeight:c,spacing:h}}getTickSize(){return this.tick.enabled?this.tick.size:0}setTitleProps(t,e){const{title:i}=this;if(!i.enabled)return t.enabled=!1,void(t.node.visible=!1);t.enabled=!0,t.color=i.color,t.fontFamily=i.fontFamily,t.fontSize=i.fontSize,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.wrapping=i.wrapping;const s=t.node,n=(i.spacing??0)+e.spacing,a=this.label.getSideFlag(),o=Vs(this.rotation),r=-1===a&&o>Math.PI&&o<2*Math.PI?-1:1,l=r*a*Math.PI/2,c=1===r?"bottom":"top",{range:h}=this,d=Math.floor(r*a*(h[0]+h[1])/2),u=-1===a?Math.floor(r*-n):Math.floor(-n),{callbackCache:p}=this.moduleCtx,{formatter:g=t=>t.defaultValue}=i,m=p.call(g,this.getTitleFormatterParams());t.text=m,s.setProperties({visible:!0,text:m,textBaseline:c,x:d,y:u,rotation:l})}processData(){const{includeInvisibleDomains:t,boundSeries:e,direction:i}=this,s=(t?e:e.filter((t=>t.isEnabled()))).map((t=>t.getDomain(i)));this.setDomains(...s)}setDomains(...t){let e,i;t.length>0?({domain:e,animatable:i}=this.scale.normalizeDomains(...t)):(e=[],i=!0),this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=i}calculateLayout(t){const{scale:e,label:i,visibleRange:s,nice:n}=this;this.updateScale();const a=It(this.range),o=this.dataDomain.domain;let r,l;r=0===s[0]&&1===s[1]?void 0:n?this._scaleNiceDomainInputDomain===o&&this._scaleNiceDomainRangeExtent===a?this.scale.domain:this.calculateTickLayout(o,0,[0,1]).niceDomain:o,l=n?null==r?0:1:2;const{niceDomain:c,primaryTickCount:h,ticks:d,tickDomain:u,fractionDigits:p,bbox:g}=this.calculateTickLayout(r??o,l,s,t);this.scale.domain=c,this._scaleNiceDomainInputDomain=n?o:void 0,this._scaleNiceDomainRangeExtent=n?a:NaN;const m=i.format;this.labelFormatter=e.tickFormatter({domain:u,specifier:m,ticks:d,fractionDigits:p})??(t=>this.defaultLabelFormatter(t,p)),this.datumFormatter=e.datumFormatter({domain:u,specifier:m,ticks:d,fractionDigits:p})??(t=>this.defaultDatumFormatter(t,p)),this.scaleFormatterParams={domain:u,ticks:d,fractionDigits:p},this.layout.label={fractionDigits:p,spacing:this.label.spacing,format:this.label.format};const y=i.getSideFlag(),f=this.isAnySeriesActive(),{rotation:x,parallelFlipRotation:v,regularFlipRotation:b}=this.calculateRotations();return this.crossLines.forEach((t=>{var e,s;t.sideFlag=-y,t.direction=x===-Math.PI/2?"x":"y",t instanceof po&&((s=t.label).parallel??(s.parallel=i.parallel)),t.parallelFlipRotation=v,t.regularFlipRotation=b,null==(e=t.calculateLayout)||e.call(t,f,this.reverse)})),{primaryTickCount:h,bbox:g}}getTransformBox(t){const e=new hn,{rotation:i,translationX:s,translationY:n}=this.getAxisTransform();return hn.updateTransformMatrix(e,1,1,i,s,n),e.transformBBox(t)}calculateRotations(){const t=Ks(this.rotation);return{rotation:t,parallelFlipRotation:Vs(t),regularFlipRotation:Vs(t-Math.PI/2)}}updateCrossLines(){const t=this.isAnySeriesActive();this.crossLines.forEach((e=>{e.update(t)}))}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each(((e,s)=>{e.strokeWidth=s.tickWidth??t.width,e.stroke=s.tickStroke??t.stroke,e.x1=i*(s.tickSize??this.getTickSize()),e.x2=0}))}getAxisTransform(){return{rotation:Ks(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineRangeGroup:t,crossLineLineGroup:e,crossLineLabelGroup:i,gridGroup:s,translation:n}=this,{rotation:a}=this.calculateRotations(),o=Math.floor(n.x),r=Math.floor(n.y);t.setProperties({rotation:a,translationX:o,translationY:r}),e.setProperties({rotation:a,translationX:o,translationY:r}),i.setProperties({rotation:a,translationX:o,translationY:r}),s.setProperties({rotation:a,translationX:o,translationY:r})}updateGridLines(){const t=this.label.getSideFlag(),{gridLine:{style:e,width:i},gridPadding:s,gridLength:n}=this;0!==n&&0!==e.length&&this.gridLineGroupSelection.each(((a,o,r)=>{const{stroke:l,lineDash:c}=e[r%e.length];a.setProperties({x1:s,x2:-t*n+s,stroke:l,strokeWidth:i,lineDash:c})}))}formatTick(t,e,i,s){const{labelFormatter:n,label:{formatter:a},moduleCtx:{callbackCache:o}}=this;let r;return a?r=o.call(a,{value:t,index:e,fractionDigits:i}):s?r=s(t):n&&(r=n(t)),String(r??t)}formatDatum(t){const{label:{formatter:e},moduleCtx:{callbackCache:i},datumFormatter:s=this.labelFormatter}=this;let n;return e?n=i.call(e,{value:t,index:NaN}):s?n=i.call(s,t):N(t)&&(n=t.filter(Boolean).join(" - ")),String(n??t)}getScaleValueFormatter(t){const{scaleFormatterParams:e}=this;let i;try{null!=t&&null!=e&&(i=this.scale.tickFormatter({...e,specifier:t}))}catch{n.warnOnce(`the format string ${t} is invalid, ignoring.`)}return i??(i=t=>this.formatDatum(t)),i}getBBox(){return this.axisGroup.getBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some((t=>this.includeInvisibleDomains||t.isEnabled()))}clipTickLines(t,e,i,s){this.tickLineGroup.setClipRect(new Et(t,e,i,s))}clipGrid(t,e,i,s){this.gridGroup.setClipRect(new Et(t,e,i,s))}getTitleFormatterParams(){var t;const{direction:e}=this,i=[];for(const s of this.boundSeries){const t=s.getKeys(e),n=s.getNames(e);for(let e=0;e<t.length;e++)i.push({key:t[e],name:n[e]})}return{direction:e,boundSeries:i,defaultValue:null==(t=this.title)?void 0:t.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:t}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:Te.is(t)||Ta.is(t),getCanvasBounds:()=>vn.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce(((t,e)=>(e.getKeyProperties(this.direction).forEach((e=>t.add(e))),t)),new Set),seriesIds:()=>this.boundSeries.map((t=>t.id)),scaleValueFormatter:t=>this.getScaleValueFormatter(t),scaleInvert:e=>t.invert(e,!0),scaleInvertNearest:e=>t.invert(e,!0),attachLabel:t=>this.attachLabel(t),inRange:(t,e)=>this.inRange(t,e)}}isReversed(){return this.reverse}};Po.defaultTickMinSpacing=50,Po.CrossLineConstructor=po,s([Ti(zi)],Po.prototype,"nice",2),s([Ti(zi)],Po.prototype,"reverse",2),s([Ti(as)],Po.prototype,"keys",2),s([Ti(ji)],Po.prototype,"interval",2),s([Ti(ji)],Po.prototype,"title",2),s([$n(((t,e,i)=>t.onGridLengthChange(e,i)))],Po.prototype,"gridLength",2);var zo=Po;function Bo(t,e,i,s,n,a){if(0===t.size)return!1;let o=t.x,r=t.y;null!=e&&(o-=(e.x-.5)*t.size,r-=(e.y-.5)*t.size);let l=o;o<i?l=i:o>i+n&&(l=i+n);let c=r;r<s?c=s:r>s+a&&(c=s+a);const h=o-l,d=r-c;return Math.sqrt(h*h+d*d)<=.5*t.size}function Fo(t,e,i,s,n){const a=t.x+t.width>e&&t.x<e+s,o=t.y+t.height>i&&t.y<i+n;return a&&o}function Go(t){return null!=t&&"object"==typeof t.point&&"object"==typeof t.label}var Uo={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function Yo(t,e,i){let[s,n]=St(t);s=function(t,e,i){const s=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return Math.floor(t/a)*a}(Math.floor(s),n,e);const a=function(t,e,i){const s=i-1,n=(e-t)/s;return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i*10;if(s>0&&s<=1)return i/10;if(s>1&&s<=2)return 2*i/10;if(s>1&&s<=5)return 5*i/10;if(s>5&&s<=10)return 10*i/10;if(s>10&&s<=20)return 20*i/10;if(s>20&&s<=40)return 40*i/10;if(s>40&&s<=50)return 50*i/10;if(s>50&&s<=100)return 100*i/10;return s}(n)}(s,n,e);n=s+(e-1)*a;const o=i?[n,s]:[s,n],r=function(t,e,i){const s=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(s):0,a=Math.pow(10,n),o=[];for(let r=0;r<i;r++){const i=t+e*r;o[r]=Math.round(i*a)/a}return o}(s,a,e);return{domain:o,ticks:r}}function Wo(){const t=new Map;return e=>{const i=t.get(e);return i?(t.set(e,i+1),`${e}_${i}`):(t.set(e,1),e)}}var Vo=class{constructor(t){this.axis=t}estimateTickCount(t,e,i){return La(It(this.axis.range),It(t),e,i,Te.defaultTickCount,this.axis.defaultTickMinSpacing)}filterTicks(t,e){const{minSpacing:i,maxSpacing:s}=this.axis.interval,n=!isNaN(i)||!isNaN(s)?Math.ceil(t.length/e):2,a=t.length%n?-1:0;return t.filter(((t,e)=>(e+a)%n==0))}generateTicks({domain:t,primaryTickCount:e,visibleRange:i,niceMode:s,parallelFlipRotation:n,regularFlipRotation:a,labelX:o,sideFlag:r}){const{scale:l,label:c,interval:{minSpacing:h,maxSpacing:d}}=this.axis,{parallel:u,rotation:p,fontFamily:g,fontSize:m,fontStyle:y,fontWeight:f}=c,x=void 0!==e,{defaultRotation:v,configuredRotation:b,parallelFlipFlag:M,regularFlipFlag:S}=Va({rotation:p,parallel:u,regularFlipRotation:a,parallelFlipRotation:n}),I=b+v,D=new hn,{maxTickCount:A}=this.estimateTickCount(i,h,d),L=!(Te.is(l)||Ta.is(l))||isNaN(A)?10:A;let N=_a(u,b,0,r,S);const k=function(t,e,i,s){return t&&!e?i*s==-1?"hanging":"bottom":"middle"}(u,b,r,M),w=Tn.toFontString({fontFamily:g,fontSize:m,fontStyle:y,fontWeight:f}),C=wn.getMeasurer({font:w}),T={fontFamily:g,fontSize:m,fontStyle:y,fontWeight:f,textBaseline:k,textAlign:N},E=c.enabled&&c.avoidCollisions,O=({ticks:t},e)=>{if(!E)return!1;const i=0!==b||0!==e,s=I+e,n=function(t,e){return isNaN(t)?e?0:10:t}(c.minSpacing,i);hn.updateTransformMatrix(D,1,1,s,0,0);const a=function(t,e,i,s){const n=[];for(const{tickLabel:a,translationY:o}of t){if(!a)continue;const{width:t,height:r}=s.measureLines(a),l=new Et(e,o,t,r),c=new Et(e,o,0,0);i.transformBBox(c,l);const{x:h,y:d}=l;n.push({point:{x:h,y:d},label:{text:a,width:t,height:r}})}return n}(t,o,D,C);return function(t,e=0){const i=[];for(let s=0;s<t.length;s++){const n=t[s],{point:{x:a,y:o},label:{text:r}}=n;let{width:l,height:c}=n.label;if(l+=e,c+=e,i.some((t=>Fo(t,a,o,l,c))))return!0;i.push({index:s,text:r,x:a,y:o,width:l,height:c,datum:n})}return!1}(a,n)};let R={tickDomain:[],ticks:[],rawTicks:[],fractionDigits:0,niceDomain:void 0},j=0,P=0,z=!0,B=!1;for(;!B&&z&&j<=L;){P=0;for(const n of this.getTickStrategies({domain:t,niceMode:s,secondaryAxis:x,index:j}))({tickData:R,index:j,autoRotation:P,terminate:B}=n({index:j,tickData:R,textProps:T,terminate:B,primaryTickCount:e,visibleRange:i,get labelOverlap(){return O(R,P)}}));z=O(R,P)}N=_a(u,b,P,r,S);const F=v+b+P;return!x&&R.rawTicks.length>0&&(e=R.rawTicks.length),{tickData:R,primaryTickCount:e,combinedRotation:F,textBaseline:k,textAlign:N}}getTickStrategies({domain:t,niceMode:e,index:i,secondaryAxis:s}){const{scale:n,label:a,interval:o}=this.axis,{minSpacing:r}=o,l=Te.is(n)||Ta.is(n),c=a.enabled&&a.avoidCollisions,h=!l&&0!==i&&c,d=!0===a.autoRotate&&void 0===a.rotation,u=[];let p;p=o.values?3:s?1:h?2:0;if(u.push((({index:i,tickData:s,primaryTickCount:n,visibleRange:a,terminate:o})=>this.createTickData(t,e,a,n,p,i,s,o))),!l&&!isNaN(r)){const i=({index:i,tickData:s,primaryTickCount:n,visibleRange:a,terminate:o})=>this.createTickData(t,e,a,n,2,i,s,o);u.push(i)}if(c&&d){const t=({index:t,tickData:e,labelOverlap:i,terminate:s})=>({index:t,tickData:e,autoRotation:i?Vs(Ks(a.autoRotateAngle??0)):0,terminate:s});u.push(t)}return u}createTickData(t,e,i,s,n,a,o,r){const{scale:l,interval:c}=this.axis,{step:h,values:d,minSpacing:u,maxSpacing:p}=c,{maxTickCount:g,minTickCount:m,tickCount:y}=this.estimateTickCount(i,u,p),f=Te.is(l)||Ta.is(l),v=!f||isNaN(g)?10:g,b=t=>f?Math.max(y-t,m):g,M=null==h&&null==d&&b(a)>m&&(f||2===n);for(;a<=v;){const r=o.rawTicks;if(o=this.getTicks({domain:t,niceMode:e,visibleRange:i,tickGenerationType:n,previousTicks:r,minTickCount:m,maxTickCount:g,primaryTickCount:s,tickCount:b(a)}),a++,!M||!x(o.rawTicks,r))break}return r||(r=null!=h||null!=d),{tickData:o,index:a,autoRotation:0,terminate:r}}getTicks({domain:t,niceMode:e,visibleRange:i,tickGenerationType:s,previousTicks:n,tickCount:a,minTickCount:o,maxTickCount:r,primaryTickCount:l}){const{axis:c}=this,{label:h,range:d,scale:u,interval:p}=c,g=Wo(),m={nice:0===e,interval:p.step,tickCount:a,minTickCount:o,maxTickCount:r},y={...m,nice:0===e||1===e};let f,x=0===e?u.niceDomain(m,t):t,v=x;switch(s){case 3:if(v=p.values,f=p.values,Te.is(u)){const[t,e]=St(x.map(Number));f=f.filter((i=>Number(i)>=t&&Number(i)<=e)).sort(((t,e)=>Number(t)-Number(e)))}break;case 1:if(Te.is(u)){const e=Yo(t.map(Number),l??0,c.reverse);f=e.ticks,x=e.domain.map((t=>u.toDomain(t)))}else f=u.ticks(y,x,i)??[];break;case 2:f=this.filterTicks(n,a);break;default:f=u.ticks(y,x,i)??[]}const b=f.reduce(((t,e)=>Math.max(t,"number"==typeof e?Ct(e):0)),0),M={domain:v,ticks:f,fractionDigits:b,specifier:h.format},S=u.tickFormatter(M),I=u.domain;u.domain=x;const D=(u.bandwidth??0)/2,A=[];for(let L=0;L<f.length;L++){const t=f[L],e=u.convert(t)+D;if(d.length>0&&!c.inRange(e,.001))continue;const i=h.enabled?c.formatTick(t,L,b,S):"";A.push({tick:t,tickId:g(i),tickLabel:i,translationY:Math.floor(e)})}return u.domain=I,{tickDomain:v,rawTicks:f,fractionDigits:b,ticks:A,niceDomain:x}}},_o=class extends Mo{constructor(){super(...arguments),this.autoRotateAngle=335}};s([Ti(zi,{optional:!0})],_o.prototype,"autoRotate",2),s([Ti(Gi)],_o.prototype,"autoRotateAngle",2);var Ho=class t extends zo{constructor(t,e){let i;super(t,e),this.lineNode=this.axisGroup.appendChild(new Ro({name:`${this.id}-Axis-line`,zIndex:1})),this.tempText=new Pn,this.tempCaption=new Qn,this.tickGenerator=new Vo(this),this.generatedTicks=void 0,this.animationManager=t.animationManager,this.animationState=new Wn("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.axisGroup.appendChild(this.title.caption.node),this.destroyFns.push(t.layoutManager.addListener("layout:complete",(t=>{const e=[t.chart.width,t.chart.height];null==i||x(e,i)||this.animationState.transition("resize"),i=e})),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(e){return e instanceof t}resetAnimation(t){"initial"===t&&this.animationState.transition("reset")}get direction(){return"top"===this.position||"bottom"===this.position?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new _o}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}calculateTickLayout(t,e,i,s){const n=this.label.getSideFlag(),{parallelFlipRotation:a,regularFlipRotation:o}=this.calculateRotations(),r=n*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),l=this.tickGenerator.generateTicks({domain:t,niceMode:e,visibleRange:i,primaryTickCount:s,parallelFlipRotation:a,regularFlipRotation:o,labelX:r,sideFlag:n}),{tickData:c,primaryTickCount:h=s}=l,{ticks:d,tickDomain:u,rawTicks:p,fractionDigits:g,niceDomain:m=t}=c,y=d.map((t=>this.getTickLabelProps(t,l))),f=this.tickBBox(d,y);return this.generatedTicks={ticks:d,labels:y},{ticks:p,tickDomain:u,niceDomain:m,primaryTickCount:h,fractionDigits:g,bbox:f}}update(){var t;this.updateDirection();const e=Array.from(this.tickLabelGroupSelection.nodes(),(t=>t.datum.tickId));if(super.update(),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),this.generatedTicks){const{ticks:t}=this.generatedTicks;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{const i=function(t,e){const i=Math.max(t.length,e.length),s=new Set,n=new Set;for(let a=0;a<i;a++){const i=t[a],o=e[a];i!==o&&(n.has(o)?n.delete(o):o&&s.add(o),s.has(i)?s.delete(i):i&&n.add(i))}return{changed:s.size>0||n.size>0,added:s,removed:n}}(e,t.map((t=>t.tickId)));this.animationState.transition("update",i)}}const{enabled:i,stroke:s,width:n}=this.line;this.lineNode.setProperties({stroke:s,strokeWidth:i?n:0}),this.updateTitle(!(null==(t=this.generatedTicks)?void 0:t.ticks.length))}updatePosition(){super.updatePosition(),this.axisGroup.datum=this.getAxisTransform()}tickBBox(t,e){var i;const s=this.label.getSideFlag(),n=[],{x:a,y1:o,y2:r}=this.getAxisLineCoordinates(),l=new Et(a+Math.min(s*this.seriesAreaPadding,0),o,this.seriesAreaPadding,r-o);if(n.push(l),this.tick.enabled)for(const d of t){const{x1:t,x2:e,y:i}=this.getTickLineCoordinates(d),s=new Et(t,i,e-t,0);n.push(s)}const{tempText:c}=this;if(this.label.enabled)for(const d of e){if(!d.visible)continue;c.setProperties({...d,translationY:Math.round(d.translationY)});const t=c.getBBox();t&&n.push(t)}if(null==(i=this.title)?void 0:i.enabled){const t=Et.merge(n).width;this.setTitleProps(this.tempCaption,{spacing:t});const e=this.tempCaption.node.getBBox();e&&n.push(e)}const h=Et.merge(n);return this.getTransformBox(h)}getTickLabelProps(t,e){const{combinedRotation:i,textBaseline:s,textAlign:n}=e,{range:a}=this.scale,o=t.tickLabel,r=this.label.getSideFlag()*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),l=""!==o&&null!=o;return{...this.getLabelStyles({value:t.tickLabel}),tickId:t.tickId,rotation:i,rotationCenterX:r,translationY:t.translationY,text:o,textAlign:n,textBaseline:s,visible:l,x:r,y:0,range:a}}getTickLineCoordinates(t){const e=this.label.getSideFlag()*this.getTickSize(),i=Math.min(0,e);return{x1:i,x2:i+Math.abs(e),y:t.translationY}}updateSelections(){if(!this.generatedTicks)return;const t=this.getAxisLineCoordinates(),{ticks:e,labels:i}=this.generatedTicks,s=t=>t.tickId;this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],void 0,s),this.tickLineGroupSelection.update(e,void 0,s),this.tickLabelGroupSelection.update(i,void 0,s)}updateTitle(t,e){const{title:i,tickLineGroup:s,tickLabelGroup:n,lineNode:a}=this;if(i.enabled&&!t&&null==e){e=In.computeChildrenBBox([s,n,a]).width+(n.visible?0:this.seriesAreaPadding)}e??(e=0),this.setTitleProps(i.caption,{spacing:e})}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each(((t,e)=>{t.fill=e.fill,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text,t.textBaseline=e.textBaseline,t.textAlign=e.textAlign??"center"}))}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=wo(Lo(this));Le(this.id,"axis-group",e,[this.axisGroup],i.group),Le(this.id,"line",e,[this.lineNode],i.line),Le(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((t,e)=>e.tickId),t),Le(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,((t,e)=>e.tickId),t)}resetSelectionNodes(){const t=Lo(this);Cs([this.axisGroup],((t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY}))),Cs([this.gridLineGroupSelection,this.tickLineGroupSelection],To(t)),Cs([this.tickLabelGroupSelection],((t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX}))),Cs([this.lineNode],((t,e)=>({...e})))}};s([Ti(Wi,{optional:!0})],Ho.prototype,"thickness",2),s([Ti(us)],Ho.prototype,"position",2);var Zo=Ho,Ko=class t extends Zo{constructor(t,e=new Ai){super(t,e),this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}static is(e){return e instanceof t}normaliseDataDomain(t){return{domain:t,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:t,paddingOuter:e}=this;if(!P(t)||!P(e)){const i=this.reduceBandScalePadding();t??(t=i.inner),e??(e=i.outer)}this.scale.paddingInner=t??0,this.scale.paddingOuter=e??0}reduceBandScalePadding(){return this.boundSeries.reduce(((t,e)=>{var i;const s=null==(i=e.getBandScalePadding)?void 0:i.call(e);return s&&(t.inner>s.inner&&(t.inner=s.inner),t.outer<s.outer&&(t.outer=s.outer)),t}),{inner:1/0,outer:-1/0})}};Ko.className="CategoryAxis",Ko.type="category",s([Ti(Vi)],Ko.prototype,"groupPaddingInner",2),s([Ti(Vi,{optional:!0})],Ko.prototype,"paddingInner",2),s([Ti(Vi,{optional:!0})],Ko.prototype,"paddingOuter",2);var $o=Ko,Xo=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},Qo=new class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...t){for(const e of t){this.registerDependencies(e);const t=this.modules.find((t=>!(e.type!==t.type||"optionsKey"in e&&"optionsKey"in t&&e.optionsKey!==t.optionsKey||e.identifier!==t.identifier)));if(t){if("enterprise"===e.packageType&&"community"===t.packageType){const i=this.modules.indexOf(t);this.modules.splice(i,1,e),"optionsKey"in e&&this.modulesByOptionKey.set(e.optionsKey,e)}}else this.modules.push(e),"optionsKey"in e&&this.modulesByOptionKey.set(e.optionsKey,e)}}hasEnterpriseModules(){return this.modules.some((t=>"enterprise"===t.packageType))}*byType(...t){const e=new Set,i=this.modules.filter((e=>t.includes(e.type))),s=t=>{const e=this.dependencies.get(t);return(null==e?void 0:e.flatMap(s).concat(e))??[]},n=[];for(const a of i){const i="optionsKey"in a?a.optionsKey:a.contextKey;if(!e.has(i)){for(const a of s(i)){if(e.has(a))continue;const i=this.modulesByOptionKey.get(a);i?t.includes(i.type)&&(yield i,e.add(a)):n.push(a)}yield a,e.add(i)}}if(n.length>0)throw new Error(`Could not resolve module dependencies: ${n}`)}registerDependencies(t){if(null==t.dependencies||0===t.dependencies.length)return;const e="optionsKey"in t?t.optionsKey:t.contextKey;this.dependencies.set(e,t.dependencies)}},qo=class{constructor(){this.queue=[]}await(t=50){return new Promise((e=>{const i=()=>{clearTimeout(s),e(!0)},s=setTimeout((()=>{const t=this.queue.indexOf(i);t<0||(this.queue.splice(t,1),e(!1))}),t);this.queue.push(i)}))}notify(){this.queue.splice(0).forEach((t=>t()))}};function Jo(t,e){t&&(null==(e=mt.normalize(e)).width?t.style.removeProperty("width"):t.style.width=`${e.width}px`,null==e.height?t.style.removeProperty("height"):t.style.height=`${e.height}px`,null==e.x?t.style.removeProperty("left"):t.style.left=`${e.x}px`,null==e.y?t.style.removeProperty("top"):t.style.top=`${e.y}px`)}function tr(t){const e=parseFloat(t.style.width)||t.offsetWidth,i=parseFloat(t.style.height)||t.offsetHeight;return{x:parseFloat(t.style.left)||t.offsetLeft,y:parseFloat(t.style.top)||t.offsetTop,width:e,height:i}}function er(t){var e;if(t.focus({preventScroll:!0}),null==(null==(e=t.lastChild)?void 0:e.textContent))return;const i=nt().createRange();i.setStart(t.lastChild,t.lastChild.textContent.length),i.setEnd(t.lastChild,t.lastChild.textContent.length);const s=at().getSelection();null==s||s.removeAllRanges(),null==s||s.addRange(i)}var ir=0;function sr(t){return`${t??"ag-charts-element"}-${ir++}`}function nr(){const t=at("navigator");if("scheduling"in t){const e=t.scheduling;if("isInputPending"in e)return e.isInputPending({includeContinuous:!0})}return!1}function ar(t){return`ag-charts-icon ag-charts-icon-${t}`}var or="class-instance";function rr(t,e,i){if(N(e)){if(!N(t)||t.length!==e.length||e.some(((e,i)=>null!=rr(t[i],e))))return e}else{if(O(e)){if(!O(t))return e;const s={},n=new Set([...Object.keys(t),...Object.keys(e)]);for(const a of n)if(t[a]!==e[a]&&!(null==i?void 0:i.includes(a)))if(typeof t[a]==typeof e[a]){const i=rr(t[a],e[a]);null!==i&&(s[a]=i)}else s[a]=e[a];return Object.keys(s).length?s:null}if(t!==e)return e}return null}function lr(t,e){for(const i of Object.keys(t))if(t[i]!==(null==e?void 0:e[i]))return!1;return!0}function cr(t,e){return N(t)?t.map((t=>cr(t,e))):O(t)?function(t,e){const i={};for(const s of Object.keys(t))i[s]=(null==e?void 0:e.has(s))?hr(t[s]):cr(t[s],e);return i}(t,e):t instanceof Map?new Map(cr(Array.from(t))):hr(t)}function hr(t){return N(t)?t.slice(0):O(t)?{...t}:w(t)?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):t}function dr(t,e,i,s,n,a){if(N(t)){a=e(t,s,n,a);let o=0;for(const r of t)a=dr(r,e,i,null==s?void 0:s[o],n,a),o++}else if(O(t)){a=e(t,s,n,a);for(const o of Object.keys(t)){if(null==i?void 0:i.has(o))continue;a=dr(t[o],e,i,null==s?void 0:s[o],n,a)}}return a}function ur(t,e,i={}){const{path:s,matcherPath:a=(null==s?void 0:s.replace(/(\[[0-9+]+])/i,"[]")),skip:o=[]}=i;if(null==t)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(null==e)return t;if(Ci(t))return t.set(e);const r=t,l=pr(t);for(const h of Object.keys(e)){if(ae.has(h))continue;const d=`${a?a+".":""}${h}`;if(o.includes(d))continue;const u=e[h],p=`${s?s+".":""}${h}`,g=r.constructor,m=r[h];try{const e=pr(m),s=pr(u);if(l===or&&!(h in t)){if(void 0===u)continue;n.warn(`unable to set [${p}] in ${null==g?void 0:g.name} - property is unknown`);continue}if(null!=e&&null!=s&&s!==e&&(e!==or||"object"!==s)){n.warn(`unable to set [${p}] in ${null==g?void 0:g.name} - can't apply type of [${s}], allowed types are: [${e}]`);continue}if(Ci(m))r[h].set(u);else if("object"===s){if(null==m){n.warn(`unable to set [${p}] in ${null==g?void 0:g.name} - property is unknown`);continue}ur(m,u,{...i,path:p,matcherPath:d})}else r[h]=u}catch(c){n.warn(`unable to set [${p}] in [${null==g?void 0:g.name}]; nested error is: ${c.message}`)}}return t}function pr(t){return null==t?null:function(t){return"undefined"!=typeof window&&t instanceof HTMLElement}(t)||w(t)?"primitive":N(t)?"array":E(t)?O(t)?"object":or:T(t)?"function":"primitive"}function gr(t,e,i){return mr(t,e,t,i)}function mr(t,e,i,s,n=[],a={}){if(N(t)){yr(t,e,i,n,a);let o=0;for(const r of t)mr(r,e,i,s,[...n,`${o}`],a),o++}else if(O(t)){yr(t,e,i,n,a);for(const o of Object.keys(t)){if(null==s?void 0:s.has(o))continue;mr(t[o],e,i,s,[...n,o],a)}}return a}function yr(t,e,i,s,n){if(N(t))for(let a=0;a<t.length;a++)t[a]=fr(t[a],e,i,[...s,`${a}`],n);else for(const[a,o]of Object.entries(t))t[a]=fr(o,e,i,[...s,a],n)}function fr(t,e,i,s,n){const{operation:a,values:o}=br(t);return a?(n[s.join(".")]=t,Mr(a,o,e,i,s,new Set)):t}var xr=(t=>(t.Ref="$ref",t.Path="$path",t.If="$if",t.Eq="$eq",t.Not="$not",t.Or="$or",t.And="$and",t.Mul="$mul",t.Round="$round",t.Rem="$rem",t.Mix="$mix",t.ForegroundBackgroundMix="$foregroundBackgroundMix",t.ForegroundBackgroundAccentMix="$foregroundBackgroundAccentMix",t))(xr||{}),vr=new Set(Object.values(xr));function br(t){if(!O(t))return{};const[e,...i]=Object.keys(t);return 0===i.length&&vr.has(e)?{operation:e,values:t[e]}:{}}function Mr(t,e,i,s,n,a){return N(e)&&(e=e.map((t=>{const{operation:e,values:o}=br(t);return e?Mr(e,o,i,s,n,a):t}))),Ir[t](e,i,s,n,a)}function Sr(t){return j(t)&&t>=0&&t<=1}var Ir={$ref:(t,e,i,s,a)=>{if(R(t)&&t in e){const{operation:o,values:r}=br(e[t]);return"$ref"!==o?e[t]:(null==a?void 0:a.has(r))?void n.warnOnce(`\`$ref\` json operation failed on [${String(t)}] at [${s.join(".")}], circular reference detected with [${[...a].join(", ")}].`):(null==a||a.add(r),Ir.$ref(r,e,i,s,a))}n.warnOnce(`\`$ref\` json operation failed on [${String(t)}] at [${s.join(".")}], expecting one of [${Object.keys(e).join(", ")}].`)},$path:(t,e,i,s)=>{if(!R(t))return void n.warnOnce(`\`$path\` json operation failed on [${String(t)}] at [${s.join(".")}], expecting a string.`);const a=t.split("/"),o=[...s];for(const n of a)".."===n?(o.pop(),o.pop()):"."===n?o.pop():o.push(n);let r=i;for(const l of o){if(!(l in r))return void n.warnOnce(`\`$path\` json operation failed on [${String(t)}] at [${s.join(".")}], could not find path in object.`);r=r[l]}return r},$if:([t,e,i])=>t?e:i,$eq:([t,e])=>t===e,$not:([t,e])=>t!==e,$or:([t,e])=>t||e,$and:([t,e])=>t&&e,$mul:([t,e],i,s,a)=>{if("number"==typeof t&&"number"==typeof e)return t*e;n.warnOnce(`\`$mul\` json operation failed on [${String(t)}] and [${String(e)}] at [${a.join(".")}], expecting two numbers.`)},$round:([t],e,i,s)=>{if("number"==typeof t)return Math.round(t);n.warnOnce(`\`$round\` json operation failed on [${String(t)}] at [${s.join(".")}], expecting a number.`)},$rem:([t],e)=>{if("number"==typeof t)return Math.round(t*e.fontSize)},$mix:([t,e,i],s,a,o)=>{if("string"==typeof t&&"string"==typeof e&&Sr(i))try{return Yt.mix(Yt.fromString(t),Yt.fromString(e),i).toString()}catch{}n.warnOnce(`\`$mix\` json operation failed on [${String(t)}, ${String(e)}, ${String(i)}] at [${o.join(".")}], expecting two colors and a number between 0 and 1.`)},$foregroundBackgroundMix:([t],e,i,s)=>{if(Sr(t))return Yt.mix(Yt.fromString(e.foregroundColor),Yt.fromString(e.backgroundColor),t).toString();n.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(t)}}}] at [${s.join(".")}], expecting a number between 0 and 1.`)},$foregroundBackgroundAccentMix:([t,e],i,s,a)=>{if(Sr(t)&&Sr(e))return Yt.mix(Yt.mix(Yt.fromString(i.foregroundColor),Yt.fromString(i.backgroundColor),t),Yt.fromString(i.accentColor),e).toString();n.warnOnce(`\`$foregroundBackgroundAccentMix\` json operation failed on [${String(t)}, ${String(e)}}] at [${a.join(".")}], expecting two numbers between 0 and 1.`)}},Dr=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise((e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch((t=>n.errorOnce(t)))}))}async acquireImmediately(t){return!!this.available&&(await this.acquire(t),!0)}async waitForClearAcquireQueue(){return this.acquire((()=>Promise.resolve(void 0)))}async dispatchNext(){this.available=!1;let[t,e]=this.acquireQueue.shift()??[];for(;t;){try{await t(),null==e||e()}catch(i){n.error("mutex callback error",i),null==e||e()}[t,e]=this.acquireQueue.shift()??[]}this.available=!0}},Ar=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null==(i=this.eventListeners.get(t))||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null==(e=this.eventListeners.get(t.type))||e.forEach((e=>e(t)))}},Lr=class extends ki{constructor(t=0,e=t,i=t,s=e){super(),this.top=t,this.right=e,this.bottom=i,this.left=s}};function Nr(t,e){let i,s,n=0,a=!1;const o=()=>a,r=()=>{a=!1,null==s||s(),s=void 0,i=void 0,n>0&&t(l)},l=()=>{const t=n;n=0,a=!0;const i=e({count:t});i?i.then(r,r):r()};return{schedule(e){0!==n||o()||t(l,e),n++},async await(){if(o())for(null==i&&(i=new Promise((t=>{s=t})));o();)await i}}}function kr(t){return"true"===t}function wr(t){return t}s([Ti(Wi)],Lr.prototype,"top",2),s([Ti(Wi)],Lr.prototype,"right",2),s([Ti(Wi)],Lr.prototype,"bottom",2),s([Ti(Wi)],Lr.prototype,"left",2);var Cr={role:wr,"aria-checked":kr,"aria-controls":wr,"aria-describedby":wr,"aria-disabled":kr,"aria-expanded":kr,"aria-haspopup":kr,"aria-hidden":kr,"aria-label":wr,"aria-labelledby":wr,"aria-live":wr,"aria-orientation":wr,"aria-selected":kr,"data-preventdefault":kr,class:wr,id:wr,tabindex:function(t){return Number(t)},title:wr,placeholder:wr};function Tr(t,e,i){null==i||""===i||""===i?null==t||t.removeAttribute(e):null==t||t.setAttribute(e,i.toString())}function Er(t,e){if(null!=e)for(const[i,s]of Object.entries(e))"class"!==i&&Tr(t,i,s)}function Or(t,e,i){var s;if(!(t instanceof HTMLElement))return;const n=t.getAttribute(e);return null===n?i:(null==(s=Cr[e])?void 0:s.call(Cr,n))??void 0}function Rr(t,e,i){null!=t&&(null==i?t.style.removeProperty(e):t.style.setProperty(e,i.toString()))}var jr=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function Pr(t,e,i){const{offsetX:s,offsetY:n,clientX:a,clientY:o}=e,{currentX:r,currentY:l}=Fr.calcCurrentXY(i,e);return{type:t,offsetX:s,offsetY:n,clientX:a,clientY:o,currentX:r,currentY:l,sourceEvent:e}}function zr(t,e,i){return{type:t,sourceEvent:e}}var Br={blur:t=>({type:"blur",sourceEvent:t}),change:t=>({type:"change",sourceEvent:t}),contextmenu:(t,e)=>Pr("contextmenu",t,e),focus:t=>({type:"focus",sourceEvent:t}),keydown:t=>({type:"keydown",sourceEvent:t}),keyup:t=>({type:"keyup",sourceEvent:t}),click:(t,e)=>Pr("click",t,e),dblclick:(t,e)=>Pr("dblclick",t,e),mouseenter:(t,e)=>Pr("mouseenter",t,e),mousemove:(t,e)=>Pr("mousemove",t,e),mouseleave:(t,e)=>Pr("mouseleave",t,e),wheel:t=>{const{offsetX:e,offsetY:i,clientX:s,clientY:n}=t,a=0===t.deltaMode?.01:1;return{type:"wheel",offsetX:e,offsetY:i,clientX:s,clientY:n,deltaX:t.deltaX*a,deltaY:t.deltaY*a,sourceEvent:t}},touchstart:(t,e)=>zr("touchstart",t),touchmove:(t,e)=>zr("touchmove",t),touchend:(t,e)=>zr("touchend",t),touchcancel:(t,e)=>zr("touchcancel",t)},Fr=class{static alloc(t,e,i){return Br[t](e,i)}static isHTMLEvent(t){return jr.includes(t)}static calcCurrentXY(t,e){const i=t.getBoundingClientRect();return{currentX:e.clientX-i.x,currentY:e.clientY-i.y}}},Gr=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(t,e){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[t]=e}lazyGetWidgetListeners(t,e){var i;if(!(t in(this.sourceListeners??{}))){const i=i=>{var s;const n=Fr.alloc(t,i,e.getElement());for(const a of(null==(s=this.widgetListeners)?void 0:s[t])??[])a(n,e)},s={};t.startsWith("touch")&&(s.passive=!1),this.initSourceHandler(t,i),e.getElement().addEventListener(t,i,s)}return this.widgetListeners??(this.widgetListeners={}),(i=this.widgetListeners)[t]??(i[t]=[]),this.widgetListeners[t]}add(t,e,i){this.lazyGetWidgetListeners(t,e).push(i)}remove(t,e,i){const s=this.lazyGetWidgetListeners(t,e),n=s.indexOf(i);n>-1&&s.splice(n,1)}destroy(t){for(const[e,i]of Object.entries(this.sourceListeners??{})){const s=e;t.getElement().removeEventListener(s,i)}this.widgetListeners=void 0,this.sourceListeners=void 0}},Ur=class{constructor(t,e,i,s){this.glob=t,this.self=e,this.window=at(),this.mousegeneral=t=>{t.stopPropagation(),t.stopImmediatePropagation()},this.mousemove=t=>{var e;t.stopPropagation(),t.stopImmediatePropagation(),null==(e=this.glob.globalMouseDragCallbacks)||e.mousemove(t)},this.mouseup=t=>{var e;0===t.button&&(t.stopPropagation(),t.stopImmediatePropagation(),null==(e=this.glob.globalMouseDragCallbacks)||e.mouseup(t),this.destroy())};const{window:n,mousegeneral:a,mousemove:o,mouseup:r}=this;n.addEventListener("mousedown",a,{capture:!0}),n.addEventListener("mouseenter",a,{capture:!0}),n.addEventListener("mouseleave",a,{capture:!0}),n.addEventListener("mouseout",a,{capture:!0}),n.addEventListener("mouseover",a,{capture:!0}),n.addEventListener("mousemove",o,{capture:!0}),n.addEventListener("mouseup",r,{capture:!0}),e.mouseDragger=this,t.globalMouseDragCallbacks=i,t.globalMouseDragCallbacks.mousedown(s)}destroy(){const{window:t,mousegeneral:e,mousemove:i,mouseup:s}=this;t.removeEventListener("mousedown",e,{capture:!0}),t.removeEventListener("mouseenter",e,{capture:!0}),t.removeEventListener("mouseleave",e,{capture:!0}),t.removeEventListener("mouseout",e,{capture:!0}),t.removeEventListener("mouseover",e,{capture:!0}),t.removeEventListener("mousemove",i,{capture:!0}),t.removeEventListener("mouseup",s,{capture:!0}),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}};var Yr=!1,Wr=class{constructor(t,e,i,s,n){this.glob=t,this.self=e,this.initialTouch=s,this.target=n,this.longTapInterrupted=!1,this.longtap=()=>{const{target:t,initialTouch:e}=this;if(!this.longTapInterrupted){t.dispatchEvent(new TouchEvent("touchcancel",{touches:[e],bubbles:!0})),Yr=!0;const i=t=>{t.preventDefault()},s=e=>{Yr=!1,e.preventDefault(),t.removeEventListener("touchmove",i),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",s)};t.addEventListener("touchmove",i,{passive:!1}),t.addEventListener("touchend",s,{passive:!1}),t.addEventListener("touchcancel",s,{passive:!1});const{clientX:n,clientY:a}=e,o=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:at(),clientX:n,clientY:a,pointerType:"touch"});t.dispatchEvent(o)}},this.touchmove=t=>{var e;const{glob:i,self:s,initialTouch:n}=this,a=this.findInitialFinger(t.targetTouches);null!=a&&(this.longTapInterrupted=this.longTapInterrupted||function(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY;return i*i+s*s}(n,a)>100,s.dragTouchEnabled&&null!=a&&(null==(e=i.globalTouchDragCallbacks)||e.touchmove(t,a)))},this.touchend=t=>{var e;this.longTapInterrupted=!0;const i=this.findInitialFinger(t.changedTouches,t.touches);null!=i&&(null==(e=this.glob.globalTouchDragCallbacks)||e.touchend(t,i)),this.destroy()},this.longtapTimer=setTimeout(this.longtap,500);const{touchmove:a,touchend:o}=this;n.addEventListener("touchmove",a,{passive:!1}),n.addEventListener("touchstart",o,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),n.addEventListener("touchcancel",o,{passive:!1}),e.touchDragger=this,t.globalTouchDragCallbacks=i}destroy(){const{longtapTimer:t,touchmove:e,touchend:i}=this;clearTimeout(t),this.target.removeEventListener("touchstart",i),this.target.removeEventListener("touchmove",e),this.target.removeEventListener("touchend",i),this.target.removeEventListener("touchcancel",i),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...t){const e=t.map((t=>Array.from(t))).flat();return Array.from(e).find((t=>t.identifier===this.initialTouch.identifier))}};function Vr(t,e,i,s){const{currentX:n,currentY:a}=Fr.calcCurrentXY(t.getElement(),s),o=s.pageX-i.pageX,r=s.pageY-i.pageY;return{type:e,device:"mouse",offsetX:i.offsetX+o,offsetY:i.offsetY+r,clientX:s.clientX,clientY:s.clientY,currentX:n,currentY:a,originDeltaX:o,originDeltaY:r,sourceEvent:s}}function _r(t,{pageX:e,pageY:i}){const{x:s,y:n}=t.getElement().getBoundingClientRect();return{offsetX:e-s,offsetY:i-n}}function Hr(t,e,i,s,n){const{currentX:a,currentY:o}=Fr.calcCurrentXY(t.getElement(),n),r=n.pageX-i.pageX,l=n.pageY-i.pageY;return{type:e,device:"touch",offsetX:i.offsetX+r,offsetY:i.offsetY+l,clientX:n.clientX,clientY:n.clientY,currentX:a,currentY:o,originDeltaX:r,originDeltaY:l,sourceEvent:s}}var Zr={},Kr=class{constructor(t){this.dispatchCallback=t,this.dragTouchEnabled=!0}destroy(){var t,e,i;null==(t=this.dragTriggerRemover)||t.call(this),this.dragTriggerRemover=void 0,this.dragStartListeners=void 0,this.dragMoveListeners=void 0,this.dragEndListeners=void 0,null==(e=this.mouseDragger)||e.destroy(),null==(i=this.touchDragger)||i.destroy()}add(t,e,i){switch(t){case"drag-start":this.dragStartListeners??(this.dragStartListeners=[]),this.dragStartListeners.push(i),this.registerDragTrigger(e);break;case"drag-move":this.dragMoveListeners??(this.dragMoveListeners=[]),this.dragMoveListeners.push(i),this.registerDragTrigger(e);break;case"drag-end":this.dragEndListeners??(this.dragEndListeners=[]),this.dragEndListeners.push(i),this.registerDragTrigger(e)}}remove(t,e,i){switch(t){case"drag-start":return this.removeHandler(this.dragStartListeners,i);case"drag-move":return this.removeHandler(this.dragMoveListeners,i);case"drag-end":return this.removeHandler(this.dragEndListeners,i)}}removeHandler(t,e){const i=null==t?void 0:t.indexOf(e);void 0!==i&&(null==t||t.splice(i,1))}registerDragTrigger(t){if(null==this.dragTriggerRemover){const e=e=>this.triggerMouseDrag(t,e),i=e=>this.triggerTouchDrag(t,e);t.getElement().addEventListener("mousedown",e),t.getElement().addEventListener("touchstart",i,{passive:!1}),this.dragTriggerRemover=()=>{t.getElement().removeEventListener("mousedown",e),t.getElement().removeEventListener("touchstart",i)}}}triggerMouseDrag(t,e){0===e.button&&this.startMouseDrag(t,e)}startMouseDrag(t,e){const i={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};re(["pageX","pageY","offsetX","offsetY"],i,e);const s={mousedown:e=>{const s=Vr(t,"drag-start",i,e);this.dispatch("drag-start",t,s)},mousemove:e=>{const s=Vr(t,"drag-move",i,e);this.dispatch("drag-move",t,s)},mouseup:e=>{const s=Vr(t,"drag-end",i,e);this.dispatch("drag-end",t,s),this.endDrag(t,s)}};this.mouseDragger=function(t,e,i,s){if(null==t.globalMouseDragCallbacks)return new Ur(t,e,i,s)}(Zr,this,s,e)}endDrag(t,{sourceEvent:e,clientX:i,clientY:s}){var n;const a=t.getElement(),o=a.getBoundingClientRect();mt.containsPoint(o,i,s)||(a.dispatchEvent(new MouseEvent("mouseleave",e)),null==(n=e.target)||n.dispatchEvent(new MouseEvent("mouseenter",e)))}triggerTouchDrag(t,e){const i=e.targetTouches.item(0);1===e.targetTouches.length&&null!=i&&this.startOneFingerTouch(t,e,i)}startOneFingerTouch(t,e,i){const s={pageX:NaN,pageY:NaN,..._r(t,i)};re(["pageX","pageY"],s,i);const n={touchmove:(e,i)=>{const n=Hr(t,"drag-move",s,e,i);this.dispatch("drag-move",t,n)},touchend:(e,i)=>{const n=Hr(t,"drag-end",s,e,i);this.dispatch("drag-end",t,n)}},a=t.getElement();this.touchDragger=function(t,e,i,s,n){if(null==t.globalTouchDragCallbacks&&!Yr)return new Wr(t,e,i,s,n)}(Zr,this,n,i,a);const o=Hr(t,"drag-start",s,e,i);this.dispatch("drag-start",t,o)}dispatch(t,e,i){var s,n,a;switch(t){case"drag-start":null==(s=this.dragStartListeners)||s.forEach((t=>t(i,e)));break;case"drag-move":null==(n=this.dragMoveListeners)||n.forEach((t=>t(i,e)));break;case"drag-end":null==(a=this.dragEndListeners)||a.forEach((t=>t(i,e)))}this.dispatchCallback(t,i)}},$r=class{constructor(t){this.elem=t}setBounds(t){Jo(this.elemContainer??this.elem,t)}getBounds(){return tr(this.elemContainer??this.elem)}static setElementContainer(t,e){Jo(e,t.getBounds()),function(t,e){for(const[i,s]of Object.entries(e))Rr(t,i,s)}(t.elem,{width:"100%",height:"100%"}),t.elem.remove(),t.elemContainer=e,t.elemContainer.replaceChildren(t.elem)}},Xr=class extends $r{constructor(t){super(t),this.elem=t,this.index=NaN,this.children=[]}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){var t,e,i,s;null==(t=this.parent)||t.removeChild(this),this.children.forEach((t=>{t.parent=void 0,t.destroy()})),this.children.length=0,this.destructor(),this.elem.remove(),null==(e=this.elemContainer)||e.remove(),null==(i=this.internalListener)||i.destroy(),null==(s=this.htmlListener)||s.destroy(this)}setHidden(t){Rr(this.elem,"display",t?"none":void 0)}isHidden(){var t,e;return"none"===(null==(e=null==(t=at())?void 0:t.getComputedStyle)?void 0:e.call(t,this.elem).display)}setCursor(t){Rr(this.elem,"cursor",t)}setTextContent(t){this.elem.textContent=t??null}setAriaDescribedBy(t){Tr(this.elem,"aria-describedby",t)}setAriaHidden(t){Tr(this.elem,"aria-hidden",t)}setAriaLabel(t){Tr(this.elem,"aria-label",t)}setInnerHTML(t){this.elem.innerHTML=t}isDisabled(){return Or(this.elem,"aria-disabled",!1)}parseFloat(t){return""===t?0:parseFloat(t)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(){this.elem.focus()}setPreventsDefault(t){Tr(this.elem,"data-preventdefault",t)}setTabIndex(t){Tr(this.elem,"tabindex",t)}addChild(t){this.addChildToDOM(t,this.getBefore(t)),this.children.push(t),t.index=this.children.length-1,t.parent=this,this.onChildAdded(t)}removeChild(t){const e=this.children.findIndex((e=>e===t));this.children.splice(e,1),this.removeChildFromDOM(t),this.onChildRemoved(t)}moveChild(t,e){t.domIndex!==e&&(t.domIndex=e,this.removeChildFromDOM(t),this.addChildToDOM(t,this.getBefore(t)))}addClass(...t){this.elem.classList.add(...t)}removeClass(...t){this.elem.classList.remove(...t)}toggleClass(t,e){this.elem.classList.toggle(t,e)}appendOrInsert(t,e){e?e.getElement().insertAdjacentElement("beforebegin",t):this.elem.appendChild(t)}addChildToDOM(t,e){this.appendOrInsert(t.getElement(),e)}removeChildFromDOM(t){this.elem.removeChild(t.getElement())}onChildAdded(t){}onChildRemoved(t){}getBefore({domIndex:t}){if(void 0!==t)return this.children.filter((e=>void 0!==e.domIndex&&e.domIndex>t)).reduce(((t,e)=>!t||e.domIndex<t.domIndex?e:t),void 0)}addListener(t,e){return Fr.isHTMLEvent(t)?(this.htmlListener??(this.htmlListener=new Gr),this.htmlListener.add(t,this,e)):(this.internalListener??(this.internalListener=new Kr(this.onDispatch.bind(this))),this.internalListener.add(t,this,e)),()=>this.removeListener(t,e)}removeListener(t,e){var i,s;Fr.isHTMLEvent(t)?null==(i=this.htmlListener)||i.remove(t,this,e):null!=this.htmlListener&&(null==(s=this.internalListener)||s.remove(t,this,e))}setDragTouchEnabled(t){this.internalListener??(this.internalListener=new Kr(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=t}onDispatch(t,e){if(!e.sourceEvent.bubbles)return;let{parent:i}=this;for(;null!=i;){const{internalListener:s}=i;if(null!=s){const n={...e,...Fr.calcCurrentXY(i.getElement(),e)};s.dispatch(t,i,n)}i=i.parent}}static addWindowEvent(t,e){const i=t=>{t.persisted||e()};return at().addEventListener("pagehide",i),()=>at().removeEventListener("pagehide",i)}},Qr=(t=>(t[t.Caption=0]="Caption",t[t.Legend=1]="Legend",t[t.ToolbarLeft=2]="ToolbarLeft",t[t.ToolbarBottom=3]="ToolbarBottom",t[t.Navigator=4]="Navigator",t[t.Overlay=5]="Overlay",t))(Qr||{}),qr=class{constructor(){this.events=new m,this.elements=new Map}addListener(t,e){return this.events.on(t,e)}registerElement(t,e){return this.elements.has(t)?this.elements.get(t).add(e):this.elements.set(t,new Set([e])),()=>{var i;return null==(i=this.elements.get(t))?void 0:i.delete(e)}}createContext(t,e){var i;const s=new Jr(t,e);for(const n of Object.values(Qr))"number"==typeof n&&(null==(i=this.elements.get(n))||i.forEach((t=>t(s))));return s}emitLayoutComplete(t,e){const i="layout:complete",{width:s,height:n}=t;this.events.emit(i,{type:i,axes:e.axes??[],chart:{width:s,height:n},clipSeries:e.clipSeries??!1,series:e.series})}},Jr=class{constructor(t,e){this.width=t,this.height=e,this.layoutBox=new Et(0,0,t,e)}},tl=class{constructor(){this.title=new Qn,this.subtitle=new Qn,this.footnote=new Qn}positionCaptions(t){const{title:e,subtitle:i,footnote:s}=this,n=t.layoutBox.height/10;if(e.enabled){const{spacing:s=(i.enabled?Qn.SMALL_PADDING:Qn.LARGE_PADDING)}=e;this.positionCaption("top",e,t.layoutBox,n),this.shrinkLayoutByCaption("top",e,t.layoutBox,s)}i.enabled&&(this.positionCaption("top",i,t.layoutBox,n),this.shrinkLayoutByCaption("top",i,t.layoutBox,i.spacing)),s.enabled&&(this.positionCaption("bottom",s,t.layoutBox,n),this.shrinkLayoutByCaption("bottom",s,t.layoutBox,s.spacing))}positionAbsoluteCaptions(t){const{title:e,subtitle:i,footnote:s}=this,{rect:n}=t.series;for(const a of[e,i,s])if("overlay"===a.layoutStyle)if("left"===a.textAlign)a.node.x=n.x+a.padding;else if("right"===a.textAlign){const t=a.node.getBBox();a.node.x=n.x+n.width-t.width-a.padding}}computeX(t,e){return"left"===t?e.x:"right"===t?e.x+e.width:e.x+e.width/2}positionCaption(t,e,i,s){const n=Math.max(Tn.getLineHeight(e.fontSize),s);e.node.x=this.computeX(e.textAlign,i)+e.padding,e.node.y=i.y+("top"===t?0:i.height)+e.padding,e.node.textBaseline=t,e.computeTextWrap(i.width,n)}shrinkLayoutByCaption(t,e,i,s=0){if("block"===e.layoutStyle){const n=e.node.getBBox();i.shrink("top"===t?Math.ceil(n.y-i.y+n.height+s):Math.ceil(i.y+i.height-n.y+s),t)}}};s([Ti(ji)],tl.prototype,"title",2),s([Ti(ji)],tl.prototype,"subtitle",2),s([Ti(ji)],tl.prototype,"footnote",2);var el=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],il=class{constructor(t){this.chartService=t,this.mementoOriginatorKey="chartType"}createMemento(){var t,e;let i=null==(e=null==(t=this.chartService.publicApi)?void 0:t.getOptions())?void 0:e.chartType;return null==i&&(i="candlestick"),i}guardMemento(t){return null==t||el.includes(t)}restoreMemento(t,e,i){var s;if(null==i)return;const a={chartType:i};null==(s=this.chartService.publicApi)||s.updateDelta(a).catch((t=>n.error("error restoring state",t)))}},sl=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach((t=>t())),this.destroyFns.length=0}setFns(t){this.destroy(),this.destroyFns=t}push(...t){this.destroyFns.push(...t)}},nl="11.1.1",al=Symbol("previous-memento-not-found"),ol=class{constructor(t){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=Es.create(!0,"history"),this.destroyFns=new sl,this.destroyFns.setFns([t.addListener("series-undo",this.undo.bind(this)),t.addListener("series-redo",this.redo.bind(this))])}destroy(){this.destroyFns.destroy()}addMementoOriginator(t){this.originators.set(t.mementoOriginatorKey,t),this.clearState.set(t.mementoOriginatorKey,t.createMemento()),this.debugEvent("History add originator:",t.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[t,e]of this.originators.entries())this.clearState.set(t,e.createMemento())}record(t,...e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const i=new Map;for(const s of e){if(!this.originators.has(s.mementoOriginatorKey))throw new Error(`Originator [${s.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(s.mementoOriginatorKey,s.createMemento())}this.history.push({label:t,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${t}]`)}undo(){const t=this.history[this.historyIndex];if(t){for(const e of t.mementos.keys()){const t=this.findPreviousMemento(e);if(t===al)throw new Error(`Could not find previous memento for [${e}].`);this.restoreMemento(e,t)}this.historyIndex-=1,this.debugEvent(`History undo: [${t.label}]`)}}redo(){const t=this.history[this.historyIndex+1];if(t){for(const[e,i]of t.mementos.entries())this.restoreMemento(e,i);this.historyIndex+=1,this.debugEvent(`History redo: [${t.label}]`)}}findPreviousMemento(t){for(let e=this.historyIndex-1;e>=0;e--)if(this.history[e].mementos.has(t))return this.history[e].mementos.get(t);return this.clearState.has(t)?this.clearState.get(t):al}restoreMemento(t,e){var i;null==(i=this.originators.get(t))||i.restoreMemento(nl,nl,e)}debugEvent(...t){this.debug(...t,this.history.map(((t,e)=>e===this.historyIndex?`** ${t.label} **`:t.label)))}},rl=class t{constructor(t){this.version=t.split("-")[0]}save(...t){const e={version:this.version};for(const i of Object.values(t))e[i.mementoOriginatorKey]=this.encode(i,i.createMemento());return e}restore(t,...e){if("object"==typeof t)if(null!=t)if("version"in t&&"string"==typeof t.version)for(const i of e){const e=this.decode(i,t[i.mementoOriginatorKey]),s=[];if(!i.guardMemento(e,s)){const t=s.length>0?`\n\n${s.join("\n\n")}\n\n`:"";return void n.warnOnce(`Could not restore [${i.mementoOriginatorKey}] data, value was invalid, ignoring.${t}`,e)}i.restoreMemento(this.version,t.version,e)}else n.warnOnce("Could not restore data, missing [version] string in object, ignoring.");else n.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");else n.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`)}encode(e,i){try{return JSON.parse(JSON.stringify(i,t.encodeTypes))}catch(s){throw new Error(`Failed to encode [${e.mementoOriginatorKey}] value [${s}].`,{cause:s})}}decode(e,i){if(null==i)return i;try{return JSON.parse(JSON.stringify(i),t.decodeTypes)}catch(s){throw new Error(`Failed to decode [${e.mementoOriginatorKey}] value [${s}].`,{cause:s})}}static encodeTypes(t,e){return w(this[t])?{__type:"date",value:this[t].toISOString()}:e}static decodeTypes(t,e){return E(this[t])&&"__type"in this[t]&&"date"===this[t].__type?new Date(this[t].value):e}},ll=class{constructor(){this.caretaker=new rl(nl),this.state=new Map}setState(t,e){qt(this.state.get(t.mementoOriginatorKey),e)||this.setStateAndRestore(t,e)}setStateAndRestore(t,e){this.state.set(t.mementoOriginatorKey,e),this.restoreState(t)}restoreState(t){const{caretaker:e,state:i}=this;if(!i.has(t.mementoOriginatorKey))return;const s=i.get(t.mementoOriginatorKey);e.restore({version:e.version,[t.mementoOriginatorKey]:s},t)}},cl=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const s=i.findIndex((e=>e.symbol===t));if(s>=0){i.splice(s,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(const s of this.getListenersByType(t))try{s.handler(...e)}catch(i){n.errorOnce(String(i))}}getListenersByType(t){return this.registeredListeners.get(t)??[]}destroy(){this.registeredListeners.clear()}},hl=class{constructor(){this.listeners=new cl,this.destroyFns=[]}addListener(t,e){return this.listeners.addListener(t,e)}destroy(){this.listeners.destroy(),this.destroyFns.forEach((t=>t()))}},dl=class t{constructor(t,e,i){this.element=t,this.topTabGuard=e,this.bottomTabGuard=i,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,(t=>this.onTab(t,!1))),this.initTabGuard(this.bottomTabGuard,(t=>this.onTab(t,!0))),this.element.addEventListener("focus",(()=>this.onFocus()),{capture:!0}),this.element.addEventListener("blur",(t=>this.onBlur(t)),{capture:!0})}set tabIndex(t){this.guardTabIndex=t,0===this.guardTabIndex?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(const t of this.destroyFns)t();this.destroyFns.length=0}initTabGuard(t,e){const i=()=>e(t);t.addEventListener("focus",i),this.destroyFns.push((()=>t.removeEventListener("focus",i)))}setGuardIndices(t){const e=t;Tr(this.topTabGuard,"tabindex",e),Tr(this.bottomTabGuard,"tabindex",e)}onFocus(){this.hasFocus=!0,0!==this.guardTabIndex&&this.setGuardIndices(0)}onBlur({relatedTarget:t}){const{topTabGuard:e,bottomTabGuard:i}=this;this.hasFocus=!1,0!==this.guardTabIndex&&t!==e&&t!==i&&this.setGuardIndices(this.guardTabIndex)}onTab(t,e){if(0!==this.guardTabIndex){let i;0===t.tabIndex?(i=this.findExitTarget(!e),this.setGuardIndices(this.guardTabIndex)):i=this.findEnterTarget(e),null==i||i.focus()}}static queryFocusable(t,e){const i=at();return Array.from(t.querySelectorAll(e)).filter((t=>{if(t instanceof HTMLElement){const e=i.getComputedStyle(t);return"none"!==e.display&&"none"!==e.visibility}return!1}))}findEnterTarget(e){const i=t.queryFocusable(this.element,'[tabindex="0"]');return i[e?i.length-1:0]}findExitTarget(e){const i=t.queryFocusable(nt(),"[tabindex]").filter((t=>t.tabIndex>0)).sort(((t,e)=>t.tabIndex-e.tabIndex)),{before:s,after:n}=t.findBeforeAndAfter(i,this.guardTabIndex);return e?s:n}static findBeforeAndAfter(t,e){let i,s,n=0,a=t.length-1;for(;n<=a;){const o=Math.floor((n+a)/2),r=t[o].tabIndex;if(r===e){i=t[o-1]||void 0,s=t[o+1]||void 0;break}r<e?(i=t[o],n=o+1):(s=t[o],a=o-1)}return{before:i,after:s}}};function ul(t,e,i,s,n){e.addEventListener(i,s);const a=()=>e.removeEventListener(i,s,n);return t.push(a),a}function pl(t,e,i){ul(t,e,"keydown",(t=>{"Escape"===t.key&&i(t)}))}function gl(t,e){if(e.target instanceof Element){const{x:i,y:s,width:n,height:a}=t.getBoundingClientRect(),{clientX:o,clientY:r}=e;return o>=i&&r>=s&&o<=i+n&&r<=s+a}return!1}function ml(t){return!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)}function yl(t,e,...i){return ml(t)&&(t.key===e||i.some((e=>t.key===e)))}function fl(t,e,i,s){i&&ul(t,e,"keydown",(t=>{yl(t,s)&&i.focus()}))}function xl(t,e,i,s,n,a){fl(t,e,n,a),fl(t,e,i,s),ul(t,e,"keydown",(t=>{yl(t,s,a)&&t.preventDefault()}))}var vl={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function bl(t){const{orientation:e,buttons:i,wrapAround:s=!1,onEscape:n,onFocus:a,onBlur:o}=t,{nextKey:r,prevKey:l}=vl[e],c=t=>{t.target&&"tabIndex"in t.target&&(i.forEach((t=>t.tabIndex=-1)),t.target.tabIndex=0)},[h,d]=s?[i.length,i.length]:[0,1/0],u=[];for(let p=0;p<i.length;p++){const t=i[(h+p-1)%d],e=i[p],s=i[(h+p+1)%d];ul(u,e,"focus",c),a&&ul(u,e,"focus",a),o&&ul(u,e,"blur",o),n&&pl(u,e,n),xl(u,e,s,r,t,l),e.tabIndex=0===p?0:-1}return u}var Ml=class{constructor(t,e,i){this.lastFocus=e,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(function(t,e,i){const s=ul(t,window,"mousedown",(t=>{[0,2].includes(t.button)&&!gl(e,t)&&(i(),s())}));return s}(this.destroyFns,t,(()=>this.close(!0)))),this.destroyFns.push(function(t,e,i){const s=ul(t,window,"touchstart",(t=>{Array.from(t.targetTouches).some((t=>!gl(e,t)))&&(i(),s())}));return s}(this.destroyFns,t,(()=>this.close(!0))))}close(t){this.destroyFns.forEach((t=>t())),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(t)}finishClosing(t){var e;this.destroyFns.forEach((t=>t())),this.destroyFns.length=0,Tr(this.lastFocus,"aria-expanded",!1),t||null==(e=this.lastFocus)||e.focus({preventScroll:!0}),this.lastFocus=void 0}};function Sl(t){var e;const{sourceEvent:i,orientation:s,menu:n,buttons:a,closeCallback:o,overrideFocusVisible:r,autoCloseOnBlur:l=!1}=t,{nextKey:c,prevKey:h}=vl[s],d=Al(i);Tr(d,"aria-expanded",!0);const u=new Ml(n,d,o),p=()=>u.close(),{destroyFns:g}=u;if(n.role="menu",n.ariaOrientation=s,g.push(...bl({orientation:s,buttons:a,onEscape:p,wrapAround:!0})),n.tabIndex=-1,pl(g,n,p),ul(g,n,"keydown",(t=>{var e;t.target!==n||t.key!==c&&t.key!==h||(t.preventDefault(),null==(e=a[0])||e.focus())})),l){const t=t=>{!a.includes(t.relatedTarget)&&p()};for(const e of a)ul(g,e,"blur",t)}if(null==(e=a[0])||e.focus({preventScroll:!0}),void 0!==r){a.forEach((t=>t.setAttribute("data-focus-visible-override",r.toString())));ul(g,n,"keydown",(()=>{a.forEach((t=>t.setAttribute("data-focus-visible-override","true")))}),{once:!0})}return u}function Il(t,e){return i=>{if("true"===t.ariaDisabled)return i.preventDefault();e(i)}}function Dl(t){return"button"in t?0===t.button:ml(t)&&("Space"===t.code||"Enter"===t.key)}function Al(t){if((null==t?void 0:t.target)instanceof HTMLElement&&"tabindex"in t.target.attributes)return t.target}function Ll(t){const e=t=>{if(t.defaultPrevented)return;Or(t.target,"data-preventdefault",!0)&&yl(t,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&t.preventDefault()};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)}var Nl=class{constructor(t){this.callback=t,this.devicePixelRatio=at("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=t=>{t.matches||(this.devicePixelRatio=at("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){var t;null==(t=this.devicePixelRatioMediaQuery)||t.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){var t;const e=null==(t=at("matchMedia"))?void 0:t(`(resolution: ${this.pixelRatio}dppx)`);null==e||e.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=e}},kl=class{constructor(){var t;let e;this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach((([t,e])=>this.observe(t,e))),this.queuedObserveRequests=[],this.observeWindow()},"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver((t=>{for(const{target:e,contentRect:{width:i,height:s}}of t){const t=this.elements.get(e);this.checkSize(t,e,i,s)}}))),this.pixelRatioObserver=new Nl((()=>{clearTimeout(e),e=setTimeout((()=>this.checkPixelRatio()),0)})),this.documentReady="complete"===nt("readyState"),this.documentReady?this.observeWindow():null==(t=at())||t.addEventListener("load",this.onLoad)}destroy(){var t,e,i;null==(t=at())||t.removeEventListener("load",this.onLoad),null==(e=this.resizeObserver)||e.disconnect(),this.resizeObserver=void 0,null==(i=this.pixelRatioObserver)||i.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){var t;null==(t=this.pixelRatioObserver)||t.observe()}checkPixelRatio(){var t;const e=(null==(t=this.pixelRatioObserver)?void 0:t.pixelRatio)??1;for(const[i,s]of this.elements)if(null!=s.size&&s.size.pixelRatio!==e){const{width:t,height:n}=s.size;s.size={width:t,height:n,pixelRatio:e},s.cb(s.size,i)}}checkSize(t,e,i,s){var n,a,o;if(t&&(i!==(null==(n=t.size)?void 0:n.width)||s!==(null==(a=t.size)?void 0:a.height))){const n=(null==(o=this.pixelRatioObserver)?void 0:o.pixelRatio)??1;t.size={width:i,height:s,pixelRatio:n},t.cb(t.size,e)}}observe(t,e){var i;if(!this.documentReady)return void this.queuedObserveRequests.push([t,e]);this.elements.has(t)?this.removeFromQueue(t):null==(i=this.resizeObserver)||i.observe(t);const s={cb:e};this.elements.set(t,s)}unobserve(t){var e;null==(e=this.resizeObserver)||e.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter((([e])=>e!==t))}},wl=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),void 0!==e&&super.set(t,e),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},Cl=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area"],Tl="ag-charts-wrapper--safe-horizontal",El="ag-charts-wrapper--safe-vertical",Ol=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}]]);var Rl={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>Rl};function jl(t,e){const i=lt("div");return i.className="ag-charts-tab-guard",t.insertAdjacentElement(e,i),i}var Pl=class extends hl{constructor(t,e){super(),this.styles=new Map,this.container=void 0,this.containerSize=void 0,this.sizeMonitor=new kl,this.cursorState=new wl("default"),this.minWidth=0,this.minHeight=0;const i=lt("div");i.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay"></div></div></div></div>',this.element=i.children.item(0),this.styleRootElement=e,this.rootElements=Cl.reduce(((t,e)=>{const i=`ag-charts-${e}`,s=this.element.classList.contains(i)?this.element:this.element.querySelector(`.${i}`);if(!s)throw new Error(`AG Charts - unable to find DOM element ${i}`);return t[e]={element:s,children:new Map,listeners:[]},t}),{});let s=!1;this.observer=function(t,e){if("undefined"==typeof IntersectionObserver)return;const i=new IntersectionObserver((i=>{for(const s of i)s.target===t&&e(s.intersectionRatio)}),{root:t});return i.observe(t),i}(this.element,(t=>{0!==t||s||this.listeners.dispatch("hidden",{type:"hidden"}),s=0===t})),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{display:block;pointer-events:none}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-foreground-color: #464646;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-padding: 20px;--ag-charts-shadow-color: #00000080;--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #464646;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-input-background-color: #fff;--ag-charts-input-text-color: #464646;--ag-charts-crosshair-label-background-color: #fff;--ag-charts-crosshair-label-text-color: #464646;--ag-charts-spacing: 4px;--ag-charts-border-radius: 4px;--ag-charts-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-focus-shadow: 0 0 0 3px var(--ag-charts-accent-color);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-background-color: var(--ag-charts-background-color);--ag-charts-button-border-color: var(--ag-charts-border-color);--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-text-color: var(--ag-charts-text-color);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: solid 1px var(--ag-charts-border-color);--ag-charts-focus-border: solid 1px var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-chrome-text-color);background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);box-shadow:var(--ag-charts-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{padding:3px 6px}.ag-charts-tooltip--arrow:before{content:"";position:absolute;top:100%;left:50%;margin:0 auto;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(45deg);display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-top:none;border-left:none;clip-path:polygon(0% 100%,100% 0%,100% 100%)}.ag-charts-tooltip--arrow:after{--tooltip-inner-size: calc(var(--tooltip-arrow-size) - 2px);content:"";position:absolute;top:100%;left:50%;margin:0 auto;transform:translate(-50%) translateY(calc(var(--tooltip-inner-size) * -.5)) rotate(45deg);display:block;width:var(--tooltip-inner-size);height:var(--tooltip-inner-size);border:inherit;border-color:transparent;background:inherit;clip-path:polygon(-10% 100%,100% -10%,100% 100%)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:8px}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;align-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:16px;align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-chrome-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-chrome-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);color:var(--ag-charts-chrome-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}\n'),t&&this.setContainer(t),this.destroyFns.push(Ll(this.element));const n=this.element.querySelector(".ag-charts-canvas-center");if(null==n)throw new Error("Error initializing tab guards");const a=jl(n,"beforebegin"),o=jl(n,"afterend");this.tabGuards=new dl(n,a,o)}destroy(){var t;super.destroy(),null==(t=this.observer)||t.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach((t=>{t.children.forEach((t=>t.remove())),t.element.remove()})),this.element.remove()}setSizeOptions(t=300,e=300,i,s){const{style:n}=this.element;n.width=`${i??t}px`,n.height=`${s??e}px`,this.minWidth=i??t,this.minHeight=s??e,this.updateContainerClassName()}updateContainerSize(){const{style:t}=this.rootElements["canvas-center"].element;t.visibility=null==this.containerSize?"hidden":"",this.containerSize?(t.width=`${this.containerSize.width??0}px`,t.height=`${this.containerSize.height??0}px`):(t.width="",t.height=""),this.updateContainerClassName()}setTabGuardIndex(t){this.tabGuards.tabIndex=t}setContainer(t){if(t===this.container)return;this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container));if(!(null!=this.getShadowDocumentRoot(t)))for(const e of this.rootElements.styles.children.keys())this.removeChild("styles",e);this.container=t;for(const[e,i]of this.styles)this.addStyles(e,i);t.appendChild(this.element),this.sizeMonitor.observe(t,(t=>{this.containerSize=t,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})})),this.listeners.dispatch("container-changed",{type:"container-changed"})}setThemeClass(t){this.element.classList.forEach((e=>{e.startsWith("ag-charts-theme-")&&e!==t&&this.element.classList.remove(e)})),this.element.classList.add(t)}setThemeParameters(t){const e={accentColor:"accent-color",axisColor:"axis-color",backgroundColor:"background-color",borderColor:"border-color",foregroundColor:"foreground-color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",gridLineColor:"grid-line-color",padding:"padding",subtleTextColor:"subtle-text-color",textColor:"text-color",chromeBackgroundColor:"chrome-background-color",chromeFontFamily:"chrome-font-family",chromeFontSize:"chrome-font-size",chromeFontWeight:"chrome-font-weight",chromeSubtleTextColor:"chrome-subtle-text-color",chromeTextColor:"chrome-text-color",inputBackgroundColor:"input-background-color",inputTextColor:"input-text-color",crosshairLabelBackgroundColor:"crosshair-label-background-color",crosshairLabelTextColor:"crosshair-label-text-color"},i=["fontSize","chromeFontSize"];for(const[s,n]of Object.entries(t)){let t=`${n}`;i.includes(s)&&(t=`${n}px`),this.element.style.setProperty(`--ag-charts-${e[s]}`,t)}}updateCanvasLabel(t){Tr(this.rootElements["canvas-proxy"].element,"aria-label",t)}getEventElement(t,e){return["focus","blur","keydown","keyup"].includes(e)?this.rootElements["series-area"].element:t}addEventListener(t,e,i){this.getEventElement(this.element,t).addEventListener(t,e,i)}removeEventListener(t,e,i){this.getEventElement(this.element,t).removeEventListener(t,e,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){var t;const e=at(),i=new Et(0,0,e.innerWidth,e.innerHeight),s=this.getRawOverlayClientRect();return(null==(t=i.intersection(s))?void 0:t.toDOMRect())??Rl}getRawOverlayClientRect(){var t,e;let i=this.element;for(;null!=i;){const s=null==(t=i.computedStyleMap)?void 0:t.call(i),n=null==(e=null==s?void 0:s.get("overflow-y"))?void 0:e.toString();if("auto"===n||"scroll"===n)return Et.fromDOMRect(i.getBoundingClientRect());i=i.parentElement}const s=this.getShadowDocumentRoot();if(null!=s)return Et.fromDOMRect(s.getBoundingClientRect());const{innerWidth:n,innerHeight:a}=at();return new Et(0,0,n,a)}getShadowDocumentRoot(t=this.container){var e;const i=(null==(e=null==t?void 0:t.ownerDocument)?void 0:e.body)??nt("body");for(;null!=t;){if(t===i)return;if(t.parentNode instanceof DocumentFragment)return t;t=t.parentNode}return this.container}getParent(t){return this.rootElements[t].element}getChildBoundingClientRect(t){const{children:e}=this.rootElements[t],i=[];for(const s of e.values())i.push(Et.fromDOMRect(s.getBoundingClientRect()));return Et.merge(i)}isManagedChildDOMElement(t,e,i){const{children:s}=this.rootElements[e],n=null==s?void 0:s.get(i);return null!=n&&t.contains(n)}contains(t,e){return null==e?this.element.contains(t):this.rootElements[e].element.contains(t)}addStyles(t,e){const i="data-ag-charts";if(this.styles.set(t,e),null==this.container)return;const s=e=>e.getAttribute(i)===t,n=t=>{const e=new Set(["TITLE","META"]);let n,a=!0;for(const r of t.children)if(a&&e.has(r.tagName))n=r;else{if(a=!1,s(r))return;r.hasAttribute(i)&&(n=r)}const o=lt("style");return null!=n?t.insertBefore(o,n.nextSibling):t.prepend(o),o};let a;if(this.styleRootElement)a=n(this.styleRootElement);else{a=null!=this.getShadowDocumentRoot(this.container)?this.addChild("styles",t):n(nt("head"))}null==a||s(a)||(a.setAttribute(i,t),a.innerHTML=e)}removeStyles(t){this.removeChild("styles",t)}updateCursor(t,e){this.cursorState.set(t,e),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(t,e,i,s){const{element:n,children:a,listeners:o}=this.rootElements[t];if(!a)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(a.has(e))return a.get(e);const{childElementType:r="div"}=Ol.get(t)??{};if(i&&i.tagName.toLowerCase()!==r.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const l=i??lt(r);for(const[c,h,d]of o)l.addEventListener(c,h,d);if(a.set(e,l),s){const t=n.querySelector(s.query);if(null==t)throw new Error(`AG Charts - addChild query failed ${s.query}`);t.insertAdjacentElement(s.where,l)}else null==n||n.appendChild(l);return l}removeChild(t,e){var i;const{children:s}=this.rootElements[t];s&&(null==(i=s.get(e))||i.remove(),s.delete(e))}incrementDataCounter(t){const{dataset:e}=this.element;e[t]??(e[t]="0"),e[t]=String(Number(e[t])+1)}setDataBoolean(t,e){this.element.dataset[t]=String(e)}updateContainerClassName(){const{element:t,containerSize:e,minWidth:i,minHeight:s}=this;t.classList.toggle(Tl,i>=((null==e?void 0:e.width)??1/0)),t.classList.toggle(El,s>=((null==e?void 0:e.height)??1/0))}},zl=class extends Xr{constructor(){super(lt("div")),this.textElement=ct("text"),this.textElement.role="presentation",this.svgElement=ct("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(t){var e;this.textElement.textContent=t;const i=this.textElement,s=null==(e=i.getBBox)?void 0:e.call(i);s&&this.svgElement.setAttribute("viewBox",`${s.x} ${s.y} ${s.width} ${s.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},Bl=class extends Xr{constructor(){super(lt("button")),this.setEnabled(!0)}destructor(){}setEnabled(t){Tr(this.elem,"aria-disabled",!t),Rr(this.elem,"pointer-events",t?void 0:"none")}addListener(t,e){return super.addListener(t,((i,s)=>{("click"!==t&&"dblclick"!==t||!this.isDisabled())&&e(i,s)}))}},Fl=class extends Xr{constructor(){super(lt("div")),Tr(this.elem,"role","group")}destructor(){}},Gl=class extends Xr{constructor(t,e){super(lt("div")),this.focusedChildIndex=0,this.onChildFocus=(t,e)=>{const i=this.children[this.focusedChildIndex];this.focusedChildIndex=e.index,null==i||i.setTabIndex(-1),e.setTabIndex(0)},this.onChildKeyDown=(t,e)=>{var i;const s=this.orientation,[n,a]="both"===s?[vl.horizontal,vl.vertical]:[vl[s],void 0];let o=-1;if(ml(t.sourceEvent)){const i=t.sourceEvent.key;i===n.nextKey||i===(null==a?void 0:a.nextKey)?o=e.index+1:i!==n.prevKey&&i!==(null==a?void 0:a.prevKey)||(o=e.index-1)}null==(i=this.children[o])||i.focus()},this.orientation=t,Tr(this.elem,"role",e)}get orientation(){return Or(this.elem,"aria-orientation")??"both"}set orientation(t){Tr(this.elem,"aria-orientation","both"!==t?t:void 0)}focus(){var t;null==(t=this.children[this.focusedChildIndex])||t.focus()}onChildAdded(t){t.addListener("focus",this.onChildFocus),t.addListener("keydown",this.onChildKeyDown),t.setTabIndex(1===this.children.length?0:-1)}onChildRemoved(t){t.removeListener("focus",this.onChildFocus),t.removeListener("keydown",this.onChildKeyDown)}},Ul=class extends Gl{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach((t=>t.getElement().parentElement.remove()))}addChildToDOM(t,e){const i=lt("div");Tr(i,"role","listitem"),Rr(i,"position","absolute"),Xr.setElementContainer(t,i),this.appendOrInsert(i,e),this.setHidden(!1)}removeChildFromDOM(t){t.getElement().parentElement.remove(),this.setHidden(0===this.children.length)}setHidden(t){0===this.children.length&&(t=!0),super.setHidden(t)}},Yl=class extends Xr{constructor(t){super(t)}destructor(){}},Wl=class t extends Xr{constructor(){super(lt("input")),this._step=t.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(t){this._step=t,this.getElement().step=t.attributeValue}get keyboardStep(){var t;return(null==(t=this._keyboardStep)?void 0:t.step)??this._step}set keyboardStep(t){var e;if(t!==(null==(e=this._keyboardStep)?void 0:e.step)&&(void 0!==this._keyboardStep&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),void 0!==t)){const e=()=>this.getElement().step=t.attributeValue,i=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:t,onKeyDown:e,onKeyUp:i,onBlur:i},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return Or(this.elem,"aria-orientation")??"both"}set orientation(e){Tr(this.elem,"aria-orientation","both"!==e?e:void 0),t.registerDefaultPreventers(this,e)}destructor(){}clampValueRatio(t,e){const i=this.getValueRatio(),s=bt(t,i,e);return s!==i&&this.setValueRatio(s),s}setValueRatio(t,e){const{divider:i}=this.step,s=Math.round(1e4*t)/i,{ariaValueText:n=Ga(s/i)}=e??{},a=this.getElement();a.value=`${s}`,a.ariaValueText=n}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(e,i){"both"===i?e.removeListener("keydown",t.onKeyDown):e.addListener("keydown",t.onKeyDown)}static onKeyDown(t,e){let i=[];const{orientation:s}=e;"horizontal"===s?i=["ArrowUp","ArrowDown"]:"vertical"===s&&(i=["ArrowLeft","ArrowRight"]),i.includes(t.sourceEvent.code)&&t.sourceEvent.preventDefault()}};Wl.STEP_ONE={attributeValue:"1",divider:1},Wl.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var Vl=Wl,_l=class extends Bl{constructor(){super(),Tr(this.elem,"role","switch"),this.setChecked(!1)}setChecked(t){Tr(this.elem,"aria-checked",t)}},Hl=class extends Gl{constructor(t="horizontal"){super(t,"toolbar")}destructor(){}};function Zl(t,e){var i;return(null==(i=e.params)?void 0:i.type)===t}function Kl(t){const e={params:t,result:void 0};return e.result=function(t){if("button"===t)return new Bl;if("slider"===t)return new Vl;if("toolbar"===t)return new Hl;if("group"===t)return new Fl;if("list"===t)return new Ul;if("region"===t)return new Yl(lt("div"));if("text"===t)return new zl;if("listswitch"===t)return new _l;throw Error("AG Charts - error allocating meta")}(e.params.type),e}var $l=class{constructor(t,e){this.localeManager=t,this.domManager=e,this.destroyFns=[]}destroy(){this.destroyFns.forEach((t=>t()))}addLocalisation(t){t(),this.destroyFns.push(this.localeManager.addListener("locale-changed",t))}createProxyContainer(t){const e=Kl(t),{params:i,result:s}=e,n=s.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,n),n.classList.add(...i.classList,"ag-charts-proxy-container"),n.role=i.type,"ariaOrientation"in i&&(n.ariaOrientation=i.ariaOrientation),Zl("toolbar",e)&&(e.result.orientation=e.params.orientation),this.addLocalisation((()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)})),s}createProxyElement(t){const e=Kl(t);if(Zl("button",e)){const{params:t,result:i}=e,s=i.getElement();if(this.initInteract(t,i),"string"==typeof t.textContent)s.textContent=t.textContent;else{const{textContent:e}=t;this.addLocalisation((()=>{s.textContent=this.localeManager.t(e.id,e.params)}))}this.setParent(e.params,e.result)}if(Zl("slider",e)){const{params:t,result:i}=e,s=i.getElement();this.initInteract(t,i),s.type="range",s.role="presentation",s.style.margin="0px",this.addLocalisation((()=>{s.ariaLabel=this.localeManager.t(t.ariaLabel.id,t.ariaLabel.params)})),this.setParent(e.params,e.result)}if(Zl("text",e)){const{params:t,result:i}=e;this.initElement(t,i),this.setParent(e.params,e.result)}if(Zl("listswitch",e)){const{params:t,result:i}=e;this.initInteract(t,i),i.setTextContent(t.textContent),i.setChecked(t.ariaChecked),i.setAriaDescribedBy(t.ariaDescribedBy),this.setParent(e.params,e.result)}if(Zl("region",e)){const{params:t,result:i}=e,s=i.getElement();this.initInteract(t,i),s.role="region",this.setParent(e.params,e.result)}return e.result}initElement(t,e){const i=e.getElement();return Tr(i,"id",t.id),Rr(i,"cursor",t.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(t,e){const{tabIndex:i,domIndex:s}=t,n=this.initElement(t,e);void 0!==i&&(n.tabIndex=i),void 0!==s&&(e.domIndex=s)}setParent(t,e){var i;if("parent"in t)null==(i=t.parent)||i.addChild(e);else{const i={where:t.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",t.domManagerId,e.getElement(),i)}}},Xl={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}"},Ql=/\$\{(\w+)}(?:\[(\w+)])?/gi,ql={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},Jl=class extends cl{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(t){this.localeText!==t&&(this.localeText=t,this.dispatch("locale-changed"))}setLocaleTextFormatter(t){this.getLocaleText=t,this.getLocaleText!==t&&(this.getLocaleText=t,this.dispatch("locale-changed"))}t(t,e={}){const{localeText:i=Xl,getLocaleText:s}=this,a=i[t];return(null==s?void 0:s({key:t,defaultValue:a,variables:e}))??(({defaultValue:t,variables:e})=>null==t?void 0:t.replaceAll(Ql,((t,i,s)=>{const a=e[i],o=null!=s?ql[s]:null;return null!=s&&null==o&&n.warnOnce(`Format style [${s}] is not supported`),null!=o?o.format(a):"number"==typeof a?ql.number.format(a):a instanceof Date?ql.datetime.format(a):String(a)})))({key:t,defaultValue:a,variables:e})??t}},tc=class{constructor(t){this.enabled=!0,this.width=600,this.height=300;const{width:e,height:i,canvasElement:s,willReadFrequently:n=!1}=t;this.pixelRatio=t.pixelRatio??at("devicePixelRatio")??1,this.element=s??lt("canvas"),this.element.style.display="block",this.element.style.width=(e??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((e??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:n}),this.onEnabledChange(),this.resize(e??0,i??0,this.pixelRatio),Rs(this.context)}drawImage(t,e=0,i=0){return t.drawImage(this.context.canvas,e,i)}toDataURL(t){return this.element.toDataURL(t)}resize(t,e,i){if(!(t>0&&e>0))return;const{element:s,context:n}=this;s.width=Math.round(t*i),s.height=Math.round(e*i),n.setTransform(i,0,0,i,0,0),s.style.width=t+"px",s.style.height=e+"px",this.width=t,this.height=e,this.pixelRatio=i}clear(){Os(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};s([$n((t=>t.onEnabledChange()))],tc.prototype,"enabled",2);var ec=class{constructor(t){this.canvas=t,this.debug=Es.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(t,e,i){this.canvas.resize(t,e,i),this.layersMap.forEach((({canvas:s})=>s.resize(t,e,i)))}addLayer(t){const{width:e,height:i,pixelRatio:s}=this.canvas,{name:n}=t,a=new Ps({width:e,height:i,pixelRatio:s});return this.layersMap.set(a,{id:this.nextLayerId++,name:n,canvas:a}),this.debug("Scene.addLayer() - layers",this.layersMap),a}removeLayer(t){this.layersMap.has(t)&&(this.layersMap.delete(t),t.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const t of this.layersMap.values())t.canvas.destroy();this.layersMap.clear()}};function ic(t){for(const e of["B","KB","MB","GB"]){if(t<1536)return`${t.toFixed(1)}${e}`;t/=1024}return`${t.toFixed(1)}TB}`}function sc(t,e,i,s,n={},a=Et.zero){if(!Es.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:o=0,layersSkipped:r=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:h=0,opsSkipped:d=0}=s??{},u=performance.now(),{start:p,...g}=e,m=Object.entries(g).map((([t,e])=>hc(t,e))).filter((t=>null!=t)).join(" + "),y=Object.entries(n).map((([t,e])=>`${t}: ${JSON.stringify(e)}`)).join(" ; "),f=Es.check("scene:stats:verbose"),x=function(){if(!("memory"in performance))return;const{totalJSHeapSize:t,usedJSHeapSize:e,jsHeapSizeLimit:i}=performance.memory,s=[];for(const n of[e,t,i])"number"==typeof n&&s.push(ic(n));return`Heap ${s.join(" / ")}`}(),v=[`${hc("⏱️",p,u)} (${m})`,`${y}`,`Layers: ${f?cc(o,r):t.size}`,f?`Nodes: ${cc(l,c)}`:null,f?`Ops: ${cc(h,d)}`:null,f&&x?x:null].filter(R),b=new En((t=>i.measureText(t))),M=new Map(v.map((t=>[t,b.measureLines(t)]))),S=Math.max(...Array.from(M.values(),(t=>t.width))),I=function(t,e){let i=0;for(const s of t)i+=e(s);return i}(M.values(),(t=>t.height)),D=2+a.x;i.save(),i.fillStyle="white",i.fillRect(D,0,S,I),i.fillStyle="black";let A=0;for(const[L,N]of M.entries())A+=N.height,i.fillText(L,D,A);i.restore()}var nc=new Set,ac=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function oc(t){const{...e}=t;for(const i of Object.keys(e))ac.has(i)||"number"!=typeof e[i]&&"string"!=typeof e[i]&&"boolean"!=typeof e[i]&&(nc.add(i),delete e[i]);return e}function rc(t,e){if(!Es.check(!0,"scene"))return{};let i=0;return{node:"json"===e?oc(t):t,name:t.name??t.id,dirty:t.dirty,...Array.from(t.children(),(t=>rc(t,e))).reduce(((t,e)=>{let{name:s}=e;const{node:{visible:n,opacity:a,zIndex:o,translationX:r,translationY:l,rotation:c,scalingX:h,scalingY:d},node:u}=e;(!n||a<=0)&&(s=`(${s})`),In.is(u)&&u.renderToOffscreenCanvas&&(s=`*${s}*`);const p=Array.isArray(o)?`(${o.join(", ")})`:o,g=[`${(i++).toString().padStart(3,"0")}|`,`${s??"<unknown>"}`,`z: ${p}`,r&&`x: ${r}`,l&&`y: ${l}`,c&&`r: ${c}`,null!=h&&1!==h&&`sx: ${h}`,null!=d&&1!==d&&`sy: ${d}`].filter((t=>!!t)).join(" ");let m=g,y=1;for(;null!=t[m]&&y<100;)m=`${g} (${y++})`;return t[m]=e,t}),{})}}function lc(t){if(!t.dirty)return{dirtyTree:{},paths:[]};const e=Array.from(t.children(),(t=>lc(t))).filter((t=>t.paths.length>0)),i=In.is(t)?t.name??t.id:t.id,s=e.length?e.flatMap((t=>t.paths)).map((t=>`${i}.${t}`)):[i];return{dirtyTree:{name:i,node:t,dirty:t.dirty,...e.map((t=>t.dirtyTree)).filter((t=>null!=t.dirty)).reduce(((t,e)=>(t[e.name??"<unknown>"]=e,t)),{})},paths:s}}function cc(t,e){const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`}function hc(t,e,i){const s=null!=i?i-e:e;return`${t}: ${Math.round(100*s)/100}ms`}var dc=class{constructor(t){this.debug=Es.create(!0,"scene"),this.id=pt(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.canvas=new tc(t),this.layersManager=new ec(this.canvas)}get width(){var t;return(null==(t=this.pendingSize)?void 0:t[0])??this.canvas.width}get height(){var t;return(null==(t=this.pendingSize)?void 0:t[1])??this.canvas.height}get pixelRatio(){var t;return(null==(t=this.pendingSize)?void 0:t[2])??this.canvas.pixelRatio}setContainer(t){var e;const{element:i}=this.canvas;return null==(e=i.parentElement)||e.removeChild(i),t.appendChild(i),this}setRoot(t){var e;return this.root===t||(this.isDirty=!0,null==(e=this.root)||e._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager))),this}clear(){this.canvas.clear()}attachNode(t){return this.appendChild(t),()=>this.removeChild(t)}appendChild(t){var e;return null==(e=this.root)||e.appendChild(t),this}removeChild(t){var e;return null==(e=this.root)||e.removeChild(t),this}download(t,e){ht(this.canvas.toDataURL(e),(null==t?void 0:t.trim())??"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e,i){return t=Math.round(t),e=Math.round(e),i??(i=this.pixelRatio),t>0&&e>0&&(t!==this.width||e!==this.height||i!==this.pixelRatio)&&(this.pendingSize=[t,e,i],this.isDirty=!0,!0)}render(t){var e;const{debugSplitTimes:i={start:performance.now()},extraDebugStats:s,seriesRect:a}=t??{},{canvas:o,canvas:{context:r}={},root:l,pendingSize:c,width:h,height:d,pixelRatio:u}=this;if(!r)return;const p=performance.now();if(c&&(this.layersManager.resize(...c),this.pendingSize=null),l&&!l.visible)return void(this.isDirty=!1);if(!1===(null==l?void 0:l.dirty)&&!this.isDirty)return this.debug.check()&&this.debug("Scene.render() - no-op",{tree:rc(l,"console")}),void sc(this.layersManager,i,r,void 0,s,a);const g={ctx:r,width:h,height:d,devicePixelRatio:u,debugNodes:{}};Es.check("scene:stats:verbose")&&(g.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),function(t){const e=y(at("agChartsSceneDebug")),i=[];for(const s of e)"layout"===s?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(s);t.debugNodeSearch=i}(g);let m=!1;if(!1!==(null==l?void 0:l.dirty)&&(m=!0,o.clear()),l&&Es.check("scene:dirtyTree")){const{dirtyTree:t,paths:e}=lc(l);Es.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}if(l&&m){if(l.visible&&l.preRender(g),this.debug.check()){const t=rc(l,"console");this.debug("Scene.render() - before",{canvasCleared:m,tree:t})}l.visible&&(r.save(),l.render(g),r.restore())}i["✍️"]=performance.now()-p,null==(e=r.verifyDepthZero)||e.call(r),this.isDirty=!1,sc(this.layersManager,i,r,g.stats,s,a),function(t,e){t.save();for(const[i,s]of Object.entries(e)){const e=vn.toCanvas(s);e?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,e.x,e.y,e.width),t.fillText(i,e.x,e.y,e.width)):n.log(`Scene.render() - no bbox for debugged node [${i}].`)}t.restore()}(r,g.debugNodes),l&&this.debug.check()&&this.debug("Scene.render() - after",{tree:rc(l,"console"),canvasCleared:m})}toSVG(){const{root:t,width:e,height:i}=this;if(null!=t)return zt.toSVG(t,e,i)}strip(){const{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};dc.className="Scene";var uc=class{constructor(){this.cache=new WeakMap}call(t,...e){let i,s=this.cache.get(t);try{i=JSON.stringify(e)}catch{return this.invoke(t,e,s)}return null==s&&(s=new Map,this.cache.set(t,s)),s.has(i)?s.get(i):this.invoke(t,e,s,i)}invoke(t,e,i,s){try{const n=t(...e);return i&&null!=s&&i.set(s,n),n}catch(a){return void n.warnOnce("User callback errored, ignoring",a)}}invalidateCache(){this.cache=new WeakMap}},pc=class extends hl{constructor(t){super(),this.annotationRoot=t,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(t){return null==t||N(t)}restoreMemento(t,e,i){this.annotations=this.cleanData(i??[]).map((t=>te(t,this.getAnnotationTypeStyles(t.type)))),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(t){this.annotations=this.cleanData(t??[])}attachNode(t){return this.annotationRoot.append(t),()=>{var e;return null==(e=this.annotationRoot)||e.removeChild(t),this}}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){var e;return null==(e=this.styles)?void 0:e[t]}cleanData(t){for(const e of t)"textAlign"in e&&delete e.textAlign;return t}},gc=class{constructor(t){this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new In({name:"Axes-Grids",zIndex:1}),this.axisGroup=new In({name:"Axes",zIndex:2}),this.axisLabelGroup=new In({name:"Axes-Labels",zIndex:13}),this.axisCrosslineRangeGroup=new In({name:"Axes-Crosslines-Range",zIndex:4}),this.axisCrosslineLineGroup=new In({name:"Axes-Crosslines-Line",zIndex:8}),this.axisCrosslineLabelGroup=new In({name:"Axes-Crosslines-Label",zIndex:13}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(t,e){var i;const s={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of t)e.includes(n)||(n.detachAxis(s),n.destroy());for(const n of e)(null==t?void 0:t.includes(n))||n.attachAxis(s);this.axes.clear();for(const n of e){const t=n.createAxisContext();this.axes.has(t.direction)?null==(i=this.axes.get(t.direction))||i.push(t):this.axes.set(t.direction,[t])}}getAxisContext(t){return this.axes.get(t)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},mc=class extends cl{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=Es.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){"function"==typeof t&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return S((t=>this.fetch(t).catch((t=>n.error("callback failed",t)))),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return S(((t,e)=>{this.debug(`DataService - dispatching 'data-load' | ${t}`),this.dispatch("data-load",{type:"data-load",data:e})}),t,{leading:!0,trailing:!0})}async fetch(t){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;let s;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);try{s=await this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${i}`)}catch(o){this.debug(`DataService - request failed | ${i}`),n.errorOnce(`DataService - request failed | [${o}]`)}this.isLoadingInitialData=!1;const a=this.freshRequests.findIndex((t=>t===i));-1===a||this.dispatchOnlyLatest&&a!==this.freshRequests.length-1?this.debug(`DataService - discarding stale request | ${i}`):(this.freshRequests=this.freshRequests.slice(a+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error"))}};s([Kn({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],mc.prototype,"dispatchThrottle",2),s([Kn({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],mc.prototype,"requestThrottle",2);var yc=class{constructor(t){this.maxAnimationTime=t,this.debug=Es.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(ve.map((t=>[t,[]]))),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(ve[this.currentPhase])??[]}checkOverlappingId(t){null!=t&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){var e;if(t.isComplete)return;if(ve.indexOf(t.phase)<this.currentPhase)return this.debug("Skipping animation due to being for an earlier phase",t.id),void t.stop();this.controllers.set(t.id,t),null==(e=this.phases.get(t.phase))||e.push(t)}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=null==e?void 0:e.indexOf(t);null!=i&&i>=0&&(null==e||e.splice(i,1))}progress(t){if(!this.isReady)return;let e=0===t?.01:t;const i=()=>{const t=ve[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:t,phaseMeta:be[t]}};let{phase:s,phaseControllers:n,phaseMeta:a}=i();const o=()=>null==ve[this.currentPhase],r=()=>{for(({phase:s,phaseControllers:n,phaseMeta:a}=i());!o()&&0===n.length;)this.currentPhase++,({phase:s,phaseControllers:n,phaseMeta:a}=i()),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:e},n)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${s} with ${null==n?void 0:n.length} of ${l}`);do{const t=e,i=a.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed;let s=0;for(const a of n)i?a.stop():e=Math.min(a.update(t),e),a.isComplete&&(s++,this.removeAnimation(a));this.animationTimeConsumed+=t-e,this.debug(`AnimationBatch - updated ${n.length} controllers; ${s} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),r()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(const[,e]of this.controllers)if(e.duration>0&&!0!==be[e.phase].skipIfNoEarlierAnimations){t=!1;break}if(!t)for(const[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(t=!0){if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){n.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(t){if(null!=t&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach((t=>t())),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}},fc=(t=>(t[t.Default=32]="Default",t[t.ZoomDrag=16]="ZoomDrag",t[t.Annotations=8]="Annotations",t[t.ContextMenu=4]="ContextMenu",t[t.Animation=2]="Animation",t[t.AnnotationsSelected=1]="AnnotationsSelected",t[t.Clickable=41]="Clickable",t[t.Focusable=34]="Focusable",t[t.Keyable=43]="Keyable",t[t.ContextMenuable=36]="ContextMenuable",t[t.AnnotationsMoveable=9]="AnnotationsMoveable",t[t.AnnotationsDraggable=57]="AnnotationsDraggable",t[t.ZoomDraggable=50]="ZoomDraggable",t[t.ZoomClickable=34]="ZoomClickable",t[t.ZoomWheelable=59]="ZoomWheelable",t[t.All=63]="All",t))(fc||{}),xc=class{constructor(){this.stateQueue=34}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}isState(t){return!!(this.stateQueue&-this.stateQueue&t)}};function vc(t){return null==t||!isNaN(t)&&t>=0&&t<=2}var bc=class{constructor(t,e){this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new yc(1.5*this.defaultDuration),this.debug=Es.create(!0,"animation"),this.events=new m,this.rafAvailable="undefined"!=typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(t,e){return this.events.on(t,e)}animate(t){const e=this.batch;try{e.checkOverlappingId(t.id)}catch(r){return void this.failsafeOnError(r)}let{id:i}=t;null==i&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const s=this.isSkipped()||"none"===t.phase;s&&this.debug("AnimationManager - skipping animation");const{delay:n,duration:a}=t;if(!vc(n))throw new Error(`Animation delay of ${n} is unsupported (${i})`);if(!vc(a))throw new Error(`Animation duration of ${a} is unsupported (${i})`);const o=new De({...t,id:i,skip:s,autoplay:!!this.isPlaying&&t.autoplay,phase:t.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(o,this.defaultDuration))return this.batch.addAnimation(o),o}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=at().requestAnimationFrame((e=>{t(e).catch((t=>n.error(t)))}))}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable)return;if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=async i=>{const s=()=>{const e=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:e}),this.interactionManager.pushState(2);try{this.batch.progress(e)}catch(s){this.failsafeOnError(s)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:e})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(s):await this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){n.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new yc(1.5*this.defaultDuration),!0===t&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}destroy(){this.stop(),this.events.clear()}},Mc=class extends hl{seriesEvent(t){this.listeners.dispatch(t,{type:t})}seriesKeyNavZoom(t,e){const i={type:"series-keynav-zoom",delta:t,widgetEvent:e};this.listeners.dispatch("series-keynav-zoom",i)}legendItemClick(t,e,i,s,n){const a={type:"legend-item-click",legendType:t,series:e,itemId:i,enabled:s,legendItemName:n};this.listeners.dispatch("legend-item-click",a)}legendItemDoubleClick(t,e,i,s,n,a){const o={type:"legend-item-double-click",legendType:t,series:e,itemId:i,enabled:s,legendItemName:a,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",o)}},Sc=class{constructor(){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new cl}static check(t,e){return e.type===t}static checkCallback(t,e,i){return t===e}dispatchContext(t,e,i,s){const{sourceEvent:n}=e,a=(null==s?void 0:s.x)??e.canvasX,o=(null==s?void 0:s.y)??e.canvasY;n.stopPropagation();const r={type:t,x:a,y:o,context:i,sourceEvent:n};this.listeners.dispatch("",r)}addListener(t){return this.listeners.addListener("",t)}filterActions(t){return this.defaultActions.filter((e=>null!=e.id&&!this.hiddenActions.has(e.id)&&["all",t].includes(e.type)))}registerDefaultAction(t){const e=null!=t.id&&!this.defaultActions.some((({id:e})=>e===t.id));return e&&this.defaultActions.push(t),()=>{const i=e?this.defaultActions.findIndex((({id:e})=>e===t.id)):-1;-1!==i&&this.defaultActions.splice(i,1)}}enableAction(t){this.disabledActions.delete(t)}disableAction(t){this.disabledActions.add(t)}showAction(t){this.hiddenActions.add(t)}hideAction(t){this.hiddenActions.delete(t)}isDisabled(t){return this.disabledActions.has(t)}},Ic=class extends hl{constructor(){super(...arguments),this.highlightStates=new wl}updateHighlight(t,e){const{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:t})}getActiveHighlight(){return this.activeHighlight}isEqual(t,e){return t===e||null!=t&&null!=e&&(null==t?void 0:t.series)===(null==e?void 0:e.series)&&(null==t?void 0:t.itemId)===(null==e?void 0:e.itemId)&&(null==t?void 0:t.datum)===(null==e?void 0:e.datum)}};function Dc(t,e){if(null==t||0===e.length)return[!1,!1];const i=t.valueOf(),s=e[0],n=e[e.length-1];if("string"==typeof s)return[i===s,i===n];let a=s.valueOf(),o=n.valueOf();return a>o&&([a,o]=[o,a]),[i===a,i===o]}function Ac(t,e,i,s,n){const{xValue:a,yValue:o}=t,[r,l]=Dc(o,n),[c,h]=Dc(a,s);return{datum:t,xKey:e,yKey:i,xValue:a,yValue:o,first:c,last:h,min:r,max:l}}function Lc(t,[e,i],s){const n=M(0,t-1,(t=>{var i;const n=(null==(i=s(t))?void 0:i[1])??NaN;return!Number.isFinite(n)||n>e}))??0;let a=b(0,t-1,(t=>{var e;const n=(null==(e=s(t))?void 0:e[0])??NaN;return!Number.isFinite(n)||n<i}))??t-1;return a=Math.min(a+1,t),[n,a]}function Nc(t,e){var i,s;const n=(null==(i=e.yBar)?void 0:i.upperPoint)??e.midPoint??(null==(s=t.datumMidPoint)?void 0:s.call(t,e));if(n){const{x:e,y:i}=vn.toCanvasPoint(t.contentGroup,n.x,n.y);return{canvasX:Math.round(e),canvasY:Math.round(i)}}}function kc(t,e,i,s,n){let a=-1,o=0,r=0,l=!1;for(;o<s&&a<=e-t;){a+=1;const s=i+r;l||(r*=-1),r>=0&&(r+=1),l&&r<0&&(r-=1),s<t||s>e?l=!0:n(s)&&(o+=1)}return o}var wc=class{constructor(t,e){this.domManager=t,this.tooltip=e,this.stateTracker=new wl,this.suppressState=new wl(!1),this.appliedState=null,e.setup(t),t.addListener("hidden",(()=>this.tooltip.hide()))}updateTooltip(t,e,i){var s;this.tooltip.enabled&&(i??(i=null==(s=this.stateTracker.get(t))?void 0:s.content),this.stateTracker.set(t,{content:i,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}suppressTooltip(t){this.suppressState.set(t,!0)}unsuppressTooltip(t){this.suppressState.delete(t)}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){var t;const e=this.stateTracker.stateId(),i=e?this.stateTracker.get(e):null;if(this.suppressState.stateValue()||null==(null==i?void 0:i.meta)||null==(null==i?void 0:i.content))return this.appliedState=null,void this.tooltip.hide();const s=this.domManager.getBoundingClientRect(),n="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():s;if((null==(t=this.appliedState)?void 0:t.content)===(null==i?void 0:i.content)){const t=this.tooltip.isVisible();this.tooltip.show(n,s,null==i?void 0:i.meta,null,t)}else this.tooltip.show(n,s,null==i?void 0:i.meta,null==i?void 0:i.content);this.appliedState=i}static makeTooltipMeta(t,e,i){var s;const{canvasX:n,canvasY:a}=t,o=e.properties.tooltip,r={canvasX:n,canvasY:a,enableInteraction:(null==(s=o.interaction)?void 0:s.enabled)??!1,lastPointerEvent:{type:t.type,canvasX:n,canvasY:a},showArrow:o.showArrow,position:{type:o.position.type,xOffset:o.position.xOffset,yOffset:o.position.yOffset}},l=Nc(e,i);return"node"!==o.position.type&&"sparkline"!==o.position.type||!l?r:{...r,canvasX:l.canvasX,canvasY:l.canvasY}}isEnteringInteractiveTooltip(t){const{tooltip:e}=this,i=t.sourceEvent.relatedTarget;return e.interactive&&e.enabled&&e.isVisible()&&e.contains(i)}};function Cc(t,e,i){const{offsetX:s,offsetY:n,clientX:a,clientY:o,currentX:r,currentY:l,sourceEvent:c}=i;return{type:e,device:t,offsetX:s,offsetY:n,clientX:a,clientY:o,currentX:r,currentY:l,sourceEvent:c}}function Tc(t,e){return t*t+e*e>=9}var Ec=class{constructor(t){this.destroyFns=[],this.listeners=new cl,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.destroyFns.push(t.addListener("touchstart",this.onTouchStart.bind(this)),t.addListener("touchmove",this.onTouchMove.bind(this)),t.addListener("touchend",this.onTouchEnd.bind(this)),t.addListener("mousemove",this.onMouseMove.bind(this)),t.addListener("dblclick",this.onDblClick.bind(this)),t.addListener("drag-start",this.onDragStart.bind(this)),t.addListener("drag-move",this.onDragMove.bind(this)),t.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.destroyFns.forEach((t=>t())),this.listeners.destroy()}addListener(t,e){return this.listeners.addListener(t,e)}dispatch(t){this.listeners.dispatch(t.type,t)}onTouchStart(t){const{clientX:e,clientY:i}=t.sourceEvent.targetTouches.item(0)??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=e,this.touch.clientY=i}onTouchMove(t){const{clientX:e,clientY:i}=t.sourceEvent.targetTouches.item(0)??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-e),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-i),this.touch.clientX=e,this.touch.clientY=i}onTouchEnd(t){t.sourceEvent.preventDefault()}onMouseMove(t){this.dispatch(t)}onDblClick(t){this.dispatch({device:"mouse",...t})}onDragStart(t){this.dragStartEvent=t}onDragMove(t){null!=this.dragStartEvent&&Tc(t.originDeltaX,t.originDeltaY)&&(this.dispatch(this.dragStartEvent),this.dispatch({...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.dispatch(t)}onDragEnd(t){if(this.isDragging)return this.dispatch(t),void(this.isDragging=!1);if("mouse"===t.device){const e=Cc("mouse","click",t);this.dispatch(e)}else if("touchend"===t.sourceEvent.type){if(Tc(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;const e=Cc("touch","click",t);this.dispatch(e);const i=Date.now();if(void 0!==this.lastClickTime&&i-this.lastClickTime<=505){const e=Cc(t.device,"dblclick",t);this.dispatch(e),this.lastClickTime=void 0}else this.lastClickTime=i}}},Oc=class extends Yl{constructor(t){super(t)}addChildToDOM(){}removeChildFromDOM(){}},Rc=class{constructor(t){this.seriesWidget=new Oc(t.getParent("series-area")),this.chartWidget=new Oc(t.getParent("canvas-proxy")),this.containerWidget=new Oc(t.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),this.seriesDragInterpreter=new Ec(this.seriesWidget)}destroy(){this.seriesDragInterpreter.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}},jc={bottomCenter:function(t){return{x:(t.x1+t.x2)/2,y:Math.max(t.y1,t.y2)}},center:function(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}},clone:function(t){return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}},collides:function(t,e){const i=Pc(t),s=Pc(e);return i.x1<=s.x2&&i.x2>=s.x1&&i.y1<=s.y2&&i.y2>=s.y1},end:function(t){return{x:t.x2,y:t.y2}},from:function(t,e,i,s){if("number"==typeof t)return{x1:t,y1:e,x2:i,y2:s};if("width"in t)return{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height};throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(t)}] [${e}] [${i}] [${s}]`)},height:function(t){return Math.abs(t.y2-t.y1)},round:function(t){return{x1:Math.round(t.x1),y1:Math.round(t.y1),x2:Math.round(t.x2),y2:Math.round(t.y2)}},start:function(t){return{x:t.x1,y:t.y1}},topCenter:function(t){return{x:(t.x1+t.x2)/2,y:Math.min(t.y1,t.y2)}},origin:function(){return{x1:0,y1:0,x2:0,y2:0}},width:function(t){return Math.abs(t.x2-t.x1)}};function Pc(t){return{x1:Math.min(t.x1,t.x2),x2:Math.max(t.x1,t.x2),y1:Math.min(t.y1,t.y2),y2:Math.max(t.y1,t.y2)}}function zc(t,e,i,s,n){return e+(n-t)/(i-t)*(s-e)}function Bc(t,e,i,s,n){return t+(i-t)/(s-e)*(n-e)}function Fc(t,e,i){return[Bc(t,i.min,e,i.max,0),Bc(t,i.min,e,i.max,1)]}function Gc(t,e,i,s,n,a){if(i<=n&&a<=s)return i;const o=n-i,r=a-s;return bt(t,i+(Math.abs(o)<Math.abs(r)?o:r),e)}function Uc(t,e,i){const{x:s={min:0,max:1},y:n={min:0,max:1}}=e,a=jc.from(i),o=jc.from(t),r=function(t,e,i){const[s,n]=Fc(t.x1,t.x2,e),[a,o]=Fc(t.y1,t.y2,i);return{x1:s,x2:n,y1:a,y2:o}}(o,s,n),l=Gc(r.x1,r.x2,o.x1,o.x2,a.x1,a.x2),c=Gc(r.y1,r.y2,o.y1,o.y2,a.y1,a.y2);return{x:{min:zc(o.x1,s.min,o.x2,s.max,l),max:zc(o.x1,s.min,o.x2,s.max,l+t.width)},y:{min:zc(o.y1,n.min,o.y2,n.max,c),max:zc(o.y1,n.min,o.y2,n.max,c+t.height)}}}var Yc=["rangeX","rangeY","ratioX","ratioY","autoScaledAxes"],Wc=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},Vc=t=>Y(((e,i)=>!Te.is(null==t?void 0:t.scale)&&!Ta.is(null==t?void 0:t.scale)||(null==e||null==i.end||e<=i.end)),"to be less than end"),_c=class extends hl{constructor(t,e){super(),this.fireChartEvent=t,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new wl(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new Wc,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.destroyFns.push(e.addListener("layout:complete",(()=>{const{pendingMemento:t}=this,e=!this.didLayoutAxes;this.didLayoutAxes=!0,t?this.restoreMemento(t.version,t.mementoVersion,t.memento):e&&this.autoScaleYZoom("zoom-manager")})))}createMemento(){return this.getMementoRanges()}guardMemento(t,e){if(null==t)return!0;if(!E(t))return!1;for(const a of Object.keys(t))if(!Yc.includes(a))return!1;const i=this.getPrimaryAxis("x"),s=this.getPrimaryAxis("y"),n=G(t,{rangeX:{start:W(V(_,K),Vc(i)),end:V(_,K)},rangeY:{start:W(V(_,K),Vc(s)),end:V(_,K)},ratioX:{start:W(Q,J("end")),end:Q},ratioY:{start:W(Q,J("end")),end:Q},autoScaledAxes:et(tt("y"))});return!(n.errors.length>0)||(e.push(...n.errors.map((t=>t.message))),!1)}restoreMemento(t,e,i){var s;const{independentAxes:n}=this;if(!this.axes||!this.didLayoutAxes)return void(this.pendingMemento={version:t,mementoVersion:e,memento:i});this.pendingMemento=void 0;const a=this.getDefinedZoom();if((null==i?void 0:i.rangeX)?a.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:(null==i?void 0:i.ratioX)?a.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:a.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let t=null==(s=null==i?void 0:i.autoScaledAxes)?void 0:s.includes("y");(null==i?void 0:i.rangeY)?(a.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1},t??(t=!1)):(null==i?void 0:i.ratioY)?(a.y={min:i.ratioY.start??0,max:i.ratioY.end??1},t??(t=!1)):(a.y={min:0,max:1},t??(t=!0)),a.autoScaleYAxis=t}if(this.lastRestoredState=a,!0!==n)return void this.updateZoom("zoom-manager",a);const o=this.getPrimaryAxis("x"),r=this.getPrimaryAxis("y");for(const l of[o,r])l&&this.updateAxisZoom("zoom-manager",l.id,a[l.direction])}updateAxes(t){this.axes=t;const e=new Map(t.map((t=>[t.id,this.axisZoomManagers.get(t.id)])));this.axisZoomManagers.clear();for(const i of t)this.axisZoomManagers.set(i.id,e.get(i.id)??new Hc(i));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(t=!0){this.independentAxes=t}setAutoScaleYAxis(t,e){this.autoScaleYAxis.enabled=t,this.autoScaleYAxis.padding=e}setNavigatorEnabled(t=!0){this.navigatorModule=t}setZoomModuleEnabled(t=!0){this.zoomModule=t}isZoomEnabled(){return this.zoomModule}updateZoom(t,e){if((null==e?void 0:e.x)&&(e.x.min<0||e.x.max>1)&&(n.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${e.x.min}, max: ${e.x.max} }], expecting a ratio of 0 to 1, ignoring.`),e.x=void 0),(null==e?void 0:e.y)&&(e.y.min<0||e.y.max>1)&&(n.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${e.y.min}, max: ${e.y.max} }], expecting a ratio of 0 to 1, ignoring.`),e.y=void 0),0===this.axisZoomManagers.size){const i=this.state.stateId();return void("initial"!==i&&i!==t||this.state.set(t,e))}this.state.set(t,e);const i=null==e?void 0:e.autoScaleYAxis;null!=i&&(this.autoScaleYAxis.manuallyAdjusted=!i),this.axisZoomManagers.forEach((i=>{i.updateZoom(t,null==e?void 0:e[i.getDirection()])})),this.applyChanges(t)}updateAxisZoom(t,e,i){var s;null==(s=this.axisZoomManagers.get(e))||s.updateZoom(t,i),this.applyChanges(t)}resetZoom(t){var e,i,s,n;this.autoScaleYAxis.manuallyAdjusted=!1;const a=this.getRestoredZoom();this.updateZoom(t,{x:{min:(null==(e=null==a?void 0:a.x)?void 0:e.min)??0,max:(null==(i=null==a?void 0:a.x)?void 0:i.max)??1},y:{min:(null==(s=null==a?void 0:a.y)?void 0:s.min)??0,max:(null==(n=null==a?void 0:a.y)?void 0:n.max)??1},autoScaleYAxis:(null==a?void 0:a.autoScaleYAxis)??!0})}resetAxisZoom(t,e){const i=this.axisZoomManagers.get(e),s=null==i?void 0:i.getDirection();if(null==s)return;const n=this.getRestoredZoom();if("y"===s){const t=(null==n?void 0:n.autoScaleYAxis)??!0;this.autoScaleYAxis.manuallyAdjusted=!t}this.updateAxisZoom(t,e,(null==n?void 0:n[s])??{min:0,max:1})}setAxisManuallyAdjusted(t,e){var i;"y"===(null==(i=this.axisZoomManagers.get(e))?void 0:i.getDirection())&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(t,e,i){const s=this.getPrimaryAxis(e);s&&this.updateAxisZoom(t,s.id,i)}panToBBox(t,e,i){if(!this.isZoomEnabled())return!1;const s=this.getZoom();if(void 0===s||!s.x&&!s.y)return!1;if(!(e.width>0&&e.height>0&&Math.abs(i.width)<=Math.abs(e.width)&&Math.abs(i.height)<=Math.abs(e.height)))return n.warnOnce("cannot pan to target BBox - chart too small?"),!1;const a=Uc(e,s,i);return this.independentAxes?(this.updatePrimaryAxisZoom(t,"x",a.x),this.updatePrimaryAxisZoom(t,"y",a.y)):this.updateZoom(t,a),!0}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}extendToEnd(t,e,i){return this.extendWith(t,e,(t=>Number(t)-i))}extendWith(t,e,i){const s=this.getPrimaryAxis(e);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;const[,a]=n,o=i(a),r=this.rangeToRatio({start:o,end:a},e);r&&this.updateZoom(t,{[e]:r})}updateWith(t,e,i){const s=this.getPrimaryAxis(e);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;let[a,o]=n;[a,o]=i(a,o);const r=this.rangeToRatio({start:a,end:o},e);r&&this.updateZoom(t,{[e]:r})}getZoom(){let t,e;if(this.axisZoomManagers.forEach((i=>{"x"===i.getDirection()?t??(t=i.getZoom()):"y"===i.getDirection()&&(e??(e=i.getZoom()))})),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return(null==(e=this.axisZoomManagers.get(t))?void 0:e.getZoom())??{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(t){var e;return null==(e=this.getPrimaryAxis(t))?void 0:e.id}isVisibleItemsCountAtLeast(t,e){const i=this.getPrimaryAxis("x"),s=this.getPrimaryAxis("y"),n=new Set;let a=0;const o=[t.x.min,t.x.max],r=[t.y.min,t.y.max];for(const l of(null==i?void 0:i.boundSeries)??[]){n.add(l.id);const t=e-(a??0);if(a+=l.getVisibleItems(o,r,t),a>=e)return!0}for(const l of(null==s?void 0:s.boundSeries)??[]){if(n.has(l.id))continue;const t=e-(a??0);if(a+=l.getVisibleItems(o,r,t),a>=e)return!0}return 0===n.size}getMementoRanges(){const t=this.getDefinedZoom();let e;this.autoScaleYAxis.enabled&&(e=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]);return{rangeX:this.getRangeDirection(t.x,"x"),rangeY:this.getRangeDirection(t.y,"y"),ratioX:{start:t.x.min,end:t.x.max},ratioY:{start:t.y.min,end:t.y.max},autoScaledAxes:e}}autoScaleYZoom(t,e=!0){var i,s;if(!this.isZoomEnabled())return;const{independentAxes:n,autoScaleYAxis:a}=this,o=this.getZoom();if(null==(null==o?void 0:o.x)||!a.enabled||a.manuallyAdjusted)return;const{padding:r}=a;let l;if(l=0===(null==(i=o.x)?void 0:i.min)&&1===(null==(s=o.x)?void 0:s.max)?{min:0,max:1}:n?this.primaryAxisZoom("y",o.x,{padding:r}):this.combinedAxisZoom("y",o.x,{padding:r}),null!=l){if(n){const t=this.getPrimaryAxis("y"),e=null==t?void 0:this.axisZoomManagers.get(t.id);null==e||e.updateZoom("zoom-manager",l)}else for(const t of this.axisZoomManagers.values())"y"===t.getDirection()&&t.updateZoom("zoom-manager",l);e&&this.applyChanges(t)}}applyChanges(t){this.autoScaleYZoom(t,!1);if(!Array.from(this.axisZoomManagers.values(),(t=>t.applyChanges())).includes(!0))return;const e={};for(const[i,s]of this.axisZoomManagers.entries())e[i]=s.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:e,callerId:t}),this.fireChartEvent({type:"zoom",...this.getMementoRanges()})}getRangeDirection(t,e){const i=this.getPrimaryAxis(e);if(!i||!Te.is(i.scale)&&!Ta.is(i.scale))return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,a]=s;let o,r;return n<=a?(o=i.scale.invert(0),r=i.scale.invert(n+(a-n)*t.max)):(o=i.scale.invert(n-(n-a)*t.min),r=i.scale.invert(0)),{start:o,end:r}}rangeToRatio(t,e){var i,s,a,o,r,l,c,h,d,u,p,g;const m=this.getPrimaryAxis(e);if(!m)return;const y=this.getDomainPixelExtents(m);if(!y)return;const[f,x]=y;let v=null==t.start?f:null==(s=(i=m.scale).convert)?void 0:s.call(i,t.start),b=null==t.end?x:null==(o=(a=m.scale).convert)?void 0:o.call(a,t.end);if(!P(v)||!P(b))return;const[M,S]=[Math.min(f,x),Math.max(f,x)];if(v<M||v>S)return void n.warnOnce(`Invalid range start [${t.start}], expecting a value between [${null==(l=(r=m.scale).invert)?void 0:l.call(r,f)}] and [${null==(h=(c=m.scale).invert)?void 0:h.call(c,x)}], ignoring.`);if(b<M||b>S)return void n.warnOnce(`Invalid range end [${t.end}], expecting a value between [${null==(u=(d=m.scale).invert)?void 0:u.call(d,f)}] and [${null==(g=(p=m.scale).invert)?void 0:g.call(p,x)}], ignoring.`);v=Math.min(S,Math.max(M,v)),b=Math.min(S,Math.max(M,b));const I=x-f;return{min:Math.abs((v-f)/I),max:Math.abs((b-f)/I)}}getPrimaryAxis(t){var e;return null==(e=this.axes)?void 0:e.find((e=>e.direction===t))}getDomainExtents(t){const{domain:e}=t.scale,i=e.at(0),s=e.at(-1);if(null!=i&&null!=s)return[i,s]}getDomainPixelExtents(t){var e,i,s,n;const{domain:a}=t.scale,o=null==(i=(e=t.scale).convert)?void 0:i.call(e,a.at(0)),r=null==(n=(s=t.scale).convert)?void 0:n.call(s,a.at(-1));if(P(o)&&P(r))return[o,r]}getDefinedZoom(){var t,e,i,s;const n=this.getZoom();return{x:{min:(null==(t=null==n?void 0:n.x)?void 0:t.min)??0,max:(null==(e=null==n?void 0:n.x)?void 0:e.max)??1},y:{min:(null==(i=null==n?void 0:n.y)?void 0:i.min)??0,max:(null==(s=null==n?void 0:n.y)?void 0:s.max)??1}}}zoomBounds(t,e,i,s){const n=t.scale,a=n.range;n.range=[0,1];const o=e.scale,r=o.range;o.range=[0,1];let l=1,c=!1,h=0,d=!1;for(const g of e.boundSeries){const{connectsToYAxis:t}=g,e=g.getRange("y",[i.min,i.max]);for(const i of e){const e=o.convert(i);Number.isFinite(e)&&(e<l&&(l=e,c=!t||i<0),e>h&&(h=e,d=!t||i>0))}}if(P(e.min)&&(l=0),P(e.max)&&(h=1),n.range=a,o.range=r,l>=h)return;const u=(c?s:0)+(d?s:0),p=Math.min((h-l)*(1+u),1);if(!(p<=0)){if(c&&d){const t=(h+l)/2;l=t-p/2,h=t+p/2}else!c&&d?h=l+p:c&&!d&&(l=h-p);return l<0?(h+=-l,l=0):h>1&&(l-=h-1,h=1),{min:l,max:h}}}primaryAxisZoom(t,e,{padding:i=0}={}){const s="x"===t?"y":"x",n=this.getPrimaryAxis(s),a=this.getPrimaryAxis(t);if(null!=n&&null!=a)return this.zoomBounds(n,a,e,i)}combinedAxisZoom(t,e,{padding:i=0}={}){const s="x"===t?"y":"x",n=new Map;for(const l of this.axes)if(l.direction===s)for(const t of l.boundSeries)n.set(t,l);let a=1,o=0;for(const l of this.axes)if(l.direction===t)for(const t of l.boundSeries){const s=n.get(t);if(null==s)continue;const r=this.zoomBounds(s,l,e,i);if(null==r)return;a=Math.min(a,r.min),o=Math.max(o,r.max)}const r=1e-6;if(a<r&&(a=0),o>.999999&&(o=1),!(a>o))return{min:a,max:o}}},Hc=class{constructor(t){this.axis=t;const[e=0,i=1]=t.visibleRange;this.state=new wl({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return cr(this.state.stateValue())}hasChanges(){const t=this.currentZoom,e=this.state.stateValue();return t.min!==e.min||t.max!==e.max}applyChanges(){const t=this.hasChanges();return this.currentZoom=this.state.stateValue(),t}},Zc=class{constructor(){this.labelData=new Map}updateLabels(t,e,i=Et.zero){var s;const n={x:-e.left,y:-e.top,width:i.width+e.left+e.right,height:i.height+e.top+e.bottom},a=new Set(t.map((t=>t.id)));for(const r of this.labelData.keys())a.has(r)||this.labelData.delete(r);for(const r of t){const t=r.getLabelData();t.every(Go)&&this.labelData.set(r.id,t)}const o=function(t,e,i=5){var s;const n=new Map,a=[],o=new Map([...t.entries()].map((([t,e])=>[t,e.toSorted(((t,e)=>e.point.size-t.point.size))]))),r=[...o.values()].flat();for(const[u,p]of o.entries()){const t=[];if(null==(s=p[0])?void 0:s.label){for(let s=0,n=p.length;s<n;s++){const n=p[s],{point:o,label:u,anchor:g}=n,{text:m,width:y,height:f}=u,x=.5*o.size;let v=0,b=0;if(x>0&&null!=n.placement){const t=Uo[n.placement];v=(.5*y+x+i)*t.x,b=(.5*f+x+i)*t.y}const M=o.x-.5*y+v-(((null==g?void 0:g.x)??.5)-.5)*o.size,S=o.y-.5*f+b-(((null==g?void 0:g.y)??.5)-.5)*o.size;if(e&&(h=S,d=f,!((c=M)+y<(l=e).x+l.width&&c>l.x&&h>l.y&&h+d<l.y+l.height)))continue;if(r.some((t=>Bo(t.point,t.anchor,M,S,y,f))))continue;if(a.some((t=>Fo(t,M,S,y,f))))continue;const I={index:s,text:m,x:M,y:S,width:y,height:f,datum:n};t.push(I),a.push(I)}n.set(u,t)}}var l,c,h,d;return n}(this.labelData,n,5);for(const r of t)null==(s=r.updatePlacedLabelData)||s.call(r,o.get(r.id)??[])}},Kc=class extends hl{constructor(){super(...arguments),this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter((({hideInLegend:t,isFixed:e})=>!t&&!e)).map((({enabled:t,seriesId:e,itemId:i,legendItemName:s})=>({visible:t,seriesId:e,itemId:i,legendItemName:s})))}guardMemento(t){return null==t||N(t)}restoreMemento(t,e,i){null==i||i.forEach((t=>{const{seriesId:e,data:i}=this.getRestoredData(t)??{};e&&i&&this.updateData(e,i)})),this.update()}getRestoredData(t){const{seriesId:e,itemId:i,legendItemName:s,visible:n}=t;if(e){const t=(this.legendDataMap.get(e)??[]).map((t=>{const s=t.seriesId===e&&(!i||t.itemId===i);return s&&t.isFixed&&this.warnFixed(t.seriesId,t.itemId),!t.isFixed&&s?{...t,enabled:n}:t}));return{seriesId:e,data:t}}if(null!=i||null!=s)for(const a of this.getData()){if(null!=i&&a.itemId!==i||null!=s&&a.legendItemName!==s)continue;if(a.isFixed)return void this.warnFixed(a.seriesId,i);const t=(this.legendDataMap.get(a.seriesId)??[]).map((t=>t.itemId===i||t.legendItemName===s?{...t,enabled:n}:t));return{seriesId:a.seriesId,data:t}}}warnFixed(t,e){n.warnOnce(`The legend item with seriesId [${t}] and itemId [${e}] is not configurable, this series item cannot be toggled through the legend.`)}update(t){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:t??this.getData()})}updateData(t,e=[]){this.legendDataMap.set(t,e)}clearData(){this.legendDataMap.clear()}toggleItem({enabled:t,seriesId:e,itemId:i,legendItemName:s}){if(s)return void this.getData().forEach((e=>{const i=(this.legendDataMap.get(e.seriesId)??[]).map((e=>e.legendItemName===s?{...e,enabled:t}:e));this.updateData(e.seriesId,i)}));const n=this.getData(e),a=1===n.length,o=n.map((e=>null==i&&a||e.itemId===i?{...e,enabled:t}:e));this.updateData(e,o)}getData(t){return t?this.legendDataMap.get(t)??[]:[...this.legendDataMap].reduce(((t,[e,i])=>t.concat(i)),[])}getDatum({seriesId:t,itemId:e}={}){return this.getData(t).find((t=>t.itemId===e))}getSeriesEnabled(t){const e=this.getData(t);if(e.length>0)return e.some((t=>t.enabled))}getItemEnabled({seriesId:t,itemId:e}={}){var i;return(null==(i=this.getDatum({seriesId:t,itemId:e}))?void 0:i.enabled)??!0}},$c=class{constructor(){this.groups={}}registerSeries({internalId:t,seriesGrouping:e,visible:i,type:s}){var n;e&&((n=this.groups)[s]??(n[s]={}),this.groups[s][t]={grouping:e,visible:i})}updateSeries({internalId:t,seriesGrouping:e,visible:i,type:s}){var n;if(!e)return;const a=null==(n=this.groups[s])?void 0:n[t];a&&(a.grouping=e,a.visible=i)}deregisterSeries({internalId:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:i}){if(!e)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const s=new Set,n=new Set;for(const o of Object.values(this.groups[t]??{}))o.visible&&(s.add(o.grouping.groupIndex),o.grouping.groupIndex===e.groupIndex&&n.add(o.grouping.stackIndex));const a=Array.from(s);return a.sort(((t,e)=>t-e)),{visibleGroupCount:a.length,visibleSameStackCount:n.size,index:a.indexOf(e.groupIndex)}}},Xc=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(Xc||{}),Qc=class{constructor(t){this.updateCallback=t,this.events=new m}addListener(t,e){return this.events.on(t,e)}removeListener(t,e){return this.events.on(t,e)}destroy(){this.events.clear()}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(){this.events.emit("update-complete",{type:"update-complete"})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:t}){this.events.emit("process-data",{type:"process-data",series:t})}},qc=class{constructor(t,e){this.callbackCache=new uc,this.chartEventManager=new Mc,this.highlightManager=new Ic,this.layoutManager=new qr,this.localeManager=new Jl,this.seriesStateManager=new $c,this.stateManager=new ll,this.seriesLabelLayoutManager=new Zc,this.contextModules=[];const{scene:i,root:s,syncManager:n,container:a,fireEvent:o,updateCallback:r,updateMutex:l,styleContainer:c,chartType:h}=e;this.chartService=t,this.syncManager=n,this.domManager=new Pl(a,c),this.widgets=new Rc(this.domManager);const d=this.domManager.addChild("canvas","scene-canvas",null==i?void 0:i.canvas.element);this.scene=i??new dc({canvasElement:d}),this.scene.setRoot(s),this.axisManager=new gc(s),this.legendManager=new Kc,this.annotationManager=new pc(t.annotationRoot),this.chartTypeOriginator=new il(t),this.interactionManager=new xc,this.contextMenuRegistry=new Sc,this.updateService=new Qc(r),this.proxyInteractionService=new $l(this.localeManager,this.domManager),this.historyManager=new ol(this.chartEventManager),this.animationManager=new bc(this.interactionManager,l),this.dataService=new mc(this.animationManager),this.tooltipManager=new wc(this.domManager,t.tooltip),this.zoomManager=new _c(o,this.layoutManager);for(const u of Qo.byType("context")){if(!u.chartTypes.includes(h))continue;const t=u.moduleFactory(this);this.contextModules.push(t),this[u.contextKey]=t}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.contextModules.forEach((t=>t.destroy()))}},Jc=class extends ki{constructor(){super(...arguments),this.range="tooltip"}};function th(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function eh(t,e){if(null==t||null==e)return t===e;if(t.size!==e.size)return!1;for(const[i,s]of t){const t=e.get(i);if(null==t)return!1;if(!th(s,t))return!1}return!0}function ih(t,e){const{props:i,...s}=t,{props:n,...a}=e;return qt(s,a)&&function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i+=1){const{type:s,idsMap:n,scopes:a,data:o,...r}=t[i],{type:l,idsMap:c,scopes:h,data:d,...u}=e[i];if(s!==l)return!1;if(a&&h&&!x(a,h))return!1;if(o&&d&&o!==d)return!1;if(!qt(r,u)||!eh(n,c))return!1}return!0}(i,n)}function sh(t,e,i,s){return e===t.data&&x(i,t.ids)&&ih(s,t.opts)}s([Ti(Is(["tooltip","node"],"a range"))],Jc.prototype,"range",2);var nh=class t{constructor(){this.domain=new Set}static is(e){return e instanceof t}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},ah=class t{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof t}static extendDomain(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(e[0]>i&&(e[0]=i),e[1]<i&&(e[1]=i));return e}extend(t){this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t)}getDomain(){return[...this.domain]}},oh=class{constructor(t){const e=t.reduce(((t,e)=>Math.max(t,e.length)),0);let i=1<<32-Math.clz32(e);e===i/2&&(i>>>=1),this.maxLevelSize=i;const s=new Float64Array(2*(2*i-1)).fill(NaN);for(const n of t)for(let t=0;t<n.length;t+=1){const e=Number(n[t]),a=i+t-1,o=0+(2*a|0),r=1+(2*a|0),l=s[o],c=s[r];(!Number.isFinite(l)||e<l)&&(s[o]=e),(!Number.isFinite(c)||e>c)&&(s[r]=e)}for(let n=i/2|0;n>=1;n=n/2|0){const t=n-1|0,e=t+n|0;for(let i=0;i<n;i+=1){const n=t+i,a=e+2*i,o=a+1,r=s[0+(2*a|0)],l=s[0+(2*o|0)];s[0+(2*n|0)]=!Number.isFinite(l)||r<l?r:l;const c=s[1+(2*a|0)],h=s[1+(2*o|0)];s[1+(2*n|0)]=!Number.isFinite(h)||c>h?c:h}}this.buffer=s}computeRangeInto(t,e,i,s,n,a,o){const r=n+a-1;if(r<e||n>=i)return o;if(n>=e&&r<i){const e=t[0+(2*s|0)],i=t[1+(2*s|0)];Number.isFinite(e)&&(o[0]=Math.min(o[0],e)),Number.isFinite(i)&&(o[1]=Math.max(o[1],i))}else a>1&&(s=2*s|0,a=a/2|0,this.computeRangeInto(t,e,i,s+1|0,n,a,o),this.computeRangeInto(t,e,i,s+2|0,n+a,a,o));return o}rangeBetween(t,e){if(t>e)return[NaN,NaN];const{maxLevelSize:i,buffer:s}=this,n=[1/0,-1/0];return this.computeRangeInto(s,t,e,0,0,i,n),n}get range(){const{buffer:t}=this;return[t[0],t[1]]}},rh=Symbol("domain-ranges");function lh(t){return t.map((t=>E(t)?JSON.stringify(t):t)).join("-")}function ch(t){const e=1e4;return Number.isInteger(t)?t:Math.abs(t)>e?Math.trunc(t):Math.round(t*e)/e}function hh(t){const e=null==t?void 0:t.map(Number);return(null==e?void 0:e.every(Number.isFinite))?e:[]}function dh(t,e){return(null==e?void 0:e.get(t.id))??0}var uh=Symbol("invalid");function ph(t,e){const i=[];for(let s=0;s<t;s+=1)i[s]=e;return i}function gh(t,e,i){var s;const n=[];for(const a of t){const t=null==(s=a.get(e))?void 0:s[i];if(null==t)return;n.push(t)}return n}function mh(t){const e=[];let i,s=0;const n=new RegExp("((?:(?:^|\\.)\\s*\\w+|\\[\\s*(?:'(?:[^']|(?<!\\\\)\\\\')*'|\"(?:[^\"]|(?<!\\\\)\\\\\")*\"|-?\\d+)\\s*\\])\\s*)","g");for(;i=n.exec(t);){if(i.index!==s)return;s=i.index+i[0].length;const t=i[1].trim();if(t.startsWith("."))e.push(t.slice(1).trim());else if(t.startsWith("[")){const i=t.slice(1,-1).trim();i.startsWith("'")?e.push(i.slice(1,-1).replace(new RegExp("(?<!\\\\)\\\\'","g"),"'")):i.startsWith('"')?e.push(i.slice(1,-1).replace(new RegExp('(?<!\\\\)\\\\"',"g"),'"')):e.push(i)}else e.push(t)}if(s===t.length)return e}function yh(t){return e=>{let i=e;for(const s of t)i=i[s];return i}}var fh=class{constructor(t,e="standalone",i=!1){var s;this.opts=t,this.mode=e,this.suppressFieldDotNotation=i,this.debug=Es.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(t,e,i,s){for(const n of t)s.has(n)||s.set(n,ph(e.length,!1)),s.get(n)[i]=!0};let n=!0;for(const c of t.props){if("key"===c.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===c.type&&n&&(n=!1)}const a=({matchGroupIds:t=[]})=>{for(const e of t)if(this.values.every((t=>t.groupId!==e)))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)},o=new Set,r=new Set;for(const c of t.props){const t="key"===c.type?o:r;switch("scopes"in(l=c)&&Array.isArray(l.scopes)&&(null==(s=c.scopes)||s.forEach((e=>t.add(e)))),c.type){case"key":this.keys.push({...c,index:this.keys.length,missing:new Map});break;case"value":if(null==c.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(c)}`);this.values.push({...c,index:this.values.length,missing:new Map});break;case"aggregate":a(c),this.aggregates.push({...c,index:this.aggregates.length});break;case"group-value-processor":a(c),this.groupProcessors.push({...c,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...c,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...c,index:this.reducers.length});break;case"processor":this.processors.push({...c,index:this.processors.length})}}var l;if(this.opts.groupByKeys||null!=this.opts.groupByFn){const t=new Set(r.values());if(o.forEach((e=>t.delete(e))),t.size>0)throw new Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...t.values()]}`)}}resolveProcessedDataDefById(t,e){var i;const s=null==(i=this.scopeCache.get(t.id))?void 0:i.get(e);if(!s)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return{index:s.index,def:s}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveKeysById(t,e,i){const s=this.resolveProcessedDataIndexById(t,e),n=i.keys[s];if(null==n)throw new Error(`AG Charts - didn't find keys for [${e}, ${t.id}]`);return n.get(t.id)}hasColumnById(t,e){var i;return null!=(null==(i=this.scopeCache.get(t.id))?void 0:i.get(e))}resolveColumnById(t,e,i){var s;const n=this.resolveProcessedDataIndexById(t,e),a=null==(s=i.columns)?void 0:s[n];if(null==a)throw new Error(`AG Charts - didn't find column for [${e}, ${t.id}]`);return a}*forEachDatum(t,e,i){const s=e.columnScopes.findIndex((e=>e.has(t.id)));for(const n of i.datumIndices[s]??[])yield e.columns[s][n]}*forEachGroupDatum(t,e){const i=e.columnScopes.findIndex((e=>e.has(t.id))),s={groupIndex:0,columnIndex:i},n=[];for(const a of e.groups){s.group=a;let t=0;for(const e of a.datumIndices[i]??n)s.datumIndex=e,s.valueIndex=t++,yield s;s.groupIndex++}}*forEachGroupDatumTuple(t,e){const i={columnIndex:e.columnScopes.findIndex((e=>e.has(t.id))),datumIndexes:[void 0,void 0,void 0]};for(const s of this.forEachGroupDatum(t,e))i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=s.group,i.nextGroupIndex=s.groupIndex,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=s.datumIndex,null!=i.group&&null!=i.datumIndexes[1]&&(yield i);i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=void 0,i.nextGroupIndex=void 0,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=void 0,null!=i.group&&null!=i.datumIndexes[1]&&(yield i)}getDomain(t,e,i,s){const n=this.getDomainsByType(i??"value",s);return(null==n?void 0:n[this.resolveProcessedDataIndexById(t,e)])??[]}getDomainBetweenRange(t,e,[i,s],n){const a=e.map((e=>this.resolveProcessedDataIndexById(t,e))),o=a.join(":"),r=n[rh];let l=r.get(o);if(null==l){const t=a.map((t=>n.columns[t]));l=new oh(t),r.set(o,l)}return l.rangeBetween(i,s)}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:s,groupProcessors:a,reducers:o,processors:r,propertyProcessors:l}=this,c=performance.now();if(e&&0===this.keys.length)return;let h=this.extractData(t);e?h=this.groupData(h):i&&(h=this.groupData(h,i(h))),a.length>0&&"grouped"===h.type&&this.postProcessGroups(h),s.length>0&&"ungrouped"===h.type?this.aggregateUngroupedData(h):s.length>0&&"grouped"===h.type&&this.aggregateGroupedData(h),l.length>0&&this.postProcessProperties(h),o.length>0&&this.reduceData(h),r.length>0&&this.postProcessData(h),this.warnDataMissingProperties(t);const d=performance.now();return h.time=d-c,this.debug.check()&&function(t){const e=(t,e)=>{e.length>0&&(n.log(`DataModel.processData() - ${t}`),n.table(e))};n.log("DataModel.processData() - processedData",t),e("Key Domains",t.domain.keys),e("Group Domains",t.domain.groups??[]),e("Value Domains",t.domain.values),e("Aggregate Domains",t.domain.aggValues??[])}(h),this.processScopeCache(),h}warnDataMissingProperties(t){var e;if(0!==t.size)for(const i of I(this.keys,this.values))for(const[s,a]of i.missing){if(a<((null==(e=t.get(s))?void 0:e.length)??1/0))continue;const o=null==s?"":` for ${s}`;n.warnOnce(`the key '${i.property}' was not found in any data element${o}.`)}}processScopeCache(){var t;this.scopeCache.clear();for(const e of I(this.keys,this.values,this.aggregates))if(e.idsMap)for(const[i,s]of e.idsMap)for(const n of s)if(this.scopeCache.has(i)){if(null==(t=this.scopeCache.get(i))?void 0:t.has(n))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(i).set(n,e)}else this.scopeCache.set(i,new Map([[n,e]]))}valueGroupIdxLookup({matchGroupIds:t}){const e=[];for(const[i,s]of this.values.entries())(!t||s.groupId&&t.includes(s.groupId))&&e.push(i);return e}valueIdxLookup(t,e){const i=null==t||0===t.length,s="string"==typeof e?e:e.id,n=this.values.reduce(((e,n,a)=>((null==n.scopes||i&&!n.scopes.length||n.scopes.some((e=>null==t?void 0:t.includes(e))))&&(n.property===s||n.id===s||(e=>{if(e.idsMap)for(const[i,n]of e.idsMap)if((null==t?void 0:t.includes(i))&&n.has(s))return!0;return!1})(n))&&e.push(a),e)),[]);if(0===n.length)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return n}extractData(t){const{dataDomain:e,processValue:i,allScopesHaveSameDefs:s}=this.initDataDomainProcessor(),{keys:n,values:a}=this,{invalidData:o,invalidKeys:r,allKeyMappings:l}=this.extractKeys(n,t,i),{columns:c,columnScopes:h,partialValidDataCount:d,maxDataLength:u}=this.extractValues(o,a,t,r,i),p=t=>{const i=e.get(t),s=i.getDomain();return ah.is(i)&&s[0]>s[1]?[]:s};return{type:"ungrouped",input:{count:u},scopes:new Set(t.keys()),dataSources:t,aggregation:void 0,keys:[...l.values()],columns:c,columnScopes:h,invalidKeys:r,invalidData:o,domain:{keys:n.map(p),values:a.map(p)},defs:{allScopesHaveSameDefs:s,keys:n,values:a},partialValidDataCount:d,time:0,[rh]:new Map}}extractKeys(t,e,i){const s=new Map,n=new Map,a=new Map;let o,r;const l=(t,e)=>{const i=r.get(t);o.set(e,o.get(i)),s.has(i)&&(s.set(e,s.get(i)),n.set(e,n.get(i)))};for(const c of t){const{invalidValue:t,scopes:h}=c;o=new Map,r=new Map,a.set(c,o);for(const a of h??[]){const h=e.get(a)??[];if(r.has(h)){l(h,a);continue}const d=[];let u,p;o.set(a,d),r.set(h,a);for(let e=0;e<h.length;e++){const s=i(c,h[e],e,a);s===uh?(d.push(t),u??(u=ph(h.length,!1)),p??(p=ph(h.length,!1)),u[e]=!0,p[e]=!0):d.push(s)}u&&p&&(s.set(a,u),n.set(a,p))}}return{invalidData:n,invalidKeys:s,allKeyMappings:a}}extractValues(t,e,i,s,n){let a=0;const o=[],r=[];let l=0;for(const c of e){const{invalidValue:e}=c;if(new Set(c.scopes.map((t=>i.get(t)))).size>1)throw new Error(`AG Charts - more than one data source for: ${JSON.stringify(c)}`);const h=new Set(c.scopes),d=D(c.scopes),u=i.get(d),p=u.map(((i,o)=>{var r;const l=null==(r=s.get(d))?void 0:r[o];let h=n(c,i,o,c.scopes);return(l||h===uh)&&this.markScopeDatumInvalid(c.scopes,u,o,t),l?h=e:h===uh&&(a+=1,h=e),h}));o.push(p),r.push(h),l=Math.max(l,p.length)}return{columns:o,columnScopes:r,partialValidDataCount:a,maxDataLength:l}}groupData(t,e){var i;const s=new Map,{keys:n,columns:a,columnScopes:o,invalidKeys:r,invalidData:l}=t,c=t.scopes,h=new Set;for(const p of c){const t=a.map(((t,e)=>e)).filter((t=>!h.has(t)&&o[t].has(p)));if(0===t.length)continue;for(const e of t)h.add(e);const d=new Set;for(const e of t)for(const t of o[e])d.add(t);const u=n.map((t=>t.get(p))).filter((t=>null!=t)),g=a[D(t)],m=null==l?void 0:l.get(p),y=null==r?void 0:r.get(p);for(let n=0;n<g.length;n++){if(!0===(null==y?void 0:y[n]))continue;const a=u.map((t=>t[n]));if(null==a||0===a.length)throw new Error("AG Charts - no keys found for scope: "+p);const o=(null==e?void 0:e(a))??a,r=lh(o),l=s.get(r)??{keys:o,datumIndices:[],validScopes:c};if(s.has(r)||s.set(r,l),!0===(null==m?void 0:m[n])){l.validScopes===c&&(l.validScopes=new Set(c.values()));for(const t of d)l.validScopes.delete(t)}if(0!==l.validScopes.size)for(const e of t)(i=l.datumIndices)[e]??(i[e]=[]),l.datumIndices[e].push(n)}}const d=[],u=[];for(const{keys:p,datumIndices:g,validScopes:m}of s.values())0!==(null==m?void 0:m.size)&&(d.push(p),u.push({datumIndices:g,keys:p,aggregation:[],validScopes:m}));return{...t,type:"grouped",domain:{...t.domain,groups:d},groups:u}}aggregateUngroupedData(t){const e=this.aggregates.map((()=>[1/0,-1/0]));t.domain.aggValues=e;const{keys:i,columns:s,dataSources:n}=t,a=D(n.keys()),o=n.get(a);t.aggregation=null==o?void 0:o.map(((t,n)=>{var o,r,l;const c=[];for(const[h,d]of this.aggregates.entries()){const t=this.valueGroupIdxLookup(d);let u=(null==(o=d.groupAggregateFunction)?void 0:o.call(d))??[1/0,-1/0];const p=t.map((t=>s[t][n])),g=gh(i,a,n),m=null!=g?d.aggregateFunction(p,g):void 0;m&&(u=(null==(r=d.groupAggregateFunction)?void 0:r.call(d,m,u))??ah.extendDomain(m,u));const y=(null==(l=d.finalFunction)?void 0:l.call(d,u))??u;if(!0===d.round)for(const e in y)y[e]=ch(y[e]);c[h]=y,ah.extendDomain(y,e[h])}return c}))}aggregateGroupedData(t){var e,i,s,n;const a=this.aggregates.map((()=>[1/0,-1/0]));t.domain.aggValues=a;const{columns:o}=t;for(const[r,l]of this.aggregates.entries()){const c=this.valueGroupIdxLookup(l);for(const h of t.groups){if(h.aggregation??(h.aggregation=[]),0===(null==(e=h.validScopes)?void 0:e.size))continue;const t=h.keys;let d=(null==(i=l.groupAggregateFunction)?void 0:i.call(l))??[1/0,-1/0];const u=Math.max(...c.map((t=>{var e;return(null==(e=h.datumIndices[t])?void 0:e.length)??0})));for(let e=0;e<u;e++){const i=c.map((t=>{var i;return o[t][null==(i=h.datumIndices[t])?void 0:i[e]]})),n=l.aggregateFunction(i,t);n&&(d=(null==(s=l.groupAggregateFunction)?void 0:s.call(l,n,d))??ah.extendDomain(n,d))}const p=(null==(n=l.finalFunction)?void 0:n.call(l,d))??d;if(!0===l.round)for(const e in p)p[e]=ch(p[e]);h.aggregation[r]=p,ah.extendDomain(p,a[r])}}}postProcessGroups(t){const{groupProcessors:e}=this,{columnScopes:i,columns:s,invalidData:n,scopes:a}=t;for(const o of e){const e=this.valueGroupIdxLookup(o),r=o.adjust()();for(const i of t.groups)i.validScopes===a&&r(s,e,i);for(const a of e){const e="category"===this.values[a].valueType,o=s[a],r=D(i[a]),l=null==n?void 0:n.get(r),c=e?new nh:new ah;for(let t=0;t<o.length;t+=1)!0!==(null==l?void 0:l[t])&&c.extend(o[t]);t.domain.values[a]=c.getDomain()}}}postProcessProperties(t){for(const{adjust:e,property:i,scopes:s}of this.propertyProcessors)for(const n of this.valueIdxLookup(s,i))e()(t,n)}reduceData(t){var e;t.reduced??(t.reduced={});const{dataSources:i,keys:s}=t;for(const n of this.reducers){const a=n.reducer();let o=n.initialValue;if("grouped"===t.type)for(const e of t.groups)o=a(o,e.keys);else{const t=D(i.keys()),n=s.map((e=>e.get(t))).filter((t=>null!=t)),r=n.map((()=>{})),l=i.get(t);for(let i=0;i<l.length;i+=1){for(let t=0;t<r.length;t++)r[t]=null==(e=n[t])?void 0:e[i];o=a(o,r)}}t.reduced[n.property]=o}}postProcessData(t){t.reduced??(t.reduced={});for(const e of this.processors)t.reduced[e.property]=e.calculate(t,t.reduced[e.property])}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Set;for(const n of e)if(n.scopes)for(const t of n.scopes)i.add(t);const s=new Map,a=new Map;let o=!0;const r=()=>{for(const n of I(t,e))"category"===n.valueType?s.set(n,new nh):(s.set(n,new ah),o&&(o=(n.scopes??[]).length===i.size))};r();const l=this.buildAccessors(I(t,e));return{dataDomain:s,processValue:(t,e,i,o)=>{var c,h,d;let u,p;if(l.has(t.property)){try{p=l.get(t.property)(e)}catch{}u=null!=p}else u=t.property in e,p=u?e[t.property]:t.missingValue;if(null!=t.forceValue){p=u&&Lt(p)?-1*t.forceValue:t.forceValue,u=!0}if(!u&&!("missingValue"in t))if("string"==typeof o){const e=t.missing.get(o)??0;t.missing.set(o,e+1)}else for(const s of o){const e=t.missing.get(s)??0;t.missing.set(s,e+1)}if(s.has(t)||r(),u&&!1===(null==(c=t.validation)?void 0:c.call(t,p,e,i))){if(!("invalidValue"in t))return"integrated"!==this.mode&&n.warnOnce(`invalid value of type [${typeof p}] for [${t.scopes} / ${t.id}] ignored:`,`[${p}]`),uh;p=t.invalidValue}return t.processor&&(a.has(t)||a.set(t,t.processor()),p=null==(h=a.get(t))?void 0:h(p)),null==(d=s.get(t))||d.extend(p),p},initDataDomain:r,scopes:i,allScopesHaveSameDefs:o}}buildAccessors(t){const e=new Map;if(this.suppressFieldDotNotation)return e;for(const i of t){if(!(i.property.includes(".")||i.property.includes("[")))continue;const t=mh(i.property);if(null==t){n.warnOnce("Invalid property path [%s]",i.property);continue}const s=yh(t);e.set(i.property,s)}return e}};var xh=class t{constructor(t,e){this.mode=t,this.suppressFieldDotNotation=e,this.debug=Es.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(t,e,i){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((s,n)=>{this.requested.push({id:t,opts:i,data:e,resolve:s,reject:n})}))}execute(t){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const e=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",e);const i=this.mergeRequested(e);this.debug("DataController.execute() - merged",i),this.debug.check()&&(at().processedData=[]);const s=[];for(const{data:a,ids:o,opts:r,resolves:l,rejects:c}of i){const i=null==t?void 0:t.find((t=>sh(t,a,o,r)));let h,d;if(null==i)try{h=new fh(r,this.mode,this.suppressFieldDotNotation);const t=new Map(e.map((t=>[t.id,t.data])));d=h.processData(t)}catch(n){c.forEach((t=>t(n)));continue}else({dataModel:h,processedData:d}=i);s.push({opts:r,data:a,ids:o,dataModel:h,processedData:d}),this.debug.check()&&at("processedData").push(d),0===(null==d?void 0:d.partialValidDataCount)?l.forEach((t=>t({dataModel:h,processedData:d}))):d?this.splitResult(h,d,o,l):c.forEach((t=>t(new Error("AG Charts - no processed data generated"))))}return s}validateRequests(t){const e=[];for(const[i,s]of t.entries())i>0&&s.data.length!==t[0].data.length&&!1===s.opts.groupByData&&!1===s.opts.groupByKeys?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):e.push(s);return e}mergeRequested(e){const i=[];for(const s of e){const e=i.find(t.groupMatch(s));e?e.push(s):i.push([s])}return i.map(t.mergeRequests)}splitResult(t,e,i,s){for(let n=0;n<i.length;n++){(0,s[n])({dataModel:t,processedData:e})}}static groupMatch({data:t,opts:e}){function i(t){return t.filter((t=>"key"===t.type)).map((t=>t.property)).join(";")}const{groupByData:s,groupByKeys:n=!1,groupByFn:a,props:o}=e,r=i(o);return([e])=>(!1===s||e.data===t)&&(e.opts.groupByKeys??!1)===n&&e.opts.groupByFn===a&&i(e.opts.props)===r}static mergeRequests(e){const i=new Set(["key","group-value-processor"]);return e.reduce(((e,{id:s,data:n,resolve:a,reject:o,opts:{props:r,...l}})=>{var c;e.ids.push(s),e.rejects.push(o),e.resolves.push(a),e.data??(e.data=n),e.opts??(e.opts={...l,props:[]});for(const h of r){const a={...h,scopes:[s],data:n};t.createIdsMap(s,a);const o=e.opts.props.find((e=>e.type===a.type&&(i.has(e.type)||e.data===a.data)&&t.deepEqual(e,a)));o?(o.scopes??(o.scopes=[]),o.scopes.push(...a.scopes??[]),"key"!==o.type&&"value"!==o.type||!(null==(c=a.idsMap)?void 0:c.size)||t.mergeIdsMap(a.idsMap,o.idsMap)):e.opts.props.push(a)}return e}),{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(t,e){for(const[i,s]of t){const t=e.get(i);if(null==t)e.set(i,new Set(s));else for(const e of s)t.add(e)}}static createIdsMap(t,e){null!=e.id&&(e.idsMap??(e.idsMap=new Map),e.idsMap.has(t)?e.idsMap.get(t).add(e.id):e.idsMap.set(t,new Set([e.id])))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(e)){if(n=e.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!t.deepEqual(e[s],i[s]))return!1;return!0}const a=Object.keys(e);if(n=a.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const n=a[s];if(!(t.skipKeys.has(n)||Object.hasOwn(i,n)&&t.deepEqual(e[n],i[n])))return!1}return!0}return!1}};xh.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var vh=xh,bh=new class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.moduleFactory),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate)}create(t,e){const i=this.axesMap.get(t);if(i)return i(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},Mh=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function Sh(t){var e;return null==(e=Mh.find((e=>"series"===e.type&&e.identifier===t)))?void 0:e.chartTypes}function Ih(t){if(!function(t){return"enterprise"===t.packageType}(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=Mh.find((e=>e.type===t.type&&(!("optionsKey"in e)||!("optionsKey"in t)||e.optionsKey===t.optionsKey)&&(!("contextKey"in e)||!("contextKey"in t)||e.contextKey===t.contextKey)&&e.identifier===t.identifier&&t.chartTypes.every((t=>e.chartTypes.includes(t)))));return e&&(e.useCount??(e.useCount=0),e.useCount++),null!=e}var Dh=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,{optionsKey:e,moduleFactory:i,themeTemplate:s}){this.legendMap.set(t,{optionsKey:e,moduleFactory:i}),this.themeTemplates.set(e,s)}create(t,e){var i;const s=null==(i=this.legendMap.get(t))?void 0:i.moduleFactory;if(s)return s(e);throw new Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce(((t,[e,i])=>(t[e]=i.optionsKey,t)),{})}},Ah=class extends Map{get(t){return super.get(t)??"unknown"}isCartesian(t){return"cartesian"===this.get(t)}isPolar(t){return"polar"===this.get(t)}isHierarchy(t){return"hierarchy"===this.get(t)}isTopology(t){return"topology"===this.get(t)}isFlowProportion(t){return"flow-proportion"===this.get(t)}isStandalone(t){return"standalone"===this.get(t)}isGauge(t){return"gauge"===this.get(t)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter((t=>this.isCartesian(t)))}get polarTypes(){return this.seriesTypes.filter((t=>this.isPolar(t)))}get hierarchyTypes(){return this.seriesTypes.filter((t=>this.isHierarchy(t)))}get topologyTypes(){return this.seriesTypes.filter((t=>this.isTopology(t)))}get flowProportionTypes(){return this.seriesTypes.filter((t=>this.isFlowProportion(t)))}get standaloneTypes(){return this.seriesTypes.filter((t=>this.isStandalone(t)))}get gaugeTypes(){return this.seriesTypes.filter((t=>this.isGauge(t)))}},Lh=class extends Map{set(t,e){return super.set(t,te(e,this.get(t)))}},Nh=new Ah,kh=new Ah,wh=new Lh,Ch=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,{chartTypes:[e],moduleFactory:i,tooltipDefaults:s,defaultAxes:n,themeTemplate:a,paletteFactory:o,solo:r,stackable:l,groupable:c,stackedByDefault:h,hidden:d}){this.setThemeTemplate(t,a),this.seriesMap.set(t,{moduleFactory:i,tooltipDefaults:s,defaultAxes:n,paletteFactory:o,solo:r,stackable:l,groupable:c,stackedByDefault:h}),Nh.set(t,e),d||kh.set(t,e)}create(t,e){var i;const s=null==(i=this.seriesMap.get(t))?void 0:i.moduleFactory;if(s)return s(e);throw new Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t,e){var i;const s=null==(i=this.seriesMap.get(t))?void 0:i.defaultAxes;if(null==s)return null;return{axes:cr("function"==typeof s?s(e):s)}}isDerivedDefaultAxes(t){var e;return"function"==typeof(null==(e=this.seriesMap.get(t))?void 0:e.defaultAxes)}setThemeTemplate(t,e){const i=this.themeTemplates.get(t);this.themeTemplates.set(t,te(e,i))}getThemeTemplate(t){return this.themeTemplates.get(t)}getPaletteFactory(t){var e;return null==(e=this.seriesMap.get(t))?void 0:e.paletteFactory}getTooltipDefauls(t){var e;return null==(e=this.seriesMap.get(t))?void 0:e.tooltipDefaults}isSolo(t){var e;return(null==(e=this.seriesMap.get(t))?void 0:e.solo)??!1}isGroupable(t){var e;return(null==(e=this.seriesMap.get(t))?void 0:e.groupable)??!1}isStackable(t){var e;return(null==(e=this.seriesMap.get(t))?void 0:e.stackable)??!1}isStackedByDefault(t){var e;return(null==(e=this.seriesMap.get(t))?void 0:e.stackedByDefault)??!1}},Th=class t extends hl{constructor(t){super(),this.chart=t}subscribe(e=t.DEFAULT_GROUP){let i=this.get(e);return i||(i=new Set,t.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(e=t.DEFAULT_GROUP){var i;return null==(i=this.get(e))||i.delete(this.chart),this}getChart(){return this.chart}getGroup(e=t.DEFAULT_GROUP){const i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(e=t.DEFAULT_GROUP){return this.getGroup(e).filter((t=>t!==this.chart))}get(e){return t.chartsGroups.get(e)}};Th.chartsGroups=new Map,Th.DEFAULT_GROUP=Symbol("sync-group-default");var Eh=Th,Oh=class extends ki{constructor(){super(...arguments),this.enabled=!1}};s([Ti(zi)],Oh.prototype,"enabled",2),s([Ti(Gi)],Oh.prototype,"tabIndex",2);var Rh=["top","right","bottom","left"];var jh=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function Ph(t){var e;const{series:i}=t;if(i)return(null==(e=i[0])?void 0:e.type)??"line"}function zh(t){const e=Ph(t);return null!=e&&(Nh.isCartesian(e)||"cartesian"===(null==(i=Sh(e))?void 0:i.find((t=>"cartesian"===t))));var i}function Bh(t){const e=Ph(t);return null!=e&&(Nh.isPolar(e)||"polar"===(null==(i=Sh(e))?void 0:i.find((t=>"polar"===t))));var i}function Fh(t){const e=Ph(t);return null!=e&&(Nh.isHierarchy(e)||"hierarchy"===(null==(i=Sh(e))?void 0:i.find((t=>"hierarchy"===t))));var i}function Gh(t){const e=Ph(t);return null!=e&&(Nh.isTopology(e)||"topology"===(null==(i=Sh(e))?void 0:i.find((t=>"topology"===t))));var i}function Uh(t){const e=Ph(t);return null!=e&&(Nh.isFlowProportion(e)||"flow-proportion"===(null==(i=Sh(e))?void 0:i.find((t=>"flow-proportion"===t))));var i}function Yh(t){const e=Ph(t);return null!=e&&(Nh.isStandalone(e)||"standalone"===(null==(i=Sh(e))?void 0:i.find((t=>"standalone"===t))));var i}function Wh(t){const e=Ph(t);return null!=e&&(Nh.isGauge(e)||"gauge"===(null==(i=Sh(e))?void 0:i.find((t=>"gauge"===t))));var i}var Vh=class extends Jn{applyOptions(t){for(const e of this.moduleMap.values())e.module.optionsKey in t&&Ci(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(const{module:t,moduleInstance:e}of this.moduleMap.values())"legend"===t.type&&(yield{legendType:t.identifier,legend:e})}},_h="ag-charts-overlay",Hh="ag-charts-dark-overlay",Zh=class extends ki{constructor(t,e){super(),this.className=t,this.defaultMessageId=e,this.enabled=!0}getText(t){return t.t(this.text??this.defaultMessageId)}getElement(t,e,i){var s;if(null==(s=this.content)||s.remove(),this.focusBox=i,this.renderer){const t=this.renderer();if(t instanceof HTMLElement)this.content=t;else{const e=lt("div");e.innerHTML=t,this.content=e.firstElementChild}}else{const i=lt("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});i.innerText=this.getText(e),this.content=i,null==t||t.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(t){i.style.opacity=String(t)},onStop(){i.style.opacity="1"}})}return this.content}removeElement(t=()=>{var t;return null==(t=this.content)?void 0:t.remove()},e){if(this.content){if(e){const{content:i}=this;e.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(t){i.style.opacity=String(t)},onStop(){null==t||t()}})}else null==t||t();this.content=void 0,this.focusBox=void 0}}};s([Ti(zi)],Zh.prototype,"enabled",2),s([Ti(Fi,{optional:!0})],Zh.prototype,"text",2),s([Ti(Bi,{optional:!0})],Zh.prototype,"renderer",2);var Kh=class extends ki{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new Zh("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new Zh("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new Zh("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new Zh("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(t){for(const e of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(void 0!==e.focusBox)return{text:e.getText(t),rect:e.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};s([Ti(zi)],Kh.prototype,"darkTheme",2),s([Ti(ji)],Kh.prototype,"loading",2),s([Ti(ji)],Kh.prototype,"noData",2),s([Ti(ji)],Kh.prototype,"noVisibleSeries",2),s([Ti(ji)],Kh.prototype,"unsupportedBrowser",2);var $h=(t=>(t[t.BACKGROUND=0]="BACKGROUND",t[t.ANY_CONTENT=1]="ANY_CONTENT",t))($h||{}),Xh=(t=>(t[t.FOREGROUND=0]="FOREGROUND",t[t.HIGHLIGHT=1]="HIGHLIGHT",t[t.LABEL=2]="LABEL",t))(Xh||{}),Qh=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_NODE=1]="NEAREST_NODE",t[t.AXIS_ALIGNED=2]="AXIS_ALIGNED",t))(Qh||{}),qh=class{constructor(t,e,{datum:i},s){this.type=t,this.event=e,this.datum=i,this.seriesId=s.id}},Jh=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},td=class extends Ar{constructor(t){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=qh,this.internalId=pt(this),this.contentGroup=new Ln({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new Ln({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new Ln({name:`${this.internalId}-annotation`}),this.labelGroup=new Ln({name:`${this.internalId}-series-labels`}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new Jn,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new cl,this._pickNodeCache=new kn;const{moduleCtx:e,pickModes:i,directionKeys:s={},directionNames:n={},canHaveAxes:a=!1,usesPlacedLabels:o=!1}=t;this.ctx=e,this.directionKeys=s,this.directionNames=n,this.canHaveAxes=a,this.usesPlacedLabels=o,this.highlightGroup=new Ln({name:`${this.internalId}-highlight`}),this.highlightNode=this.highlightGroup.appendChild(new In({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new In({name:"highlightLabel",zIndex:10})),this.pickModes=i}get pickModeAxis(){return"main"}get id(){var t;return(null==(t=this.properties)?void 0:t.id)??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(t){this.properties.visible=t,this.ctx.legendManager.toggleItem({enabled:t,seriesId:this.id}),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){var t;return(null==(t=this.properties.tooltip)?void 0:t.enabled)??!1}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:s,visible:n}=this;t&&this.ctx.seriesStateManager.deregisterSeries(this),e&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:s,visible:n,seriesGrouping:e}),this.fireEvent(new Jh(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(t,e,i){t.appendChild(this.contentGroup),e.appendChild(this.highlightGroup),e.appendChild(this.labelGroup),null==i||i.appendChild(this.annotationGroup)}detachSeries(t,e,i){null==t||t.removeChild(this.contentGroup),e.removeChild(this.highlightGroup),e.removeChild(this.labelGroup),null==i||i.removeChild(this.annotationGroup)}setSeriesIndex(t){return t!==this._declarationOrder&&(this._declarationOrder=t,this.contentGroup.zIndex=[1,t,0],this.highlightGroup.zIndex=[1,t,1],this.labelGroup.zIndex=[1,t,2],this.annotationGroup.zIndex=t,!0)}renderToOffscreenCanvas(){return!1}addEventListener(t,e){return super.addEventListener(t,e)}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach((t=>t())),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=null==e?void 0:e[i],n=[];if(!s)return n;const a=(...t)=>{for(const e of t)Array.isArray(e)?a(...e):"object"==typeof e?a(...Object.values(e)):n.push(e)};return a(...s.map((t=>this.properties[t]))),n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){return this.directionKeys[this.resolveKeyDirection(t)]??[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapModules((e=>e.getDomain(t))).flat();return 0!==i.length?e.concat(i):e}getRange(t,e){return this.getSeriesRange(t,e)}getVisibleItems(t,e,i){return 1/0}getGradientFillOptions({bounds:t},e){const{axes:i}=this,s=i.x,n=i.y,a=(null==s?void 0:s.range)??[0,1],o=(null==n?void 0:n.range)??[0,1],[r,l]=St(a),[c,h]=St(o),d=l-r,u=h-c;let p=[0,1];return"series"===t?p=this.getSeriesDomain("y"):"axes"===t&&(p=(null==n?void 0:n.scale.domain)??[0,1]),{bbox:new Et(r,c,d,u),domain:p,defaultColorRange:e}}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.properties.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){var t,e;const i=null==(e=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight())?void 0:e.series;return null==i?0:i!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules((t=>t.getTooltipParams())).reduce(((t,e)=>Object.assign(t,e)),{})}pickNode(t,e,i=!1){const{pickModes:s,pickModeAxis:n,visible:a,contentGroup:o}=this;if(!a||!o.visible)return;if("highlight"===e&&!this.properties.highlight.enabled)return;if("highlight-tooltip"===e&&!this.properties.highlight.enabled)return;let r=1/0;if("tooltip"===e||"highlight-tooltip"===e){const{tooltip:t}=this.properties;r="number"==typeof t.range?t.range:1/0,i||(i="exact"===t.range)}else if("event"===e||"context-menu"===e){const{nodeClickRange:t}=this.properties;r="number"==typeof t?t:1/0,i||(i="exact"===t)}const l=s.filter((t=>!i||0===t)),{x:c,y:h}=t,d=JSON.stringify({x:c,y:h,maxDistance:r,selectedPickModes:l});if(this._pickNodeCache.has(d))return this._pickNodeCache.get(d);for(const u of l){let e;switch(u){case 0:e=this.pickNodeExactShape(t);break;case 1:e=this.pickNodeClosestDatum(t);break;case 2:e=null!=n?this.pickNodeMainAxisFirst(t,"main-category"===n):void 0}if(e&&e.distance<=r)return this._pickNodeCache.set(d,{pickMode:u,match:e.datum,distance:e.distance})}return this._pickNodeCache.set(d,void 0)}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e&&!0!==e.datum.missing)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,e){const i=xt(t.x,t.y,e);if(void 0!==i.nearest&&!0!==i.nearest.datum.missing)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(t){}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeDoubleClick",t,e,this))}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}onLegendInitialState(t,e){const{visible:i=!0,itemId:s,legendItemName:n}=e??{};this.toggleSeriesItem(i,t,s,n)}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendType:n}=t,a="legendItemName"in this.properties?this.properties.legendItemName:void 0,o="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,r=null!=a&&a===t.legendItemName;(s.id===this.id||r||null!=o)&&this.toggleSeriesItem(e,n,i,a,t)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n,legendType:a}=t,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=null!=o&&o===t.legendItemName;s.id===this.id||l||null!=r?this.toggleSeriesItem(!0,a,i,o,t):e&&1===n?this.toggleSeriesItem(!0,a,void 0,o):this.toggleSeriesItem(!1,a,void 0,o)}toggleSeriesItem(t,e,i,s,n){const a=this.id;(t||"category"!==e)&&(this.visible=t),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const o={type:"seriesVisibilityChange",seriesId:a,itemId:i,legendItemName:(null==n?void 0:n.legendItemName)??s,visible:t};this.fireEvent(o),this.ctx.legendManager.toggleItem({enabled:t,seriesId:a,itemId:i,legendItemName:s})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(t,e,i=Fa){return t.formatter?this.ctx.callbackCache.call(t.formatter,{seriesId:this.id,...e})??i(e.value):i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var s;const n=te({size:(null==(s=e.datum.point)?void 0:s.size)??0},i);if(t.itemStyler){return te(this.ctx.callbackCache.call(t.itemStyler,{seriesId:this.id,...n,...e,datum:e.datum.datum}),n)}return n}updateMarkerStyle(t,e,i,s=e.getStyle(),{applyTranslation:n=!0,selected:a=!0}={}){const{point:o}=i.datum,r=this.getMarkerStyle(e,i,s),l=this.visible&&r.size>0&&o&&!isNaN(o.x)&&!isNaN(o.y);if(n?t.setProperties({visible:l,...r,translationX:null==o?void 0:o.x,translationY:null==o?void 0:o.y}):t.setProperties({visible:l,...r}),a||(t.fillOpacity*=.25,t.strokeOpacity*=.125),"function"==typeof e.shape&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();const e=t.getBBox();if(void 0!==o&&e.isFinite()){const t=e.computeCenter(),[i,s]=["x","y"].map((e=>(r.strokeWidth??0)+Math.abs(t[e]-o[e])));o.focusSize=Math.max(e.width+i,e.height+s)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=t??{width:NaN,height:NaN},s=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,n=null!=rr(this.nodeDataDependencies,s);return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}pickFocus(t){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(t,e){const{datumCallbackCache:i}=this,s=i.get(t);if(null!=s)return s;const n=e();return i.set(t,n),n}};function ed(t,e,i,s){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const s=e*e-4*t*i,n=[];if(0===s){const i=-e/(2*t);i>=0&&i<=1&&n.push(i)}else if(s>0){const i=Math.sqrt(s),a=(-e-i)/(2*t),o=(-e+i)/(2*t);a>=0&&a<=1&&n.push(a),o>=0&&o<=1&&n.push(o)}return n}(e,i,s);const n=e/t,a=i/t,o=(3*a-n*n)/9,r=(9*n*a-27*(s/t)-2*n*n*n)/54,l=o*o*o+r*r,c=1/3,h=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(r+t)*Math.pow(Math.abs(r+t),c),i=Math.sign(r-t)*Math.pow(Math.abs(r-t),c),s=Math.abs(Math.sqrt(3)*(e-i)/2),a=-c*n+(e+i);if(a>=0&&a<=1&&h.push(a),0===s){const t=-c*n-(e+i)/2;t>=0&&t<=1&&h.push(t)}}else{const t=Math.acos(r/Math.sqrt(-o*o*o)),e=c*n,i=2*Math.sqrt(-o),s=i*Math.cos(c*t)-e,a=i*Math.cos(c*(t+2*Math.PI))-e,l=i*Math.cos(c*(t+4*Math.PI))-e;s>=0&&s<=1&&h.push(s),a>=0&&a<=1&&h.push(a),l>=0&&l<=1&&h.push(l)}return h}function id(t,e,i,s,n,a,o,r){const l=(i-t)*(r-a)-(s-e)*(o-n);if(0===l)return 0;const c=((o-n)*(e-a)-(t-n)*(r-a))/l,h=((i-t)*(e-a)-(s-e)*(t-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?1:0}function sd(t,e,i,s,n,a,o,r,l,c,h,d){let u=0;const p=c-d,g=h-l,m=l*(d-c)-c*(h-l),y=nd(t,i,n,o),f=nd(e,s,a,r),x=ed(p*y[0]+g*f[0],p*y[1]+g*f[1],p*y[2]+g*f[2],p*y[3]+g*f[3]+m);for(const v of x){const t=v*v,e=v*t,i=y[0]*e+y[1]*t+y[2]*v+y[3],s=f[0]*e+f[1]*t+f[2]*v+f[3];let n;n=l===h?(s-c)/(d-c):(i-l)/(h-l),n>=0&&n<=1&&u++}return u}function nd(t,e,i,s){return[3*e-t-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function ad(t,e,i,s,n,a,o,r,l,c){if(isNaN(t)||isNaN(e))return 0;a&&([n,s]=[s,n]);const h=(c-r)/(l-o),d=r-h*o,u=Math.pow(h,2)+1,p=2*(h*(d-e)-t),g=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),m=Math.pow(p,2)-4*u*g;if(m<0)return 0;const y=(-p+Math.sqrt(m))/2/u,f=(-p-Math.sqrt(m))/2/u;let x=0;return[y,f].forEach((i=>{if(!(i>=Math.min(o,l)&&i<=Math.max(o,l)))return;const a=i-t,r=h*i+d-e;Zs(Math.atan2(r,a),s,n)&&x++})),x}function od(t,e,i,s,n){return(1-n)**3*t+3*(1-n)**2*n*e+3*(1-n)*n**2*i+n**3*s}function rd(t,e,i,s,n){if(n<=Math.min(t,s))return t<s?0:1;if(n>=Math.max(t,s))return t<s?1:0;let a=0,o=1,r=NaN;for(let l=0;l<12;l+=1){r=(a+o)/2;od(t,e,i,s,r)<n?a=r:o=r}return r}function ld(t,e,i,s,n,a,o,r,l){const c=(1-l)*t+l*i,h=(1-l)*e+l*s,d=(1-l)*i+l*n,u=(1-l)*s+l*a,p=(1-l)*n+l*o,g=(1-l)*a+l*r,m=(1-l)*c+l*d,y=(1-l)*h+l*u,f=(1-l)*d+l*p,x=(1-l)*u+l*g,v=(1-l)*m+l*f,b=(1-l)*y+l*x;return[[{x:t,y:e},{x:c,y:h},{x:m,y:y},{x:v,y:b}],[{x:v,y:b},{x:f,y:x},{x:p,y:g},{x:o,y:r}]]}function cd(t,e,i,s){const n=3*e-t-3*i+s,a=3*t-6*e+3*i,o=-3*t+3*e;if(0===n){if(0!==a){const t=-o/a;if(t>0&&t<1)return[t]}return[]}const r=a*a-4*n*o;if(r>=0){const t=Math.sqrt(r);return[(-a+t)/(2*n),(-a-t)/(2*n)].filter((t=>t>0&&t<1))}return[]}function hd(t,e,i,s,n,a,o,r){return[...cd(t,i,n,o),...cd(e,s,a,r)]}s([Kn({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],td.prototype,"seriesGrouping",2);var dd=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return 0===this.commands.length}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}roundRect(t,e,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(t,e+n),this.arc(t+n,e+n,n,Math.PI,1.5*Math.PI),this.lineTo(t+n,e),this.lineTo(t+i-n,e),this.arc(t+i-n,e+n,n,1.5*Math.PI,2*Math.PI),this.lineTo(t+i,e+n),this.lineTo(t+i,e+s-n),this.arc(t+i-n,e+s-n,n,0,Math.PI/2),this.lineTo(t+i-n,e+s),this.lineTo(t+n,e+s),this.arc(t+ +n,e+s-n,n,Math.PI/2,Math.PI),this.lineTo(t,e+s-n),this.closePath()}arc(t,e,i,s,n,a){this.openedPath=!0,this.path2d.arc(t,e,i,s,n,a),this.commands.push(2),this.params.push(t,e,i,s,n,a?1:0)}cubicCurveTo(t,e,i,s,n,a){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,i,s,n,a),this.commands.push(3),this.params.push(t,e,i,s,n,a)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){const i=this.commands,s=this.params,n=i.length,a=-1e4,o=-1e4;let r=NaN,l=NaN,c=0,h=0,d=0;for(let u=0,p=0;u<n;u++)switch(i[u]){case 0:d+=id(r,l,c,h,a,o,t,e),c=s[p++],r=c,h=s[p++],l=h;break;case 1:d+=id(c,h,s[p++],s[p++],a,o,t,e),c=s[p-2],h=s[p-1];break;case 3:d+=sd(c,h,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],a,o,t,e),c=s[p-2],h=s[p-1];break;case 2:{const i=s[p++],n=s[p++],l=s[p++],u=s[p++],g=s[p++];if(d+=ad(i,n,l,u,g,Boolean(s[p++]),a,o,t,e),!isNaN(r)){d+=id(c,h,i+Math.cos(u)*l,n+Math.sin(u)*l,a,o,t,e)}c=i+Math.cos(g)*l,h=n+Math.sin(g)*l;break}case 4:d+=id(r,l,c,h,a,o,t,e)}return d%2==1}distanceSquared(t,e){let i=1/0;const s=this.commands,a=this.params,o=s.length;let r=NaN,l=NaN,c=0,h=0;for(let d=0,u=0;d<o;d++)switch(s[d]){case 0:c=r=a[u++],h=l=a[u++];break;case 1:i=Ra(t,e,c,h,a[u++],a[u++],i);break;case 3:n.error("Command.Curve distanceSquare not implemented");break;case 2:{const s=a[u++],n=a[u++],o=a[u++],r=a[u++],l=a[u++],d=s+Math.cos(r)*o,p=n+Math.sin(r)*o,g=Boolean(a[u++]);i=Ra(t,e,c,h,d,p,i),i=ja(t,e,s,n,o,r,l,g,i),c=s+Math.cos(l)*o,h=n+Math.sin(l)*o;break}case 4:i=Ra(t,e,c,h,r,l,i)}return i}toSVG(t=(t,e)=>({x:t,y:e})){const e=[],{commands:i,params:s}=this,n=(i,...s)=>{e.push(i);for(let n=0;n<s.length;n+=2){const{x:i,y:a}=t(s[n],s[n+1]);e.push(i,a)}};let a=0;for(const o of i)switch(o){case 0:n("M",s[a++],s[a++]);break;case 1:n("L",s[a++],s[a++]);break;case 3:n("C",s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case 2:{const t=s[a++],i=s[a++],o=s[a++],r=s[a++],l=s[a++],c=s[a++];let h=c?r-l:l-r;h<0&&(h+=2*Math.ceil(-h/(2*Math.PI))*Math.PI),c&&(h=-h);const d=Math.max(Math.ceil(Math.abs(h)/(Math.PI/2)),1),u=h/d,p=4/3*Math.tan(u/4);n(0===e.length?"M":"L",t+Math.cos(r)*o,i+Math.sin(r)*o);for(let e=0;e<d;e+=1){const s=r+u*(e+0),a=r+u*(e+1),l=o*Math.sin(s),c=o*Math.cos(s),h=o*Math.sin(a),d=o*Math.cos(a);n("C",t+c-p*l,i+l+p*c,t+d+p*h,i+h-p*d,t+d,i+h)}break}case 4:e.push("Z")}return e.join(" ")}computeBBox(){const{commands:t,params:e}=this;let[i,s,n,a]=[1/0,1/0,-1/0,-1/0],[o,r]=[NaN,NaN],[l,c]=[NaN,NaN];const h=(t,e,l)=>{i=Math.min(e,i),s=Math.min(t,s),n=Math.max(t,n),a=Math.max(e,a),l&&([o,r]=[t,e])};let d=0;for(const u of t)switch(u){case 0:h(e[d++],e[d++],!0),[l,c]=[o,r];break;case 1:h(e[d++],e[d++],!0);break;case 3:{const t=e[d++],i=e[d++],s=e[d++],n=e[d++],a=e[d++],l=e[d++];h(a,l,!0);hd(o,r,t,i,s,n,a,l).forEach((e=>{const c=od(o,t,s,a,e),d=od(r,i,n,l,e);h(c,d)}));break}case 2:{const t=e[d++],i=e[d++],s=e[d++];let n=Vs(e[d++]),a=Vs(e[d++]);e[d++]&&([n,a]=[a,n]);const o=(e,n)=>{const a=t+s*Math.cos(e),o=i+s*Math.sin(e);h(a,o,n)};o(n),o(a,!0);const r=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const e of r)(n<a&&n<=e&&e<=a||n>a&&(n<=e||e<=a))&&o(e);break}case 4:[o,r]=[l,c]}return new Et(s,i,n-s,a-i)}};function ud(t){const{changeCb:e,convertor:i}=t??{};return Ot({type:"path",convertor:i,changeCb:e})}var pd=class extends ln{constructor(){super(...arguments),this.path=new dd,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=NaN}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty())}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((null==(t=this.fillShadow)?void 0:t.isDirty())??!1)||((null==(e=this._clipPath)?void 0:e.isDirty())??!1))}isPointInPath(t,e){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e)}distanceSquared(t,e){return this.distanceSquaredTransformedPoint(t,e)}svgPathData(t){return this.updatePathIfDirty(),this.path.toSVG(t)}distanceSquaredTransformedPoint(t,e){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e)?0:this.path.distanceSquared(t,e)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(t){return t.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=t.devicePixelRatio,this.updatePathIfDirty(),super.preRender(t,this.path.commands.length)}render(t){var e,i;const{ctx:s}=t;if(!this.clip||isNaN(this._clipX)||isNaN(this._clipY))this._clipPath=void 0,this.drawPath(s);else{s.save();const t=this.strokeWidth/2;this._clipPath??(this._clipPath=new dd),this._clipPath.clear(),this._clipPath.rect(-t,-t,this._clipX+t,this._clipY+t+t),s.clip(null==(e=this._clipPath)?void 0:e.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(s),s.restore()}null==(i=this.fillShadow)||i.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}toSVG(){if(!this.visible)return;const t=ct("path");return t.setAttribute("d",this.svgPathData()),this.applySvgFillAttributes(t),this.applySvgStrokeAttributes(t),{elements:[t]}}};pd.className="Path",s([ud()],pd.prototype,"clip",2),s([ud()],pd.prototype,"clipX",1),s([ud()],pd.prototype,"clipY",1);var gd=class{constructor(t){this.swapChain=t,this.div=lt("div"),this.svg=ct("svg"),this.outerPath=ct("path"),this.innerPath=ct("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=lt("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",(t=>this.onSwap(t)))}clear(){}update(t,e,i){if(null!=e)if(t instanceof pd){const i=(i,s)=>{let{x:n,y:a}=vn.toCanvasPoint(t,i,s);return n-=e.x??0,a-=e.y??0,{x:n,y:a}},s=t.svgPathData(i);this.outerPath.setAttribute("d",s),this.innerPath.setAttribute("d",s),this.show(this.svg)}else{let s;if(i){const i=Math.max(t.x-e.x,0),n=Math.max(t.y-e.y,0),a=Math.min(t.x+t.width-e.x,e.width),o=Math.min(t.y+t.height-e.y,e.height);s=new Et(i,n,a-i,o-n)}else s=new Et(t.x-e.x,t.y-e.y,t.width,t.height);Jo(this.div,s),this.show(this.div)}}onSwap(t){t!==this.element.parentElement&&(this.element.remove(),t.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(t){this.element.innerHTML="",this.element.append(t)}overrideFocusVisible(t){this.focusVisible=t;const e=this.element.parentElement;null==e||e.style.setProperty("opacity",{true:"1",false:"0",undefined:""}[`${t}`])}isFocusVisible(){const t=this.element.parentElement;return null!=t&&"1"===at().getComputedStyle(t).opacity}},md=class{constructor(t,e,i,s){this.label1=t,this.label2=e,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=t=>(Rr(t.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",t)),this.onFocus=t=>(Rr(t.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",t)),Tr(this.label1,"id",`${i}-label1`),Tr(this.label2,"id",`${i}-label2`),Rr(this.label1,"display","none"),Rr(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(s),this.inactiveAnnouncer=this.createAnnouncer(s),Tr(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(t){const e=lt("div");return e.role=t,e.className="ag-charts-swapchain",e.addEventListener("blur",this.onBlur),e.addEventListener("focus",this.onFocus),e}destroy(){for(const t of[this.activeAnnouncer,this.inactiveAnnouncer])t.removeEventListener("blur",this.onBlur),t.removeEventListener("focus",this.onFocus),t.remove()}focus(t){this.focusOptions=t,this.activeAnnouncer.focus(t),this.focusOptions=void 0}update(t){this.skipDispatch=!0,this.swap(t),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(t,e){if(this.listeners[t].push(e),"swap"===t){e(this.activeAnnouncer)}}dispatch(t,e){"focus"===t?this.hasFocus=!0:"blur"===t&&(this.hasFocus=!1),this.listeners[t].forEach((t=>t(e)))}swap(t){const e=this.activeAnnouncer.tabIndex;this.label2.textContent=t,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],Er(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),Er(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:e}),this.dispatch("swap",this.activeAnnouncer)}},yd={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function fd(t,e){for(const i of e)if("code"in i){if(i.code===t.code)return!0}else{if(!(i.key!==t.key||void 0!==i.shift&&i.shift!==t.shiftKey||void 0!==i.ctrlOrMeta&&i.ctrlOrMeta!==t.ctrlKey&&i.ctrlOrMeta!==t.metaKey))return!0}return!1}function xd(t,e,i){const{x:s,y:n}=function(t,e,i){const s=Nc(t,i.datum);if(null!=s)return{x:s.canvasX,y:s.canvasY};const n=i.bounds;if(null!=n){if(n instanceof Et){const{x:t,y:i}=n.computeCenter();return{x:e.x+t,y:e.y+i}}return vn.toCanvas(n).computeCenter()}}(t,e,i)??{};if(void 0!==s&&void 0!==n)return{type:"keyboard",canvasX:s,canvasY:n}}function vd(t,e,i,s){let{top:n,right:a,bottom:o,left:r,width:l,height:c}=s;return null!=r?null!=l?a=i.width-r+l:null!=a&&(l=i.width-r-a):null!=a&&null!=l&&(r=i.width-a-l),null!=n?null!=c?o=i.height-n-c:null!=o&&(c=i.height-o-n):null!=o&&null!=c&&(n=i.height-o-c),null==l?null==c?(l=t,c=e):l=Math.ceil(t*c/e):null==c&&(c=Math.ceil(e*l/t)),null==r&&(r=null==a?Math.floor((i.width-l)/2):i.width-a-l),null==n&&(n=null==o?Math.floor((i.height-c)/2):i.height-c-o),{x:r,y:n,width:l,height:c}}var bd=null;function Md(t){if(null!=t)return""===t?"":(bd??(bd=lt("div")),bd.textContent=String(t),bd.innerHTML)}function Sd(t,e){const{path:i,size:s}=t,{x:n,y:a}=t;i.clear();let o=!1;for(const[r,l]of e){const t=n+(r-.5)*s,e=a+(l-.5)*s;o?i.lineTo(t,e):i.moveTo(t,e),o=!0}i.closePath()}var Id={circle({path:t,x:e,y:i,size:s}){const n=s/2;t.clear(),t.arc(e,i,n,0,2*Math.PI),t.closePath()},cross(t){Sd(t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(t){Sd(t,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:t,x:e,y:i,size:s}){const n=s/4;i+=n/2,t.clear(),t.arc(e-n,i-n,n,Ks(130),Ks(330)),t.arc(e+n,i-n,n,Ks(220),Ks(50)),t.lineTo(e,i+n),t.closePath()},pin({path:t,x:e,y:i,size:s}){const n=.5,a=.5;t.moveTo(e+-.34375*s,i+-.15625*s),t.cubicCurveTo(e+-.34375*s,i+-.348509*s,e+-.192259*s,i+-.5*s,e+0*s,i+-.5*s),t.cubicCurveTo(e+(.692259-n)*s,i+-.5*s,e+.34375*s,i+-.348509*s,e+.34375*s,i+-.15625*s),t.cubicCurveTo(e+.34375*s,i+(.493824-a)*s,e+.284625*s,i+(.600181-a)*s,e+(.716461-n)*s,i+(.695393-a)*s),t.cubicCurveTo(e+.199009*s,i+.219769*s,e+(.681271-n)*s,i+.243104*s,e+(.663785-n)*s,i+(.766105-a)*s),t.cubicCurveTo(e+(.611893-n)*s,i+(.834367-a)*s,e+(.562228-n)*s,i+.399699*s,e+(.528896-n)*s,i+(.980648-a)*s),t.cubicCurveTo(e+(.524075-n)*s,i+(.992358-a)*s,e+(.512663-n)*s,i+.5*s,e+0*s,i+.5*s),t.cubicCurveTo(e+(.487337-n)*s,i+.5*s,e+(.475925-n)*s,i+(.992358-a)*s,e+(.471104-n)*s,i+(.980648-a)*s),t.cubicCurveTo(e+(.487337-n)*s,i+.5*s,e+(.475925-n)*s,i+(.992358-a)*s,e+(.471104-n)*s,i+(.980648-a)*s),t.cubicCurveTo(e+(.437772-n)*s,i+.399699*s,e+(.388107-n)*s,i+(.834367-a)*s,e+(.336215-n)*s,i+(.766105-a)*s),t.cubicCurveTo(e+(.318729-n)*s,i+.243104*s,e+-.199009*s,i+.219769*s,e+(.283539-n)*s,i+(.695393-a)*s),t.cubicCurveTo(e+-.284625*s,i+(.600181-a)*s,e+-.34375*s,i+(.493824-a)*s,e+-.34375*s,i+-.15625*s),t.closePath()},plus(t){Sd(t,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:t,x:e,y:i,size:s,pixelRatio:n}){const a=s/2;t.clear(),t.moveTo(nn(n,e-a),nn(n,i-a)),t.lineTo(nn(n,e+a),nn(n,i-a)),t.lineTo(nn(n,e+a),nn(n,i+a)),t.lineTo(nn(n,e-a),nn(n,i+a)),t.closePath()},star({path:t,x:e,y:i,size:s}){const n=s/2,a=n/2,o=Math.PI/2;for(let r=0;r<10;r++){const s=r%2==0?n:a,l=r*Math.PI/5-o,c=e+Math.cos(l)*s,h=i+Math.sin(l)*s;t.lineTo(c,h)}t.closePath()},triangle(t){Sd(t,[[.5,0],[1,.87],[0,.87]])}},Dd=class extends pd{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}updatePath(){var t,e;const{path:i,shape:s,x:n,y:a,size:o}=this,r=(null==(e=null==(t=this.layerManager)?void 0:t.canvas)?void 0:e.pixelRatio)??1,l=Ad.anchor(s),c={path:i,x:n-(l.x-.5)*o,y:a-(l.y-.5)*o,size:o,pixelRatio:r};i.clear(),"string"==typeof s?Id[s](c):"function"==typeof s&&s(c)}computeBBox(){const{x:t,y:e,size:i}=this,s=Ad.anchor(this.shape);return new Et(t-i*s.x,e-i*s.y,i,i)}executeFill(t,e){if(e)return super.executeFill(t,e)}executeStroke(t,e){if(e)return super.executeStroke(t,e)}};s([ud()],Dd.prototype,"shape",2),s([ud()],Dd.prototype,"x",2),s([ud()],Dd.prototype,"y",2),s([ud({convertor:Math.abs})],Dd.prototype,"size",2);var Ad=class extends(mn(yn(fn(Dd)))){static anchor(t){return"pin"===t?{x:.5,y:1}:"function"==typeof t&&"anchor"in t?t.anchor:{x:.5,y:.5}}constructor(t){super(t),null!=(null==t?void 0:t.shape)&&(this.shape=t.shape)}};function Ld(t,e,i=e*(5/3)){var s;const n=new In,a=Math.min(t.marker.strokeWidth,2),o=Math.min((null==(s=t.line)?void 0:s.strokeWidth)??0,2),r=Math.max(!1===t.marker.enabled?0:e,null==t.line?0:i),l=Math.max(!1===t.marker.enabled?0:e,o);if(null!=t.line){const{stroke:e,strokeOpacity:i,lineDash:s}=t.line,a=new Pa;a.x1=0,a.y1=l/2,a.x2=r,a.y2=l/2,a.stroke=e,a.strokeOpacity=i,a.strokeWidth=o,a.lineDash=s,n.append(a)}if(!1!==t.marker.enabled){const{shape:i,fill:s,fillOpacity:o,stroke:c,strokeOpacity:h,lineDash:d,lineDashOffset:u}=t.marker,p=new Ad;p.shape=i??"square",p.size=e,p.fill=s,p.fillOpacity=o,p.stroke=c,p.strokeOpacity=h,p.strokeWidth=a,p.lineDash=d,p.lineDashOffset=u;const g=Ad.anchor(i),m=r/2+(g.x-.5)*e,y=l/2+(g.y-.5)*e,f=e/(e+a);p.x=0,p.y=0,p.translationX=m,p.translationY=y,p.scalingX=f,p.scalingY=f,n.append(p)}return In.toSVG(n,r,l)}var Nd=class extends cl{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(t,e){if(Number.isNaN(this.x)||Number.isNaN(this.y))return this.x=t,this.y=e,this.vx=0,this.vy=0,this.emitUpdate(),void(null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0));this.x1=t,this.y1=e,this.t0=Date.now(),null==this.animationFrameHandle&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:t,y1:e,t0:i}=this,s=Date.now(),n=s-i;this.t0=s;const a=.001,o=0|Math.ceil(n/1);let{x:r,y:l,vx:c,vy:h}=this;for(let d=0;d<o;d+=1){c+=-(200*(r-t)+12*c)/.1*a,h+=-(200*(l-e)+12*h)/.1*a,r+=c*a,l+=h*a}Math.hypot(r-t,l-e)<.5?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=r,this.y=l,this.vx=c,this.vy=h,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}},kd="ag-charts-tooltip",wd="ag-charts-tooltip--dark";function Cd(t){var e;const i=[];return"raw"===t.type?"":(null!=t.heading&&i.push(t.heading),null!=t.title&&i.push(t.title),null==(e=t.data)||e.forEach((t=>{i.push(t.label??t.fallbackLabel,t.value)})),i.join("; "))}function Td(t,e,i){let s="";null==t?s+=`<span class="${kd}-label">${Md(e)}</span>`:(s+=`<span class="${kd}-label">${Md(t)}</span>`,s+=" ",s+=`<span class="${kd}-value">${Md(e)}</span>`);const n=[`${kd}-row`];return i&&n.push(`${kd}-row--inline`),s=`<div class="${n.join(" ")}">${s}</div>`,s}var Ed=class extends ki{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};s([Ti(Is(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left",{value:"sparkline",undocumented:!0},{value:"sparkline-",undocumented:!0}],"a position type"))],Ed.prototype,"type",2),s([Ti(Gi)],Ed.prototype,"xOffset",2),s([Ti(Gi)],Ed.prototype,"yOffset",2);var Od=class extends ki{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new Ed,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new Nd,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this._compact=!1,this._visible=!1,this.positionParams=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(t){"togglePopover"in at().HTMLElement.prototype&&(this.element=t.addChild("canvas-overlay",kd),this.element.setAttribute("popover","manual"),this.element.className=kd)}destroy(t){t.removeChild("canvas-overlay",kd),this.destroyFns.forEach((t=>t()))}isVisible(){return this._visible}contains(t){var e;return(null==(e=this.element)?void 0:e.contains(t))??!1}updateTooltipPosition(){var t,e,i;const{element:s,positionParams:n}=this;if(null==s||null==n)return;const{canvasRect:a,relativeRect:o,meta:r}=n,{x:l,y:c}=this.springAnimation,h=(null==(t=r.position)?void 0:t.type)??this.position.type,d=(null==(e=r.position)?void 0:e.xOffset)??0,u=(null==(i=r.position)?void 0:i.yOffset)??0,p=o.x,g=o.y,m=o.width-s.clientWidth-1+p,y=o.height-s.clientHeight+g;let f=this.getTooltipBounds({positionType:h,canvasX:l,canvasY:c,yOffset:u,xOffset:d,canvasRect:a}),x=vd(s.clientWidth,s.clientHeight,o,f);"sparkline"===h&&(x.x<=p||x.x>=m)&&(f=this.getTooltipBounds({positionType:"sparkline-constrained",canvasX:l,canvasY:c,yOffset:u,xOffset:d,canvasRect:a}),x=vd(s.clientWidth,s.clientHeight,o,f));const v=bt(p,x.x,m),b=bt(g,x.y,y),M=v!==x.x||b!==x.y,S=!("node"!==h&&"pointer"!==h||M||d||u),I=r.showArrow??this.showArrow??S;this.updateShowArrow(I),this.updateCompact("sparkline"===h||"sparkline-constrained"===h),s.style.transform=`translate(${v}px, ${b}px)`}show(t,e,i,s,n=!1){const{element:a}=this;if(null!=a&&null!=s)a.innerHTML=function(t){var e,i,s,n;if("raw"===t.type)return t.rawHtmlString;let a="";if(null!=t.heading&&null!=t.title||1!==(null==(e=t.data)?void 0:e.length)||null!=t.data[0].label||null==t.data[0].value){const e=null==t.title&&1===(null==(i=t.data)?void 0:i.length);null!=t.heading&&(a+=`<span class="${kd}-heading">${Md(t.heading)}</span>`,a+=" ");const o=null==t.symbol?void 0:Ld(t.symbol,12);null==o||null==t.title&&!(null==(s=t.data)?void 0:s.length)||(a+=`<span class="${kd}-symbol">${o}</span>`),null!=t.title&&(a+=`<span class="${kd}-title">${Md(t.title)}</span>`,a+=" "),null==(n=t.data)||n.forEach((t=>{a+=Td(t.label??t.fallbackLabel,t.value,e),a+=" "}))}else{const e=t.data[0];a+=Td(t.heading??t.title,e.value,!1)}return a=`<div class="${kd}-content">${a.trimEnd()}</div>`,a}(s);else if(null==a||""===a.innerHTML)return void this.toggle(!1);const o={x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height};this.positionParams={canvasRect:e,relativeRect:o,meta:i},this.springAnimation.update(i.canvasX,i.canvasY),a.style.top=`${e.top}px`,a.style.left=`${e.left}px`,i.enableInteraction?(this.enableInteraction=!0,a.style.pointerEvents="auto",a.removeAttribute("aria-hidden")):(this.enableInteraction=!1,a.style.pointerEvents="none",a.setAttribute("aria-hidden","true")),this.delay>0&&!n?(this.toggle(!1),this.showTimeout=setTimeout((()=>{this.toggle(!0)}),this.delay)):this.toggle(!0)}hide(){this.springAnimation.reset(),this.toggle(!1)}toggle(t){var e;if(!(null==(e=this.element)?void 0:e.isConnected))return;this._visible=t;const{classList:i}=this.element,s=(t,e)=>i.toggle(`${kd}--${t}`,e);t||clearTimeout(this.showTimeout),s("no-interaction",!this.enableInteraction),s("arrow",this._showArrow),s("compact",this._compact),i.toggle(wd,this.darkTheme),this.element.togglePopover(t),t&&this.updateTooltipPosition();for(const n of this.wrapTypes)i.toggle(`${kd}--wrap-${n}`,n===this.wrapping)}updateShowArrow(t){this._showArrow=t}updateCompact(t){this._compact=t}getTooltipBounds(t){if(!this.element)return{};const{positionType:e,canvasX:i,canvasY:s,yOffset:n,xOffset:a,canvasRect:o}=t,{clientWidth:r,clientHeight:l}=this.element,c={width:r,height:l};switch(e){case"node":case"pointer":return c.top=s+n-l-8,c.left=i+a-r/2,c;case"top":return c.top=n,c.left=o.width/2-r/2+a,c;case"right":return c.top=o.height/2-l/2+n,c.left=o.width-r/2+a,c;case"left":return c.top=o.height/2-l/2+n,c.left=a,c;case"bottom":return c.top=o.height-l+n,c.left=o.width/2-r/2+a,c;case"top-left":return c.top=n,c.left=a,c;case"top-right":return c.top=n,c.left=o.width-r+a,c;case"bottom-right":return c.top=o.height-l+n,c.left=o.width-r+a,c;case"bottom-left":return c.top=o.height-l+n,c.left=a,c;case"sparkline":return c.top=s+n-l/2,c.left=i+a+8,c;case"sparkline-constrained":return c.top=s+n-l/2,c.left=i+a-8-r,c}}};s([Ti(zi)],Od.prototype,"enabled",2),s([Ti(zi,{optional:!0})],Od.prototype,"showArrow",2),s([Ti(Wi)],Od.prototype,"delay",2),s([Ti(Ms,{optional:!0})],Od.prototype,"range",2),s([Ti(ms)],Od.prototype,"wrapping",2),s([Ti(ji)],Od.prototype,"position",2),s([Ti(zi)],Od.prototype,"darkTheme",2),s([Ti(Is(["extended","canvas"]))],Od.prototype,"bounds",2);var Rd=class extends hl{constructor(t){super(),this.chart=t,this.id=pt(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=Nr(((t,e)=>at().requestAnimationFrame(t)),(()=>{(this.tooltip.lastHover||this.highlight.pendingHoverEvent)&&(this.chart.getUpdateType()<=4?this.hoverScheduler.schedule():(this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)))}));const e=t.ctx.domManager.addChild("series-area","series-area-aria-label1"),i=t.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new md(e,i,this.id,"img"),this.swapChain.addListener("blur",(()=>this.onBlur())),this.swapChain.addListener("focus",(()=>this.onFocus())),this.focusIndicator=new gd(this.swapChain),this.focusIndicator.overrideFocusVisible("integrated"!==t.mode&&void 0);const{seriesDragInterpreter:s,seriesWidget:n,containerWidget:a}=t.ctx.widgets;n.setTabIndex(-1),this.destroyFns.push((()=>t.ctx.domManager.removeChild("series-area","series-area-aria-label1")),(()=>t.ctx.domManager.removeChild("series-area","series-area-aria-label2")),n.addListener("focus",(()=>this.swapChain.focus())),n.addListener("mousemove",(t=>this.onHover(t))),n.addListener("wheel",(t=>this.onWheel(t))),n.addListener("mouseleave",(t=>this.onLeave(t))),n.addListener("keydown",(t=>this.onKeyDown(t))),n.addListener("contextmenu",((t,e)=>this.onContextMenu(t,e))),s.addListener("drag-move",(t=>this.onDragMove(t))),s.addListener("click",(t=>this.onClick(t,n))),s.addListener("dblclick",(t=>this.onClick(t,n))),a.addListener("contextmenu",((t,e)=>this.onContextMenu(t,e))),a.addListener("click",((t,e)=>this.onClick(t,e))),a.addListener("dblclick",((t,e)=>this.onClick(t,e))),t.ctx.animationManager.addListener("animation-start",(()=>this.clearAll())),t.ctx.domManager.addListener("resize",(()=>this.clearAll())),t.ctx.highlightManager.addListener("highlight-change",(t=>this.changeHighlightDatum(t))),t.ctx.layoutManager.addListener("layout:complete",(t=>this.layoutComplete(t))),t.ctx.updateService.addListener("pre-scene-render",(()=>this.preSceneRender())),t.ctx.updateService.addListener("update-complete",(()=>this.updateComplete())),t.ctx.zoomManager.addListener("zoom-change",(()=>this.clearAll())),t.ctx.zoomManager.addListener("zoom-pan-start",(()=>this.clearAll())))}isState(t){return this.chart.ctx.interactionManager.isState(t)}isIgnoredTouch(t){return"touch"===t.device&&"click"!==t.type&&("hover"!==this.chart.ctx.chartService.touch.dragAction&&("drag"!==this.chart.ctx.chartService.touch.dragAction||!this.isState(9)))}dataChanged(){var t;(t=this.highlight).stashedHoverEvent??(t.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator.clear(),this.clearHighlight()}preSceneRender(){null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.focusIndicator.isFocusVisible()&&this.isState(34)&&this.handleSeriesFocus(0,0,!0)}update(t,e){this.chart.ctx.updateService.update(t,e)}seriesChanged(t){this.focus.sortedSeries=[...t].sort(((t,e)=>{let i=t.properties.focusPriority??1/0,s=e.properties.focusPriority??1/0;return i===s&&([i,s]=[t._declarationOrder,e._declarationOrder]),i<s?-1:i>s?1:0})),this.series=t}layoutComplete(t){this.seriesRect=t.series.rect,this.hoverRect=t.series.paddedRect,this.chart.ctx.widgets.seriesWidget.setBounds(t.series.paddedRect),this.chart.ctx.widgets.chartWidget.setBounds(t.chart)}onContextMenu(t,e){const{sourceEvent:i}=t;if(i.currentTarget!=e.getElement())return;if(i.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){const{currentX:e,currentY:s}=t;this.chart.ctx.contextMenuRegistry.dispatchContext("all",{sourceEvent:i,canvasX:e,canvasY:s},{})}return}let s,n;if(this.focusIndicator.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(n=vn.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.isState(36)){const e=this.pickNode({x:t.currentX,y:t.currentY},"context-menu");e&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=e.datum)}const a=null==s?void 0:s.series;this.clearAll();const o=t.currentX+e.cssLeft(),r=t.currentY+e.cssTop();this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{sourceEvent:i,canvasX:o,canvasY:r},{pickedSeries:a,pickedNode:s},n)}onLeave(t){if(!this.isState(41))return;const e=t.sourceEvent.relatedTarget;"ag-charts-text-input__textarea"!==(null==e?void 0:e.className)&&(this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(t)||(this.chart.ctx.domManager.updateCursor(this.id),this.focusIndicator.isFocusVisible()||this.clearAll()))}onWheel(t){var e;this.isState(41)&&(null==(e=this.focusIndicator)||e.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(t){var e;this.isState(41)&&(null==(e=this.focusIndicator)||e.overrideFocusVisible(!1),this.onHoverLikeEvent(t))}onHover(t){this.isState(41)&&this.onHoverLikeEvent(t)}onHoverLikeEvent(t){var e;if(!this.isIgnoredTouch(t)&&("touch"!==t.device&&(e="drag-move",t.type===e)||(this.tooltip.lastHover=t),"touch"===t.device&&"hover"===this.chart.ctx.chartService.touch.dragAction&&t.sourceEvent.preventDefault(),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=t,this.hoverScheduler.schedule(),this.isState(32))){const{currentX:e,currentY:i}=t,s=this.pickNode({x:e,y:i},"event");(null==s?void 0:s.series.hasEventListener("nodeClick"))||(null==s?void 0:s.series.hasEventListener("nodeDoubleClick"))?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}}onClick(t,e){if("touch"===t.device&&e===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41))return;if(e===this.chart.ctx.widgets.seriesWidget){if(!e.getElement().contains(t.sourceEvent.target))return}else if(t.sourceEvent.target!=e.getElement())return;if(this.focusIndicator.overrideFocusVisible(!1),this.onHoverLikeEvent(t),!this.isState(32))return;if(e==this.chart.ctx.widgets.seriesWidget&&this.checkSeriesNodeClick(t))return this.update(4),void t.sourceEvent.preventDefault();const i={type:"click"===t.type?"click":"doubleClick",event:t.sourceEvent};this.chart.fireEvent(i)}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator.isFocusVisible()?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(){this.isState(34)&&(this.hoverDevice="pointer",this.clearAll(),this.focusIndicator.overrideFocusVisible(void 0))}onKeyDown(t){if(!this.isState(43))return;const e=function(t){for(const[e,{activatesFocusIndicator:i=!0,bindings:s}]of Object.entries(yd))if(fd(t,s))return{name:e,activatesFocusIndicator:i}}(t.sourceEvent);switch(!1===(null==e?void 0:e.activatesFocusIndicator)&&this.focusIndicator.overrideFocusVisible("keyboard"===this.previousInputDevice),null==e?void 0:e.name){case"redo":return this.chart.ctx.chartEventManager.seriesEvent("series-redo");case"undo":return this.chart.ctx.chartEventManager.seriesEvent("series-undo");case"zoomin":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(1,t);case"zoomout":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(-1,t);case"arrowup":return this.onArrow(-1,0,t);case"arrowdown":return this.onArrow(1,0,t);case"arrowleft":return this.onArrow(0,-1,t);case"arrowright":return this.onArrow(0,1,t);case"submit":return this.onSubmit(t)}}onArrow(t,e,i){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator.overrideFocusVisible(!0),this.focus.seriesIndex+=t,this.focus.datumIndex+=e,this.handleFocus(t,e),i.sourceEvent.preventDefault(),this.chart.ctx.chartEventManager.seriesEvent("series-focus-change"))}onSubmit(t){if(!this.isState(34))return;const{series:e,datum:i}=this.focus,s=t.sourceEvent;void 0!==e&&void 0!==i?e.fireNodeClickEvent(s,i):this.chart.fireEvent({type:"click",event:s}),s.preventDefault()}checkSeriesNodeClick(t){const e=this.pickNode({x:t.currentX,y:t.currentY},"event");return null!=e&&("click"===t.type?(e.series.fireNodeClickEvent(t.sourceEvent,e.datum),!0):"dblclick"===t.type&&(t.preventZoomDblClick=0===e.distance,e.series.fireNodeDoubleClickEvent(t.sourceEvent,e.datum),!0))}handleFocus(t,e){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);null==i?this.handleSeriesFocus(t,e):this.focusIndicator.update(i.rect,this.seriesRect,!1)}handleSeriesFocus(t,e,i=!1){if("hierarchy"===this.chart.chartType||"gauge"===this.chart.chartType)return void this.handleSoloSeriesFocus(t,e,i);const{focus:s,seriesRect:n}=this,a=s.sortedSeries.filter((t=>t.visible&&t.focusable));if(0===a.length)return;const o={datumIndex:s.datumIndex-e,otherIndex:s.seriesIndex-t};s.seriesIndex=bt(0,s.seriesIndex,a.length-1),s.series=a[s.seriesIndex];const{datumIndex:r,seriesIndex:l}=s,c=s.series.pickFocus({datumIndex:r,datumIndexDelta:e,otherIndex:l,otherIndexDelta:t,seriesRect:n});this.updatePickedFocus(t,e,o,c,i)}handleSoloSeriesFocus(t,e,i){this.focus.series=this.focus.sortedSeries[0];const{focus:{series:s,seriesIndex:n,datumIndex:a},seriesRect:o}=this;if(null==s)return;const r={datumIndex:this.focus.datumIndex-e,otherIndex:this.focus.seriesIndex-t},l=s.pickFocus({datumIndex:a,datumIndexDelta:e,otherIndex:n,otherIndexDelta:t,seriesRect:o});this.updatePickedFocus(t,e,r,l,i)}updatePickedFocus(t,e,i,s,n){const{focus:a,hoverRect:o}=this;if(void 0===s||void 0===a.series||void 0===o)return;const{datum:r,datumIndex:l,otherIndex:c}=s;if(void 0!==c&&(a.seriesIndex=c),a.datumIndex=l,a.datum=r,this.focusIndicator.isFocusVisible()&&this.chart.ctx.animationManager.reset(),this.focusIndicator.isFocusVisible()){const t=function({bounds:t}){return t instanceof Et?t:null!=t?vn.toCanvas(t):Et.NaN}(s),{x:e,y:i}=t.computeCenter();if(!o.containsPoint(e,i)){if(this.chart.ctx.zoomManager.panToBBox(this.id,o,t))return}}this.focusIndicator.update(s.bounds,this.seriesRect,s.clipFocusBox);const h=xd(a.series,o,s);if(void 0!==h&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const o=a.series.getTooltipContent(r),l=wc.makeTooltipMeta(h,a.series,r);this.chart.ctx.highlightManager.updateHighlight(this.id,r);if(this.chart.tooltip.enabled&&a.series.tooltipEnabled?this.chart.ctx.tooltipManager.updateTooltip(this.id,l,o):this.chart.ctx.tooltipManager.removeTooltip(this.id),!n){(0===e&&0===t||i.datumIndex!==s.datumIndex||i.otherIndex!==(s.otherIndex??a.seriesIndex))&&this.swapChain.update(this.getDatumAriaText(r,o))}}}getDatumAriaText(t,e){var i,s;const n=null==e?"":Cd(e);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:(null==(s=(i=t.series).getDatumAriaText)?void 0:s.call(i,t,n))??n})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator.clear()}handleHoverHighlight(t){var e,i,s;this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const n=this.highlight.appliedHoverEvent;if(!n||!this.isState(41))return;const{currentX:a,currentY:o}=n,r=n.currentX+((null==(e=this.hoverRect)?void 0:e.x)??0),l=n.currentY+((null==(i=this.hoverRect)?void 0:i.y)??0);if(t?this.chart.ctx.animationManager.isActive():!(null==(s=this.hoverRect)?void 0:s.containsPoint(r,l)))return void this.clearHighlight();const{range:c}=this.chart.highlight,h="tooltip"===c?"highlight-tooltip":"highlight",d=this.pickNode({x:a,y:o},h);if(d)return this.chart.ctx.highlightManager.updateHighlight(this.id,d.datum),void(this.hoverDevice="pointer");this.chart.ctx.highlightManager.updateHighlight(this.id)}handleHoverTooltip(t,e){var i,s,n;if(!this.isState(41))return;const{currentX:a,currentY:o}=t,r=a+((null==(i=this.hoverRect)?void 0:i.x)??0),l=o+((null==(s=this.hoverRect)?void 0:s.y)??0),c=t.sourceEvent.target;if(e?this.chart.ctx.animationManager.isActive():!(null==(n=this.hoverRect)?void 0:n.containsPoint(r,l)))return void("pointer"==this.hoverDevice&&this.clearTooltip());if(c&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(c,"canvas-overlay",kd))return;const h=this.pickNode({x:t.currentX,y:t.currentY},"tooltip");if(!h)return void("pointer"==this.hoverDevice&&this.clearTooltip());this.hoverDevice="pointer";const d=h.series.getTooltipContent(h.datum);if(this.chart.tooltip.enabled&&h.series.tooltipEnabled&&null!=d){const t=wc.makeTooltipMeta({type:"pointermove",canvasX:r,canvasY:l},h.series,h.datum);this.chart.ctx.tooltipManager.updateTooltip(this.id,t,d)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}changeHighlightDatum(t){const e=new Set,{series:i,datum:s}=t.currentHighlight??{},{series:n,datum:a}=t.previousHighlight??{};n&&e.add(n),i&&e.add(i),(null==n?void 0:n.properties.cursor)&&a&&this.chart.ctx.domManager.updateCursor(n.id),(null==i?void 0:i.properties.cursor)&&"default"!==(null==i?void 0:i.properties.cursor)&&s&&this.chart.ctx.domManager.updateCursor(i.id,i.properties.cursor);null==i||null==n?this.update(4):this.update(4,{seriesToUpdate:e})}pickNode(t,e,i){const s=[...this.series].reverse();let n;for(const a of s){if(!a.visible||!a.contentGroup.visible)continue;const{match:s,distance:o}=a.pickNode(t,e,i)??{};if(s&&null!=o&&((!n||n.distance>o)&&(n={series:a,distance:o,datum:s}),0===o))break}return n}};var jd=class{constructor(t){this.seriesRoot=t,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){const{internalId:e,type:i,contentGroup:s,seriesGrouping:n}=t,{groupIndex:a=e}=n??{},o=this.series.get(e);if(null!=o)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(o)}`);0===this.series.size&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal");let r=this.groups.get(i);null==r&&(r=new Map,this.groups.set(i,r));const l=this.lookupIdx(a);let c=r.get(l);return null==c&&(c={type:i,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new In({name:`${t.contentGroup.name??i}-managed-layer`,zIndex:t.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},r.set(l,c)),this.series.set(e,{layerState:c,seriesConfig:t}),c.seriesIds.push(e),c.group.appendChild(s),c.group}changeGroup(t){var e,i;const{internalId:s,seriesGrouping:n,type:a,contentGroup:o,oldGrouping:r}=t,{groupIndex:l=s}=n??{};(null==(i=null==(e=this.groups.get(a))?void 0:e.get(l))?void 0:i.seriesIds.includes(s))||(this.series.has(s)&&this.releaseGroup({internalId:s,seriesGrouping:r,type:a,contentGroup:o}),this.requestGroup(t))}releaseGroup(t){var e,i,s;const{internalId:n,contentGroup:a,type:o}=t;if(!this.series.has(n))throw new Error(`AG Charts - series doesn't have an allocated layer: ${n}`);const r=null==(e=this.series.get(n))?void 0:e.layerState;r&&(r.seriesIds=r.seriesIds.filter((t=>t!==n)),r.group.removeChild(a)),0===(null==r?void 0:r.seriesIds.length)?(this.seriesRoot.removeChild(r.group),null==(i=this.groups.get(r.type))||i.delete(r.id),null==(s=this.groups.get(o))||s.delete(n)):null!=r&&r.seriesIds.length>0&&(r.group.zIndex=this.getLowestSeriesZIndex(r.seriesIds)),this.series.delete(n)}updateLayerCompositing(){this.groups.forEach((t=>{t.forEach((t=>{const{group:e,seriesIds:i}=t;let s;if(0===i.length)s=!1;else if(i.length>1)s=!0;else{const t=this.series.get(i[0]);s=!0===(null==t?void 0:t.seriesConfig.renderToOffscreenCanvas())}e.renderToOffscreenCanvas=s,e.zIndex=this.getLowestSeriesZIndex(i)}))}))}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").at(-1)))?Math.floor(30*bt(0,t/this.expectedSeriesCount,1)):0}destroy(){this.groups.forEach((t=>{t.forEach((t=>{this.seriesRoot.removeChild(t.group)}))})),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(t){return t.reduce(((t,e)=>{const i=this.series.get(e),s=null==i?void 0:i.seriesConfig.contentGroup.zIndex;return null==t||null==s?s:Mn(t,s)<=0?t:s}),void 0)??1}},Pd=class extends ki{constructor(){super(...arguments),this.dragAction="drag"}};s([Ti(Is(["none","drag","hover"]))],Pd.prototype,"dragAction",2);var zd=class{constructor(t,e,i,s,n){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=s,this.animationManager=n,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",(()=>this.onDataSourceChange())),this.dataService.addListener("data-load",(()=>this.onDataLoad())),this.dataService.addListener("data-error",(()=>this.onDataError())),this.updateService.addListener("update-complete",(()=>this.onUpdateComplete())),this.zoomManager.addListener("zoom-change",(()=>this.onZoomChange())))}destroy(){this.destroyFns.forEach((t=>t()))}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){(this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let e,i=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,s),i=this.shouldRefresh(t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:null==e?void 0:e.min,windowEnd:null==e?void 0:e.max})}getValidAxis(){return this.chart.axes.find((t=>"time"===t.type))}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(t.id);return(!i||e.min!==i.min||e.max!==i.max)&&(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){const{domain:i}=t.scale;if(!e||0===i.length||isNaN(Number(i[0])))return;const s=Number(i[1])-Number(i[0]);return{min:new Date(Number(i[0])+s*e.min),max:new Date(Number(i[0])+s*e.max)}}},Bd=/^((?!chrome|android).)*safari/i,Fd=/Version\/(\d+(\.\d+)?)/,Gd=/Chrome/,Ud=/Chrome\/(\d+)/,Yd=/Edg/,Wd=/OPR/;var Vd=new Set(["map-shape-background","map-line-background"]),_d=class{constructor(t,e,i,s,n,a,o){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutManager=s,this.localeManager=n,this.animationManager=a,this.domManager=o,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(_h),this.destroyFns.push(this.layoutManager.addListener("layout:complete",(t=>this.onLayoutComplete(t))))}destroy(){this.destroyFns.forEach((t=>t())),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:t}}){const e=this.dataService.isLoading(),i=this.chartLike.series.some((t=>t.hasData)),s=this.chartLike.series.some((t=>t.visible&&!Vd.has(t.type)));this.overlays.darkTheme?this.overlayElem.classList.add(Hh):this.overlayElem.classList.remove(Hh),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`;const a=e,o=!e&&!i,r=i&&!s,l=this.overlays.unsupportedBrowser.enabled&&function(){var t,e;const{userAgent:i}=at("navigator");if(Bd.test(i)){const e=parseFloat((null==(t=Fd.exec(i))?void 0:t[1])??"0"),s=Math.floor(e)>16;return s||n.warnOnce(`Unsupported Safari version: ${e}; ${i}`),!s}if(Gd.test(i)&&!Yd.test(i)&&!Wd.test(i)){const t=parseInt((null==(e=Ud.exec(i))?void 0:e[1])??"0",10),s=t>126;return s||n.warnOnce(`Unsupported Chrome version: ${t}; ${i}`),!s}return!1}();a?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),o?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),r?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries),l?this.showOverlay(this.overlays.unsupportedBrowser,t):this.hideOverlay(this.overlays.unsupportedBrowser);const c=a||o||r||l;Tr(this.overlayElem,"aria-hidden",!c)}showOverlay(t,e){if(!t.enabled)return;const i=t.getElement(this.animationManager,this.localeManager,e);this.overlayElem.appendChild(i)}hideOverlay(t){t.removeElement((()=>{this.overlayElem.innerText=" "}),this.animationManager)}},Hd=Es.create(!0,"opts"),Zd=class extends ki{constructor(){super(...arguments),this.padding=new Lr(0)}};s([Ti(zi,{optional:!0})],Zd.prototype,"clip",2),s([Ti(ji)],Zd.prototype,"padding",2);var Kd=class t extends Ar{constructor(t,e){var i;super(),this.id=pt(this),this.seriesRoot=new Ln({name:`${this.id}-series-root`,zIndex:5}),this.annotationRoot=new Ln({name:`${this.id}-annotation-root`,zIndex:9}),this.titleGroup=new In({name:"titles",zIndex:13}),this.debug=Es.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new qo,this.padding=new Lr(20),this.seriesArea=new Zd,this.keyboard=new Oh,this.touch=new Pd,this.mode="standalone",this.chartCaptions=new tl,this.suppressFieldDotNotation=!1,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new Vh,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new qo,this.performUpdateType=7,this.runningUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Dr,this.updateRequestors={},this.performUpdateTrigger=Nr(((t,e=0)=>{0===e?queueMicrotask(t):setTimeout(t,e)}),(({count:t})=>{this.destroyed||this.updateMutex.acquire((async()=>{try{await this.performUpdate(t)}catch(e){n.error("update error",e)}})).catch((t=>n.errorOnce(t)))})),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=t=>{this.fireEvent({...t,type:"seriesNodeClick"})},this.onSeriesNodeDoubleClick=t=>{this.fireEvent({...t,type:"seriesNodeDoubleClick"})},this.onSeriesVisibilityChange=t=>{this.fireEvent(t)},this.seriesGroupingChanged=t=>{if(!(t instanceof Jh))return;const{series:e,seriesGrouping:i,oldGrouping:s}=t;e.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:e.internalId,type:e.type,contentGroup:e.contentGroup,renderToOffscreenCanvas:()=>e.renderToOffscreenCanvas(),seriesGrouping:i,oldGrouping:s})},this.chartOptions=t;const s=null==e?void 0:e.scene,a=(null==e?void 0:e.container)??t.processedOptions.container??void 0,o=(null==e?void 0:e.styleContainer)??t.specialOverrides.styleContainer;s&&(this._firstAutoSize=!1,this._lastAutoSize=[s.width,s.height,s.pixelRatio]);const r=new In({name:"root"});r.visible=!1,r.append(this.seriesRoot),r.append(this.annotationRoot),r.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new Od,this.seriesLayerManager=new jd(this.seriesRoot),this.mode=t.userOptions.mode??this.mode;const l=this.ctx=new qc(this,{chartType:this.getChartType(),scene:s,root:r,container:a,styleContainer:o,syncManager:new Eh(this),fireEvent:t=>this.fireEvent(t),updateCallback:(t,e)=>this.update(t,e),updateMutex:this.updateMutex});this._destroyFns.push(l.domManager.addListener("resize",(()=>this.parentResize(l.domManager.containerSize)))),this.overlays=new Kh,(i=this.overlays.loading).renderer??(i.renderer=()=>function(t,e){const{animationDuration:i}=be.add,s=lt("div",`${_h}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${i*e}ms linear 50ms both`}),n=lt("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),a=lt("p",{marginTop:"1em"});a.innerText=t;const o=lt("div",`${_h}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),r=lt("style");return r.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(r,n,a,o),s}(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new zd(this,l.dataService,l.updateService,l.zoomManager,l.animationManager),new _d(this,this.overlays,l.dataService,l.layoutManager,l.localeManager,l.animationManager,l.domManager)],this.highlight=new Jc,this.container=a;const c=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new Rd(this.initSeriesAreaDependencies()),this._destroyFns.push(l.layoutManager.registerElement(0,(t=>{t.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(t)})),l.layoutManager.addListener("layout:complete",(t=>this.chartCaptions.positionAbsoluteCaptions(t))),l.dataService.addListener("data-load",(t=>{this.data=t.data})),this.title.registerInteraction(c,"beforebegin"),this.subtitle.registerInteraction(c,"beforebegin"),this.footnote.registerInteraction(c,"afterend"),Xr.addWindowEvent("page-left",(()=>this.destroy())),l.animationManager.addListener("animation-frame",(()=>{this.update(6)})),l.animationManager.addListener("animation-start",(()=>l.domManager.setDataBoolean("animating",!0))),l.animationManager.addListener("animation-stop",(()=>l.domManager.setDataBoolean("animating",!1))),l.zoomManager.addListener("zoom-change",(()=>{this.series.forEach((t=>{var e;return null==(e=t.animationState)?void 0:e.transition("updateData")}));const t="initial"!==this.chartAnimationPhase;this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})}))),this.parentResize(l.domManager.containerSize)}static getInstance(e){return t.chartsInstances.get(e)}get canvasElement(){return this.ctx.scene.canvas.element}download(t,e){this.ctx.scene.download(t,e)}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(t){this.seriesAreaManager.focusIndicator.overrideFocusVisible(t)}initSeriesAreaDependencies(){const{ctx:t,tooltip:e,highlight:i,overlays:s,seriesRoot:n,mode:a}=this,o=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,chartType:o,ctx:t,tooltip:e,highlight:i,overlays:s,seriesRoot:n,mode:a}}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter((t=>t.enabled&&t.text)).map((t=>t.text)).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clear()}destroy(t){if(this.destroyed)return;const e=null==t?void 0:t.keepTransferableResources;let i;return this.performUpdateType=7,this._destroyFns.forEach((t=>t())),this.processors.forEach((t=>t.destroy())),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),e?(this.ctx.scene.strip(),i={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach((t=>t.destroy())),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),i}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((async()=>{if(!this.destroyed)try{await t(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}})).catch((t=>n.errorOnce(t))))}update(t=0,e){if(this.destroyed)return;const{forceNodeDataRefresh:i=!1,skipAnimations:s,seriesToUpdate:n=this.series,newAnimationBatch:a}=e??{};this.ctx.widgets.seriesWidget.setDragTouchEnabled("none"!==this.touch.dragAction),i&&this.series.forEach((t=>t.markNodeDataDirty()));for(const o of n)this.seriesToUpdate.add(o);if(s&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=(null==e?void 0:e.skipSync)??!1,this.debug.check()){let e=(new Error).stack??"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(null==e?void 0:e.backOffMs))}async performUpdate(t){const{performUpdateType:e,extraDebugStats:i,_performUpdateSplits:s,ctx:n}=this,a=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.runningUpdateType=e,0===this.updateShortcutCount&&e<6&&(n.animationManager.startBatch(this._performUpdateSkipAnimations),n.animationManager.onBatchStop((()=>this.chartAnimationPhase="ready"))),this.debug("Chart.performUpdate() - start",Xc[e]);let o=performance.now();s.start??(s.start=o);const r=t=>{s[t]??(s[t]=0),s[t]+=performance.now()-o,o=performance.now()};switch(e){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),r("⬇️");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),r("🏭");case 3:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(3))break;await this.processLayout(),r("⌖");case 4:if(this.checkUpdateShortcut(4))break;await this.updateSeries(a),r("🤔"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing();case 5:if(this.checkUpdateShortcut(5))break;n.updateService.dispatchPreSceneRender(),r("↖");case 6:if(this.checkUpdateShortcut(6))break;n.animationManager.endBatch(),i.updateShortcutCount=this.updateShortcutCount,n.scene.render({debugSplitTimes:s,extraDebugStats:i,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const t of Object.keys(s))delete s[t];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,n.animationManager.endBatch()}this.destroyed||(n.updateService.dispatchUpdateComplete(),this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=7),this._performUpdateNotify.notify();const l=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(l-s.start))/100,count:t,performUpdateType:Xc[e]})}updateThemeClassName(){const t="ag-charts-theme-",e=[`${t}default`,`${t}default-dark`];let i=e[0],s=!1,{theme:n}=this.chartOptions.processedOptions;for(;"string"!=typeof n&&null!=n;)n=n.baseTheme;"string"==typeof n&&(i=n.replace("ag-",t),s=n.includes("-dark")),e.includes(i)||(i=s?e[1]:e[0]),this.ctx.domManager.setThemeClass(i)}updateDOM(){this.updateThemeClassName();const{enabled:t,tabIndex:e}=this.keyboard;this.ctx.domManager.setTabGuardIndex(t?e??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(t){return!!this.destroyed||(this.updateShortcutCount>3?(n.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0))}async checkFirstAutoSize(){if(null!=this.width&&null!=this.height);else if(!this._lastAutoSize){await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}}onAxisChange(t,e){null==e&&0===t.length||this.ctx.axisManager.updateAxes(e??[],t)}onSeriesChange(t,e){var i,s;const n=(null==e?void 0:e.filter((e=>!t.includes(e))))??[];this.destroySeries(n),null==(i=this.seriesLayerManager)||i.setSeriesCount(t.length);for(const a of t){if(null==e?void 0:e.includes(a))continue;const t=this.seriesLayerManager.requestGroup(a);a.attachSeries(t,this.seriesRoot,this.annotationRoot);const i=this;a.chart={get mode(){return i.mode},get isMiniChart(){return!1},get seriesRect(){return i.seriesRect}},a.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(a),a.addChartEventListeners()}null==(s=this.seriesAreaManager)||s.seriesChanged(t)}destroySeries(t){null==t||t.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.removeEventListener("groupingChanged",this.seriesGroupingChanged),t.destroy(),this.seriesLayerManager.releaseGroup(t),t.detachSeries(void 0,this.seriesRoot,this.annotationRoot),t.chart=void 0}))}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&t.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const t of this.axes)t.boundSeries=this.series.filter((e=>e.axes[t.direction]===t))}assignAxesToSeries(){const t=f(this.axes,(t=>t.direction));for(const e of this.series)for(const i of e.directions){const s=t[i];if(!s)return void n.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const a=e.getKeys(i),o=s.find((t=>!t.keys.length||a.some((e=>t.keys.includes(e)))));if(!o)return void n.warnOnce(`no matching axis for direction [${i}] and keys [${a}]; check series and axes configuration.`);e.axes[i]=o}}parentResize(t){if(null==t||null!=this.width&&null!=this.height)return;let{width:e,height:i}=t;const{pixelRatio:s}=t;if(e=Math.floor(e),i=Math.floor(i),0===e&&0===i)return;const[n=0,a=0,o=1]=this._lastAutoSize??[];n===e&&a===i&&o===s||(this._lastAutoSize=[e,i,s],this.resize("SizeMonitor",{}))}resize(t,e){var i,s,n;const{scene:a,animationManager:o}=this.ctx,{inWidth:r,inHeight:l,inMinWidth:c,inMinHeight:h,inOverrideDevicePixelRatio:d}=e;this.ctx.domManager.setSizeOptions(c??this.minWidth,h??this.minHeight,r??this.width,l??this.height);const u=r??this.width??(null==(i=this._lastAutoSize)?void 0:i[0]),p=l??this.height??(null==(s=this._lastAutoSize)?void 0:s[1]),g=d??this.overrideDevicePixelRatio??(null==(n=this._lastAutoSize)?void 0:n[2]);if(this.debug(`Chart.resize() from ${t}`,{width:u,height:p,pixelRatio:g,stack:(new Error).stack}),null!=u&&null!=p&&P(u)&&P(p)&&a.resize(u,p,g)){o.reset();let t=!0;null!=this.width&&null!=this.height||!this._firstAutoSize||(t=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach((t=>t.setChartData(this.data)));const t=this.modulesManager.mapModules((t=>{var e;return null==(e=t.updateData)?void 0:e.call(t,this.data)}));await Promise.all(t)}async processData(){this.series.some((t=>t.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new vh(this.mode,this.suppressFieldDotNotation),e=this.series.map((e=>(e.resetDatumCallbackCache(),e.processData(t)))),i=this.modulesManager.mapModules((e=>{var i;return null==(i=e.processData)?void 0:i.call(e,t)}));this._cachedData=t.execute(this._cachedData),await Promise.all([...e,...i]);for(const s of this.axes)s.processData();this.updateLegends()}updateLegends(t){for(const{legend:e,legendType:i}of this.modulesManager.legends())"category"===i?this.setCategoryLegendData(t):this.setLegendData(i,e)}setCategoryLegendData(t){var e;const{ctx:{legendManager:i,stateManager:s}}=this;t&&this.series.forEach((e=>{const i=t.find((t=>t.seriesId===e.id));e.onLegendInitialState("category",i)}));const a=this.series.flatMap((t=>{const e=t.getLegendData("category");return i.updateData(t.id,e),e}));if(t)s.setStateAndRestore(i,t);else{if("integrated"!==this.mode){const t={},i=new Map(this.series.map((t=>[t.id,t.type])));for(const{seriesId:s,symbol:{marker:o},label:r}of a.filter((t=>!t.hideInLegend))){if(null==o.fill)continue;const a=i.get(s),l=t[a]??(t[a]={});l[e=r.text]??(l[e]=o.fill),l[r.text]!==o.fill&&n.warnOnce(`legend item '${r.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}i.update()}}setLegendData(t,e){e.data=this.series.filter((t=>t.properties.showInLegend)).flatMap((e=>e.getLegendData(t)))}async processLayout(){var t;const e=this.animationRect,{width:i,height:s}=this.ctx.scene,n=this.ctx.layoutManager.createContext(i,s);await this.performLayout(n),e&&!(null==(t=this.animationRect)?void 0:t.equals(e))&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(t){const{seriesRect:e}=this;await Promise.all(t.map((t=>t.update({seriesRect:e})))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter((t=>t.visible&&t.usesPlacedLabels)),this.padding,this.seriesRect)}async waitForUpdate(t=1e4,e=!1){const i=performance.now();for(;(this._pendingFactoryUpdatesCount>0||7!==this.performUpdateType||7!==this.runningUpdateType)&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),7===this.performUpdateType&&7===this.runningUpdateType||await this._performUpdateNotify.await(),performance.now()-i>t){const i=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(e)throw new Error(i);n.warnOnce(i)}nr()&&await new Promise((t=>{setTimeout(t,0)}))}}filterMiniChartSeries(t){return null==t?void 0:t.filter((t=>!1!==t.showInMiniChart))}applyOptions(t){var e,i,s,n,a;const o=this.firstApply?t.processedOptions:t.diffOptions(this.chartOptions);if(null==o||0===Object.keys(o).length)return;const r=this.firstApply?{}:this.chartOptions.processedOptions,l=t.processedOptions;Hd("Chart.applyOptions() - applying delta",o);const c=this.applyModules(l);o.listeners&&this.registerListeners(this,o.listeners),ur(this,o,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"]});let h=!1,d="no-op";null!=o.series&&(d=this.applySeries(this,o.series,null==r?void 0:r.series),h=!0),"replaced"===d&&this.resetAnimations(),this.applyAxes(this,l,r,d,[])&&(h=!0),o.data&&(this.data=o.data),(null==(e=o.legend)?void 0:e.listeners)&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,o.legend.listeners),(null==(i=o.locale)?void 0:i.localeText)&&(this.modulesManager.getModule("locale").localeText=null==(s=o.locale)?void 0:s.localeText),this.chartOptions=t;const u=this.modulesManager.getModule("navigator"),p=this.modulesManager.getModule("zoom");(null==u?void 0:u.enabled)||(null==p?void 0:p.enabled)||this.ctx.zoomManager.updateZoom("chart");const g=null==u?void 0:u.miniChart,m=(null==(a=null==(n=l.navigator)?void 0:n.miniChart)?void 0:a.series)??l.series;!0===(null==g?void 0:g.enabled)&&null!=m?this.applyMiniChartOptions(g,m,l,r):!1===(null==g?void 0:g.enabled)&&(g.series=[],g.axes=[]),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),h||(h=this.shouldForceNodeDataRefresh(o,d));const y=h||c?0:3;this.maybeResetAnimations(d),this.shouldClearLegendData(l,r,d)&&this.ctx.legendManager.clearData(),this.applyInitialState(l),Hd("Chart.applyOptions() - update type",Xc[y],{seriesStatus:d,forceNodeDataRefresh:h}),this.update(y,{forceNodeDataRefresh:h,newAnimationBatch:!0}),this.firstApply=!1}applyInitialState(t){var e,i,s;const{annotationManager:n,chartTypeOriginator:a,historyManager:o,stateManager:r,zoomManager:l}=this.ctx,{initialState:c}=t;if("annotations"in t&&(null==(e=t.annotations)?void 0:e.enabled)&&null!=(null==c?void 0:c.annotations)){const t=c.annotations.map((t=>te(t,n.getAnnotationTypeStyles(t.type))));r.setState(n,t)}null!=(null==c?void 0:c.chartType)&&r.setState(a,c.chartType),((null==(i=t.navigator)?void 0:i.enabled)||(null==(s=t.zoom)?void 0:s.enabled))&&null!=(null==c?void 0:c.zoom)&&r.setState(l,c.zoom),null!=(null==c?void 0:c.legend)&&this.updateLegends(c.legend),null!=c&&o.clear()}maybeResetAnimations(t){if("standalone"===this.mode)switch(t){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(t,e){const i=!!t.data||"data-change"===e||"replaced"===e,s=Dh.getKeys(),n=Object.values(s).some((e=>null!=t[e])),a=null!=t.title&&null!=t.subtitle;return i||n||a}shouldClearLegendData(t,e,i){const s="replaced"===i||"series-grouping-change"===i||"updated"===i,n=null!=e.legend&&null==t.legend;return s||n}applyMiniChartOptions(t,e,i,s){var n,a,o,r;const l=(null==(a=null==(n=null==s?void 0:s.navigator)?void 0:n.miniChart)?void 0:a.series)??(null==s?void 0:s.series),c=this.applySeries(t,this.filterMiniChartSeries(e),this.filterMiniChartSeries(l));this.applyAxes(t,i,s,c,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const h=t.series;for(const p of h)p.properties.id=void 0;const d=t.axes,u=d.find((t=>"x"===t.direction));for(const p of d)p.nice=!1,p.gridLine.enabled=!1,p.label.enabled=p===u,p.tick.enabled=!1,p.interactionEnabled=!1;if(null!=u){const t=null==(o=i.navigator)?void 0:o.miniChart,e=null==t?void 0:t.label,s=null==(r=null==t?void 0:t.label)?void 0:r.interval;if(u.line.enabled=!1,u.label.set(se(e,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),u.tick.set(se(s,["enabled","width","size","color","interval","step"])),"grouped-category"===u.type){u.label.enabled=!1,u.label.rotation=0;const{depthOptions:t}=u;if(0===t.length)t.set([{label:{enabled:!0}}]);else for(let e=1;e<t.length;e++)t[e].label.enabled=!1}const n=null==s?void 0:s.step;null!=n&&(u.interval.step=n)}}applyModules(t){var e;const{type:i}=this.constructor;let s=!1;for(const n of Qo.byType("root","legend")){const a=null!=t[n.optionsKey]&&n.chartTypes.includes(i);a!==this.modulesManager.isEnabled(n)&&(a?(this.modulesManager.addModule(n,(t=>t.moduleFactory(this.getModuleContext()))),"legend"===n.type&&(null==(e=this.modulesManager.getModule(n))||e.attachLegend(this.ctx.scene)),this[n.optionsKey]=this.modulesManager.getModule(n)):(this.modulesManager.removeModule(n),delete this[n.optionsKey]),s=!0)}return s}initSeriesDeclarationOrder(t){for(let e=0;e<t.length;e++)t[e].setSeriesIndex(e)}applySeries(t,e,i){var s;if(!e)return"no-change";const n=function(t,e,i){var s,n;const a=(t,e,i)=>{const s=[t];for(const n of jh)n in e&&null!=e[n]&&s.push(`${n}=${e[n]}`);return(null==i?void 0:i.seriesGrouping)&&s.push(`seriesGrouping.groupId=${null==i?void 0:i.seriesGrouping.groupId}`),s.join(";")},o=new Map;let r=0;for(const h of t){const t=a(h.type,h.properties,null==i?void 0:i[r]);o.has(t)||o.set(t,[]),null==(s=o.get(t))||s.push([h,r++])}const l=new Map;r=0;for(const h of e){const t=a(h.type,h,h);l.has(t)||l.set(t,[]),null==(n=l.get(t))||n.push([h,r++])}if(![...o.keys()].some((t=>l.has(t))))return{status:"no-overlap",oldKeys:o.keys(),newKeys:l.keys()};const c=[];for(const[h,d]of l.entries())for(const[t,e]of d){const s=o.get(h);if(null==s||s.length<1){c.push({opts:t,targetIdx:e,idx:e,status:"add"}),o.delete(h);continue}const[n,a]=s.shift(),r=rr((null==i?void 0:i[a])??{},t??{}),{groupIndex:l,stackIndex:d}=(null==r?void 0:r.seriesGrouping)??{};null!=l||null!=d?c.push({opts:t,series:n,diff:r,targetIdx:e,idx:a,status:"series-grouping"}):r?c.push({opts:t,series:n,diff:r,targetIdx:e,idx:a,status:"update"}):c.push({opts:t,series:n,targetIdx:e,idx:a,status:"no-op"}),0===s.length&&o.delete(h)}for(const h of o.values())for(const[t,e]of h)c.push({series:t,idx:e,targetIdx:-1,status:"remove"});return{status:"overlap",changes:c}}(t.series,e,i);if("no-overlap"===n.status){Hd(`Chart.applySeries() - creating new series instances, status: ${n.status}`,n);const i=e.map((t=>this.createSeries(t)));return this.initSeriesDeclarationOrder(i),t.series=i,"replaced"}Hd("Chart.applySeries() - matchResult",n);const a=[];let o=!1,r=!1,l=!1;const c=n.changes.toSorted(((t,e)=>t.targetIdx-e.targetIdx));for(const h of c)switch(r||(r="series-grouping"===h.status),o||(o=null!=(null==(s=h.diff)?void 0:s.data)),l||(l="no-op"!==h.status),h.status){case"add":{const t=this.createSeries(h.opts);a.push(t),Hd("Chart.applySeries() - created new series",t);break}case"remove":Hd(`Chart.applySeries() - removing series at previous idx ${h.idx}`,h.series);break;case"no-op":a.push(h.series),Hd(`Chart.applySeries() - no change to series at previous idx ${h.idx}`,h.series);break;default:{const{series:t,diff:e,idx:i}=h;Hd(`Chart.applySeries() - applying series diff previous idx ${i}`,e,t),this.applySeriesValues(t,e),t.markNodeDataDirty(),a.push(t)}}return this.initSeriesDeclarationOrder(a),Hd("Chart.applySeries() - final series instances",a),t.series=a,r?"series-grouping-change":o?"data-change":l?"updated":"no-op"}applyAxes(t,e,i,s,n=[]){if(!("axes"in e)||!e.axes)return!1;n=["axes[].type",...n];const{axes:a}=e;return"replaced"!==s&&t.axes.length===a.length&&t.axes.every(((t,e)=>t.type===a[e].type))&&zh(i)?(t.axes.forEach(((t,e)=>{var s;const o=rr((null==(s=i.axes)?void 0:s[e])??{},a[e]);Hd(`Chart.applyAxes() - applying axis diff idx ${e}`,o);ur(t,o,{path:`axes[${e}]`,skip:n})})),!0):(Hd(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${s}`),t.axes=this.createAxis(a,n),!0)}createSeries(t){const e=Ch.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(e,t),this.applySeriesValues(e,t),e}applySeriesOptionModules(t,e){const i=t.createModuleContext(),s=t.getModuleMap();for(const n of Qo.byType("series-option"))n.optionsKey in e&&n.seriesTypes.includes(t.type)&&s.addModule(n,(t=>t.moduleFactory(i)))}applySeriesValues(t,e){const i=t.getModuleMap(),{type:s,data:n,listeners:a,seriesGrouping:o,showInMiniChart:r,...l}=e;for(const c of Mh)if("series-option"===c.type&&c.optionsKey in l){const t=i.getModule(c.optionsKey);if(t){const e=l[c.optionsKey];delete l[c.optionsKey],t.properties.set(e)}}t.properties.set(l),"data"in e&&t.setOptionsData(n),a&&this.registerListeners(t,a),"seriesGrouping"in e&&(t.seriesGrouping=null==o?void 0:{...t.seriesGrouping,...o})}createAxis(t,e){const i=[],s=this.getModuleContext();for(let n=0;n<t.length;n++){const a=t[n],o=bh.create(a.type,s);this.applyAxisModules(o,a),ur(o,a,{path:`axes[${n}]`,skip:e}),i.push(o)}return function(t){const e=[],i=[],s=[...Rh];for(const a of t)a instanceof Zo&&("string"==typeof(n=a.position)&&Rh.includes(n)?i.push(a.position):e.push(a));var n;for(const a of e){let t;do{t=s.pop()}while(t&&i.includes(t));if(null==t)break;a.position=t}}(i),i}applyAxisModules(t,e){const i=t.createModuleContext(),s=t.getModuleMap();for(const n of Qo.byType("axis-option")){const a=null!=e[n.optionsKey];a!==s.isEnabled(n)&&(a?(s.addModule(n,(t=>t.moduleFactory(i))),t[n.optionsKey]=s.getModule(n)):(s.removeModule(n),delete t[n.optionsKey]))}}registerListeners(t,e){t.clearEventListeners();for(const[i,s]of Object.entries(e))T(s)&&t.addEventListener(i,s)}};Kd.chartsInstances=new WeakMap,s([Kn({newValue(t){this.destroyed||(this.ctx.domManager.setContainer(t),Kd.chartsInstances.set(t,this))},oldValue(t){Kd.chartsInstances.delete(t)}})],Kd.prototype,"container",2),s([Kn({newValue(t){this.resize("width option",{inWidth:t})}})],Kd.prototype,"width",2),s([Kn({newValue(t){this.resize("height option",{inHeight:t})}})],Kd.prototype,"height",2),s([Kn({newValue(t){this.resize("minWidth option",{inMinWidth:t})}})],Kd.prototype,"minWidth",2),s([Kn({newValue(t){this.resize("minHeight option",{inMinHeight:t})}})],Kd.prototype,"minHeight",2),s([Kn({newValue(t){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:t})}})],Kd.prototype,"overrideDevicePixelRatio",2),s([Ti(ji)],Kd.prototype,"padding",2),s([Ti(ji)],Kd.prototype,"seriesArea",2),s([Ti(ji)],Kd.prototype,"keyboard",2),s([Ti(ji)],Kd.prototype,"touch",2),s([Ti(Is(["standalone","integrated"],"a chart mode"))],Kd.prototype,"mode",2),s([_n("chartCaptions.title")],Kd.prototype,"title",2),s([_n("chartCaptions.subtitle")],Kd.prototype,"subtitle",2),s([_n("chartCaptions.footnote")],Kd.prototype,"footnote",2),s([Ti(zi)],Kd.prototype,"suppressFieldDotNotation",2),s([Kn({changeValue(t,e){this.onAxisChange(t,e)}})],Kd.prototype,"axes",2),s([Kn({changeValue(t,e){this.onSeriesChange(t,e)}})],Kd.prototype,"series",2);var $d=Kd,Xd={2:(t,e)=>Math.log2(e),[Math.E]:(t,e)=>Math.log(e),10:(t,e)=>Math.log10(e)},Qd=(t,e)=>Math.log(e)/Math.log(t);function qd(t,e,i){const s=Math.min(...e),n=Xd[t]??Qd;return s>=0?n(t,i):-n(t,-i)}var Jd={[Math.E]:(t,e)=>Math.exp(e),10:(t,e)=>e>=0?10**e:1/10**-e},tu=(t,e)=>t**e;function eu(t,e,i){const s=Math.min(...e),n=Jd[t]??tu;return s>=0?n(t,i):-n(t,-i)}var iu=class extends Te{constructor(t=[1,10],e=[0,1]){super(t,e),this.type="log",this.defaultClamp=!0,this.base=10,this.log=t=>qd(this.base,this.domain,t),this.pow=t=>eu(this.base,this.domain,t)}toDomain(t){return t}transform(t){const[e,i]=St(this.domain);return e>=0!=i>=0?NaN:e>=0?Math.log(t):-Math.log(-t)}transformInvert(t){const[e,i]=St(this.domain);return e>=0!=i>=0?NaN:e>=0?Math.exp(t):-Math.exp(-t)}niceDomain(t,e=this.domain){if(e.length<2)return[];const{base:i}=this,[s,n]=e,a=s>n?Math.ceil:Math.floor,o=s>n?Math.floor:Math.ceil;return[eu(i,e,a(qd(i,e,s))),eu(i,e,o(qd(i,e,n)))]}ticks({interval:t,tickCount:e=Te.defaultTickCount},i=this.domain,s){if(!i||i.length<2||e<1)return[];const n=this.base,[a,o]=i,r=Math.min(a,o),l=Math.max(a,o);let c=this.log(r),h=this.log(l);if(t){const e=t=>t>=r&&t<=l,i=Da(c,h,Math.min(Math.abs(t),Math.abs(h-c))).map(this.pow).filter(e);if(!Aa(i.length,this.getPixelRange()))return i}if(!Nt(n)||h-c>=e)return va(c,h,Math.min(h-c,e)).map(this.pow);let d=[];const u=r>0;c=Math.floor(c)-1,h=Math.round(h)+1;const p=It(this.range)/e;let g=1/0;for(let m=c;m<=h;m++){const t=this.convert(this.pow(m+1));for(let e=1;e<n;e++){const i=u?e:n-e+1,s=this.pow(m)*i,a=this.convert(s),o=Math.abs(g-a),c=Math.abs(a-t);s>=r&&s<=l&&(1===e||o>=p&&c>=p||0===d.length)&&(d.push(s),g=a)}}return d=Si(d,u,s),d}tickFormatter({specifier:t}){return null!=t?na(t):String}datumFormatter(t){return this.tickFormatter(t)}},su=class{constructor(t,e,i){this.root=new ou(t,e,i)}clear(t){this.root.clear(t)}addValue(t,e){const i={hitTester:t,value:e,distanceSquared:(e,i)=>t.distanceSquared(e,i)};this.root.addElem(i)}find(t,e){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,i),i.best}},nu=class{constructor(t,e,i,s){this.nw=t,this.ne=e,this.sw=i,this.se=s}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,i){this.nw.find(t,e,i),this.ne.find(t,e,i),this.sw.find(t,e,i),this.se.find(t,e,i)}},au=class{constructor(t,e,i){this.capacity=t,this.maxdepth=e,this.boundary=i??Et.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,i){this.findCondition(t,e,i)&&(void 0===this.subdivisions?this.findAction(t,e,i):this.subdivisions.find(t,e,i))}subdivide(t){this.subdivisions=this.makeSubdivisions();for(const e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){const{x:t,y:e,width:i,height:s}=this.boundary,{capacity:n}=this,a=this.maxdepth-1,o=i/2,r=s/2,l=new Et(t,e,o,r),c=new Et(t+o,e,o,r),h=new Et(t,e+r,o,r),d=new Et(t+o,e+r,o,r);return new nu(this.child(n,a,l),this.child(n,a,c),this.child(n,a,h),this.child(n,a,d))}},ou=class t extends au{addCondition(t){const{x:e,y:i}=t.hitTester.midPoint;return this.boundary.containsPoint(e,i)}findCondition(t,e,i){const{best:s}=i;return 0!==s.distanceSquared&&this.boundary.distanceSquared(t,e)<s.distanceSquared}findAction(t,e,i){const s=xt(t,e,this.elems,i.best.distanceSquared);void 0!==s.nearest&&s.distanceSquared<i.best.distanceSquared&&(i.best=s)}child(e,i,s){return new t(e,i,s)}},ru=class t extends Te{constructor(){super([0,1],[0,1]),this.type="number"}static getTickStep(t,e,i){const{interval:s,tickCount:n=Te.defaultTickCount,minTickCount:a,maxTickCount:o}=i;return s??Ma(t,e,n,a,o)}toDomain(t){return t}ticks({interval:t,tickCount:e=Te.defaultTickCount,minTickCount:i,maxTickCount:s},n=this.domain,a){if(!n||n.length<2||e<1||!n.every(isFinite))return[];const[o,r]=n;if(t){const e=Math.abs(t);if(!Aa((r-o)/e,this.getPixelRange()))return Da(o,r,e)}return va(o,r,e,i,s,a)}niceDomain(e,i=this.domain){if(i.length<2)return[];const{tickCount:s=Te.defaultTickCount}=e;let[n,a]=i;if(1===s)[n,a]=function(t,e){const i=Math.abs(e-t),s=10**Math.floor(Math.log10(i));let n=1/0,a=[t,e];for(const o of fa){const r=o*s,l=Math.floor(t/r)*r,c=Math.ceil(e/r)*r,h=1-i/Math.abs(c-l);n>h&&(n=h,a=[l,c])}return a}(n,a);else if(s>1){const s=n>a?Math.ceil:Math.floor,o=n>a?Math.floor:Math.ceil,r=4;for(let l=0;l<r;l++){const r=n,l=a,c=t.getTickStep(n,a,e),[h,d]=i;if(n=s(h/c)*c,a=o(d/c)*c,n===r&&a===l)break}}return[n,a]}tickFormatter({ticks:t,fractionDigits:e,specifier:i}){return null!=i?Ia(t,i):t=>Fa(t,e)}datumFormatter({ticks:t,fractionDigits:e,specifier:i}){return null!=i?Ia(t,i):t=>Fa(t,e+1)}};function lu(t){if(0===t.length)return null;let e=1/0,i=-1/0;for(const n of t){const t=n instanceof Date?n.getTime():n;"number"==typeof t&&(t<e&&(e=t),t>i&&(i=t))}const s=[e,i];return s.every(isFinite)?s:null}function cu(t,e,i){let s=!1;return t.length>2&&(t=lu(t)??[NaN,NaN]),isNaN(e)||(s||(s=e>t[0]),t=[e,t[1]]),isNaN(i)||(s||(s=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:s}}var hu=class extends Zo{constructor(t,e=new ru){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=cu(t,e,i);return{domain:s,clipped:n}}};hu.className="NumberAxis",hu.type="number",s([Ti(Oi(_i,$i("max"))),xo(NaN)],hu.prototype,"min",2),s([Ti(Oi(_i,Xi("min"))),xo(NaN)],hu.prototype,"max",2);var du=class extends Zo{constructor(t){super(t,new Na),this.min=void 0,this.max=void 0}normaliseDataDomain(t){var e;let{min:i,max:s}=this,n=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof s&&(s=new Date(s)),t.length>2&&(t=(null==(e=lu(t))?void 0:e.map((t=>new Date(t))))??[]),i instanceof Date&&(n||(n=i>t[0]),t=[i,t[1]]),s instanceof Date&&(n||(n=s<t[1]),t=[t[0],s]),t[0]>t[1]&&(t=[]),{domain:t,clipped:n}}};du.className="TimeAxis",du.type="time",s([Ti(Oi(qi,$i("max")),{optional:!0})],du.prototype,"min",2),s([Ti(Oi(qi,Xi("min")),{optional:!0})],du.prototype,"max",2);var uu=class extends td{constructor(){super(...arguments),this.clipFocusBox=!0}getScaleInformation({xScale:t,yScale:e}){return{isContinuousX:Te.is(t),isContinuousY:Te.is(e),xScaleType:null==t?void 0:t.type,yScaleType:null==e?void 0:e.type}}getModulePropertyDefinitions(){var t,e;const i=null==(t=this.axes.x)?void 0:t.scale,s=null==(e=this.axes.y)?void 0:e.scale;return this.moduleMap.mapModules((t=>t.getPropertyDefinitions(this.getScaleInformation({xScale:i,yScale:s})))).flat()}async requestDataModel(t,e,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=await t.request(this.id,e??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}isProcessedDataAnimatable(){var t,e;const i=null==(e=null==(t=this.processedData)?void 0:t.reduced)?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:s,uniqueKeys:n}=i;return s&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){const e=this.getNodeData();if(void 0===e||0===e.length)return;const i=this.computeFocusDatumIndex(t,e);if(void 0===i)return;const{clipFocusBox:s}=this,n=e[i],a={...t,datumIndex:i},o=this.computeFocusBounds(a);return void 0!==o?{bounds:o,clipFocusBox:s,datum:n,datumIndex:i}:void 0}computeFocusDatumIndex(t,e){const i=t=>{const{missing:i=!1,enabled:s=!0,focusable:n=!0}=e[t];return!i&&s&&n},s=(t,e)=>{for(;t>=0&&!i(t);)t+=e;return-1===t?void 0:t},n=(t,s)=>{for(;t<e.length&&!i(t);)t+=s;return t===e.length?void 0:t};let a;const o=bt(0,t.datumIndex,e.length-1);return a=t.datumIndexDelta<0?s(o,t.datumIndexDelta):t.datumIndexDelta>0?n(o,t.datumIndexDelta):n(o,1)??s(o,-1),void 0===a?0===t.datumIndexDelta?void 0:t.datumIndex-t.datumIndexDelta:a}},pu=class extends ki{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};s([Ti(ts,{optional:!0})],pu.prototype,"fill",2),s([Ti(Vi,{optional:!0})],pu.prototype,"fillOpacity",2),s([Ti(ts,{optional:!0})],pu.prototype,"stroke",2),s([Ti(Wi,{optional:!0})],pu.prototype,"strokeWidth",2),s([Ti(Vi,{optional:!0})],pu.prototype,"strokeOpacity",2),s([Ti(ds,{optional:!0})],pu.prototype,"lineDash",2),s([Ti(Wi,{optional:!0})],pu.prototype,"lineDashOffset",2);var gu=class extends ki{};s([Ti(Wi,{optional:!0})],gu.prototype,"strokeWidth",2),s([Ti(Vi,{optional:!0})],gu.prototype,"dimOpacity",2),s([Ti(zi,{optional:!0})],gu.prototype,"enabled",2);var mu=class extends ki{constructor(){super(...arguments),this.color="black"}};s([Ti(ts,{optional:!0})],mu.prototype,"color",2);var yu=class extends ki{constructor(){super(...arguments),this.enabled=!0}};s([Ti(zi,{optional:!0})],yu.prototype,"enabled",2);var fu=class extends ki{constructor(){super(...arguments),this.item=new pu,this.series=new gu,this.text=new mu}};s([Ti(ji)],fu.prototype,"item",2),s([Ti(ji)],fu.prototype,"series",2),s([Ti(ji)],fu.prototype,"text",2);var xu=class extends ki{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new yu,this.highlightStyle=new fu}};s([Ti(Fi,{optional:!0})],xu.prototype,"id",2),s([Ti(zi)],xu.prototype,"visible",2),s([Ti(Ui,{optional:!0})],xu.prototype,"focusPriority",2),s([Ti(zi)],xu.prototype,"showInLegend",2),s([Ti(Fi)],xu.prototype,"cursor",2),s([Ti(Ms)],xu.prototype,"nodeClickRange",2),s([Ti(ji)],xu.prototype,"highlight",2),s([Ti(ji)],xu.prototype,"highlightStyle",2);var vu={x:["xKey"],y:["yKey"]},bu={x:["xName"],y:["yName"]},Mu=class extends qh{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},Su=class extends xu{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};s([Ti(Fi,{optional:!0})],Su.prototype,"legendItemName",2),s([Ti(zi,{optional:!0})],Su.prototype,"pickOutsideVisibleMinorAxis",2);var Iu=100,Du=class extends uu{constructor({pathsPerSeries:t=["path"],hasMarkers:e=!1,hasHighlightedLabels:i=!1,pathsZIndexSubOrderOffset:s=[],datumSelectionGarbageCollection:n=!0,markerSelectionGarbageCollection:a=!0,animationAlwaysUpdateSelections:o=!1,animationResetFns:r,directionKeys:l,directionNames:c,...h}){if(super({directionKeys:l,directionNames:c,canHaveAxes:!0,...h}),this.NodeEvent=Mu,this.dataNodeGroup=this.contentGroup.appendChild(new In({name:`${this.id}-series-dataNodes`,zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new In({name:`${this.id}-series-markers`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new Ln({name:`${this.id}-series-labels`})),this.labelSelection=Ea.select(this.labelGroup,Rn),this.highlightSelection=Ea.select(this.highlightNode,(()=>this.opts.hasMarkers?new Ad:this.nodeFactory())),this.highlightLabelSelection=Ea.select(this.highlightLabel,Rn),this.annotationSelections=new Set,this.debug=Es.create(),!l||!c)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,hasMarkers:e,hasHighlightedLabels:i,pathsZIndexSubOrderOffset:s,directionKeys:l,directionNames:c,animationResetFns:r,animationAlwaysUpdateSelections:o,datumSelectionGarbageCollection:n,markerSelectionGarbageCollection:a},this.paths=t.map((t=>new pd({name:`${this.id}-${t}`}))),this.datumSelection=Ea.select(this.dataNodeGroup,(()=>this.nodeFactory()),n),this.markerSelection=Ea.select(this.markerGroup,Ad,a),this.animationState=new Wn("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:t=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(t):this.animateWaitingUpdateReady(t)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:t=>this.resetAllAnimation(t),reset:"empty"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}get contextNodeData(){return this._contextNodeData}getNodeData(){var t;return null==(t=this.contextNodeData)?void 0:t.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),this.attachPaths(this.paths,e,i)}detachSeries(t,e,i){super.detachSeries(t,e,i),this.detachPaths(this.paths,e,i)}attachPaths(t,e,i){for(const s of t)this.contentGroup.appendChild(s)}detachPaths(t,e,i){for(const s of t)this.contentGroup.removeChild(s)}renderToOffscreenCanvas(){const t=this.getNodeData();return null!=t&&t.length>Iu}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t?this.animationState.transition("skip"):"disabled"===t&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(t=>this.onLegendItemClick(t))),this.ctx.chartEventManager.addListener("legend-item-double-click",(t=>this.onLegendItemDoubleClick(t))))}destroy(){super.destroy(),this._contextNodeData=void 0}update({seriesRect:t}){var e,i;const{visible:s,_contextNodeData:n}=this,a=(null==(i=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight())?void 0:i.series)===this,o=this.checkResize(t),r=this.updateHighlightSelection(a);this.updateSelections(s),this.updateNodes(r,a,s);const l=this.getAnimationData(t,n);l&&(o&&this.animationState.transition("resize",l),this.animationState.transition("update",l))}updateSelections(t){var e;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((t||!i)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=t));const{dataModel:i,processedData:s}=this;void 0!==i&&void 0!==s&&this.dispatch("data-update",{dataModel:i,processedData:s})}this.updateSeriesSelections()}}updateSeriesSelections(t){const{datumSelection:e,labelSelection:i,markerSelection:s,paths:n}=this,a=this._contextNodeData;if(!a)return;const{nodeData:o,labelData:r,itemId:l}=a;this.updatePaths({seriesHighlighted:t,itemId:l,contextData:a,paths:n}),this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i})??i,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:o,markerSelection:s}))}updateNodes(t,e,i){const{highlightSelection:s,highlightLabelSelection:n,opts:{hasMarkers:a,hasHighlightedLabels:o}}=this,r=!this.ctx.animationManager.isSkipped(),l=this.visible&&null!=this._contextNodeData&&i;this.contentGroup.visible=r||l,this.highlightGroup.visible=(r||l)&&e;const c=this.getOpacity();a?(this.updateMarkerNodes({markerSelection:s,isHighlight:!0}),this.animationState.transition("highlightMarkers",s)):(this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("highlight",s)),o&&this.updateLabelNodes({labelSelection:n});const{dataNodeGroup:h,markerGroup:d,datumSelection:u,labelSelection:p,markerSelection:g,paths:m,labelGroup:y}=this,{itemId:f}=this.contextNodeData??{};h.opacity=c,h.visible=r||l,y.visible=l,a&&(d.opacity=c,d.visible=l),y&&(y.opacity=c),this.updatePathNodes({seriesHighlighted:e,itemId:f,paths:m,opacity:c,visible:l,animationEnabled:r}),h.visible&&(this.updateDatumNodes({datumSelection:u,highlightedItems:t,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:p}),a&&this.updateMarkerNodes({markerSelection:g,isHighlight:!1}))}getHighlightLabelData(t,e){const i=t.filter((t=>t.datum===e.datum&&t.itemId===e.itemId));return 0===i.length?void 0:i}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){var e;const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:n}=this;if(!n)return;const a=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight(),o=t&&(null==a?void 0:a.datum)?a:void 0;let r,l;if(null!=o){const t=this.isLabelEnabled(),{labelData:e,nodeData:i}=n;l=this.getHighlightData(i,o),r=t?this.getHighlightLabelData(e,o):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:r,highlightLabelSelection:s}),l}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:t}of this.datumSelection)!0!==t.datum.missing&&(yield t)}getQuadTree(){if(void 0===this.quadtree){const{width:t,height:e}=this.ctx.scene.canvas,i=new Et(0,0,t,e);this.quadtree=new su(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodeExactShape(t){const e=super.pickNodeExactShape(t);if(e)return e;const{x:i,y:s}=t,{opts:{hasMarkers:n}}=this;let a;const{dataNodeGroup:o,markerGroup:r}=this;if(a=o.pickNode(i,s),!a&&n&&(a=null==r?void 0:r.pickNode(i,s)),a&&!0!==a.datum.missing)return{datum:a.datum,distance:0};for(const l of this.moduleMap.modules()){const{datum:e}=l.pickNodeExact(t)??{};if(null!=e&&!0!==(null==e?void 0:e.missing))return{datum:e,distance:0}}}pickNodeClosestDatum(t){var e;const{x:i,y:s}=t,{axes:n,_contextNodeData:a}=this;if(!a)return;const o=n.x,r=n.y,l=i,c=s;let h,d=1/0;for(const u of a.nodeData){const{point:{x:t=NaN,y:e=NaN}={}}=u;if(isNaN(t)||isNaN(e))continue;if(!((null==o?void 0:o.inRange(t))&&(null==r?void 0:r.inRange(e))))continue;const i=Math.max((l-t)**2+(c-e)**2,0);i<d&&(d=i,h=u)}for(const u of this.moduleMap.modules()){const e=u.pickNodeNearest(t);if(void 0!==e&&e.distanceSquared<d){d=e.distanceSquared,h=e.datum;break}}if(h){return{datum:h,distance:Math.max(Math.sqrt(d)-((null==(e=h.point)?void 0:e.size)??0),0)}}}pickNodeMainAxisFirst(t,e){var i;const{x:s,y:n}=t,{axes:a,_contextNodeData:o}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!o)return;const l=a.x,c=a.y,h=[l,c].filter($o.is).map((t=>t.direction));if(e&&0===h.length)return;const[d="x"]=h,u=[s,n];"x"!==d&&u.reverse();const p=[1/0,1/0];let g;for(const m of o.nodeData){const{x:t=NaN,y:e=NaN}=m.point??m.midPoint??{};if(isNaN(t)||isNaN(e)||!0===m.missing)continue;const i=[null==l?void 0:l.inRange(t),null==c?void 0:c.inRange(e)];if("x"!==d&&i.reverse(),!i[0]||!r&&!i[1])continue;const s=[t,e];"x"!==d&&s.reverse();let n=!0;for(let a=0;a<s.length;a++){const t=Math.abs(s[a]-u[a]);if(t>p[a]){n=!1;break}t<p[a]&&(p[a]=t,p.fill(1/0,a+1,p.length))}n&&(g=m)}if(g){let e=Math.max(p[0]**2+p[1]**2-((null==(i=g.point)?void 0:i.size)??0),0);for(const i of this.moduleMap.modules()){const s=i.pickNodeMainAxisFirst(t);if(void 0!==s&&s.distanceSquared<e){g=s.datum,e=s.distanceSquared;break}}return{datum:g,distance:Math.sqrt(e)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}keysOrValues(t){var e,i,s;const n=this.dataModel.resolveProcessedDataIndexById(this,t);return(null==(i=null==(e=this.processedData)?void 0:e.keys[n])?void 0:i.get(this.id))??(null==(s=this.processedData)?void 0:s.columns[n])??[]}visibleRange(t,e,i){const s=this.keysOrValues(t);return Lc((null==i?void 0:i.length)??s.length,e,(t=>{const e=(null==i?void 0:i[t])??t;return this.xCoordinateRange(s[e],0,e)}))}domainForVisibleRange(t,e,i,s,n,a){const{processedData:o,dataModel:r}=this,[l,c]=s,h=this.keysOrValues(i);if(n){const t=this.visibleRange(i,s,a);return r.getDomainBetweenRange(this,e,t,o)}const d=e.map((t=>this.keysOrValues(t)));let u=1/0,p=-1/0;return h.forEach(((t,i)=>{const[s,n]=this.xCoordinateRange(t,0,i);if(!(n<l||s>c))for(let a=0;a<e.length;a++){const t=d[a][i];u=Math.min(u,t),p=Math.max(p,t)}})),u>p?[NaN,NaN]:[u,p]}domainForClippedRange(t,e,i,s){const{processedData:n,dataModel:a,axes:o}=this,r=function(t){let e,i;t instanceof hu&&(Number.isFinite(t.min)||Number.isFinite(t.max))?(e=Number.isFinite(t.min)?t.min:void 0,i=Number.isFinite(t.max)?t.max:void 0):t instanceof du&&(null!=t.min||null!=t.max)&&({min:e,max:i}=t);if(null==e&&null==i)return;return e??(e=-1/0),i??(i=1/0),[e,i]}(o["x"===t?"y":"x"]);if(!r)return e.flatMap((t=>a.getDomain(this,t,"value",n)));const l=this.keysOrValues(i);if(s){const t=function(t,e,i){const s=e[0].valueOf(),n=e[1].valueOf(),a=M(0,t-1,(t=>{var e;const n=null==(e=i(t))?void 0:e.valueOf();return!Number.isFinite(n)||n>=s}));let o=b(0,t-1,(t=>{var e;const s=null==(e=i(t))?void 0:e.valueOf();return!Number.isFinite(s)||s<=n}));return null==a||null==o?[0,0]:(o=Math.min(o+1,t),[a,o])}(l.length,r,(t=>l[t]));return a.getDomainBetweenRange(this,e,t,n)}const c=e.map((t=>this.keysOrValues(t))),h=r[0].valueOf(),d=r[1].valueOf(),u=[];return l.forEach(((t,e)=>{const i=t.valueOf();if(i<h||i>d)return;const s=c.map((t=>t[e]));i>=h&&u.push(...s),i<=d&&u.push(...s)})),u}countVisibleItems(t,e,i,s,n){const{dataModel:a,processedData:o}=this;if(!a||!o)return 1/0;const r=this.keysOrValues(t),l=e.map((t=>a.resolveColumnById(this,t,o))),c=this.axes.x,h=this.axes.y,d=this.shouldFlipXY(),u=c.range,p=h.range,g=(t,e,i)=>t[0]+(i-e[0])/(e[1]-e[0])*(t[1]-t[0]),m=g(u,c.visibleRange,i[0]),y=g(u,c.visibleRange,i[1]),f=g(p,h.visibleRange,d?s[0]:s[1]),x=g(p,h.visibleRange,d?s[1]:s[0]),v=Math.round((i[0]+(i[1]-i[0])/2)*r.length);return kc(0,r.length-1,v,n,(t=>{let[e,i]=this.xCoordinateRange(r[t],0,t),[s,n]=this.yCoordinateRange(l.map((e=>e[t])),0,t);return!!(P(e)&&P(i)&&P(s)&&P(n))&&(d&&([e,i,s,n]=[s,n,e,i]),e>=m&&i<=y&&s>=f&&n<=x)}))}updateHighlightSelectionItem(t){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:s}=t,n=i??[];if(e){const t=s;return this.updateMarkerSelection({nodeData:n,markerSelection:t})}return this.updateDatumSelection({nodeData:n,datumSelection:s})}updateHighlightSelectionLabel(t){return this.updateLabelSelection({labelData:t.items??[],labelSelection:t.highlightLabelSelection})}updateDatumSelection(t){return t.datumSelection}updateDatumNodes(t){}updateMarkerSelection(t){return t.markerSelection}updateMarkerNodes(t){}updatePaths(t){t.paths.forEach((t=>t.visible=!1))}updatePathNodes(t){const{paths:e,opacity:i,visible:s}=t;for(const n of e)n.opacity=i,n.visible=s}resetPathAnimation(t){var e;const{path:i}=(null==(e=this.opts)?void 0:e.animationResetFns)??{};i&&t.paths.forEach((t=>{Cs([t],i)}))}resetDatumAnimation(t){var e;const{datum:i}=(null==(e=this.opts)?void 0:e.animationResetFns)??{};i&&Cs([t.datumSelection],i)}resetLabelAnimation(t){var e;const{label:i}=(null==(e=this.opts)?void 0:e.animationResetFns)??{};i&&Cs([t.labelSelection],i)}resetMarkerAnimation(t){var e;const{marker:i}=(null==(e=this.opts)?void 0:e.animationResetFns)??{};i&&this.opts.hasMarkers&&Cs([t.markerSelection],i)}resetAllAnimation(t){var e;this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(t),this.resetDatumAnimation(t),this.resetLabelAnimation(t),this.resetMarkerAnimation(t),!1===(null==(e=t.contextData)?void 0:e.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const{datum:i}=(null==(e=this.opts)?void 0:e.animationResetFns)??{};i&&Cs([t],i)}animateReadyHighlightMarkers(t){var e;const{marker:i}=(null==(e=this.opts)?void 0:e.animationResetFns)??{};i&&Cs([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}getAnimationData(t,e){const{_contextNodeData:i}=this;if(!i)return;return{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:e,paths:this.paths,seriesRect:t}}updateLabelSelection(t){return t.labelSelection}getScaling(t){if(t instanceof iu){const{range:e,domain:i}=t;return{type:"log",convert:e=>t.convert(e),domain:[i[0],i[1]],range:[e[0],e[1]]}}if(t instanceof Te){const{range:e,domain:i}=t;return{type:"continuous",domain:[i[0],i[1]],range:[e[0],e[1]]}}if(t instanceof Di){const{domain:e}=t;return{type:"category",domain:e,inset:t.inset,step:t.step}}}calculateScaling(){const t={};for(const e of Object.values(qn)){const i=this.axes[e];if(!i)continue;const s=this.getScaling(i.scale);null!=s&&(t[e]=s)}return t}};var Au=["top","right","bottom","left"],Lu=class t extends $d{constructor(t,e){super(t,e),this.paired=!0,this.lastUpdateClipRect=void 0,this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}onAxisChange(t,e){super.onAxisChange(t,e),null!=this.ctx&&this.ctx.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}getChartType(){return"cartesian"}setRootClipRects(t){const{seriesRoot:e,annotationRoot:i}=this;e.setClipRect(t),i.setClipRect(t)}async processData(){await super.processData();for(const t of this.axes){const e=this.getSyncedDomain(t);null!=e&&t.setDomains(e)}this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{clipSeries:s,seriesRect:n,visible:a}=this.updateAxes(t.layoutBox);this.seriesRoot.visible=a,this.seriesRect=n,this.animationRect=t.layoutBox;const{x:o,y:r}=n;if(t.width!==this.lastLayoutWidth||t.height!==this.lastLayoutHeight)for(const d of[e,i])d.translationX=Math.floor(o),d.translationY=Math.floor(r);else{const{translationX:t,translationY:s}=e;Ne(this.id,"seriesRect",this.ctx.animationManager,[e,i],{translationX:t,translationY:s},{translationX:Math.floor(o),translationY:Math.floor(r)},{phase:"update"})}this.lastLayoutWidth=t.width,this.lastLayoutHeight=t.height;const l=n.clone().grow(this.seriesArea.padding),c=this.seriesArea.clip||s?l:void 0,{lastUpdateClipRect:h}=this;this.lastUpdateClipRect=c,this.ctx.animationManager.isActive()&&null!=h?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:h,to:l,onUpdate:t=>this.setRootClipRects(t),onComplete:()=>this.setRootClipRects(c)}):this.setRootClipRects(c),this.ctx.layoutManager.emitLayoutComplete(t,{axes:this.axes.map((t=>t.getLayoutState())),series:{visible:a,rect:n,paddedRect:l},clipSeries:s})}updateAxes(t){const{clipSeries:e,seriesRect:i,overflows:s}=this.resolveAxesLayout(t);for(const n of this.axes)n.update(),n.setCrossLinesVisible(!s),this.clipAxis(n,i,t);return{clipSeries:e,seriesRect:i,visible:!s}}resolveAxesLayout(t){let e,i,s=0;do{if(i=e??this.getDefaultState(),e=this.updateAxesPass(new Map(i.axisAreaWidths),t.clone()),s++>10){n.warn("Max iterations reached. Unable to stabilize axes layout.");break}}while(!this.isLayoutStable(e,i));return this.lastAreaWidths=e.axisAreaWidths,e}updateAxesPass(e,i){const s=new Map,n={};let a=!1,o=!1;for(const t of Au){const e=this.seriesArea.padding[t],s=this.axes.findLast((e=>e.position===t));s?s.seriesAreaPadding=e:i.shrink(e,t)}const r=(e.get("left")??0)+(e.get("right")??0),l=(e.get("top")??0)+(e.get("bottom")??0),c=this.buildCrossLinePadding(e);i.width<=r+c.hPadding||i.height<=l+c.vPadding?a=!0:i.shrink(c);const h=i.clone().shrink(Object.fromEntries(e));for(const t of this.axes){const{position:e="left",direction:i}=t;this.sizeAxis(t,h,e);const a="y"===i,{primaryTickCount:r,bbox:l}=t.calculateLayout(t.nice?n[i]:void 0);n[i]??(n[i]=r),o||(o=t.dataDomain.clipped||t.visibleRange[0]>0||t.visibleRange[1]<1),s.set(t.id,Math.ceil(t.thickness??(a?null==l?void 0:l.width:null==l?void 0:l.height)??0))}const d=Object.entries(f(this.axes,(t=>t.position??"left"))),{width:u,height:p,pixelRatio:g}=this.ctx.scene,m=new Map,y=new Map;for(const[f,x]of d){let e="left"===f||"right"===f?p%g:u%g,i=0;for(const n of x){y.set(n.id,e);const a=s.get(n.id)??0;i=Math.max(i,e+a),n.layoutConstraints.stacked&&(e+=a+t.AxesPadding)}m.set(f,Math.ceil(i))}for(const[t,f]of d)this.positionAxes({axes:f,position:t,axisWidths:s,axisOffsets:y,axisAreaWidths:m,axisBound:i,seriesRect:h});return{clipSeries:o,seriesRect:h,axisAreaWidths:m,overflows:a}}buildCrossLinePadding(t){const e={top:0,right:0,bottom:0,left:0,hPadding:0,vPadding:0};this.axes.forEach((t=>{var i;null==(i=t.crossLines)||i.forEach((t=>{var i;null==(i=t.calculatePadding)||i.call(t,e)}))}));for(const[i,s=0]of Object.entries(e))e[i]=Math.max(s-(t.get(i)??0),0);return e.hPadding=e.left+e.right,e.vPadding=e.top+e.bottom,e}clampToOutsideSeriesRect(t,e,i,s){const n="x"===i?t.x:t.y,a="x"===i?t.width:t.height;return 1===s?Math.min(e,n+a):Math.max(e,n)}getSyncedDomain(t){const e=this.modulesManager.getModule("sync");if(!(null==e?void 0:e.enabled))return;const i=e.getSyncedDomain(t);if(i&&t.dataDomain.domain.length){let s;const{domain:n}=t.scale;if(Te.is(t.scale)){const[t,e]=St(i);s=t!==n[0]||e!==n[1]}else s=!x(i,n);s&&!this.skipSync&&e.updateSiblings()}return i}sizeAxis(t,e,i){const s=t instanceof $o,n="left"===i||"right"===i,{width:a,height:o}=e,r=n?o:a;let l=0,c=r,{min:h,max:d}=this.ctx.zoomManager.getAxisZoom(t.id);const{width:u,unit:p,align:g}=t.layoutConstraints;c="px"===p?l+u:c*u/100,"end"===g&&(l=r-(c-l),c=r),n&&(s?[h,d]=[1-d,1-h]:[l,c]=[c,l]),t.range=[l,c],t.visibleRange=[h,d],t.gridLength=n?a:o}positionAxes(t){const{axes:e,axisBound:i,axisWidths:s,axisOffsets:n,axisAreaWidths:a,seriesRect:o,position:r}=t,l=a.get(r)??0;let c="x",h="y",d=1;"top"!==r&&"bottom"!==r||(c="y",h="x");let u=i[c];"right"!==r&&"bottom"!==r||(d=-1,u+="x"===c?i.width:i.height);for(const p of e){const t=a.get("x"===h?"left":"top")??0,e=s.get(p.id)??0,r=n.get(p.id)??0;p.gridPadding=l-r-e,p.translation[h]=i[h]+t,p.translation[c]=this.clampToOutsideSeriesRect(o,u+d*(r+e),c,d)}}shouldFlipXY(){return this.series.every((t=>t instanceof Du&&t.shouldFlipXY()))}getDefaultState(){const t=new Map;if(this.lastAreaWidths)for(const{position:e="left"}of this.axes){const i=this.lastAreaWidths.get(e);null!=i&&t.set(e,i)}return{axisAreaWidths:t,clipSeries:!1,overflows:!1}}isLayoutStable(t,e){if(e.overflows!==t.overflows||e.clipSeries!==t.clipSeries)return!1;for(const i of t.axisAreaWidths.keys())if(!e.axisAreaWidths.has(i))return!1;for(const[i,s]of e.axisAreaWidths.entries()){const e=t.axisAreaWidths.get(i);if((null!=s||null!=e)&&s!==e)return!1}return!0}clipAxis(t,e,i){var s,n;const a=Math.ceil((null==(s=t.gridLine)?void 0:s.width)??0),o=Math.ceil((null==(n=t.line)?void 0:n.width)??0);let{width:r,height:l}=e;switch(r+="x"===t.direction?a:o,l+="y"===t.direction?a:o,t.clipGrid(e.x,e.y,r,l),t.position){case"left":case"right":t.clipTickLines(i.x,e.y-a,i.width+a,e.height+2*a);break;case"top":case"bottom":t.clipTickLines(e.x-a,i.y,e.width+2*a,i.height+a);const{label:s,labelNodes:n,scale:o}=t;if(Te.is(o)&&s.enabled&&s.avoidCollisions&&n.length>1){const s=n.toSorted(((t,e)=>t.translationY-e.translationY)),a=s.at(-1),o=a.getBBox(),r=e.x+o.y+o.height<=i.x+i.width+this.padding.right;if(a.visible=r,r||t.visibleRange[0]>0||t.visibleRange[1]<1)s[0].visible=!0;else{const t=s[0].getBBox();s[0].visible=t.y>=0}}}}};Lu.className="CartesianChart",Lu.type="cartesian",Lu.AxesPadding=15;var Nu=Lu,ku={type:"chart",name:"cartesian",detect:zh,create:(t,e)=>new Nu(t,e)},wu=Es.create(!0,"opts"),Cu=class{constructor(t,e,i){this.factoryApi=e,this.licenseManager=i,this.chart=t}async update(t){return wu.group("AgChartInstance.update()",(async()=>{this.factoryApi.update(t,this),await this.chart.waitForUpdate()}))}async updateDelta(t){return wu.group("AgChartInstance.updateDelta()",(async()=>{this.factoryApi.updateUserDelta(this,t),await this.chart.waitForUpdate()}))}getOptions(){const t=cr(this.chart.getOptions());for(const e of Object.keys(t))e.startsWith("_")&&delete t[e];return t}waitForUpdate(){return this.chart.waitForUpdate()}async download(t){const e=await this.prepareResizedChart(this,t);try{e.chart.download(null==t?void 0:t.fileName,null==t?void 0:t.fileFormat)}finally{e.destroy()}}async __toSVG(t){const e=await this.prepareResizedChart(this,{width:600,height:300,...t});try{return e.chart.toSVG()}finally{e.destroy()}}async getImageDataURL(t){const e=await this.prepareResizedChart(this,t);try{return e.chart.getCanvasDataURL(null==t?void 0:t.fileFormat)}finally{e.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(t){const e=this.getEnabledOriginators();e.includes(this.chart.ctx.legendManager)?(await this.setStateOriginators(t,e.filter((t=>t!==this.chart.ctx.zoomManager))),await this.setStateOriginators(t,[this.chart.ctx.zoomManager])):await this.setStateOriginators(t,e)}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=null}async prepareResizedChart(t,e={}){var i,s;const{chart:n}=t,a=e.width??n.width??n.ctx.scene.canvas.width,o=e.height??n.height??n.ctx.scene.canvas.height,r=t.getState(),l=Qo.hasEnterpriseModules(),c={...n.chartOptions.processedOverrides,container:document.createElement("div"),width:a,height:o};null!=e.width&&null!=e.height&&(c.overrideDevicePixelRatio=1);const h=n.getOptions();l&&(c.animation={enabled:!1},(null==(i=this.licenseManager)?void 0:i.isDisplayWatermark())&&(c.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const d={...n.chartOptions.specialOverrides},u={...n.chartOptions.optionMetadata},p=this.factoryApi.create(h,c,d,u);await p.setState(r),p.chart.ctx.zoomManager.updateZoom("chartProxy",n.ctx.zoomManager.getZoom()),p.chart.ctx.legendManager.clearData(),p.chart.ctx.legendManager.update(n.ctx.legendManager.getData()),n.series.forEach(((t,e)=>{t.visible||(p.chart.series[e].visible=!1)}));const g=[];for(const m of n.modulesManager.legends())g.push((null==(s=m.legend.pagination)?void 0:s.currentPage)??0);for(const m of p.chart.modulesManager.legends()){const t=g.shift()??0;m.legend.pagination&&m.legend.pagination.setPage(t)}return p.chart.update(0,{forceNodeDataRefresh:!0}),await p.waitForUpdate(),p}getEnabledOriginators(){var t,e,i;const{chartOptions:{processedOptions:s,optionMetadata:n},ctx:{annotationManager:a,chartTypeOriginator:o,zoomManager:r,legendManager:l}}=this.chart,c=[];"annotations"in s&&(null==(t=s.annotations)?void 0:t.enabled)&&c.push(a);return"price-volume"===n.presetType&&c.push(o),((null==(e=s.navigator)?void 0:e.enabled)||(null==(i=s.zoom)?void 0:i.enabled))&&c.push(r),"legend"in this.chart&&c.push(l),c}async setStateOriginators(t,e){this.factoryApi.caretaker.restore(t,...e),this.chart.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart.waitForUpdate()}};Cu.chartInstances=new WeakMap,s([Kn({oldValue(t){t.destroyed||(t.publicApi=void 0),Cu.chartInstances.delete(t)},newValue(t){t&&(t.publicApi=this,Cu.chartInstances.set(t,this))}})],Cu.prototype,"chart",2);var Tu=Cu,Eu=class extends Xo{constructor(t){super(),this.ctx=t,this.localeText=void 0}};s([$n((t=>{t.ctx.localeManager.setLocaleText(t.localeText)})),Ti(Pi,{optional:!0})],Eu.prototype,"localeText",2),s([$n((t=>{t.ctx.localeManager.setLocaleTextFormatter(t.getLocaleText)})),Ti(Bi,{optional:!0})],Eu.prototype,"getLocaleText",2);var Ou={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Eu(t)},Ru=class extends Ai{getIndex(t){return super.getIndex(t)??this.getMatchIndex(t)}getMatchIndex(t){const e=JSON.stringify(t),i=this._domain.find((t=>JSON.stringify(t)===e));if(null!=i)return super.getIndex(i)}},ju=new WeakMap;function Pu(t,e){var i,s,n;const a=JSON.stringify(t,null,0);return ju.has(e)||ju.set(e,new Map),(null==(i=ju.get(e))?void 0:i.has(a))||null==(s=ju.get(e))||s.set(a,e(t)),null==(n=ju.get(e))?void 0:n.get(a)}function zu(t){const e=new Map,i={},s=new WeakMap;return(...n)=>{const a=0===n.length?[i]:((...t)=>t.map((t=>"object"==typeof t||"symbol"==typeof t?t:(e.has(t)||e.set(t,{v:t}),e.get(t)))))(...n);let o=s;for(const t of a.slice(0,-1))o.has(t)||o.set(t,new WeakMap),o=o.get(t);const r=a.at(-1);let l=o.get(r);return l||(l=t(...n),o.set(r,l)),l}}function Bu(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function Fu(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:t=>Bu(t)}}function Gu(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:t=>Bu(t),groupAggregateFunction:(t,e=[0,0])=>(e[0]+=(null==t?void 0:t[0])??0,e[1]+=(null==t?void 0:t[1])??0,e),round:!0}}function Uu(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>(e[0]+=(null==t?void 0:t[0])??0,e[1]+=(null==t?void 0:t[1])??0,e)}}function Yu(t,e){return{id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:t=>Bu(t),groupAggregateFunction:(t,e=[0,0,-1])=>(e[0]+=(null==t?void 0:t[0])??0,e[1]+=(null==t?void 0:t[1])??0,e[2]++,e),finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]},round:!0}}function Wu(t,e,i){const s={id:t,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(t,i=[])=>{const s=i[1]-i[0];return e.aggregateFunction(t).map((t=>t/s))},round:!0};return e.groupAggregateFunction&&(s.groupAggregateFunction=e.groupAggregateFunction),s}function Vu(t){return()=>{let e=0;return i=>P(i)?(e+=t?Math.max(0,i):i,e):i}}function _u(){return()=>{let t=0;return e=>{if(!P(e))return e;const i=t;return t+=e,i}}}function Hu(t){return null!=t&&Ha(t)}function Zu(t){return null!=t}function Ku(t){switch(t){case"number":case"log":case"ordinal-time":case"time":case"color":return Hu;default:return Zu}}function $u(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Xu(t,e,i={}){return{property:t,type:"key",valueType:$u(e),validation:Ku(e),...i}}function Qu(t,e,i={}){return{property:t,type:"value",valueType:$u(e),validation:Ku(e),...i}}function qu(t,e={}){return{property:t,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...e}}function Ju(t,e={}){const{min:i=-1/0,max:s=1/0,...n}=e;return{type:"value",property:t,valueType:"range",validation:Hu,processor:()=>t=>P(t)?bt(i,t,s):t,...n}}function tp(t,e,i={}){const{onlyPositive:s,...n}=i;return{...Qu(t,e,n),processor:Vu(s)}}function ep(t,e,i={}){return{...Qu(t,e,i),processor:_u()}}function ip(t,e,i,s,n){return[Qu(t,n,s),mp(s.groupId,e,i,s.separateNegative),...null!=s.rangeId?[(a=s.rangeId,o=s.groupId,{id:a,matchGroupIds:[o],type:"aggregate",aggregateFunction:t=>ah.extendDomain(t)})]:[]];var a,o}function sp(t,e,i){return[Qu(t,e,i),fp(i.groupId)]}var np={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const s="number"==typeof i[0]?i[0]:Number(i[0]),n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n<e?n:e}}},ap={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let t=NaN;return(e=-1/0,i)=>{const s="number"==typeof i[0]?i[0]:Number(i[0]),n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n>e?n:e}}},op={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>null==t?void 0:t.slice().sort(((t,e)=>{for(let i=0;i<t.length;i++){const s=t[i]-e[i];if(0!==s)return s}return 0}))};function rp({normaliseTo:t}){const e=(e,i)=>{if(0===i)return null;const s=(e??0)*t/i;return s>=0?Math.min(t,s):Math.max(-t,s)};return()=>()=>(t,i,s)=>{const n=function(t,e,i){const s=[0,0];for(const n of e){const e=t[n];for(const t of i.datumIndices[n]){const i=e[t];if(null==i)continue;const n="number"==typeof i?i:Math.max(...i.map((t=>t??0))),a=n<0?0:1;s[a]=0===a?Math.min(s[a],n):Math.max(s[a],n)}}return Math.max(Math.abs(s[0]),s[1])}(t,i,s);for(const a of i)for(const i of s.datumIndices[a]){const s=t[a],o=s[i];null!=o?s[i]="number"==typeof o?e(o,n):o.map((t=>e(t,n))):s[i]=void 0}}}function lp(t,e){return{type:"group-value-processor",matchGroupIds:t,adjust:Pu({normaliseTo:e},rp)}}function cp({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:s}){const n=t[1]-t[0],a=(i,s,a)=>{const o=t[0]+(i-s)/a*n;return 0===a?e:o>=t[1]?t[1]:o<t[0]?t[0]:o};return()=>(e,n)=>{let[o,r]=e.domain.values[n];null!=i&&(o=i),null!=s&&(r=s);const l=r-o;e.domain.values[n]=[t[0],t[1]];const c=e.columns[n];for(let t=0;t<c.length;t+=1)c[t]=a(c[t],o,l)}}function hp(t,e,i,s,n){return{type:"property-value-processor",property:t,adjust:Pu({normaliseTo:e,rangeMin:s,rangeMax:n,zeroDomain:i},cp)}}var dp=(t,e,i,s)=>{var n,a;let o=3;if("category"===e.valueType)return i.length!==t&&(o&=-2),o;let r=null==(n=s[0])?void 0:n.valueOf();for(let l=1;0!==o&&l<s.length;l++){const t=null==(a=s[l])?void 0:a.valueOf();(!Number.isFinite(t)||r>t)&&(o&=-3),Number.isFinite(t)&&r===t&&(o&=-2),r=t}return o};function up(t){return{type:"processor",property:"animationValidation",calculate(e){const{keys:i,values:s}=e.defs,{input:{count:n},domain:{keys:a,values:o},keys:r,columns:l}=e;let c=3;if(0!==n){for(let t=0;0!==c&&t<i.length;t++)for(const e of i[t].scopes)c&=dp(n,i[t],a[t],r[t].get(e));for(let e=0;0!==c&&e<s.length;e++){const i=s[e];(null==t?void 0:t.includes(i.id))&&(c&=dp(n,i,o[e],l[e]))}}return{uniqueKeys:!!(1&c),orderedKeys:!!(2&c)}}}}function pp({mode:t,separateNegative:e}){return()=>()=>(i,s,n)=>{const a=[0,0];for(const o of s)for(const s of n.datumIndices[o]??[]){const n=i[o],r=n[s],l=Lt(r)&&e?0:1;P(r)&&("normal"===t&&(a[l]+=r),n[s]=a[l],"trailing"===t&&(a[l]+=r))}}}function gp({mode:t,sum:e}){return()=>{const i=[];let s=!0;return()=>(n,a,o)=>{let r=0;for(const l of a){const a=n[l];for(const n of o.datumIndices[l]??[]){const o=a[n],c=s&&"current"===e?0:i[l];i[l]=o;const h="current"===e?o:c;P(o)&&P(c)?("normal"===t&&(r+=h),a[n]=r,"trailing"===t&&(r+=h)):a[n]=r}}s=!1}}}function mp(t,e,i,s=!1){let n;if(e.startsWith("window")){n=Pu({mode:e.endsWith("-trailing")?"trailing":"normal",sum:i},gp)}else n=Pu({mode:e,separateNegative:s},pp);return{type:"group-value-processor",matchGroupIds:[t],adjust:n}}function yp(){return()=>(t,e,i)=>{const s=new Float64Array(e.length);let n=0;for(const a of e){const e=t[a];for(const t of i.datumIndices[a]??[]){const i=e[t];s[n]=Number.isFinite(i)?i:NaN,n+=1,e[t]=s.subarray(0,n)}}}}function fp(t){return{type:"group-value-processor",matchGroupIds:[t],adjust:yp}}function xp(t){return t.id??t.property}function vp(t,e,i,s,n){for(const{previousIndex:a,nextIndex:o}of i){const i=t[a],r=e[o];if(i[s]!==r[n])return!1}return!0}function bp(t,e,i=!0){return{type:"processor",property:"diff",calculate(s,n){const a=new Map,o=new Map,r=new Map,l=new Map,c=e.keys,h=s.keys,d=e.columns,u=s.columns,p=function(t,e,i){var s,n;const a=new Map,o=e.defs.values;for(let c=0;c<o.length;c+=1){const e=o[c];if(!1===(null==(s=e.scopes)?void 0:s.includes(t)))continue;const i=xp(e);if(a.has(i))return;a.set(i,c)}const r=[],l=i.defs.values;for(let c=0;c<l.length;c+=1){const e=l[c];if(!1===(null==(n=e.scopes)?void 0:n.includes(t)))continue;const i=xp(e),s=a.get(i);if(null==s)return;a.delete(i),r.push({previousIndex:s,nextIndex:c})}if(0===a.size)return r}(t,e,s);if(null==p)return n;const g=Math.max(e.input.count,s.input.count);for(let y=0;y<g;y++){const n=y<e.input.count,g=y<s.input.count,m=n?gh(c,t,y):void 0,f=null!=m?Mp(m):"",x=g?gh(h,t,y):void 0,v=null!=x?Mp(x):"";if(g&&n&&f===v){vp(d,u,p,y,y)||r.set(v,y);continue}const b=l.get(v);null!=b?(!i&&vp(d,u,p,b,y)||(r.set(v,y),a.set(v,y)),l.delete(v)):g&&o.set(v,y);const M=o.get(f);null!=M?(!i&&vp(d,u,p,M,y)||(r.set(f,y),a.set(f,y)),o.delete(f)):n&&(r.delete(f),l.set(f,y))}const m={changed:o.size>0||r.size>0||l.size>0,added:new Set(o.keys()),updated:new Set(r.keys()),removed:new Set(l.keys()),moved:new Set(a.keys())};return{...n,[t]:m}}}}function Mp(t,...e){let i;i=N(t)?t.map((t=>Ka(t))).join("___"):Ka(t);return("string"==typeof i||"number"==typeof i||"boolean"==typeof i||i instanceof Date)&&e.length>0&&(i+=`___${e.join("___")}`),i}var Sp=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){t>this.right&&(this.right=t),t<this.left&&(this.left=t),e>this.bottom&&(this.bottom=e),e<this.top&&(this.top=e)}},Ip=class t{constructor(t="",e,i){this.label=t,this.parent=e,this.refId=i,this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screenX=0,this.depth=e?e.depth+1:0}insertTick(e,i){let s=this;for(let n=0;n<e.length;n++){const a=e[n],o=n!==e.length-1,{children:r}=s,l=r.find((t=>t.label===a));if(l&&o)s=l;else{const e=new t(a,s,i);e.index=r.length,r.push(e),o&&(s=e)}}}getLeftSibling(){var t;return this.index>0?null==(t=this.parent)?void 0:t.children[this.index-1]:void 0}getLeftmostSibling(){var t;return this.index>0?null==(t=this.parent)?void 0:t.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){var t;return(null==(t=this.parent)?void 0:t.children.filter(((t,e)=>e!==this.index)))??[]}};function Dp(t,e,i){const s=i/(e.index-t.index);e.change-=s,e.shift+=i,t.change+=s,e.prelim+=i,e.mod+=i}function Ap(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function Lp(t,e){const i=t.getLeftSibling();if(i){let s=t,n=t,a=i,o=n.getLeftmostSibling(),r=n.mod,l=s.mod,c=a.mod,h=o.mod;for(;a.nextRight()&&n.nextLeft();){a=a.nextRight(),n=n.nextLeft(),o=o.nextLeft(),s=s.nextRight(),s.ancestor=t;const i=a.prelim+c-(n.prelim+r)+1;i>0&&(Dp(Ap(a,t,e),t,i),r+=i,l+=i),c+=a.mod,r+=n.mod,h+=o.mod,l+=s.mod}a.nextRight()&&!s.nextRight()?s.mod+=c-l:(n.nextLeft()&&!o.nextLeft()&&(o.mod+=r-h),e=t)}return e}function Np(t){const{children:e}=t;if(e.length){let[i]=e;for(const t of e)Np(t),i=Lp(t,i);!function({children:t}){let e=0,i=0;for(let s=t.length-1;s>=0;s--){const n=t[s];n.prelim+=e,n.mod+=e,i+=n.change,e+=n.shift+i}}(t);const s=(e[0].prelim+e.at(-1).prelim)/2,n=t.getLeftSibling();n?(t.prelim=n.prelim+1,t.mod=t.prelim-s):t.prelim=s}else{const e=t.getLeftSibling();t.prelim=e?e.prelim+1:0}}function kp(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.insertNode(t);for(const s of t.children)kp(s,e+t.mod,i)}function wp(t){const{children:e}=t;let i=0;for(const s of e)wp(s),s.children.length?i+=s.leafCount:i++;t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[e.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function Cp(t){const e=new Tp,i=function(t){const e=t.reduce(((t,e)=>t<e.length?e.length:t),0),i=new Ip;for(let s=0;s<t.length;s++){const n=t[s];for(;n.length<e;)n.push("");i.insertTick(n,s)}return i}(t);return Np(i),kp(i,-i.prelim,e),wp(i),e}var Tp=class{constructor(){this.dimensions=new Sp,this.nodes=[],this.depth=0}insertNode(t){this.depth<t.depth&&(this.depth=t.depth),this.dimensions.update(t.x,t.y),this.nodes.push(t)}scalingX(t,e){let i=1;if(t>0){const{left:e,right:s}=this.dimensions;i=t/(s-e)}return e&&(i*=-1),i}},Ep=class extends ki{constructor(){super(...arguments),this.enabled=!0}};s([Ti(zi)],Ep.prototype,"enabled",2),s([Ti(zi,{optional:!0})],Ep.prototype,"avoidCollisions",2),s([Ti(ts,{optional:!0})],Ep.prototype,"color",2),s([Ti(Wi,{optional:!0})],Ep.prototype,"spacing",2),s([Ti(ps,{optional:!0})],Ep.prototype,"fontStyle",2),s([Ti(gs,{optional:!0})],Ep.prototype,"fontWeight",2),s([Ti(Gi.restrict({min:1}),{optional:!0})],Ep.prototype,"fontSize",2),s([Ti(Fi,{optional:!0})],Ep.prototype,"fontFamily",2);var Op=class extends ki{constructor(){super(...arguments),this.enabled=!0}};s([Ti(zi)],Op.prototype,"enabled",2),s([Ti(Wi,{optional:!0})],Op.prototype,"width",2),s([Ti(ts,{optional:!0})],Op.prototype,"stroke",2);var Rp=class extends ki{constructor(){super(...arguments),this.label=new Ep,this.tick=new Op}};s([Ti(ji)],Rp.prototype,"label",2),s([Ti(ji)],Rp.prototype,"tick",2);var jp=class extends $o{constructor(t){super(t,new Ru),this.tickScale=new Ru,this.depthOptions=new wi(Rp),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:t}=this.tickTreeLayout,{range:e,step:i,inset:s,bandwidth:n}=this.scale,a=Math.abs(e[1]-e[0])-i,o=this.tickTreeLayout.scalingX(a,e[0]>e[1]),r=s+n/2;let l=0;for(const c of t){const t=c.x*o;l>t&&(l=t),c.screenX=t+r}for(const c of t)c.screenX-=l}getDepthOptionsMap(t){var e,i,s,n;const a=[],{depthOptions:o,label:r}=this;for(let l=0;l<t;l++)a.push((null==(e=o[l])?void 0:e.label.enabled)??r.enabled?{enabled:!0,spacing:(null==(i=o[l])?void 0:i.label.spacing)??r.spacing,lineHeight:Tn.getLineHeight((null==(s=o[l])?void 0:s.label.fontSize)??r.fontSize??10),avoidCollisions:(null==(n=o[l])?void 0:n.label.avoidCollisions)??r.avoidCollisions}:{enabled:!1,spacing:0,lineHeight:0,avoidCollisions:!1});return a}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each(((t,e)=>t.setProperties(e)))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){var t;if(this.updateDirection(),this.updateScale(),this.resizeTickTree(),!(null==(t=this.tickTreeLayout)?void 0:t.depth))return{bbox:Et.zero,separatorLayout:[],tickLabelLayout:[]};const{step:e}=this.scale,{title:i,label:s,range:n,depthOptions:a}=this,{depth:o,nodes:r}=this.tickTreeLayout,l=Math.ceil(s.fontSize/e),c=Ks(this.rotation),h="top"===this.position||"bottom"===this.position,d=s.getSideFlag(),u=[],p=new Map,g=new Pn,{defaultRotation:m,configuredRotation:y}=Va({rotation:s.rotation,parallel:s.parallel,regularFlipRotation:Vs(c-Math.PI/2),parallelFlipRotation:Vs(c)}),f=m+y,x=this.getDepthOptionsMap(o),v=(t,e)=>{var i,r;const c=o-t.depth;if(!(null==(i=x[c])?void 0:i.enabled)||e%l!=0||!Dt(t.screenX,n))return!1;const h=this.formatTick(t.label,e-1),d=this.getLabelStyles({value:h,depth:c},null==(r=a[c])?void 0:r.label);return g.setProperties({...d,text:h,textAlign:"center",textBaseline:s.parallel?"hanging":"bottom",rotation:0,translationX:0,translationY:t.screenX}),!0};let b=0;const M={};r.forEach(((t,e)=>{const i=o-t.depth,s=function(t){let e=1;for(let i=0;i<t.length;i++)10===t.charCodeAt(i)&&e++;return e}(t.label);M[i]??(M[i]=1),M[i]<s&&(M[i]=s);if(v(t,e)&&g.getBBox()&&(p.set(e,g.getBBox()),!t.leafCount)){g.rotation=f;const{width:t}=g.getBBox();b<t&&(b=t)}}));const S=Wo(),D=d*x[0].spacing,A=new Map;r.forEach(((t,i)=>{var n;if(0===i)return;const a=v(t,i),r=!t.children.length,l=o-t.depth;if(t.parent){const e=r?t.x:t.x-(t.leafCount-1)/2;if(!A.has(e)){const t=null==(n=this.depthOptions[l])?void 0:n.tick;let i=b;for(let e=0;e<=l;e++)i+=x[e].spacing,0!==e&&(i+=M[e]*x[e].lineHeight);A.set(e,{tickSize:i,tickStroke:null==t?void 0:t.stroke,tickWidth:!1!==(null==t?void 0:t.enabled)?null==t?void 0:t.width:0})}}if(!a)return;if(g.x=D,g.y=0,r){const{width:t}=p.get(i),e=Qs(f);g.rotation=f,g.textAlign="end",g.textBaseline="middle",g.rotationCenterX=D-t/2,g.translationX=(x[l].spacing-t)/2*e*d,s.mirrored&&(g.translationX+=t)}else g.rotation=h?m:-Math.PI/2,g.rotationCenterX=D,g.translationX=d*(t=>{let e=b;for(let i=1;i<=t;i++)e+=x[i].spacing,(s.mirrored||i!==t)&&(e+=M[i]*x[i].lineHeight);return e})(l);if(x[l].avoidCollisions){const s=r?e:t.leafCount*e;if(g.getBBox().height>s)return void p.delete(i)}const{text:c=""}=g;u.push({text:c,visible:!0,range:this.scale.range,tickId:S(c),fill:g.fill,fontFamily:g.fontFamily,fontSize:g.fontSize,fontStyle:g.fontStyle,fontWeight:g.fontWeight,rotation:g.rotation,rotationCenterX:g.rotationCenterX,textAlign:g.textAlign,textBaseline:g.textBaseline,translationX:g.translationX,translationY:g.translationY,x:g.x,y:g.y}),p.set(i,vn.toCanvas(g))}));const{enabled:L,stroke:N,width:k}=this.line;this.lineNode.datum={x:0,y1:n[0],y2:n[1]},this.lineNode.setProperties({stroke:N,strokeWidth:L?k:0});const w=[...A.values()];w.push(w[0]);const C=[this.lineNode.getBBox(),new Et(0,0,w[0].tickSize*d,0)];i.enabled&&(this.updateTitle(!1,w[0].tickSize),C.push(i.caption.node.getBBox()));const T=Et.merge(I(p.values(),C));return{bbox:this.getTransformBox(T),separatorLayout:w,tickLabelLayout:u}}update(){if(!this.computedLayout)return;const{tickScale:t,gridLine:e,gridLength:i}=this,{separatorLayout:s}=this.computedLayout,n=t.ticks({nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}).map(((e,i)=>({...s[i],tick:e,tickId:Mp(e,i),tickLabel:e.filter(Boolean).join(" - "),translationY:Math.round(t.convert(e))})));this.gridLineGroupSelection.update(e.enabled&&i?n:[]),this.tickLineGroupSelection.update(this.tick.enabled?n:[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(),this.resetSelectionNodes()}calculateLayout(){const{separatorLayout:t,tickLabelLayout:e,bbox:i}=this.computeLayout();return this.computedLayout={separatorLayout:t,tickLabelLayout:e},{bbox:i,primaryTickCount:void 0,niceDomain:this.scale.domain}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){const{direction:t}=this,e=this.boundSeries.filter((t=>t.visible)).flatMap((e=>e.getDomain(t)));this.dataDomain={domain:lu(e)??this.filterDuplicateArrays(e),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();const i=this.dataDomain.domain.map((t=>y(E(t)&&"value"in t?t.value:t)));this.tickTreeLayout=Cp(i);const s=[];for(const n of this.tickTreeLayout.nodes)n.leafCount||null==n.refId||s.push(this.dataDomain.domain[n.refId]);return this.scale.domain=function(t,e){const i=new Map;return e.forEach(((t,e)=>{i.set(t,e)})),t.sort(((t,e)=>(i.get(t)??1/0)-(i.get(e)??1/0)))}(this.dataDomain.domain,s),this.tickScale.domain=i.concat([[""]]),{animatable:!0}}updateGridLines(){if(!this.gridLength)return;const{width:t,style:e}=this.gridLine,i=this.gridLength*-this.label.getSideFlag();this.gridLineGroupSelection.each(((s,n,a)=>{const{stroke:o,lineDash:r}=e[a%e.length],l=n.translationY;s.visible=this.inRange(l),s.x1=0,s.x2=i,s.y=l,s.stroke=o,s.strokeWidth=t,s.lineDash=r}))}filterDuplicateArrays(t){const e=new Set;return t.filter((t=>{const i=N(t)?JSON.stringify(t):t;return!e.has(i)&&(e.add(i),!0)}))}};jp.className="GroupedCategoryAxis",jp.type="grouped-category",s([Ti(rs)],jp.prototype,"depthOptions",2);var Pp=Ls((t=>j(t)&&0!==t),"a non-zero number"),zp=class extends hu{constructor(t){super(t,new iu),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:a}=cu(t,e,i);return s[0]<0&&s[1]>0||t[0]<0&&t[1]>0?(n.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:a}):0===s[0]||0===s[1]||0===t[0]||0===t[1]?(n.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:a}):{domain:s,clipped:a}}set base(t){this.scale.base=t}get base(){return this.scale.base}defaultDatumFormatter(t,e){return String(t)}defaultLabelFormatter(t,e){return String(t)}};zp.className="LogAxis",zp.type="log",s([Ti(Oi(_i,Pp,$i("max"))),xo(NaN)],zp.prototype,"min",2),s([Ti(Oi(_i,Pp,Xi("min"))),xo(NaN)],zp.prototype,"max",2);var Bp=(t,{x0:e,y0:i,x1:s,y1:n,cx:a,cy:o},r,l)=>{if(l&&t.moveTo(e,i),e!==s||i!==n){const l=Math.atan2(i-o,e-a),c=Math.atan2(n-o,s-a);t.arc(a,o,r,l,c)}else t.lineTo(e,i)},Fp=1e-6,Gp=(t,e,i,s,n)=>{let a=!1,o=!1,r=s-Math.sqrt(Math.max(n**2-i**2,0)),l=0,c=0,h=i-Math.sqrt(Math.max(n**2-s**2,0));return r>t?(a=!0,r=t,l=i-Math.sqrt(Math.max(n**2-(s-t)**2))):r<Fp&&(r=0),h>e?(o=!0,c=s-Math.sqrt(Math.max(n**2-(i-e)**2)),h=e):h<Fp&&(h=0),{leading0:r,leading1:l,trailing0:c,trailing1:h,leadingClipped:a,trailingClipped:o}},Up=(t,e,i,s,n,a,o)=>{let{topLeft:r,topRight:l,bottomRight:c,bottomLeft:h}=a;const d=Math.max(r+h,l+c),u=Math.max(r+l,h+c);if(d<=0&&u<=0)return void(null==o?t.rect(e,i,s,n):t.rect(o.x,o.y,o.width,o.height));if(null==o&&r===l&&r===c&&r===h)return void t.roundRect(e,i,s,n,r);if(s<0&&(e+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),s<=0||n<=0)return;if(null==o)o=new Et(e,i,s,n);else{const t=Math.max(e,o.x),a=Math.min(e+s,o.x+o.width),r=Math.max(i,o.y),l=Math.min(i+n,o.y+o.height);o=new Et(t,r,a-t,l-r)}const p=Math.max(d/n,u/s,1);p>1&&(r/=p,l/=p,c/=p,h/=p);let g,m,y,f,x=!0,v=!0,b=!0,M=!0;if(x){const t=Gp(o.height,o.width,Math.max(e+r-o.x,0),Math.max(i+r-o.y,0),r);t.leadingClipped&&(M=!1),t.trailingClipped&&(v=!1);g={x0:Math.max(o.x+t.leading1,o.x),y0:Math.max(o.y+t.leading0,o.y),x1:Math.max(o.x+t.trailing1,o.x),y1:Math.max(o.y+t.trailing0,o.y),cx:e+r,cy:i+r}}if(v){const t=Gp(o.width,o.height,Math.max(i+l-o.y,0),Math.max(o.x+o.width-(e+s-l),0),l);t.leadingClipped&&(x=!1),t.trailingClipped&&(b=!1);m={x0:Math.min(o.x+o.width-t.leading0,o.x+o.width),y0:Math.max(o.y+t.leading1,o.y),x1:Math.min(o.x+o.width-t.trailing0,o.x+o.width),y1:Math.max(o.y+t.trailing1,o.y),cx:e+s-l,cy:i+l}}if(b){const t=Gp(o.height,o.width,Math.max(o.x+o.width-(e+s-c),0),Math.max(o.y+o.height-(i+n-c),0),c);t.leadingClipped&&(v=!1),t.trailingClipped&&(M=!1);y={x0:Math.min(o.x+o.width-t.leading1,o.x+o.width),y0:Math.min(o.y+o.height-t.leading0,o.y+o.height),x1:Math.min(o.x+o.width-t.trailing1,o.x+o.width),y1:Math.min(o.y+o.height-t.trailing0,o.y+o.height),cx:e+s-c,cy:i+n-c}}if(M){const t=Gp(o.width,o.height,Math.max(o.y+o.height-(i+n-h),0),Math.max(e+h-o.x,0),h);t.leadingClipped&&(b=!1),t.trailingClipped&&(x=!1);f={x0:Math.max(o.x+t.leading0,o.x),y0:Math.min(o.y+o.height-t.leading1,o.y+o.height),x1:Math.max(o.x+t.trailing0,o.x),y1:Math.min(o.y+o.height-t.trailing1,o.y+o.height),cx:e+h,cy:i+n-h}}let S=!1;x&&null!=g&&(Bp(t,g,r,!S),S||(S=!0)),v&&null!=m&&(Bp(t,m,l,!S),S||(S=!0)),b&&null!=y&&(Bp(t,y,c,!S),S||(S=!0)),M&&null!=f&&Bp(t,f,h,!S),t.closePath()},Yp=class extends pd{constructor(){super(...arguments),this.borderPath=new dd,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=ln.defaultStyles.strokeWidth,this.effectiveStrokeWidth=ln.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||Boolean(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var t;const{path:e,borderPath:i,crisp:s,topLeftCornerRadius:n,topRightCornerRadius:a,bottomRightCornerRadius:o,bottomLeftCornerRadius:r}=this;let{x:l,y:c,width:h,height:d,strokeWidth:u,clipBBox:p}=this;const g=1/((null==(t=this.layerManager)?void 0:t.canvas.pixelRatio)??1);let m=1;if(e.clear(!0),i.clear(!0),s&&(h<=g&&(m*=h/g),d<=g&&(m*=d/g),h=this.align(l,h),d=this.align(c,d),l=this.align(l),c=this.align(c),p=null!=p?new Et(this.align(p.x),this.align(p.y),this.align(p.x,p.width),this.align(p.y,p.height)):void 0),u)if(h<g){const t=l+g/2;i.moveTo(t,c),i.lineTo(t,c+d),u=g,this.borderClipPath=void 0}else if(d<g){const t=c+g/2;i.moveTo(l,t),i.lineTo(l+h,t),u=g,this.borderClipPath=void 0}else if(u<h&&u<d){const t=u/2;l+=t,c+=t,h-=u,d-=u;const s=null==p?void 0:p.clone().shrink(t),g={topLeft:n>0?n-u:0,topRight:a>0?a-u:0,bottomRight:o>0?o-u:0,bottomLeft:r>0?r-u:0};this.borderClipPath=void 0,h>0&&d>0&&(null==s||(null==s?void 0:s.width)>0&&(null==s?void 0:s.height)>0)&&(Up(e,l,c,h,d,g,s),Up(i,l,c,h,d,g,s))}else this.borderClipPath=this.borderClipPath??new dd,this.borderClipPath.clear(!0),this.borderClipPath.rect(l,c,h,d),i.rect(l,c,h,d);else{const t={topLeft:n,topRight:a,bottomRight:o,bottomLeft:r};this.borderClipPath=void 0,Up(e,l,c,h,d,t,p)}if([n,a,o,r].every((t=>0===t))){const t=this.getBBox();this.hittester=t.containsPoint.bind(t),this.distanceSquared=(t,e)=>this.getBBox().distanceSquared(t,e)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=u,this.lastUpdatePathStrokeWidth=u,this.microPixelEffectOpacity=m}computeBBox(){const{x:t,y:e,width:i,height:s,clipBBox:n}=this;return(null==n?void 0:n.clone())??new Et(t,e,i,s)}isPointInPath(t,e){return this.hittester(t,e)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,e){return this.distanceCalculator(t,e)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:s}=this;t.globalAlpha*=s*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i}=this;if(e&&i){const{globalAlpha:e}=t,{strokeOpacity:s,lineDash:n,lineDashOffset:a,lineCap:o,lineJoin:r,borderPath:l,borderClipPath:c,opacity:h,microPixelEffectOpacity:d}=this;c&&t.clip(c.getPath2D()),this.applyStroke(t),t.globalAlpha*=h*s*d,t.lineWidth=i,n&&t.setLineDash(n),a&&(t.lineDashOffset=a),o&&(t.lineCap=o),r&&(t.lineJoin=r),t.stroke(l.getPath2D()),t.globalAlpha=e}}};Yp.className="Rect",s([ud()],Yp.prototype,"x",2),s([ud()],Yp.prototype,"y",2),s([ud()],Yp.prototype,"width",2),s([ud()],Yp.prototype,"height",2),s([ud()],Yp.prototype,"topLeftCornerRadius",2),s([ud()],Yp.prototype,"topRightCornerRadius",2),s([ud()],Yp.prototype,"bottomRightCornerRadius",2),s([ud()],Yp.prototype,"bottomLeftCornerRadius",2),s([ud()],Yp.prototype,"clipBBox",2),s([ud()],Yp.prototype,"crisp",2);var Wp=class extends Xo{constructor(t){super(),this.ctx=t,this.rectNode=new Yp,this.textNode=new Rn,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(t.scene.attachNode(this.node),t.layoutManager.addListener("layout:complete",(t=>this.onLayoutComplete(t))))}createNode(){return new In({name:"background",zIndex:0})}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}};s([Ti(zi),Zn("node","visible")],Wp.prototype,"visible",2),s([Ti(ts,{optional:!0}),Zn("rectNode","fill")],Wp.prototype,"fill",2),s([Ti(ji,{optional:!0})],Wp.prototype,"image",2),s([Ti(Fi,{optional:!0}),Zn("textNode")],Wp.prototype,"text",2);var Vp={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Wp(t)};function _p({orientation:t,bboxes:e,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:a=0,forceResult:o=!1}){const r="horizontal"===t,l={max:r?s:i,fn:r?t=>t.width:t=>t.height,padding:r?a:n},c={max:r?i:s,fn:r?t=>t.height:t=>t.width,padding:r?n:a};let h=0;const d=[];for(;h<e.length;){const t=Hp(e.slice(h),h,l,c,o);if(!t)return;h+=t.processedBBoxCount,d.push(t.pageIndices)}return function(t,e,i,s,n){let a=0,o=0;const r=t.map((t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach(((t,i)=>{t.forEach(((t,s)=>{e[s][i]=t}))})),e}(t));let r=0;const l=t.map((t=>{const e=t.map((t=>(r=Math.max(t,r),i[t])));let a=0,o=0;return e.forEach((t=>{a+=t.height+s,o=Math.max(o,t.width+n)})),{indices:t,bboxes:e,columnHeight:Math.ceil(a),columnWidth:Math.ceil(o)}}));let c=0,h=0;return l.forEach((t=>{c+=t.columnWidth,h=Math.max(h,t.columnHeight)})),a=Math.max(c,a),o=Math.max(h,o),{columns:l,startIndex:t[0][0],endIndex:r,pageWidth:c,pageHeight:h}}));return{pages:r,maxPageWidth:a,maxPageHeight:o}}(d,t,e,n,a)}function Hp(t,e,i,s,n){let a=function(t,e){const i=t.length;let s=0;for(let n=0;n<i;n++)if(s+=e.fn(t[n])+e.padding,s>e.max){return i/n<2?Math.ceil(i/2):n}return i}(t,i);if(a<1){if(!n)return;a=1}let o=a;for(;o>=1;){const a=Zp(t,e,o,i,s,n);if(null==a&&o<=1)return;if(null==a){o--;continue}if("number"==typeof a){if(a<=1)return;o=a<o&&a>1?a:o,o--;continue}return{processedBBoxCount:a.length*a[0].length,pageIndices:a}}}function Zp(t,e,i,s,n,a){const o=[];let r=0,l=0,c=[];const h=[];for(let d=0;d<t.length;d++){const u=(d+i)%i;0===u&&(r+=l,l=0,c.length>0&&o.push(c),c=[]);const p=s.fn(t[d])+s.padding;h[u]=Math.max(h[u]??0,p),l=Math.max(l,n.fn(t[d])+n.padding);const g=r+l,m=!a||o.length>0;if(g>n.max&&m){c=[];break}if(h.reduce(((t,e)=>t+e),0)>s.max&&!a)return h.length<i?h.length:void 0;c.push(d+e)}return c.length>0&&o.push(c),o.length>0?o:void 0}var Kp=class extends ki{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};s([Ti(ts)],Kp.prototype,"color",2),s([Ti(ps,{optional:!0})],Kp.prototype,"fontStyle",2),s([Ti(gs,{optional:!0})],Kp.prototype,"fontWeight",2),s([Ti(Wi)],Kp.prototype,"fontSize",2),s([Ti(Fi)],Kp.prototype,"fontFamily",2);var $p=class extends ki{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};s([Ti(Wi)],$p.prototype,"size",2),s([Ti(ts,{optional:!0})],$p.prototype,"fill",2),s([Ti(Vi,{optional:!0})],$p.prototype,"fillOpacity",2),s([Ti(ts,{optional:!0})],$p.prototype,"stroke",2),s([Ti(Wi)],$p.prototype,"strokeWidth",2),s([Ti(Vi)],$p.prototype,"strokeOpacity",2);var Xp=class extends ki{constructor(t){super(),this.parent=t,this.shape="triangle",this.size=15,this.padding=8}};s([Kn({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Xp.prototype,"shape",2),s([Ti(Wi)],Xp.prototype,"size",2),s([Ti(Wi)],Xp.prototype,"padding",2);var Qp=class extends ki{constructor(t,e){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.id=pt(this),this.marker=new Xp(this),this.activeStyle=new $p,this.inactiveStyle=new $p,this.highlightStyle=new $p,this.label=new Kp,this.group=new Ln({name:"pagination"}),this.labelNode=new Rn,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new Ad,this.previousButton=new Ad,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){if(this._orientation=t,"horizontal"===t)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.getBBox();this.nextButton.translationX=t.width+2*(this.marker.size/2+this.marker.padding)}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:n,fontWeight:a,fontSize:o,fontFamily:r}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=n,i.fontWeight=a,i.fontSize=o,i.fontFamily=r}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:a,highlightStyle:o,highlightActive:r}=this,l=(t,e)=>e?a:t===r?o:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){const{shape:i,size:s}=this.marker;t.shape=i,t.size=s,t.fill=e.fill,t.fillOpacity=e.fillOpacity??1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,s=t===e-1,n=0===t;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}setPage(t){t=bt(0,t,Math.max(0,this.totalPages-1)),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}getCursor(t){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[t]?void 0:"pointer"}onClick(t,e){t.preventDefault(),"next"!==e||this.nextButtonDisabled?"previous"!==e||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(t){this.highlightActive=t,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:vn.toCanvas(this.previousButton),next:vn.toCanvas(this.nextButton)}}};Qp.className="Pagination",s([Ti(ji)],Qp.prototype,"marker",2),s([Ti(ji)],Qp.prototype,"activeStyle",2),s([Ti(ji)],Qp.prototype,"inactiveStyle",2),s([Ti(ji)],Qp.prototype,"highlightStyle",2),s([Ti(ji)],Qp.prototype,"label",2);var qp=class extends ki{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(t){this._dirty=!1}isDirty(){return this._dirty}},Jp=new Set(["circle","cross","diamond","heart","pin","plus","square","star","triangle"]);var tg=Ls((t=>{return"string"==typeof(e=t)&&Jp.has(e)||"function"==typeof t;var e}),"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),eg=class extends qp{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{size:t,shape:e,fill:i,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:o,lineDash:r,lineDashOffset:l}=this;return{size:t,shape:e,fill:i,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:o,lineDash:r,lineDashOffset:l}}getDiameter(){return this.size+this.strokeWidth}};function ig(t,e,i){t.fill=(null==i?void 0:i.fill)??e.fill,t.fillOpacity=(null==i?void 0:i.fillOpacity)??e.fillOpacity??1,t.stroke=(null==i?void 0:i.stroke)??e.stroke,t.strokeOpacity=(null==i?void 0:i.strokeOpacity)??e.strokeOpacity??1,t.strokeWidth=(null==i?void 0:i.strokeWidth)??e.strokeWidth??0,t.lineDash=(null==i?void 0:i.lineDash)??e.lineDash,t.lineDashOffset=(null==i?void 0:i.lineDashOffset)??e.lineDashOffset??0}s([Ti(zi),Ot()],eg.prototype,"enabled",2),s([Ti(tg),Ot()],eg.prototype,"shape",2),s([Ti(Wi),Ot()],eg.prototype,"size",2),s([Ti(ts,{optional:!0}),Ot()],eg.prototype,"fill",2),s([Ti(Vi),Ot()],eg.prototype,"fillOpacity",2),s([Ti(ts,{optional:!0}),Ot()],eg.prototype,"stroke",2),s([Ti(Wi),Ot()],eg.prototype,"strokeWidth",2),s([Ti(Vi),Ot()],eg.prototype,"strokeOpacity",2),s([Ti(ds)],eg.prototype,"lineDash",2),s([Ti(Wi)],eg.prototype,"lineDashOffset",2),s([Ti(Bi,{optional:!0}),Ot()],eg.prototype,"itemStyler",2);var sg=class{constructor(t,e){this.idPrefix=e,this.dirty=!0,this.destroyFns=new sl,this.itemList=t.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${e}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=t.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${e}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=lt("p"),this.itemDescription.style.display="none",this.itemDescription.id=`${e}-ariaDescription`,this.itemDescription.textContent=this.getItemAriaDescription(t.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(t){if(!this.dirty)return;const{ctx:e,itemSelection:i,datumReader:s,itemListener:n}=t,a=e.localeManager,o=i.length;i.each(((t,i,r)=>{var l;null==(l=t.proxyButton)||l.destroy(),t.proxyButton=e.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(a,s.getItemLabel(i),r,o),ariaChecked:!!t.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const c=t.proxyButton;c.addListener("click",(e=>n.onClick(e.sourceEvent,t.datum,c))),c.addListener("dblclick",(e=>n.onDoubleClick(e.sourceEvent,t.datum))),c.addListener("mouseenter",(e=>n.onHover(e.sourceEvent,t))),c.addListener("mouseleave",(()=>n.onLeave())),c.addListener("contextmenu",(e=>n.onContextClick(e.sourceEvent,t))),c.addListener("blur",(()=>n.onLeave())),c.addListener("focus",(e=>n.onHover(e.sourceEvent,t))),c.addListener("drag-start",(()=>{}))})),this.dirty=!1}update(t){t.visible&&(this.initLegendList(t),this.updateItemProxyButtons(t),this.updatePaginationProxyButtons(t,!0)),this.updateVisibility(t.visible)}updateVisibility(t){this.itemList.setHidden(!t),this.paginationGroup.setHidden(!t)}updateItemProxyButtons({itemSelection:t,group:e,pagination:i,interactive:s}){const n=vn.toCanvas(e);this.itemList.setBounds(n);const a=Math.max(...t.nodes().map((t=>t.getBBox().height)));t.each(((t,e)=>{if(t.proxyButton){const e=t.pageIndex===i.currentPage,{x:o,y:r,height:l,width:c}=vn.toCanvas(t),h=(a-l)/2,d={x:o-n.x,y:r-h-n.y,height:a,width:c};t.proxyButton.setCursor("pointer"),t.proxyButton.setEnabled(s&&e),t.proxyButton.setBounds(d)}}))}updatePaginationProxyButtons(t,e){var i,s,n,a,o,r,l,c;const{pagination:h}=t;if(this.paginationGroup.setHidden(!h.visible),e&&"ctx"in t){const{ctx:e,oldPages:n,newPages:a}=t,o=((null==n?void 0:n.length)??a.length)>1,r=a.length>1;o!==r&&(r?(this.prevButton=e.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",(e=>this.onPageButton(t,e,"previous"))),this.prevButton.addListener("mouseenter",(()=>h.onMouseHover("previous"))),this.prevButton.addListener("mouseleave",(()=>h.onMouseHover(void 0))),this.nextButton??(this.nextButton=e.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",(e=>this.onPageButton(t,e,"next"))),this.nextButton.addListener("mouseenter",(()=>h.onMouseHover("next"))),this.nextButton.addListener("mouseleave",(()=>h.onMouseHover(void 0)))):(null==(i=this.nextButton)||i.destroy(),null==(s=this.prevButton)||s.destroy(),this.nextButton=void 0,this.prevButton=void 0))}const{prev:d,next:u}=h.computeCSSBounds();null==(n=this.prevButton)||n.setBounds(d),null==(a=this.nextButton)||a.setBounds(u),null==(o=this.prevButton)||o.setEnabled(0!==h.currentPage),null==(r=this.nextButton)||r.setEnabled(h.currentPage!==h.totalPages-1),null==(l=this.nextButton)||l.setCursor(h.getCursor("next")),null==(c=this.prevButton)||c.setCursor(h.getCursor("previous"))}onPageButton(t,e,i){t.pagination.onClick(e.sourceEvent,i),this.updatePaginationProxyButtons(t,!1)}onDataUpdate(t,e){this.dirty=t.length!==e.length||t.some(((i,s,n)=>{const[a,o]=[e[s],t[s]];return a.id!==o.id}))}onLocaleChanged(t,e,i){const s=e.length;e.each((({proxyButton:e},n,a)=>{const o=null==e?void 0:e.getElement();if(null!=o){const e=i.getItemLabel(n);o.textContent=this.getItemAriaText(t,e,a,s)}})),this.itemDescription.textContent=this.getItemAriaDescription(t)}onPageChange(t){this.updateItemProxyButtons(t),this.updatePaginationProxyButtons(t,!1)}getItemAriaText(t,e,i,s){return i>=0&&e?(i++,t.t("ariaLabelLegendItem",{label:e,index:i,count:s})):t.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(t){return t.t("ariaDescriptionLegendItem")}};function ng(t,e,i,s){const n={defaultPrevented:!1,apiEvent:{type:t,itemId:e,seriesId:i,event:s,preventDefault:()=>n.defaultPrevented=!0}};return n}var ag=class extends(fn(In)){constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new In({name:"legend-markerLabel-symbols"})),this.label=this.appendChild(new Rn),this.enabled=!0,this.pageIndex=NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new Ad({zIndex:1})),this.line=this.symbolsGroup.appendChild(new Pa({zIndex:0}));const{label:t,line:e,symbolsGroup:i}=this;e.visible=!1,i.renderToOffscreenCanvas=!0,i.optimizeForInfrequentRedraws=!0,t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=1}destroy(){var t;super.destroy(),null==(t=this.proxyButton)||t.destroy()}setEnabled(t){this.enabled=t,this.refreshVisibilities()}refreshVisibilities(){const t=this.enabled?1:.5;this.label.opacity=t,this.opacity=t}layout(){const{marker:t,line:e,length:i,isCustomMarker:s}=this;let n=0,a=0;if(t.visible){const{size:e}=t,o=Ad.anchor(t.shape);n=(o.x-.5)*e+i/2,a=(o.y-.5)*e,s?(t.x=0,t.y=0,t.translationX=n,t.translationY=a):(t.x=n,t.y=a,t.translationX=0,t.translationY=0)}e.visible&&(e.x1=0,e.x2=i,e.y1=0,e.y2=0)}preRender(t){const e=super.preRender(t);return this.layout(),e}layoutLabel(){const{length:t,spacing:e}=this;this.label.x=t+e}computeBBox(){return this.layout(),super.computeBBox()}};ag.className="MarkerLabel",s([Zn("label")],ag.prototype,"text",2),s([Zn("label")],ag.prototype,"fontStyle",2),s([Zn("label")],ag.prototype,"fontWeight",2),s([Zn("label")],ag.prototype,"fontSize",2),s([Zn("label")],ag.prototype,"fontFamily",2),s([Zn("label","fill")],ag.prototype,"color",2),s([$n((t=>t.layoutLabel()))],ag.prototype,"spacing",2),s([$n((t=>t.layoutLabel()))],ag.prototype,"length",2),s([Ot()],ag.prototype,"isCustomMarker",2);var og=class extends ki{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};s([Ti(Wi,{optional:!0})],og.prototype,"maxLength",2),s([Ti(ts)],og.prototype,"color",2),s([Ti(ps,{optional:!0})],og.prototype,"fontStyle",2),s([Ti(gs,{optional:!0})],og.prototype,"fontWeight",2),s([Ti(Wi)],og.prototype,"fontSize",2),s([Ti(Fi)],og.prototype,"fontFamily",2),s([Ti(Bi,{optional:!0})],og.prototype,"formatter",2);var rg=class extends ki{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};s([Ti(tg,{optional:!0})],rg.prototype,"shape",2),s([Ti(Wi)],rg.prototype,"size",2),s([Ti(Wi)],rg.prototype,"padding",2),s([Ti(Wi,{optional:!0})],rg.prototype,"strokeWidth",2),s([Ti(zi)],rg.prototype,"enabled",2);var lg=class extends ki{};s([Ti(Wi,{optional:!0})],lg.prototype,"strokeWidth",2),s([Ti(Wi,{optional:!0})],lg.prototype,"length",2);var cg=class extends ki{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new rg,this.label=new og,this.line=new lg}};s([Ti(Wi,{optional:!0})],cg.prototype,"maxWidth",2),s([Ti(Wi)],cg.prototype,"paddingX",2),s([Ti(Wi)],cg.prototype,"paddingY",2),s([Ti(zi)],cg.prototype,"showSeriesStroke",2),s([Ti(ji)],cg.prototype,"marker",2),s([Ti(ji)],cg.prototype,"label",2),s([Ti(ji)],cg.prototype,"line",2);var hg=class extends ki{};s([Ti(Bi,{optional:!0})],hg.prototype,"legendItemClick",2),s([Ti(Bi,{optional:!0})],hg.prototype,"legendItemDoubleClick",2);var dg="legend-visibility",ug="legend-other-series",pg=class extends ki{constructor(t){super(),this.ctx=t,this.id=pt(this),this.group=new Ln({name:"legend",zIndex:14}),this.itemSelection=Ea.select(this.group,ag),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new cg,this.listeners=new hg,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.pagination=new Qp((e=>t.updateService.update(e)),(t=>this.updatePageNumber(t))),this.pagination.attachPagination(this.group),this.destroyFns.push(t.contextMenuRegistry.registerDefaultAction({id:dg,type:"legend",label:"contextMenuToggleSeriesVisibility",action:t=>this.contextToggleVisibility(t)}),t.contextMenuRegistry.registerDefaultAction({id:ug,type:"legend",label:"contextMenuToggleOtherSeries",action:t=>this.contextToggleOtherSeries(t)}),t.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(t.layoutManager.registerElement(1,(t=>this.positionLegend(t))),t.localeManager.addListener("locale-changed",(()=>this.onLocaleChanged())),(()=>this.group.remove())),this.domProxy=new sg(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(t.legendManager)}set data(t){qt(t,this._data)||(this.domProxy.onDataUpdate(this._data,t),this._data=t,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:t=[]}){this.enabled&&(this.data=t.filter((t=>!t.hideInLegend)))}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach((t=>t())),this.itemSelection.clear(),this.domProxy.destroy()}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;if(i){const s=t.datum;return e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId,...s&&{datum:s}})}return t.label.text}calcLayout(t,e){const{paddingX:i,paddingY:s,label:n,maxWidth:a,label:{maxLength:o=1/0,fontStyle:r,fontWeight:l,fontSize:c,fontFamily:h}}=this.item,d=[...this.data];this.reverseOrder&&d.reverse(),this.itemSelection.update(d);const u=[],p=Tn.toFontString(n),g=a??.8*t,m=this.calculateMarkerWidth();if(this.itemSelection.each(((t,e)=>{t.fontStyle=r,t.fontWeight=l,t.fontSize=c,t.fontFamily=h;const i=this.updateMarkerLabel(t,e,m),s=e.itemId??e.id,n=(this.getItemLabel(e)??"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(n,o,g,i,p,s),u.push(t.getBBox())})),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return{};const y=this.size,f=this.oldSize;y[0]=t,y[1]=e,y[0]===f[0]&&y[1]===f[1]||(f[0]=y[0],f[1]=y[1]);const{pages:x,maxPageHeight:v,maxPageWidth:b}=this.updatePagination(u,t,e),M=this.pages;this.pages=x,this.maxPageSize=[b-i,v-s];const S=this.pagination.currentPage,I=this.pages[S];return this.pages.length<1||!I?(this.visible=!1,{oldPages:M}):(this.visible=!0,this.updatePositions(S),this.update(),{oldPages:M})}isCustomMarker(t,e){return t&&void 0!==e&&"string"!=typeof e}calcSymbolsEnabled(t){const{showSeriesStroke:e,marker:i}=this.item,s=!!i.enabled||!e||(t.marker.enabled??!0);return{markerEnabled:s,lineEnabled:!(!t.line||!e),isCustomMarker:this.isCustomMarker(s,t.marker.shape)}}calcSymbolsLengths(t){const{marker:e,line:i}=this.item,{markerEnabled:s,lineEnabled:n}=this.calcSymbolsEnabled(t),{strokeWidth:a}=this.getMarkerStyles(t),{strokeWidth:o}=n?this.getLineStyles(t):{strokeWidth:0};let r;const{shape:l}=t.marker;if(this.isCustomMarker(s,l)){const t=new Ad;t.shape=l,t.updatePath();const e=t.getBBox();r=Math.max(e.width,e.height)}return{markerLength:s?e.size:0,markerStrokeWidth:a,lineLength:n?i.length??25:0,lineStrokeWidth:o,customMarkerSize:r}}calculateMarkerWidth(){let t=0;return this.itemSelection.each(((e,i)=>{const{symbol:s}=i,{markerLength:n,lineLength:a,customMarkerSize:o=-1/0}=this.calcSymbolsLengths(s);t=Math.max(t,a,o,n)})),t}updateMarkerLabel(t,e,i){const{marker:s,paddingX:n}=this.item,{symbol:a}=e;let o=n;const{markerEnabled:r,lineEnabled:l,isCustomMarker:c}=this.calcSymbolsEnabled(a),h=s.padding;(r||l)&&(o+=h+i);const{marker:d,line:u}=t;return d.visible=r,d.visible&&(d.shape=s.shape??a.marker.shape??"square",d.size=s.size,ig(d,this.getMarkerStyles(a))),u.visible=l,u.visible&&ig(u,this.getLineStyles(a)),t.length=i,t.spacing=h,t.isCustomMarker=c,o}truncate(t,e,i,s,n,a){let o=!1;t.length>e&&(t=t.substring(0,e),o=!0);const r=wn.getMeasurer({font:n}),l=Xn.truncateLine(t,r,i-s,o);return l.endsWith(Tn.EllipsisChar)?this.truncatedItems.add(a):this.truncatedItems.delete(a),l}updatePagination(t,e,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:o,maxPageWidth:r,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),h=a.findIndex((t=>t.endIndex>=n));this.pagination.currentPage=bt(0,h,a.length-1);const{paddingX:d,paddingY:u}=this.item,p=r-d,g=o-u;let m=0,y=-l.y-this.item.marker.size/2;c?y+=g+8:(m+=-l.x+p+8,y+=(g-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers();let f=0;return this.itemSelection.each(((t,e,i)=>{var s;i>((null==(s=a[f])?void 0:s.endIndex)??1/0)&&f++,t.pageIndex=f})),{maxPageHeight:o,maxPageWidth:r,pages:a}}calculatePagination(t,e,i){const{paddingX:s,paddingY:a}=this.item,o=this.getOrientation(),r=["left","right"].includes(this.position);let l=this.pagination.getBBox(),c=new Et(0,0,0,0),h=[],d=0,u=0,p=0;const g=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{if(p++>10){n.warn("unable to find stable legend layout.");break}l=c;const m=e-(r?0:l.width),y=_p({orientation:o,bboxes:t,maxHeight:i-(r?l.height:0),maxWidth:m,itemPaddingY:a,itemPaddingX:s,forceResult:g});h=(null==y?void 0:y.pages)??[],d=(null==y?void 0:y.maxPageWidth)??0,u=(null==y?void 0:y.maxPageHeight)??0;const f=h.length;if(this.pagination.visible=f>1,this.pagination.totalPages=f,this.pagination.update(),this.pagination.updateMarkers(),c=this.pagination.getBBox(),!this.pagination.visible)break}while((m=c).width!==l.width||m.height!==l.height);var m;return{maxPageWidth:d,maxPageHeight:u,pages:h,paginationBBox:c,paginationVertical:r}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:n,startIndex:a,endIndex:o}=s[t];let r=0,l=0;const c=n.length,h=n[0].indices.length,d="horizontal"===this.getOrientation(),u=n[0].bboxes[0].height+e,p=[];i.each(((t,e,i)=>{if(i<a||i>o)return void(t.visible=!1);const s=i-a;let g,m;d?(g=s%c,m=Math.floor(s/c)):(g=Math.floor(s/h),m=s%h),t.visible=!0;const y=n[g];y&&(l=Math.floor(u*m),r=Math.floor(p[m]??0),p[m]=(p[m]??0)+y.columnWidth,t.translationX=r,t.translationY=l)}))}updatePageNumber(t){const{itemSelection:e,group:i,pagination:s,pages:n,toggleSeries:a}=this,{startIndex:o,endIndex:r}=n[t];0===o?this.paginationTrackingIndex=0:t===n.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((o+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.domProxy.onPageChange({itemSelection:e,group:i,pagination:s,interactive:a}),this.ctx.updateService.update(6)}update(){const{label:{color:t}}=this.item;this.itemSelection.each(((e,i)=>{e.setEnabled(i.enabled),e.color=t})),this.updateContextMenu()}updateContextMenu(){const{toggleSeries:t,ctx:{contextMenuRegistry:e}}=this;t?(e.hideAction(dg),e.hideAction(ug)):(e.showAction(dg),e.showAction(ug))}getLineStyles(t){const{stroke:e,strokeOpacity:i=1,strokeWidth:s,lineDash:n}=t.line??{},a=Math.min(2,s??1);return{stroke:e,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??a,lineDash:n}}getMarkerStyles(t){const{fill:e,stroke:i,strokeOpacity:s=1,fillOpacity:n=1,strokeWidth:a,lineDash:o,lineDashOffset:r}=t.marker,l=Math.min(2,a??1);return{fill:e,stroke:i,strokeOpacity:s,fillOpacity:n,strokeWidth:this.item.marker.strokeWidth??l,lineDash:o,lineDashOffset:r}}computePagedBBox(){const t=In.computeChildrenBBox(this.group.children());if(this.pages.length>1){const[e,i]=this.maxPageSize;t.height=Math.max(i,t.height),t.width=Math.max(e,t.width)}return t}findNode(t){const{datum:e,proxyButton:i}=this.itemSelection.select((e=>{var i;return(null==(i=e.datum)?void 0:i.itemId)===t.itemId}))[0]??{};if(void 0===e||void 0===i)throw new Error(`AG Charts - Missing required properties { datum: ${e}, proxyButton: ${JSON.stringify(i)} }`);return{datum:e,proxyButton:i}}contextToggleVisibility(t){const{datum:e,proxyButton:i}=this.findNode(t);this.doClick(t.event,e,i)}contextToggleOtherSeries(t){this.doDoubleClick(t.event,this.findNode(t).datum)}onContextClick(t,e){var i;const s=e.datum;this.preventHidingAll&&(null==(i=this.contextMenuDatum)?void 0:i.enabled)&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(dg):this.ctx.contextMenuRegistry.enableAction(dg);const{offsetX:n,offsetY:a}=t,{x:o,y:r}=vn.toCanvasPoint(e,n,a);this.ctx.contextMenuRegistry.dispatchContext("legend",{sourceEvent:t,canvasX:o,canvasY:r},{legendItem:s})}onClick(t,e,i){this.doClick(t,e,i)&&t.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap((t=>t.getLegendData("category"))).filter((t=>t.enabled)).length}doClick(t,e,i){const{listeners:{legendItemClick:s},ctx:{chartService:n,highlightManager:a},preventHidingAll:o,toggleSeries:r}=this;if(!e)return!1;const{legendType:l,seriesId:c,itemId:h,enabled:d}=e,u=n.series.find((t=>t.id===c));if(!u)return!1;let p=d;const g=ng("click",h,u.id,t);if(null==s||s(g.apiEvent),g.defaultPrevented)return!0;if(r){if(p=!d,o&&!p){this.getVisibleItemCount()<2&&(p=!0)}i.setChecked(p),this.ctx.chartEventManager.legendItemClick(l,u,h,p,e.legendItemName)}return p?a.updateHighlight(this.id,{series:u,itemId:h,datum:void 0,datumIndex:void 0}):a.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:e.skipAnimations??!1}),!0}onDoubleClick(t,e){this.doDoubleClick(t,e)&&t.preventDefault()}doDoubleClick(t,e){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:n}=this;if("integrated"===s.mode)return!1;if(!e)return!1;const{legendType:a,id:o,itemId:r,seriesId:l}=e,c=s.series.find((t=>t.id===o));if(!c)return!1;const h=ng("dblclick",r,c.id,t);if(null==i||i(h.apiEvent),h.defaultPrevented)return!0;if(n){const t=s.series.flatMap((t=>t.getLegendData("category"))),e=t.filter((t=>t.enabled)).length,i=t.find((t=>t.itemId===r&&t.seriesId===l));this.ctx.chartEventManager.legendItemDoubleClick(a,c,r,(null==i?void 0:i.enabled)??!1,e,null==i?void 0:i.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(t,e){let i;if(t instanceof FocusEvent){const{x:t,y:s}=vn.toCanvas(e).computeCenter();i={type:"keyboard",canvasX:t,canvasY:s}}else{t.preventDefault();const{x:s,y:n}=vn.toCanvasPoint(e,t.offsetX,t.offsetY);i={type:"pointermove",canvasX:s,canvasY:n}}const{canvasX:s,canvasY:n}=i;return{canvasX:s,canvasY:n,lastPointerEvent:i,showArrow:!1}}onHover(t,e){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(e.pageIndex);const i=e.datum,s=i?this.ctx.chartService.series.find((t=>t.id===(null==i?void 0:i.id))):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const s=this.toTooltipMeta(t,e);this.ctx.tooltipManager.updateTooltip(this.id,s,{type:"structured",title:this.getItemLabel(i)})}else this.ctx.tooltipManager.removeTooltip(this.id);(null==i?void 0:i.enabled)&&s?this.updateHighlight({series:s,itemId:null==i?void 0:i.itemId,datum:void 0,datumIndex:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(t){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,t):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=t,this.ctx.animationManager.onBatchStop((()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)})))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(t){const e=this.positionLegendScene(t);this.positionLegendDOM(e)}positionLegendScene(t){if(!this.enabled||!this.data.length)return;const{layoutBox:e}=t,{x:i,y:s,width:n,height:a}=e,[o,r]=this.calculateLegendDimensions(e),{oldPages:l}=this.calcLayout(o,r),c=this.computePagedBBox(),h=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return a-c.height;default:return n-c.width}};if(this.visible){const t=this.spacing;let o,r;switch(this.position){case"top":case"bottom":o=(n-c.width)/2,r=h(),e.shrink(c.height+t,this.position);break;default:o=h(),r=(a-c.height)/2,e.shrink(c.width+t,this.position)}this.group.translationX=Math.floor(i+o-c.x),this.group.translationY=Math.floor(s+r-c.y)}return l}positionLegendDOM(t){const{ctx:e,itemSelection:i,pagination:s,pages:n,toggleSeries:a,group:o,listeners:{legendItemClick:r,legendItemDoubleClick:l}}=this,c=this.visible&&this.enabled,h=a||null!=l||null!=r;this.domProxy.update({visible:c,interactive:h,ctx:e,itemSelection:i,group:o,pagination:s,oldPages:t,newPages:n,datumReader:this,itemListener:this})}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i;let n,a;switch(this.position){case"top":case"bottom":{const t=s<1?Math.min(.5,1/s*.2):.2;n=this.maxWidth?Math.min(this.maxWidth,e):e,a=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break}default:{const t=s>1?Math.min(.5,.25*s):.25;n=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*t),a=this.maxHeight?Math.min(this.maxHeight,i):i}}return[n,a]}};pg.className="Legend",s([Ti(zi)],pg.prototype,"toggleSeries",2),s([Ti(ji)],pg.prototype,"pagination",2),s([Ti(ji)],pg.prototype,"item",2),s([Ti(ji)],pg.prototype,"listeners",2),s([$n(((t,e,i)=>{if(t.updateGroupVisibility(),e===i)return;const{ctx:{legendManager:s,stateManager:n}}=t;!1===i&&!0===e&&n.restoreState(s)})),Ti(zi)],pg.prototype,"enabled",2),s([Ti(us)],pg.prototype,"position",2),s([Ti(Wi,{optional:!0})],pg.prototype,"maxWidth",2),s([Ti(Wi,{optional:!0})],pg.prototype,"maxHeight",2),s([Ti(zi,{optional:!0})],pg.prototype,"reverseOrder",2),s([Ti(Is(["horizontal","vertical"],"an orientation"),{optional:!0})],pg.prototype,"orientation",2),s([Ti(zi,{optional:!0})],pg.prototype,"preventHidingAll",2),s([Ti(Wi)],pg.prototype,"spacing",2);var gg={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new pg(t),packageType:"community",removable:"standalone-only"},mg={};i(mg,{CARTESIAN_AXIS_TYPE:()=>vg,CARTESIAN_POSITION:()=>xg,FONT_SIZE:()=>yg,FONT_SIZE_RATIO:()=>fg,POLAR_AXIS_SHAPE:()=>Mg,POLAR_AXIS_TYPE:()=>bg});var yg=(t=>(t[t.SMALLEST=8]="SMALLEST",t[t.SMALLER=10]="SMALLER",t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=14]="LARGE",t[t.LARGEST=17]="LARGEST",t))(yg||{}),fg=(t=>(t[t.SMALLEST=.6666666666666666]="SMALLEST",t[t.SMALLER=.8333333333333334]="SMALLER",t[t.SMALL=1]="SMALL",t[t.MEDIUM=1.0833333333333333]="MEDIUM",t[t.LARGE=1.1666666666666667]="LARGE",t[t.LARGEST=1.4166666666666667]="LARGEST",t))(fg||{}),xg=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(xg||{}),vg=(t=>(t.CATEGORY="category",t.GROUPED_CATEGORY="grouped-category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(vg||{}),bg=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(bg||{}),Mg=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(Mg||{}),Sg={};i(Sg,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>em,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>nm,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>am,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>om,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>rm,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>im,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>sm,DEFAULT_BACKGROUND_COLOUR:()=>Ng,DEFAULT_CAPTION_ALIGNMENT:()=>Cg,DEFAULT_CAPTION_LAYOUT_STYLE:()=>wg,DEFAULT_COLOR_RANGE:()=>_g,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>Vg,DEFAULT_FIBONACCI_STROKES:()=>qg,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>tm,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Qg,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>Kg,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>Zg,DEFAULT_GRIDLINE_ENABLED:()=>um,DEFAULT_HIERARCHY_FILLS:()=>$g,DEFAULT_HIERARCHY_STROKES:()=>Xg,DEFAULT_POLAR_SERIES_STROKE:()=>Wg,DEFAULT_SEPARATION_LINES_COLOUR:()=>Lg,DEFAULT_SHADOW_COLOUR:()=>kg,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Hg,DEFAULT_TEXTBOX_COLOR:()=>hm,DEFAULT_TEXTBOX_FILL:()=>lm,DEFAULT_TEXTBOX_STROKE:()=>cm,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Jg,DEFAULT_TOOLBAR_POSITION:()=>dm,IS_COMMUNITY:()=>Dg,IS_DARK_THEME:()=>Ig,IS_ENTERPRISE:()=>Ag,PALETTE_ALT_DOWN_FILL:()=>Gg,PALETTE_ALT_DOWN_STROKE:()=>Bg,PALETTE_ALT_NEUTRAL_FILL:()=>Ug,PALETTE_ALT_NEUTRAL_STROKE:()=>Yg,PALETTE_ALT_UP_FILL:()=>Fg,PALETTE_ALT_UP_STROKE:()=>zg,PALETTE_DOWN_FILL:()=>Rg,PALETTE_DOWN_STROKE:()=>Eg,PALETTE_NEUTRAL_FILL:()=>Pg,PALETTE_NEUTRAL_STROKE:()=>jg,PALETTE_UP_FILL:()=>Og,PALETTE_UP_STROKE:()=>Tg});var Ig=Symbol("is-dark-theme"),Dg=Symbol("is-community"),Ag=Symbol("is-enterprise"),Lg=Symbol("default-separation-lines-colour"),Ng=Symbol("default-background-colour"),kg=Symbol("default-shadow-colour"),wg=Symbol("default-caption-layout-style"),Cg=Symbol("default-caption-alignment"),Tg=Symbol("palette-up-stroke"),Eg=Symbol("palette-down-stroke"),Og=Symbol("palette-up-fill"),Rg=Symbol("palette-down-fill"),jg=Symbol("palette-neutral-stroke"),Pg=Symbol("palette-neutral-fill"),zg=Symbol("palette-alt-up-stroke"),Bg=Symbol("palette-alt-down-stroke"),Fg=Symbol("palette-alt-up-fill"),Gg=Symbol("palette-alt-down-fill"),Ug=Symbol("palette-gray-fill"),Yg=Symbol("palette-gray-stroke"),Wg=Symbol("default-polar-series-stroke"),Vg=Symbol("default-diverging-series-colour-range"),_g=Symbol("default-colour-range"),Hg=Symbol("default-sparkline-crosshair-stroke"),Zg=Symbol("default-gauge-series-colour-range"),Kg=Symbol("default-funnel-series-colour-range"),$g=Symbol("default-hierarchy-fills"),Xg=Symbol("default-hierarchy-strokes"),Qg=Symbol("default-financial-charts-annotation-stroke"),qg=Symbol("default-hierarchy-strokes"),Jg=Symbol("default-text-annotation-color"),tm=Symbol("default-financial-charts-annotation-background-fill"),em=Symbol("default-annotation-handle-fill"),im=Symbol("default-annotation-statistics-fill"),sm=Symbol("default-annotation-statistics-stroke"),nm=Symbol("default-annotation-statistics-color"),am=Symbol("default-annotation-statistics-divider-stroke"),om=Symbol("default-annotation-statistics-fill"),rm=Symbol("default-annotation-statistics-stroke"),lm=Symbol("default-textbox-fill"),cm=Symbol("default-textbox-stroke"),hm=Symbol("default-textbox-color"),dm=Symbol("default-toolbar-position"),um=Symbol("default-gridline-enabled");function pm(t,e){return i=>e(i)?[{...t[0],position:t[1].position},{...t[1],position:t[0].position}]:t}function gm({takeColors:t}){const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}function mm(t){return{marker:gm(t)}}function ym(t,e,i,s,n){const{addPhaseFn:a,updatePhaseFn:o,removePhaseFn:r}=n,l=(s,n,a)=>{i.animate({id:`${t}_${e}_${n.id}_${s}`,groupId:t,from:0,to:1,ease:ue,collapsable:!1,onUpdate(t,e){e&&"removed"!==s||(n.path.clear(!0),a(t,n),n.checkPathDirty())},onStop(){"added"===s&&(n.path.clear(!0),a(1,n),n.checkPathDirty())},phase:Ae[s]})};for(const c of s)i.isSkipped()||(l("removed",c,r),l("updated",c,o)),l("added",c,a)}function fm({id:t},e,i,...s){Ne(t,e,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function xm({id:t},e,i,...s){Ne(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function vm(t){return{opacity:1}}var bm=class extends qp{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};s([Ti(zi),Ot()],bm.prototype,"enabled",2),s([Ti(ts),Ot()],bm.prototype,"color",2),s([Ti(Gi),Ot()],bm.prototype,"xOffset",2),s([Ti(Gi),Ot()],bm.prototype,"yOffset",2),s([Ti(Wi),Ot()],bm.prototype,"blur",2);var Mm=class extends ki{constructor(){super(...arguments),this.enabled=!1}};s([Ti(zi)],Mm.prototype,"enabled",2);var Sm=class extends ki{constructor(){super(...arguments),this.enabled=!0,this.interaction=new Mm,this.position=new Ed,this.range=void 0,this.class=void 0}formatTooltip(t,e){var i;const s=null==(i=this.renderer)?void 0:i.call(this,e);return"string"==typeof s?{type:"raw",rawHtmlString:s}:null!=s?{type:"structured",...t,...s}:{type:"structured",...t}}};s([Ti(zi)],Sm.prototype,"enabled",2),s([Ti(zi,{optional:!0})],Sm.prototype,"showArrow",2),s([Ti(Bi,{optional:!0})],Sm.prototype,"renderer",2),s([Ti(ji)],Sm.prototype,"interaction",2),s([Ti(ji)],Sm.prototype,"position",2),s([Ti(Ms,{optional:!0})],Sm.prototype,"range",2),s([Ti(Fi,{optional:!0})],Sm.prototype,"class",2);var Im=Is(["linear","smooth","step"],"a line style"),Dm=Is(["start","middle","end"]),Am=class extends ki{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};s([Ti(Im)],Am.prototype,"type",2),s([Ti(Vi)],Am.prototype,"tension",2),s([Ti(Dm)],Am.prototype,"position",2);var Lm=class extends Su{constructor(){super(...arguments),this.xName=void 0,this.defaultColorRange=[],this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Am,this.shadow=new bm,this.marker=new eg,this.label=new Wa,this.tooltip=new Sm,this.connectMissingData=!1}};function Nm(t){switch(t.type){case"linear":case"step":return[{x:t.x0,y:t.y0},{x:t.x1,y:t.y1}];case"cubic":return[{x:t.cp0x,y:t.cp0y},{x:t.cp3x,y:t.cp3y}]}}function km(t,e,i){const[s,n]=Nm(t),a=n.x!==s.x?(i.x-e.x)/(n.x-s.x):0,o=n.y!==s.y?(i.y-e.y)/(n.y-s.y):0;switch(t.type){case"linear":return{type:"linear",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:t.moveTo,cp0x:e.x,cp0y:e.y,cp1x:i.x-(t.cp2x-s.x)*a,cp1y:i.y-(t.cp2y-s.y)*o,cp2x:i.x-(t.cp1x-s.x)*a,cp2y:i.y-(t.cp1y-s.y)*o,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y,stepX:i.x-(t.stepX-s.x)*a}}}function wm(t,e,i){const{moveTo:s}=t,[n,a]=function(t){const e=Nm(t);return e[0].x>e[1].x&&e.reverse(),e}(t),{x:o,y:r}=n,{x:l,y:c}=a;if(i<o)return km(t,n,n);if(e>l)return km(t,a,a);switch(t.type){case"linear":{const t=r===c?void 0:(c-r)/(l-o);return{type:"linear",moveTo:s,x0:e,y0:null==t?r:t*(e-o)+r,x1:i,y1:null==t?r:t*(i-o)+r}}case"step":if(i<=t.stepX){const n=t.y0;return{type:"step",moveTo:s,x0:e,y0:n,x1:i,y1:n,stepX:i}}if(e>=t.stepX){const n=t.y1;return{type:"step",moveTo:s,x0:e,y0:n,x1:i,y1:n,stepX:e}}{const{y0:n,y1:a,stepX:o}=t;return{type:"step",moveTo:s,x0:e,y0:n,x1:i,y1:a,stepX:o}}case"cubic":{const n=rd(t.cp0x,t.cp1x,t.cp2x,t.cp3x,e);let[a,o]=ld(t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,n);const r=rd(o[0].x,o[1].x,o[2].x,o[3].x,i);return[o,a]=ld(o[0].x,o[0].y,o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y,r),{type:"cubic",moveTo:s,cp0x:o[0].x,cp0y:o[0].y,cp1x:o[1].x,cp1y:o[1].y,cp2x:o[2].x,cp2y:o[2].y,cp3x:o[3].x,cp3y:o[3].y}}}}s([Ti(Fi)],Lm.prototype,"xKey",2),s([Ti(Fi,{optional:!0})],Lm.prototype,"xName",2),s([Ti(Fi)],Lm.prototype,"yKey",2),s([Ti(Fi,{optional:!0})],Lm.prototype,"yName",2),s([Ti(Fi,{optional:!0})],Lm.prototype,"yFilterKey",2),s([Ti(Wi,{optional:!0})],Lm.prototype,"normalizedTo",2),s([Ti(is)],Lm.prototype,"defaultColorRange",2),s([Ti(Ri(es,ts))],Lm.prototype,"fill",2),s([Ti(Vi)],Lm.prototype,"fillOpacity",2),s([Ti(ts)],Lm.prototype,"stroke",2),s([Ti(Wi)],Lm.prototype,"strokeWidth",2),s([Ti(Vi)],Lm.prototype,"strokeOpacity",2),s([Ti(ds)],Lm.prototype,"lineDash",2),s([Ti(Wi)],Lm.prototype,"lineDashOffset",2),s([Ti(ji)],Lm.prototype,"interpolation",2),s([Ti(ji)],Lm.prototype,"shadow",2),s([Ti(ji)],Lm.prototype,"marker",2),s([Ti(ji)],Lm.prototype,"label",2),s([Ti(ji)],Lm.prototype,"tooltip",2),s([Ti(zi)],Lm.prototype,"connectMissingData",2);var Cm={start:0,middle:.5,end:1};var Tm=.05;function Em(t,e,i){return(e-t)*i+t}function Om(t,e){return"linear"===t.type?function(t,e){const{x0:i,y0:s,x1:n,y1:a}=t,o=(a-s)/(n-i)*(e-i)+s;return{leftCp1x:i,leftCp1y:s,leftCp2x:e,leftCp2y:o,stepX:e,stepY0:o,stepY1:o,rightCp1x:e,rightCp1y:o,rightCp2x:n,rightCp2y:a}}(t,e):"cubic"===t.type?function(t,e){const{cp0x:i,cp0y:s,cp1x:n,cp1y:a,cp2x:o,cp2y:r,cp3x:l,cp3y:c}=t,h=rd(i,n,o,l,e),[d,u]=ld(i,s,n,a,o,r,l,c,h),p=d[3].y;return{leftCp1x:d[1].x,leftCp1y:d[1].y,leftCp2x:d[2].x,leftCp2y:d[2].y,stepX:e,stepY0:p,stepY1:p,rightCp1x:u[1].x,rightCp1y:u[1].y,rightCp2x:u[2].x,rightCp2y:u[2].y}}(t,e):function(t){const{x0:e,y0:i,x1:s,y1:n,stepX:a}=t;return{leftCp1x:(e+a)/2,leftCp1y:i,leftCp2x:(e+a)/2,leftCp2y:i,stepX:a,stepY0:i,stepY1:n,rightCp1x:(a+s)/2,rightCp1y:n,rightCp2x:(a+s)/2,rightCp2y:n}}(t)}function Rm(t,e,i,s,n,a,o){switch(e){case 0:o?t.moveTo(n,a):t.moveTo(i,s);break;case 1:o?t.lineTo(n,a):t.lineTo(i,s)}}function jm(t,e,i,s,n,a){a?t.lineTo(e,i):t.lineTo(s,n)}function Pm(t,e,i,s,n,a,o,r,l,c){c?t.cubicCurveTo(a,o,s,n,e,i):t.cubicCurveTo(s,n,a,o,r,l)}function zm(t,e,i,s,n,a,o){o?(t.lineTo(a,n),t.lineTo(a,i),t.lineTo(e,i)):(t.lineTo(a,i),t.lineTo(a,n),t.lineTo(s,n))}function Bm(t,e,i,s){const[n,a]=Nm(e);switch(Rm(t,i,n.x,n.y,a.x,a.y,s),e.type){case"linear":jm(t,e.x0,e.y0,e.x1,e.y1,s);break;case"cubic":Pm(t,e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,s);break;case"step":zm(t,e.x0,e.y0,e.x1,e.y1,e.stepX,s)}}function Fm(t,e,i){const[s,n]=Nm(t),[a,o]=Nm(e);return[{x:Em(s.x,a.x,i),y:Em(s.y,a.y,i)},{x:Em(n.x,o.x,i),y:Em(n.y,o.y,i)}]}function Gm(t,e,i,s,n,a){const[{x:o,y:r},{x:l,y:c}]=Fm(e,i,s);if(Rm(t,n,o,r,l,c,a),"cubic"===e.type&&"cubic"===i.type){Pm(t,o,r,Em(e.cp1x,i.cp1x,s),Em(e.cp1y,i.cp1y,s),Em(e.cp2x,i.cp2x,s),Em(e.cp2y,i.cp2y,s),l,c,a)}else if("step"===e.type&&"step"===i.type){zm(t,o,r,l,c,Em(e.stepX,i.stepX,s),a)}else if("linear"===e.type&&"linear"===i.type)jm(t,o,r,l,c,a);else{let n;n="step"===e.type?e.stepX:"step"===i.type?i.stepX:(o+l)/2;const h=Om(e,n),d=Om(i,n),u=Em(h.leftCp1x,d.leftCp1x,s),p=Em(h.leftCp1y,d.leftCp1y,s),g=Em(h.leftCp2x,d.leftCp2x,s),m=Em(h.leftCp2y,d.leftCp2y,s),y=Em(h.stepX,d.stepX,s),f=Em(h.stepY0,d.stepY0,s),x=Em(h.stepY1,d.stepY1,s),v=Em(h.rightCp1x,d.rightCp1x,s),b=Em(h.rightCp1y,d.rightCp1y,s),M=Em(h.rightCp2x,d.rightCp2x,s),S=Em(h.rightCp2y,d.rightCp2y,s);a?(t.cubicCurveTo(M,S,v,b,y,x),t.lineTo(y,f),t.cubicCurveTo(g,m,u,p,o,r)):(t.cubicCurveTo(u,p,g,m,y,f),t.lineTo(y,x),t.cubicCurveTo(v,b,M,S,l,c))}}var Um=(t=>(t[t.Zero=0]="Zero",t[t.Split=1]="Split",t))(Um||{});function Ym(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"==typeof t){return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0]}if("log"===e.type&&"number"==typeof t)return e.convert(t);if("category"!==e.type)return NaN;const i=e.domain.findIndex((e=>e===t));if(i>=0)return e.inset+e.step*i;return e.domain.findIndex((e=>{return s=e,null!=(i=t)&&null!=s&&"object"==typeof i&&"object"==typeof s&&("id"in i&&"id"in s?i.id===s.id:i.toString()===s.toString());var i,s}))>=0?e.inset+e.step*i:NaN}function Wm(t){return Ka(t).valueOf()}function Vm({data:t},e){return t.map(((t,i)=>({xValue0Index:e.indexOf(Wm(t.xValue0)),xValue1Index:e.indexOf(Wm(t.xValue1)),datumIndex:i})))}function _m(t,e){const i=new Map;for(const{xValue0:l,xValue1:c}of t.data){const t=Wm(l),e=Wm(c);i.set(t,l).set(e,c)}const s=Array.from(i,(([t,e])=>({axisValue:t,value:e})));s.sort(((e,i)=>Ym(e.value,t.scales.x)-Ym(i.value,t.scales.x)));const n=[];for(const{xValue0:l,xValue1:c}of e.data){const t=Wm(l),e=Wm(c);i.has(t)||(i.set(t,l),n.push({axisValue:t,value:l})),i.has(e)||(i.set(e,c),n.push({axisValue:e,value:c}))}n.sort(((t,i)=>Ym(t.value,e.scales.x)-Ym(i.value,e.scales.x)));const a=s;let o=0;for(const l of n){for(let t=a.length-1;t>o;t-=1){if(Ym(l.value,e.scales.x)>Ym(a[t].value,e.scales.x)){o=t+1;break}}a.splice(o,0,l),o+=1}if(!function(t,e){let i=-1/0;for(const s of t){const t=Ym(s.value,e.scales.x);if(Number.isFinite(t)){if(t<i)return!1;i=t}}return!0}(a,e))return;const r=a.map((t=>t.axisValue));return{axisValues:r,oldDataAxisIndices:Vm(e,r),newDataAxisIndices:Vm(t,r)}}function Hm(t,e,i){if(i.xValue1Index===i.xValue0Index+1)return t;const s=Nm(t),n=(s[1].x-s[0].x)/(i.xValue1Index-i.xValue0Index),a=s[0].x+(e-i.xValue0Index)*n;return wm(t,a,a+n)}function Zm(t,e){const[i,s]=Nm(t),n=Ym(0,e.scales.y);return km(t,{x:i.x,y:n},{x:s.x,y:n})}function Km(t){const[e,i]=Nm(t);return function(t,e){const{x:i,y:s}=e;switch(t.type){case"linear":return{type:"linear",moveTo:t.moveTo,x0:i,y0:s,x1:i,y1:s};case"step":return{type:"step",moveTo:t.moveTo,x0:i,y0:s,x1:i,y1:s,stepX:i};case"cubic":return{type:"cubic",moveTo:t.moveTo,cp0x:i,cp0y:s,cp1x:i,cp1y:s,cp2x:i,cp2y:s,cp3x:i,cp3y:s}}}(t,{x:(e.x+i.x)/2,y:(e.y+i.y)/2})}function $m(t,e,i,s,n,a){var o,r;let l,c;if(n.xValue0Index>=a.xValue1Index){const t=null==(o=s.findLast((t=>t.xValue1Index<=a.xValue1Index)))?void 0:o.datumIndex,e=null!=t?i.data[t]:void 0;l=null==e?void 0:e.xValue1,c=null==e?void 0:e.yValue1}else if(n.xValue0Index<=a.xValue0Index){const t=null==(r=s.find((t=>t.xValue0Index>=a.xValue0Index)))?void 0:r.datumIndex,e=null!=t?i.data[t]:void 0;l=null==e?void 0:e.xValue0,c=null==e?void 0:e.yValue0}if(null==l||null==c)switch(e){case 0:return Zm(t,i);case 1:return Km(t)}const h={x:Ym(l,i.scales.x),y:Ym(c,i.scales.y)};return km(t,h,h)}function Xm(t,e){var i;if(null==e)return;const s=Wm(t.xValue0),n=Wm(t.xValue1);return null==(i=e.find((t=>Wm(t.xValue0)===s&&Wm(t.xValue1)===n)))?void 0:i.span}function Qm(t,e,i,s,n,a,o){const r=t.data[s.datumIndex],l=r.span,c=Xm(r,n);if(null!=c)o.removed.push({from:c,to:c}),o.moved.push({from:c,to:l}),o.added.push({from:l,to:l});else{const n=$m(l,e,t,i,s,a);o.added.push({from:n,to:l})}}function qm(t,e,i,s,n,a,o){const r=t.data[s.datumIndex],l=r.span,c=Xm(r,n);if(null!=c)o.removed.push({from:l,to:l}),o.moved.push({from:l,to:c}),o.added.push({from:c,to:c});else{const n=$m(l,e,t,i,s,a);o.removed.push({from:l,to:n})}}function Jm(t,e,i,s,n){const a=e[n.xValue0Index],o=i.data.find((t=>Wm(t.xValue0)===a)),r=e[n.xValue1Index],l=i.data.find((t=>Wm(t.xValue1)===r));if(null==o||null==l)return;const[{x:c},{x:h}]=Nm(t),d=Ym(o.xValue0,i.scales.x),u=Ym(o.yValue0,i.scales.y),p=Ym(l.xValue1,i.scales.x),g=Ym(l.yValue1,i.scales.y);let m=s.data[n.datumIndex].span;return m=km(m,{x:d,y:u},{x:p,y:g}),m=wm(m,c,h),m}function ty(t,e,i,s,n,a,o,r,l){const c=n+1,h=o.find((t=>t.xValue0Index<=n&&t.xValue1Index>=c)),d=a.find((t=>t.xValue0Index<=n&&t.xValue1Index>=c)),u=e.zeroData,p=t.zeroData;if(null==h&&null!=d)return void Qm(t,i,a,d,u,r,l);if(null!=h&&null==d)return void qm(e,i,o,h,p,r,l);if(null==h||null==d)return;let g;g=h.xValue0Index===d.xValue0Index&&h.xValue1Index===d.xValue1Index?0:h.xValue0Index<=d.xValue0Index&&h.xValue1Index>=d.xValue1Index?-1:h.xValue0Index>=d.xValue0Index&&h.xValue1Index<=d.xValue1Index?1:0;const m=Hm(e.data[h.datumIndex].span,n,h),y=Hm(t.data[d.datumIndex].span,n,d);if(1===g){const n=Jm(m,s,e,t,d);null!=n?(l.removed.push({from:m,to:n}),l.moved.push({from:n,to:y}),l.added.push({from:y,to:y})):qm(e,i,o,h,p,r,l)}else if(-1===g){const n=Jm(y,s,t,e,h);null!=n?(l.removed.push({from:m,to:m}),l.moved.push({from:m,to:n}),l.added.push({from:n,to:y})):Qm(t,i,a,d,u,r,l)}else l.removed.push({from:m,to:m}),l.moved.push({from:m,to:y}),l.added.push({from:y,to:y})}function ey(t,e,i){const{span:s}=e;switch(i){case 0:return Xm(e,t.zeroData)??Zm(s,t);case 1:return Km(s)}}function iy(t,e,i){if(!function(t,e){const i=e.scales.x,s=t.scales.x;if("category"!==(null==i?void 0:i.type)||"category"!==(null==s?void 0:s.type))return!0;let n=-1/0;for(const a of i.domain){const t=Ym(a,s);if(Number.isFinite(t)){if(t<n)return!1;n=t}}return!0}(t,e))return;const s=_m(t,e);return null==s?function(t,e,i){const s=[],n=[];for(const a of e.data){const t=a.span,s=ey(e,a,i);n.push({from:t,to:s})}for(const a of t.data){const e=a.span,n=ey(t,a,i);s.push({from:n,to:e})}return{removed:n,moved:[],added:s}}(t,e,i):function(t,e,i,s){var n,a,o,r;const l={removed:[],moved:[],added:[]},{axisValues:c,oldDataAxisIndices:h,newDataAxisIndices:d}=t,u={xValue0Index:Math.max((null==(n=h.at(0))?void 0:n.xValue0Index)??-1/0,(null==(a=d.at(0))?void 0:a.xValue0Index)??-1/0),xValue1Index:Math.min((null==(o=h.at(-1))?void 0:o.xValue1Index)??1/0,(null==(r=d.at(-1))?void 0:r.xValue1Index)??1/0)};for(let p=0;p<c.length-1;p+=1)ty(e,i,s,c,p,d,h,u,l);return l}(s,t,e,i)}function sy(t){return"continuous"===t.type||"log"===t.type}function ny(t){return"category"===t.type}function ay(t,e){return void 0===t||void 0===e?void 0!==t||void 0!==e:sy(t)&&sy(e)?t.type===e.type&&x(t.domain,e.domain)&&x(t.range,e.range):!(!ny(t)||!ny(e))&&(t.inset===e.inset&&t.step===e.step&&x(t.domain,e.domain))}function oy(t){return null!=t&&("category"===t.type?t.domain.every((t=>null!=t)):t.domain.every((t=>Number.isFinite(t)||t instanceof Date))&&t.range.every((t=>Number.isFinite(t))))}function ry(t,e){let i;const s=t.map((t=>t.point));switch(e.type){case"linear":i=function(t){const e=[];let i=0,s=NaN,n=NaN;for(const{x:a,y:o}of t){if(i>0){const t=1===i;e.push({type:"linear",moveTo:t,x0:s,y0:n,x1:a,y1:o})}i+=1,s=a,n=o}return e}(s);break;case"smooth":i=function(t,e){const i=Array.isArray(t)?t:Array.from(t);if(i.length<=1)return[];const s=i.map(((t,e)=>{const s=0===e?t:i[e-1],n=e===i.length-1?t:i[e+1],a=0===e||e===i.length-1;if(Math.sign(s.y-t.y)===Math.sign(n.y-t.y))return 0;if(!a){const e=Math.abs(s.y-n.y),i=Math.abs(t.y-s.y)/e,a=Math.abs(t.y-n.y)/e;if(i<=Tm||1-i<=Tm||a<=Tm||1-a<=Tm)return 0}return(n.y-s.y)/(n.x-s.x)}));0===s[1]&&(s[0]*=2),0===s[s.length-2]&&(s[s.length-1]*=2);const n=[];for(let a=1;a<i.length;a+=1){const t=i[a-1],o=s[a-1],r=i[a],l=s[a],c=r.x-t.x,h=r.y-t.y;let d=c*e/3,u=c*o*e/3,p=c*e/3,g=c*l*e/3;0===l&&Math.abs(u)>Math.abs(h)&&(d*=Math.abs(h/u),u=Math.sign(u)*Math.abs(h)),0===o&&Math.abs(g)>Math.abs(h)&&(p*=Math.abs(h/g),g=Math.sign(g)*Math.abs(h)),n.push({type:"cubic",moveTo:1===a,cp0x:t.x,cp0y:t.y,cp1x:t.x+d,cp1y:t.y+u,cp2x:r.x-p,cp2y:r.y-g,cp3x:r.x,cp3y:r.y})}return n}(s,e.tension);break;case"step":i=function(t,e){const i=[];let s=0,n=NaN,a=NaN;const o="number"==typeof e?e:Cm[e];for(const{x:r,y:l}of t){if(s>0){const t=1===s,e=n+(r-n)*o;i.push({type:"step",moveTo:t,x0:n,y0:a,x1:r,y1:l,stepX:e})}s+=1,n=r,a=l}return i}(s,e.position)}return i.map(((e,i)=>({span:e,xValue0:t[i].xDatum,yValue0:t[i].yDatum,xValue1:t[i+1].xDatum,yValue1:t[i+1].yDatum})))}function ly(t,e,i=.001){return Math.abs(t.x-e.x)<i&&Math.abs(t.y-e.y)<i}function cy({path:t},e){let i;for(const{span:s}of e){const[e,n]=Nm(s);Bm(t,s,null!=i&&ly(i,e)?1:0,!1),i=n}}function hy(t,e,i){let s;for(const n of i){const[i,a]=Fm(n.from,n.to,t),o=null!=s&&ly(s,i)?1:0;Gm(e.path,n.from,n.to,t,o,!1),s=a}}function dy(t,e,i){return{status:t,path:{addPhaseFn:(t,i)=>hy(t,i,e.added),updatePhaseFn:(t,i)=>hy(t,i,e.moved),removePhaseFn:(t,i)=>hy(t,i,e.removed)},pathProperties:uy(t,i)}}function uy(t,e){const i="none"===e?"updated":t,s={fromFn:e=>{let s;return s="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},{phase:Ae[i],...s}},toFn:t=>({phase:Ae[i]})};return"fade"===e?{fromFn:e=>({opacity:"added"===t?0:e.opacity,...s.fromFn(e)}),toFn:e=>({opacity:"removed"===t?0:1,...s.toFn(e)})}:s}function py(t,e,i){var s,n;if("category"===(null==(s=t.scales.x)?void 0:s.type)!==("category"===(null==(n=e.scales.x)?void 0:n.type))||!oy(t.scales.x)||!oy(e.scales.x))return;if(null==t.strokeData||null==e.strokeData)return;let a="updated";e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added");const o=iy({scales:t.scales,data:t.strokeData.spans},{scales:e.scales,data:e.strokeData.spans},1);if(null==o)return;return{status:a,stroke:dy(a,o,"fade"),hasMotion:((null==i?void 0:i.changed)??!0)||!ay(t.scales.x,e.scales.x)||!ay(t.scales.y,e.scales.y)||"updated"!==a}}function gy({path:t},{spans:e,phantomSpans:i}){for(let s=0;s<e.length;s+=1){const{span:n}=e[s],a=i[s].span;Bm(t,n,0,!1),Bm(t,a,1,!0),t.closePath()}}function my(t,{path:e},i,s){for(let n=0;n<i.length;n+=1){const a=i[n],o=s[n];Gm(e,a.from,a.to,t,0,!1),Gm(e,o.from,o.to,t,1,!0),e.closePath()}}function yy(t,e,i,s){return{status:t,path:{addPhaseFn:(t,s)=>my(t,s,e.added,i.added),updatePhaseFn:(t,s)=>my(t,s,e.moved,i.moved),removePhaseFn:(t,s)=>my(t,s,e.removed,i.removed)},pathProperties:uy(t,s)}}function fy(t,e){var i,s;if("category"===(null==(i=t.scales.x)?void 0:i.type)!==("category"===(null==(s=e.scales.x)?void 0:s.type))||!oy(t.scales.x)||!oy(e.scales.x))return;let n="updated";e.visible&&!t.visible?n="removed":!e.visible&&t.visible&&(n="added");const a=iy({scales:t.scales,data:t.fillData.spans},{scales:e.scales,data:e.fillData.spans},0);if(null==a)return;const o=iy({scales:t.scales,data:t.fillData.phantomSpans},{scales:e.scales,data:e.fillData.phantomSpans},0);if(null==o)return;const r=iy({scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},{scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},0);if(null==r)return;const l="none";return{status:n,fill:yy(n,a,o,l),stroke:dy(n,r,l)}}function xy({id:t},e,i,...s){Ne(t,"markers",e,s,{opacity:0},{opacity:1},{phase:i?Ae[i]:"trailing"}),s.forEach((t=>t.cleanup()))}function vy({id:t},e,...i){Ne(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach((t=>t.cleanup()))}function by({id:t,nodeDataDependencies:e},i,...s){const n=e.seriesRectWidth;Le(t,"markers",i,s,{fromFn:(t,e)=>{var i;const s=(null==(i=e.midPoint)?void 0:i.x)??n;let a=bt(0,fe(s/n),1);return isNaN(a)&&(a=0),{scalingX:0,scalingY:0,delay:a,duration:xe,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function My(t){return{opacity:1,scalingX:1,scalingY:1}}function Sy(t,e){var i,s;return{translationX:(null==(i=e.point)?void 0:i.x)??NaN,translationY:(null==(s=e.point)?void 0:s.y)??NaN}}function Iy(t,{datumIndex:e}){const i=t.getNodeData();if(void 0===i)return;const s=i[e],{point:n}=s;if(null==s||null==n)return;const a=4+(n.focusSize??t.getFormattedMarkerStyle(s).size),o=a/2,r=s.point.x-o,l=s.point.y-o;return vn.toCanvas(t.contentGroup,new Et(r,l,a,a))}function Dy({id:t,visible:e,nodeDataDependencies:i},s,...n){const{seriesRectWidth:a,seriesRectHeight:o}=i;Ne(t,"path_properties",s,n,{clipX:0},{clipX:a},{phase:"initial",start:{clip:!0,clipY:o,visible:e},finish:{clip:!1,visible:e}})}function Ay({id:t},e,i,s="add",...n){Ne(t,e,i,n,{opacity:0},{opacity:1},{phase:s})}function Ly(t){return e=>({visible:t.getVisible(),opacity:t.getOpacity(),clipScalingX:1,clip:!1})}function Ny({nodeDataDependencies:t},e){const i=t=>isFinite(t)?t:0;e.clipX=i(t.seriesRectWidth),e.clipY=i(t.seriesRectHeight)}var ky=class extends Du{constructor(t){super({moduleCtx:t,directionKeys:vu,directionNames:bu,pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:Ly({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:vm,marker:(t,e)=>({opacity:1,scalingX:1,scalingY:1,...Sy(0,e)})}}),this.properties=new Lm,this.connectsToYAxis=!0,this.backgroundGroup=new In({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||null!=this.contextNodeData&&(this.contextNodeData.fillData.spans.length>Iu||this.contextNodeData.strokeData.spans.length>Iu)}attachSeries(t,e,i){super.attachSeries(t,e,i),t.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),null==t||t.removeChild(this.backgroundGroup)}attachPaths([t,e]){this.backgroundGroup.appendChild(t),this.contentGroup.appendChild(e),e.zIndex=-1}detachPaths([t,e]){this.backgroundGroup.removeChild(t),this.contentGroup.removeChild(e)}isStacked(){var t;return((null==(t=this.seriesGrouping)?void 0:t.stackCount)??1)>1}setSeriesIndex(t){const e=this.isStacked();return!(!super.setSeriesIndex(t)&&this._isStacked===e)&&(this._isStacked=e,e?(this.backgroundGroup.zIndex=[0,t],this.contentGroup.zIndex=[1,t,0]):(this.backgroundGroup.zIndex=[1,t,0,0],this.contentGroup.zIndex=[1,t,0,1]),!0)}async processData(t){var e,i;if(null==this.data||!this.properties.isValid())return;const{data:s,visible:n,seriesGrouping:{groupIndex:a=this.id,stackCount:o=1}={}}=this,{xKey:r,yKey:l,yFilterKey:c,connectMissingData:h,normalizedTo:d}=this.properties,u=!this.ctx.animationManager.isSkipped(),p=null==(e=this.axes.x)?void 0:e.scale,g=null==(i=this.axes.y)?void 0:i.scale,{xScaleType:m,yScaleType:y}=this.getScaleInformation({xScale:p,yScale:g}),f={value:`area-stack-${a}-yValue`,values:`area-stack-${a}-yValues`,stack:`area-stack-${a}-yValue-stack`,marker:`area-stack-${a}-yValues-marker`},x=[];L(d)&&x.push(lp(Object.values(f),d)),u&&x.push(up());const v={invalidValue:null};(L(d)||h)&&o>1&&(v.invalidValue=0),n||(v.forceValue=0),await this.requestDataModel(t,s,{props:[Xu(r,m,{id:"xValue"}),Qu(l,y,{id:"yValueRaw",...v}),...null!=c?[Qu(c,y,{id:"yFilterRaw"})]:[],...sp(l,y,{id:"yValueStack",...v,groupId:f.stack}),Qu(l,y,{id:"yValue",...v,groupId:f.value}),...ip(l,"window","current",{id:"yValueEnd",...v,groupId:f.values},y),...ip(l,"normal","current",{id:"yValueCumulative",...v,groupId:f.marker},y),...x],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}xCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.x.scale.convert(t),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}yCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.y.scale.convert(t[0]),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i)return[];const n=s.y;if("x"===t){const t=i.resolveProcessedDataDefById(this,"xValue"),s=i.getDomain(this,"xValue","key",e);return"key"===(null==t?void 0:t.def.type)&&"category"===t.def.valueType?s:hh(lu(s))}const a=this.domainForClippedRange("y",["yValueEnd"],"xValue",!0);if(n instanceof zp||n instanceof du)return hh(a);return hh(Number.isFinite(a[1]-a[0])?[a[0]>0?0:a[0],a[1]<0?0:a[1]]:[])}getSeriesRange(t,e){const[i,s]=this.domainForVisibleRange("y",["yValueEnd"],"xValue",e,!0);return[Math.min(i,0),Math.max(s,0)]}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["yValueEnd"],t,e,i)}createNodeData(){var t;const{axes:e,data:i,processedData:s,dataModel:n}=this,a=e.x,o=e.y;if(!(a&&o&&i&&n&&"grouped"===(null==s?void 0:s.type)&&this.properties.isValid()))return;const{yKey:r,xKey:l,yFilterKey:c,marker:h,label:d,fill:u,stroke:p,connectMissingData:g,interpolation:m}=this.properties,{scale:y}=a,{scale:f}=o,{isContinuousY:x}=this.getScaleInformation({xScale:y,yScale:f}),v=(y.bandwidth??0)/2,b=n.resolveKeysById(this,"xValue",s),M=n.resolveColumnById(this,"yValueEnd",s),S=n.resolveColumnById(this,"yValueRaw",s),I=n.resolveColumnById(this,"yValueCumulative",s),D=null!=c?n.resolveColumnById(this,"yFilterRaw",s):void 0,A=n.resolveColumnById(this,"yValueStack",s),N=(t,e,i)=>{let s;return(L(this.properties.normalizedTo)?x&&Ha(i):!isNaN(i))&&(s=e),{x:y.convert(t)+v,y:f.convert(s),size:h.size}},k=[],w=[],{visibleSameStackCount:C}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let T=!1;const{dataSources:E}=s,O=E.get(this.id)??[];for(const{datumIndex:L}of n.forEachGroupDatum(this,s)){const t=b[L];if(null==t)return;const e=O[L],i=S[L],s=I[L],n=M[L],a=Number.isFinite(i),o=N(t,+s,i),c=null!=D?D[L]===i:void 0;if(!1===c&&(T=!0),a&&h&&w.push({series:this,itemId:r,datum:e,datumIndex:L,midPoint:{x:o.x,y:o.y},cumulativeValue:n,yValue:i,xValue:t,yKey:r,xKey:l,point:o,fill:h.fill??u,stroke:h.stroke??p,strokeWidth:h.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:c}),a&&d){const t=this.getLabelText(d,{value:i,datum:e,xKey:l,yKey:r,xName:this.properties.xName,yName:this.properties.yName});k.push({series:this,itemId:r,datum:e,datumIndex:L,x:o.x,y:o.y,labelText:t})}}const R=(t,e)=>({point:{x:y.convert(t)+v,y:f.convert(e)},xDatum:t,yDatum:e}),j=t=>{const e=[];for(const{datumIndexes:[i,a,o]}of n.forEachGroupDatumTuple(this,s)){const s=b[a],n=A[a],r=n[t],l=Number.isFinite(r);if(g&&!l)continue;const c=null!=i?A[i]:void 0,h=null!=o?A[o]:void 0;let d=0,u=0;for(let e=0;e<=t;e+=1){const t=n[e];if(Number.isFinite(t)){(null==c||Number.isFinite(c[e]))&&(d+=t),(null==h||Number.isFinite(h[e]))&&(u+=t)}}const p=e[e.length-1];if(g||d===u&&l){const t=Math.max(d,u),i=R(s,t);Array.isArray(p)?p.push(i):null!=p?(p.skip+=1,e.push([i])):e.push([i])}else if(!l&&Array.isArray(p)&&1===p.length)e[e.length-1]={skip:1};else{const t=R(s,d),i=R(s,u);Array.isArray(p)?p.push(t):null!=p&&(p.skip+=1),e.push(l?[i]:{skip:0})}}return(t=>t.flatMap((t=>Array.isArray(t)?ry(t,m):new Array(t.skip).fill(null))))(e)},P=(null==(t=this.seriesGrouping)?void 0:t.stackIndex)??0,z=()=>ry(Array.from(n.forEachGroupDatum(this,s),(({datumIndex:t})=>{const e=b[t],i=A[t][P];if(!g||Number.isFinite(i))return R(e,0)})).filter((t=>null!=t)),m),B=j(P),F=B.map((()=>null));for(let L=P-1;L>=-1;L-=1){let t;for(let e=0;e<F.length;e+=1)null==F[e]&&(t??(t=-1!==L?j(L):z()),F[e]=t[e])}const G=B.map(((t,e)=>t??F[e])),U=B.filter((t=>null!=t));return{itemId:r,fillData:{itemId:r,spans:G,phantomSpans:F},strokeData:{itemId:r,spans:U},labelData:k,nodeData:w,scales:this.calculateScaling(),visible:this.visible,stackVisible:C>0,crossFiltering:T}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){var e;const{opacity:i,visible:s,animationEnabled:n}=t,[a,o]=t.paths,r=!0===(null==(e=this.contextNodeData)?void 0:e.crossFiltering),l=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:l,strokeOpacity:this.properties.strokeOpacity*(r?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:i,visible:s||n});const{fill:c}=this.properties;if(sn(c)){const t=this.getGradientFillOptions(c,this.properties.defaultColorRange);a.gradientFillOptions=t}a.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity*(r?.125:1),fillShadow:this.properties.shadow,opacity:i,visible:s||n}),Ny(this,o),Ny(this,a)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(const i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(const i of t)i.path.clear(),i.markDirty()}updateFillPath(t,e){const[i]=t;i.path.clear(),gy(i,e.fillData),i.markDirty()}updateStrokePath(t,e){const{spans:i}=e.strokeData,[,s]=t;s.path.clear(),cy(s,i),s.markDirty()}updateMarkerSelection(t){var e;const{nodeData:i,markerSelection:s}=t,n=this.properties.marker.enabled||!0===(null==(e=this.contextNodeData)?void 0:e.crossFiltering);return this.properties.marker.isDirty()&&(s.clear(),s.cleanup()),s.update(n?i:[])}getMarkerItemBaseStyle(t){const{marker:e}=this.properties,i=t?this.properties.highlightStyle.item:void 0;return{fill:(null==i?void 0:i.fill)??e.fill,fillOpacity:(null==i?void 0:i.fillOpacity)??e.fillOpacity,stroke:(null==i?void 0:i.stroke)??e.stroke,strokeWidth:(null==i?void 0:i.strokeWidth)??e.strokeWidth,strokeOpacity:(null==i?void 0:i.strokeOpacity)??e.strokeOpacity}}getMarkerItemStyleOverrides(t,e,i,s,n,a){const{marker:o}=this.properties,{itemStyler:r}=o;if(null==r)return;const{id:l,properties:c}=this,{xKey:h,yKey:d}=c,{xDomain:u,yDomain:p}=this.cachedDatumCallback("domain",(()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})));return this.cachedDatumCallback(Mp(t,a?"highlight":"node"),(()=>r({seriesId:l,...Ac(e,h,d,u,p),xValue:i,yValue:s,highlighted:a,...n})))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,marker:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h,highlightStyle:d}=this.properties,u=this.getSeriesDomain("x"),p=this.getSeriesDomain("y"),g=te(i&&d.item,a.getStyle(),{fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h});e.each(((t,e)=>{this.updateMarkerStyle(t,a,{...Ac(e,s,n,u,p),highlighted:i},g,{selected:e.selected})})),i||this.properties.marker.markClean()}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o,color:r}=this.properties.label;e.each(((t,e)=>{const{x:l,y:c,labelText:h}=e;h&&i&&this.visible?(t.fontStyle=s,t.fontWeight=n,t.fontSize=a,t.fontFamily=o,t.textAlign="center",t.textBaseline="bottom",t.text=h,t.x=l,t.y=c-10,t.fill=r,t.visible=!0):t.visible=!1}))}getTooltipContent(t){var e;const{id:i,dataModel:s,processedData:n,axes:a,properties:o}=this,{xKey:r,xName:l,yKey:c,yName:h,tooltip:d}=o,u=a.x,p=a.y;if(!(s&&n&&u&&p))return;const{datumIndex:g}=t,m=null==(e=n.dataSources.get(this.id))?void 0:e[g],y=s.resolveKeysById(this,"xValue",n)[g],f=s.resolveColumnById(this,"yValueRaw",n)[g];if(null==y)return;const x=this.getMarkerItemBaseStyle(!1);return Object.assign(x,this.getMarkerItemStyleOverrides(String(g),m,y,f,x,!1)),d.formatTooltip({heading:u.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:h,fallbackLabel:c,value:p.formatDatum(f)}]},{seriesId:i,datum:m,title:h,xKey:r,xName:l,yKey:c,yName:h,...x,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:a,marker:o}=this.properties,r=!o.enabled||void 0===o.fill;return{marker:{shape:o.shape,fill:r?t:o.fill,fillOpacity:r?i:o.fillOpacity,stroke:o.stroke??e,strokeOpacity:o.strokeOpacity,strokeWidth:o.strokeWidth,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset,enabled:o.enabled||n<=0},line:{stroke:e,strokeOpacity:s,strokeWidth:n,lineDash:a}}}getLegendData(t){if(!this.properties.isValid()||"category"!==t)return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:a,legendItemName:o,showInLegend:r}=this.properties;return[{legendType:t,id:e,itemId:n,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:n}),label:{text:o??a??n},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!r}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),Dy(this,a,...n),Cs([e],Sy),by(this,a,e),fm(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:s,contextData:n,paths:a,previousContextData:o}=t,[r,l]=a;if(null==r&&null==l)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateAreaPaths(a,n)},h=()=>{e.skipCurrentBatch(),c()};if(null==n||null==o)return c(),xy(this,e,"added",i),Ay(this,"fill_path_properties",e,"add",r),Ay(this,"stroke_path_properties",e,"add",l),void fm(this,"labels",e,s);if(n.crossFiltering!==o.crossFiltering)return void h();const d=fy(n,o);void 0!==d?"no-op"!==d.status&&(xy(this,e,void 0,i),Le(this.id,"fill_path_properties",e,[r],d.fill.pathProperties),ym(this.id,"fill_path_update",e,[r],d.fill.path),Le(this.id,"stroke_path_properties",e,[l],d.stroke.pathProperties),ym(this.id,"stroke_path_update",e,[l],d.stroke.path),fm(this,"labels",e,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,n)})):h()}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new In}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=t,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,{...Ac(t,e,i,s,n),highlighted:!0})}computeFocusBounds(t){return Iy(this,t)}};ky.className="AreaSeries",ky.type="area";var wy={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:t=>new ky(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:kg,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}},paletteFactory:t=>{const{marker:e}=mm(t),i=t.themeTemplateParameters.get(_g);return{fill:e.fill,stroke:e.stroke,marker:e,defaultColorRange:i}}};function Cy(t,e){for(const i of e){const e=i.datum;void 0===e?n.error("undefined datum"):t.addValue(i,e)}}function Ty(t,e){const{x:i,y:s}=e,{nearest:n,distanceSquared:a}=t.getQuadTree().find(i,s);if(void 0!==n)return{datum:n.value,distance:Math.sqrt(a)}}var Ey=class extends Su{constructor(){super(...arguments),this.direction="vertical"}};s([Ti(vs)],Ey.prototype,"direction",2);var Oy=class extends Du{constructor(){super(...arguments),this.groupScale=new Ai,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(t,e){const i="boolean"==typeof e?1:.5,s=P(this.smallestDataInterval)?this.smallestDataInterval*i:0,n=lu(t)??[NaN,NaN];return"boolean"==typeof e?n[e?0:1]-=(e?1:-1)*s:(n[0]-=s,n[1]+=s),hh(n)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}getBandwidth(t){return Te.is(t.scale)?t.scale.calcBandwidth(this.smallestDataInterval):t.scale.bandwidth}xCoordinateRange(t){const e=this.axes[this.getCategoryDirection()],i=e.scale,s=this.getBandwidth(e)??0,n=Te.is(i)?-.5*s:0,a=i.convert(t)+n;return[a,a+s]}yCoordinateRange(t){const e=this.axes[this.getBarDirection()].scale,i=t.map((t=>e.convert(t)));if(1===i.length){const t=e.convert(0);return[Math.min(i[0],t),Math.max(i[0],t)]}return[Math.min(...i),Math.max(...i)]}updateGroupScale(t){const e=[],{groupScale:i}=this,s=this.getBandwidth(t),{index:n,visibleGroupCount:a}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let o=0;o<a;o++)e.push(String(o));i.domain=e,i.range=[0,s??0],t instanceof jp?i.paddingInner=t.groupPaddingInner:t instanceof $o?(i.paddingInner=t.groupPaddingInner,i.round=0!==i.padding):i.padding=0;return{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:n}}resolveKeyDirection(t){return"x"===this.getBarDirection()?"x"===t?"y":"x":t}initQuadTree(t){Cy(t,this.datumNodesIter())}pickNodeClosestDatum(t){return Ty(this,t)}},Ry=class extends Wa{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};s([Ti(Is(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],Ry.prototype,"placement",2),s([Ti(Gi)],Ry.prototype,"padding",2);var jy=class extends Ey{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new bm,this.label=new Ry,this.tooltip=new Sm,this.sparklineMode=!1,this.fastDataProcessing=!1}};function Py(t,e,i,s){if(null!=e){const[t,i]=e;if(0!==t||1!==i)return!1}if(Te.is(t)){const e=t.calcBandwidth(s)-t.calcBandwidth(i);if(e>0&&e<1)return!1}return!0}s([Ti(Fi)],jy.prototype,"xKey",2),s([Ti(Fi,{optional:!0})],jy.prototype,"xName",2),s([Ti(Fi)],jy.prototype,"yKey",2),s([Ti(Fi,{optional:!0})],jy.prototype,"yName",2),s([Ti(Fi,{optional:!0})],jy.prototype,"yFilterKey",2),s([Ti(Fi,{optional:!0})],jy.prototype,"stackGroup",2),s([Ti(Gi,{optional:!0})],jy.prototype,"normalizedTo",2),s([Ti(ts)],jy.prototype,"fill",2),s([Ti(Vi)],jy.prototype,"fillOpacity",2),s([Ti(ts)],jy.prototype,"stroke",2),s([Ti(Wi)],jy.prototype,"strokeWidth",2),s([Ti(Vi)],jy.prototype,"strokeOpacity",2),s([Ti(ds)],jy.prototype,"lineDash",2),s([Ti(Wi)],jy.prototype,"lineDashOffset",2),s([Ti(Wi)],jy.prototype,"cornerRadius",2),s([Ti(zi,{optional:!0})],jy.prototype,"crisp",2),s([Ti(Bi,{optional:!0})],jy.prototype,"itemStyler",2),s([Ti(ji,{optional:!0})],jy.prototype,"shadow",2),s([Ti(ji)],jy.prototype,"label",2),s([Ti(ji)],jy.prototype,"tooltip",2),s([Ti(zi)],jy.prototype,"sparklineMode",2),s([Ti(zi)],jy.prototype,"fastDataProcessing",2);var zy=t=>Lt(t.yValue??0);function By(t,e,i){const{startingX:s,startingY:n}=function(t,e){const i=e[t?"y":"x"];let s=1/0,n=0;if(!i)return{startingX:s,startingY:n};t?n=i.scale.convert(Te.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(Te.is(i.scale)?0:Math.min(...i.range));return{startingX:s,startingY:n}}(t,e);return{isVertical:t,calculate:(e,i)=>{let a=t?e.x:s,o=t?n:e.y,r=t?e.width:0,l=t?0:e.height;const{opacity:c=1}=e;let h;return i&&(isNaN(a)||isNaN(o))&&(({x:a,y:o}=i),r=t?i.width:0,l=t?0:i.height,t&&!zy(i)?o+=i.height:!t&&zy(i)&&(a+=i.width)),h=null==e.clipBBox?void 0:zy(e)?t?new Et(a,o-l,r,l):new Et(a-r,o,r,l):new Et(a,o,r,l),{x:a,y:o,width:r,height:l,clipBBox:h,opacity:c}},mode:i}}function Fy(t,e){return{isVertical:t,calculate:e=>({x:t?e.x:e.x+e.width/2,y:t?e.y+e.height/2:e.y,width:t?e.width:0,height:t?0:e.height,clipBBox:e.clipBBox,opacity:e.opacity??1}),mode:e}}function Gy(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,s,n)=>"removed"===n&&null==i.datum&&"fade"===t.mode?{...Uy(i,s),opacity:0}:"removed"===n||e(s)?t.calculate(s,i.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height,clipBBox:s.clipBBox,opacity:s.opacity??1},fromFn:(i,s,n)=>{let a;"updated"===n&&e(s)?n="removed":"updated"===n&&e(i.previousDatum)&&(n="added"),a="added"===n&&null==i.previousDatum&&"fade"===t.mode?{...Uy(i,s),opacity:0}:"unknown"===n||"added"===n?t.calculate(s,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,clipBBox:i.clipBBox,opacity:i.opacity??1};const o=Ae[n];return{...a,phase:o}},applyFn:(t,e,i)=>{var s;t.setProperties(e),t.crisp="end"===i&&((null==(s=t.datum)?void 0:s.crisp)??!1)}}}function Uy(t,{x:e,y:i,width:s,height:n,clipBBox:a,opacity:o=1}){var r;return{x:e,y:i,width:s,height:n,clipBBox:a,opacity:o,crisp:(null==(r=t.datum)?void 0:r.crisp)??!1}}function Yy(t,e){if(void 0===e)return;const{x:i,y:s,width:n,height:a}=e;return vn.toCanvas(t.contentGroup,new Et(i,s,n,a))}function Wy(t,e,i){if(e.enabled&&i){const{x:s,y:n,text:a,textAlign:o,textBaseline:r}=i,{color:l,fontStyle:c,fontWeight:h,fontSize:d,fontFamily:u}=e;t.setProperties({visible:!0,x:s,y:n,text:a,fill:l,fontStyle:c,fontWeight:h,fontSize:d,fontFamily:u,textAlign:o,textBaseline:r})}else t.visible=!1}var Vy={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function _y({isUpward:t,isVertical:e,placement:i,padding:s=0,rect:n}){let a=n.x+n.width/2,o=n.y+n.height/2,r="center",l="middle";if("inside-center"!==i){const c=(t?1:-1)*(e?-1:1),{direction:h,textAlignment:d}=Vy[i],u=.5*(h+1);if(e){o=(t?n.y+n.height:n.y)+n.height*c*u+s*d*c,l=d===c?"top":"bottom"}else{a=(t?n.x:n.x+n.width)+n.width*c*u+s*d*c,r=d===c?"left":"right"}}return{x:a,y:o,textAlign:r,textBaseline:l}}var Hy=class extends Oy{constructor(t){super({moduleCtx:t,directionKeys:vu,directionNames:bu,pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Uy,label:vm}}),this.properties=new jy,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(t){var e,i,s,n,a,o;if(!this.properties.isValid()||!this.data)return;const{xKey:r,yKey:l,yFilterKey:c,normalizedTo:h,fastDataProcessing:d}=this.properties,{seriesGrouping:{groupIndex:u=this.id}={},data:p}=this,g=(null==(e=this.seriesGrouping)?void 0:e.groupCount)??0,m=((null==(i=this.seriesGrouping)?void 0:i.stackCount)??0)>=1||null!=h,y=!d||g>1||m,f=!this.ctx.animationManager.isSkipped(),x=null==(s=this.getCategoryAxis())?void 0:s.scale,v=null==(n=this.getValueAxis())?void 0:n.scale,{isContinuousX:b,xScaleType:M,yScaleType:S}=this.getScaleInformation({xScale:x,yScale:v}),I=`bar-stack-${u}-yValues`,D=`${I}-trailing`,A=this.visible?{}:{forceValue:0},L=[Xu(r,M,{id:"xValue"}),Qu(l,S,{id:"yValue-raw",invalidValue:null,...A})];this.crossFilteringEnabled()&&L.push(Qu(c,S,{id:"yFilterValue",invalidValue:null,...A})),m&&L.push(...ip(l,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:I,separateNegative:!0,...A},S),...ip(l,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:D,separateNegative:!0,...A},S)),b&&L.push(np,ap),P(h)&&L.push(lp([I,D],Math.abs(h))),f&&this.processedData&&L.push(bp(this.id,this.processedData)),!f&&y||L.push(up());const{dataModel:N,processedData:k}=await this.requestDataModel(t,p,{props:L,groupByKeys:y,groupByData:!y});this.dataAggregationFilters=this.aggregateData(N,k),this.smallestDataInterval=null==(a=k.reduced)?void 0:a.smallestKeyInterval,this.largestDataInterval=null==(o=k.reduced)?void 0:o.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){var e;const{processedData:i,dataModel:s}=this;if(null==s||null==i)return[];if(t===this.getCategoryDirection()){const t=s.resolveProcessedDataDefById(this,"xValue"),e=s.getDomain(this,"xValue","key",i);return"key"===(null==t?void 0:t.def.type)&&"category"===t.def.valueType?e:this.padBandExtent(e)}const n=(null==(e=this.dataModel)?void 0:e.hasColumnById(this,"yValue-end"))?"yValue-end":"yValue-raw";let a=this.domainForClippedRange("y",[n],"xValue",!0);const o=this.crossFilteringEnabled()?s.getDomain(this,"yFilterValue","value",i):void 0;if(null!=o&&(a=[Math.min(a[0],o[0]),Math.max(a[1],o[1])]),this.getValueAxis()instanceof zp)return hh(a);return hh(Number.isFinite(a[1]-a[0])?[Math.min(0,a[0]),Math.max(0,a[1])]:[])}getSeriesRange(t,e){var i;const s=(null==(i=this.dataModel)?void 0:i.hasColumnById(this,"yValue-end"))?"yValue-end":"yValue-raw",[n,a]=this.domainForVisibleRange("y",[s],"xValue",e,!0);return[Math.min(n,0),Math.max(a,0)]}getVisibleItems(t,e,i){var s;const n=(null==(s=this.dataModel)?void 0:s.hasColumnById(this,"yValue-end"))?"yValue-end":"yValue-raw";return this.countVisibleItems("xValue",[n],t,e,i)}aggregateData(t,e){}createNodeData(){var t;const{dataModel:e,processedData:i,groupScale:s,dataAggregationFilters:n}=this,a=this.getCategoryAxis(),o=this.getValueAxis();if(!(e&&i&&a&&o&&this.properties.isValid()))return;const r=null==(t=i.dataSources)?void 0:t.get(this.id);if(null==r)return;const l=a.scale,c=o.scale,{xKey:h,yKey:d,xName:u,yName:p,legendItemName:g,label:m}=this.properties,y=o.isReversed(),{barWidth:f,groupIndex:x}=this.updateGroupScale(a),v=s.convert(String(x)),b=Te.is(l)?-.5*f:0,M=e.resolveKeysById(this,"xValue",i),S=e.resolveColumnById(this,"yValue-raw",i),I=this.crossFilteringEnabled()?e.resolveColumnById(this,"yFilterValue",i):void 0,D=!this.ctx.animationManager.isSkipped(),A=t=>l.convert(M[t])+v+b,L=this.properties.crisp??Py(null==a?void 0:a.scale,null==a?void 0:a.visibleRange,this.smallestDataInterval,this.largestDataInterval),N=c.convert(0),k=({datum:t,datumIndex:e,valueIndex:i,xValue:s,yValue:n,cumulativeValue:a,phantom:o,currY:r,prevY:l,x:u,width:p,isPositive:g,yRange:f,labelText:x,opacity:v,crossScale:b=1})=>{const M=g!==y,S=c.convert(r),I=c.convert(l),D=c.convert(f),A="x"===this.getBarDirection(),k=.5*p*(1-b),w={x:A?Math.min(S,I):u+k,y:A?u+k:Math.min(S,I),width:A?Math.abs(I-S):p*b,height:A?p*b:Math.abs(I-S)},C=new Et(w.x,w.y,w.width,w.height),T={x:A?Math.min(N,D):u+k,y:A?u+k:Math.min(N,D),width:A?Math.abs(N-D):p*b,height:A?p*b:Math.abs(N-D)},E=this.shouldFlipXY()?w.height:w.width;return{series:this,itemId:o?Mp(d,o):d,datum:t,datumIndex:e,valueIndex:i,cumulativeValue:a,phantom:o,xValue:s,yValue:n,yKey:d,xKey:h,capDefaults:{lengthRatioMultiplier:E,lengthMax:E},x:T.x,y:T.y,width:T.width,height:T.height,midPoint:{x:w.x+w.width/2,y:w.y+w.height/2},opacity:v,topLeftCornerRadius:A!==M,topRightCornerRadius:M,bottomRightCornerRadius:A===M,bottomLeftCornerRadius:!M,clipBBox:C,crisp:L,label:null!=x?{text:x,..._y({isUpward:M,isVertical:!A,placement:m.placement,padding:m.padding,rect:w})}:void 0,missing:null==n,focusable:!o}},w=[],C=[],T=[],E=(t,e,i,s,n,a,o,l)=>{const c=M[t];if(null==c)return;const m=S[t],y=null!=I?Number(I[t]):void 0,f=m>=0&&!Object.is(m,-0);if(!Number.isFinite(a))return;if(null!=y&&!Number.isFinite(y))return;const x=null!=m?this.getLabelText(this.properties.label,{datum:r[t],value:y??m,xKey:h,yKey:d,xName:u,yName:p,legendItemName:g}):void 0,v=null!=y&&y>m,b=k({datum:r[t],datumIndex:t,valueIndex:e,xValue:c,yValue:y??m,cumulativeValue:y??a,phantom:!1,currY:null!=y?n+y:a,prevY:n,x:i,width:s,isPositive:f,yRange:Math.max(n+(y??-1/0),o),labelText:x,opacity:l,crossScale:v?.6:void 0});if(C.push(b),T.push(b),null!=y){const h=k({datum:r[t],datumIndex:t,valueIndex:e,xValue:c,yValue:y,cumulativeValue:y,phantom:!0,currY:a,prevY:n,x:i,width:s,isPositive:f,yRange:o,labelText:void 0,opacity:l,crossScale:void 0});w.push(h)}},[O,R]=l.range,j=R-O,P=null==n?void 0:n.find((t=>t.maxRange>j));if("grouped"===i.type){const t=f,s=e.hasColumnById(this,"yValue-start"),n=s?e.resolveColumnById(this,"yValue-start",i):void 0,a=s?e.resolveColumnById(this,"yValue-end",i):void 0,o=s?e.resolveProcessedDataIndexById(this,"yValue-range"):-1;for(const{datumIndex:r,valueIndex:l,group:{aggregation:c}}of e.forEachGroupDatum(this,i)){const e=A(r),i=S[r],h=i>=0&&!Object.is(i,-0),d=s?Number(null==n?void 0:n[r]):0,u=s?Number(null==a?void 0:a[r]):i;let p=u;s&&(p=c[o][h?1:0]),E(r,l,e,t,d,u,p,1)}}else if(null==P){const t=f;let[e,s]=this.visibleRange("xValue",a.range);i.input.count<1e3&&(e=0,s=i.input.count);for(let i=e;i<s;i+=1){const e=A(i),s=Number(S[i]);E(i,0,e,t,0,s,s,1)}}else{const{indexData:t,indices:e}=P,[i,s]=this.visibleRange("xValue",a.range,e);for(let n=i;n<s;n+=1){const e=4*n,i=t[e+0],s=t[e+1],a=t[e+2],o=t[e+3];if(-1===i)continue;const r=A((i+s)/2|0),l=Math.abs(A(s)-A(i))+f,c=null!=M[o]?Number(S[o]):NaN,h=null!=M[a]?Number(S[a]):NaN;if(c>0){E(o,0,r,l,0,c,c,h>=0?h/c:1)}if(h<0){E(a,1,r,l,0,h,h,c<=0?c/h:1)}}}return{itemId:d,nodeData:w.length>0?[...w,...C]:C,labelData:T,scales:this.calculateScaling(),visible:this.visible||D,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new Yp}getHighlightData(t,e){const i=t.find((t=>t.datum===e.datum&&!t.phantom));return null!=i?[i]:void 0}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,(t=>this.getDatumId(t)))}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i}=e,s=t?e.highlightStyle.item:void 0;return{fill:(null==s?void 0:s.fill)??e.fill,fillOpacity:(null==s?void 0:s.fillOpacity)??e.fillOpacity,stroke:(null==s?void 0:s.stroke)??e.stroke,strokeWidth:(null==s?void 0:s.strokeWidth)??this.getStrokeWidth(e.strokeWidth),strokeOpacity:(null==s?void 0:s.strokeOpacity)??e.strokeOpacity,lineDash:(null==s?void 0:s.lineDash)??e.lineDash??[],lineDashOffset:(null==s?void 0:s.lineDashOffset)??e.lineDashOffset,cornerRadius:i}}getItemStyleOverrides(t,e,i,s,n,a){const{id:o,properties:r}=this,{xKey:l,yKey:c,itemStyler:h}=r;if(null==h)return;const{xDomain:d,yDomain:u}=this.cachedDatumCallback("domain",(()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})));return this.cachedDatumCallback(Mp(t,a?"highlight":"node"),(()=>h({seriesId:o,...Ac(e,l,c,d,u),xValue:i,yValue:s,highlighted:a,...n})))}updateDatumNodes(t){if(!this.properties.isValid())return;const{shadow:e}=this.properties,i="x"===this.getCategoryDirection(),s=this.getItemBaseStyle(t.isHighlight);t.datumSelection.each(((n,a)=>{var o,r;const l=this.getItemStyleOverrides(String(a.datumIndex),a.datum,a.xValue,a.yValue,s,t.isHighlight);n.opacity=a.opacity??0,ig(n,s,l);const c=(null==l?void 0:l.cornerRadius)??s.cornerRadius;n.topLeftCornerRadius=a.topLeftCornerRadius?c:0,n.topRightCornerRadius=a.topRightCornerRadius?c:0,n.bottomRightCornerRadius=a.bottomRightCornerRadius?c:0,n.bottomLeftCornerRadius=a.bottomLeftCornerRadius?c:0,n.visible=i?((null==(o=a.clipBBox)?void 0:o.width)??a.width)>0:((null==(r=a.clipBBox)?void 0:r.height)??a.height)>0,n.crisp=a.crisp,n.fillShadow=e}))}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,(t=>{t.pointerEvents=1}))}updateLabelNodes(t){t.labelSelection.each(((t,e)=>{Wy(t,this.properties.label,e.label)}))}getTooltipContent(t){var e;const{id:i,dataModel:s,processedData:n,properties:a}=this,{xKey:o,xName:r,yKey:l,yName:c,legendItemName:h,stackGroup:d,tooltip:u}=a,p=this.getCategoryAxis(),g=this.getValueAxis();if(!(s&&n&&p&&g))return;const{datumIndex:m}=t,y=null==(e=n.dataSources.get(this.id))?void 0:e[m],f=s.resolveKeysById(this,"xValue",n)[m],x=s.resolveColumnById(this,"yValue-raw",n)[m];if(null==f)return;const v=this.getItemBaseStyle(!1);return Object.assign(v,this.getItemStyleOverrides(String(m),y,f,x,v,!1)),u.formatTooltip({heading:p.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:g.formatDatum(x)}]},{seriesId:i,datum:y,title:c,xKey:o,xName:r,yKey:l,yName:c,legendItemName:h,stackGroup:d,...v,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,fillOpacity:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}=this.properties;return{marker:{fill:t,fillOpacity:s,stroke:e,strokeWidth:i,strokeOpacity:n,lineDash:a,lineDashOffset:o}}}getLegendData(t){const{showInLegend:e}=this.properties;if("category"!==t||!this.properties.isValid())return[];const{id:i,ctx:{legendManager:s},visible:n}=this,{yKey:a,yName:o,legendItemName:r}=this.properties;return[{legendType:"category",id:i,itemId:a,seriesId:i,enabled:n&&s.getItemEnabled({seriesId:i,itemId:a}),label:{text:r??o??a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!e}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,annotationSelections:i}){const s=Gy(By(this.isVertical(),this.axes,"normal"));Le(this.id,"nodes",this.ctx.animationManager,[t],s),fm(this,"labels",this.ctx.animationManager,e),fm(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){var e,i,s,n,a;const{datumSelection:o,labelSelection:r,annotationSelections:l,previousContextData:c}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);let h=null==(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff)?void 0:s[this.id];null==h&&null!=(null==(a=null==(n=this.processedData)?void 0:n.reduced)?void 0:a.diff)&&(h={changed:!0,added:new Set(Array.from(o,(({datum:t})=>this.getDatumId(t)))),updated:new Set,removed:new Set,moved:new Set});const d=null==c?"fade":"normal",u=Gy(By(this.isVertical(),this.axes,d));Le(this.id,"nodes",this.ctx.animationManager,[o],u,((t,e)=>this.getDatumId(e)),h);const p=!(null==c||ay(t.contextData.scales.x,c.scales.x)&&ay(t.contextData.scales.y,c.scales.y)&&ay(t.contextData.groupScale,t.previousContextData.groupScale));(((null==h?void 0:h.changed)??!1)||p)&&(fm(this,"labels",this.ctx.animationManager,r),fm(this,"annotations",this.ctx.animationManager,...l))}getDatumId(t){return Mp(t.xValue,t.valueIndex,t.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){var e;return Yy(this,null==(e=this.contextNodeData)?void 0:e.nodeData[t].clipBBox)}};Hy.className="BarSeries",Hy.type="bar";var Zy={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new Hy(t),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:pm([{type:"number",position:"left"},{type:"category",position:"bottom"}],(t=>"horizontal"===(null==t?void 0:t.direction))),themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"backgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:kg,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:gm},Ky=class extends eg{constructor(){super(...arguments),this.maxSize=30}};s([Ti(Wi),Ot()],Ky.prototype,"maxSize",2),s([Ti(ns,{optional:!0}),Ot()],Ky.prototype,"domain",2);var $y=class extends Wa{constructor(){super(...arguments),this.placement="top"}};s([Ti(Ss)],$y.prototype,"placement",2);var Xy=class extends Su{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new $y,this.tooltip=new Sm,this.marker=new Ky}};s([Ti(Fi)],Xy.prototype,"xKey",2),s([Ti(Fi)],Xy.prototype,"yKey",2),s([Ti(Fi)],Xy.prototype,"sizeKey",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"labelKey",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"colorKey",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"xFilterKey",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"yFilterKey",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"sizeFilterKey",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"xName",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"yName",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"sizeName",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"labelName",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"colorName",2),s([Ti(ns,{optional:!0})],Xy.prototype,"colorDomain",2),s([Ti(is)],Xy.prototype,"colorRange",2),s([Ti(Fi,{optional:!0})],Xy.prototype,"title",2),s([_n("marker.shape")],Xy.prototype,"shape",2),s([_n("marker.size")],Xy.prototype,"size",2),s([_n("marker.maxSize")],Xy.prototype,"maxSize",2),s([_n("marker.domain",{optional:!0})],Xy.prototype,"domain",2),s([_n("marker.fill",{optional:!0})],Xy.prototype,"fill",2),s([_n("marker.fillOpacity")],Xy.prototype,"fillOpacity",2),s([_n("marker.stroke",{optional:!0})],Xy.prototype,"stroke",2),s([_n("marker.strokeWidth")],Xy.prototype,"strokeWidth",2),s([_n("marker.strokeOpacity")],Xy.prototype,"strokeOpacity",2),s([_n("marker.lineDash")],Xy.prototype,"lineDash",2),s([_n("marker.lineDashOffset")],Xy.prototype,"lineDashOffset",2),s([_n("marker.itemStyler",{optional:!0})],Xy.prototype,"itemStyler",2),s([Ti(ji)],Xy.prototype,"label",2),s([Ti(ji)],Xy.prototype,"tooltip",2);var Qy=class extends Mu{constructor(t,e,i,s){super(t,e,i,s),this.sizeKey=s.properties.sizeKey}},qy=class extends Du{constructor(t){super({moduleCtx:t,directionKeys:vu,directionNames:bu,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:vm,marker:My},usesPlacedLabels:!0}),this.NodeEvent=Qy,this.clipFocusBox=!1,this.properties=new Xy,this.sizeScale=new ru,this.colorScale=new Gs}get pickModeAxis(){return"main-category"}async processData(t){var e,i;if(!this.properties.isValid()||null==this.data||!this.visible)return;const s=null==(e=this.axes.x)?void 0:e.scale,n=null==(i=this.axes.y)?void 0:i.scale,{xScaleType:a,yScaleType:o}=this.getScaleInformation({xScale:s,yScale:n}),r=this.colorScale.type,l=this.sizeScale.type,{xKey:c,yKey:h,sizeKey:d,xFilterKey:u,yFilterKey:p,sizeFilterKey:g,labelKey:m,colorDomain:y,colorRange:f,colorKey:x,marker:v}=this.properties,{dataModel:b,processedData:M}=await this.requestDataModel(t,this.data,{props:[Qu(c,a,{id:"xValue"}),Qu(h,o,{id:"yValue"}),...null!=u?[Qu(u,a,{id:"xFilterValue"})]:[],...null!=p?[Qu(p,o,{id:"yFilterValue"})]:[],...null!=g?[Qu(g,l,{id:"sizeFilterValue"})]:[],Qu(d,l,{id:"sizeValue"}),...x?[Qu(x,r,{id:"colorValue"})]:[],...m?[Qu(m,"band",{id:"labelValue"})]:[]]}),S=b.resolveProcessedDataIndexById(this,"sizeValue"),I=M.domain.values[S]??[];if(this.sizeScale.domain=v.domain?v.domain:I,x){const t=b.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=y??M.domain.values[t]??[],this.colorScale.range=f,this.colorScale.update()}this.animationState.transition("updateData")}xCoordinateRange(t,e,i){const{properties:s,sizeScale:n}=this,{size:a,sizeKey:o}=s,r=this.axes.x.scale.convert(t),l=null!=o?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,c=.5*(null!=l?n.convert(l[i]):a)*e;return[r-c,r+c]}yCoordinateRange(t,e,i){const{properties:s,sizeScale:n}=this,{size:a,sizeKey:o}=s,r=this.axes.y.scale.convert(t[0]),l=null!=o?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,c=.5*(null!=l?n.convert(l[i]):a)*e;return[r-c,r+c]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s={x:"xValue",y:"yValue"},n=s[t],a=e.resolveProcessedDataDefById(this,n),o=e.getDomain(this,n,"value",i);if("value"===(null==a?void 0:a.def.type)&&"category"===(null==a?void 0:a.def.valueType))return o;const r=s["x"===t?"y":"x"];return hh(lu(this.domainForClippedRange(t,[n],r,!1)))}getSeriesRange(t,e){return this.domainForVisibleRange("y",["yValue"],"xValue",e,!1)}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["yValue"],t,e,i)}createNodeData(){var t;const{axes:e,dataModel:i,processedData:s,colorScale:n,sizeScale:a,visible:o}=this,{xKey:r,yKey:l,sizeKey:c,xFilterKey:h,yFilterKey:d,sizeFilterKey:u,labelKey:p,xName:g,yName:m,sizeName:y,labelName:f,label:x,colorKey:v,marker:b}=this.properties,{placement:M}=x,S=Ad.anchor(b.shape),I=e.x,D=e.y;if(!(i&&s&&o&&I&&D))return;const A=i.resolveColumnById(this,"xValue",s),L=i.resolveColumnById(this,"yValue",s),N=null!=c?i.resolveColumnById(this,"sizeValue",s):void 0,k=null!=v?i.resolveColumnById(this,"colorValue",s):void 0,w=null!=p?i.resolveColumnById(this,"labelValue",s):void 0,C=null!=h?i.resolveColumnById(this,"xFilterValue",s):void 0,T=null!=d?i.resolveColumnById(this,"yFilterValue",s):void 0,E=null!=u?i.resolveColumnById(this,"sizeFilterValue",s):void 0,O=I.scale,R=D.scale,j=(O.bandwidth??0)/2,P=(R.bandwidth??0)/2,z=[];a.range=[b.size,b.maxSize];const B=x.getFont(),F=wn.getMeasurer({font:B});return null==(t=s.dataSources.get(this.id))||t.forEach(((t,e)=>{const i=A[e],s=L[e],o=null==N?void 0:N[e],h=O.convert(i)+j,d=R.convert(s)+P;let u;null!=C&&null!=T&&(u=C[e]===i&&T[e]===s,null!=E&&u&&(u=E[e]===o));const v=this.getLabelText(x,{value:null!=w?w[e]:s,datum:t,xKey:r,yKey:l,sizeKey:c,labelKey:p,xName:g,yName:m,sizeName:y,labelName:f}),I=F.measureText(String(v)),D=null!=o?a.convert(o):b.size,B=null!=k?n.convert(k[e]):void 0;z.push({series:this,itemId:l,yKey:l,xKey:r,datum:t,datumIndex:e,xValue:i,yValue:s,sizeValue:o,point:{x:h,y:d,size:D},midPoint:{x:h,y:d},fill:B,label:{text:v,...I},anchor:S,placement:M,selected:u})})),{itemId:l,nodeData:z,labelData:z,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return this.isLabelEnabled()?(null==(t=this.contextNodeData)?void 0:t.labelData)??[]:[]}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?e:[];return i.update(s,void 0,(t=>Mp([t.xValue,t.yValue,t.label.text])))}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0;return{fill:(null==s?void 0:s.fill)??i.fill,fillOpacity:(null==s?void 0:s.fillOpacity)??i.fillOpacity,stroke:(null==s?void 0:s.stroke)??i.stroke,strokeWidth:(null==s?void 0:s.strokeWidth)??i.strokeWidth,strokeOpacity:(null==s?void 0:s.strokeOpacity)??i.strokeOpacity,lineDash:(null==s?void 0:s.lineDash)??i.lineDash,lineDashOffset:(null==s?void 0:s.lineDashOffset)??i.lineDashOffset}}getMarkerItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{xKey:o,yKey:r,sizeKey:l,labelKey:c,marker:h}=a,{itemStyler:d}=h;if(null!=d)return this.cachedDatumCallback(Mp(t,s?"highlight":"node"),(()=>d({seriesId:n,datum:e,xKey:o,yKey:r,sizeKey:l,labelKey:c,highlighted:s,...i})))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,sizeKey:a,labelKey:o,marker:r}=this.properties,{size:l,shape:c,fill:h,fillOpacity:d,stroke:u,strokeWidth:p,strokeOpacity:g,lineDash:m,lineDashOffset:y}=te(i&&this.properties.highlightStyle.item,r.getStyle()),f={size:l,shape:c,fill:h,fillOpacity:d,stroke:u,strokeWidth:p,strokeOpacity:g,lineDash:m,lineDashOffset:y};this.sizeScale.range=[r.size,r.maxSize],e.each(((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:s,yKey:n,sizeKey:a,labelKey:o},f,{selected:e.selected})})),i||this.properties.marker.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map((t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}}))),(t=>{t.pointerEvents=1})),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{label:e}=this.properties;t.labelSelection.each(((t,i)=>{var s,n;t.text=i.label.text,t.fill=e.color,t.x=(null==(s=i.point)?void 0:s.x)??0,t.y=(null==(n=i.point)?void 0:n.y)??0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"}))}getTooltipContent(t){var e;const{id:i,dataModel:s,processedData:n,axes:a,properties:o}=this,{xKey:r,xName:l,yKey:c,yName:h,sizeKey:d,sizeName:u,labelKey:p,labelName:g,title:m,tooltip:y}=o,f=a.x,x=a.y;if(!(s&&n&&f&&x))return;const{datumIndex:v}=t,b=null==(e=n.dataSources.get(this.id))?void 0:e[v],M=s.resolveColumnById(this,"xValue",n)[v],S=s.resolveColumnById(this,"yValue",n)[v];if(null==M)return;const I=[{label:l,fallbackLabel:r,value:f.formatDatum(M)},{label:h,fallbackLabel:c,value:x.formatDatum(S)}];if(null!=d){const t=s.resolveColumnById(this,"sizeValue",n)[v];I.push({label:u,fallbackLabel:d,value:String(t)})}const D=this.getMarkerItemBaseStyle(!1);return Object.assign(D,this.getMarkerItemStyleOverrides(String(v),b,D,!1)),y.formatTooltip({title:m,symbol:this.legendItemSymbol(),data:I},{seriesId:i,datum:b,title:c,xKey:r,xName:l,yKey:c,yName:h,sizeKey:d,sizeName:u,labelKey:p,labelName:g,...D,...this.getModuleTooltipParams()})}legendItemSymbol(){const{marker:t}=this.properties,{shape:e,fill:i,stroke:s,fillOpacity:n,strokeOpacity:a,strokeWidth:o,lineDash:r,lineDashOffset:l}=t;return{marker:{shape:e,fill:i??"rgba(0, 0, 0, 0)",stroke:s??"rgba(0, 0, 0, 0)",fillOpacity:n,strokeOpacity:a,strokeWidth:o,lineDash:r,lineDashOffset:l}}}getLegendData(){if(!this.properties.isValid())return[];const{id:t,ctx:{legendManager:e},visible:i}=this,{yKey:s,yName:n,title:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i&&e.getItemEnabled({seriesId:t,itemId:s}),label:{text:a??n??s},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({markerSelection:t,labelSelection:e}){vy(this,this.ctx.animationManager,t),fm(this,"labels",this.ctx.animationManager,e)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new In}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,sizeKey:s,labelKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,sizeKey:s,labelKey:n,highlighted:!1})}computeFocusBounds(t){return Iy(this,t)}};qy.className="BubbleSeries",qy.type="bubble";var Jy={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:t=>new qy(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}},paletteFactory:gm},tf=class extends Su{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new bm,this.label=new Wa,this.tooltip=new Sm}};s([Ti(Fi)],tf.prototype,"xKey",2),s([Ti(Fi,{optional:!0})],tf.prototype,"yKey",2),s([Ti(Fi,{optional:!0})],tf.prototype,"xName",2),s([Ti(Fi,{optional:!0})],tf.prototype,"yName",2),s([Ti(ts,{optional:!0})],tf.prototype,"fill",2),s([Ti(Vi)],tf.prototype,"fillOpacity",2),s([Ti(ts,{optional:!0})],tf.prototype,"stroke",2),s([Ti(Wi)],tf.prototype,"strokeWidth",2),s([Ti(Vi)],tf.prototype,"strokeOpacity",2),s([Ti(ds)],tf.prototype,"lineDash",2),s([Ti(Wi)],tf.prototype,"lineDashOffset",2),s([Ti(Wi)],tf.prototype,"cornerRadius",2),s([Ti(zi)],tf.prototype,"areaPlot",2),s([Ti(Hi,{optional:!0})],tf.prototype,"bins",2),s([Ti(Is(["count","sum","mean"],"a histogram aggregation"))],tf.prototype,"aggregation",2),s([Ti(Wi,{optional:!0})],tf.prototype,"binCount",2),s([Ti(ji)],tf.prototype,"shadow",2),s([Ti(ji)],tf.prototype,"label",2),s([Ti(ji)],tf.prototype,"tooltip",2);var ef=class extends Du{constructor(t){super({moduleCtx:t,directionKeys:vu,directionNames:bu,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Uy,label:vm}}),this.properties=new tf,this.calculatedBins=[]}deriveBins(t){const e=va(t[0],t[1],10),i=Ma(t[0],t[1],10),[s]=e;return[[s-i,s],...e.map((t=>[t,t+i]))]}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],n=e||1,{start:a,binSize:o}=this.calculateNiceStart(i,s,n);return this.getBins(a,s,o,n)}getBins(t,e,i,s){const n=[],a=this.calculatePrecision(i);for(let o=0;o<s;o++){const r=Math.round((t+o*i)*a)/a;let l=Math.round((t+(o+1)*i)*a)/a;o===s-1&&(l=Math.max(l,e)),n[o]=[r,l]}return n}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return{start:Math.floor(t/a)*a,binSize:s}}async processData(t){var e,i;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:s,yKey:n,areaPlot:a,aggregation:o}=this.properties,r=null==(e=this.axes.x)?void 0:e.scale,l=null==(i=this.axes.y)?void 0:i.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({yScale:l,xScale:r}),d=[Xu(s,c),op];if(n){let t=Uu("groupAgg");"count"===o||("sum"===o?t=Gu("groupAgg"):"mean"===o&&(t=Yu("groupAgg"))),a&&(t=Wu("groupAgg",t)),d.push(Qu(n,h,{invalidValue:void 0}),t)}else{d.push(qu("count"));let t=Uu("groupAgg");a&&(t=Wu("groupAgg",t)),d.push(t)}!this.ctx.animationManager.isSkipped()&&this.processedData&&d.push(bp(this.id,this.processedData,!1)),await this.requestDataModel(t,this.data,{props:d,groupByFn:t=>{const e=hh(t.domain.keys[0]);if(0===e.length)return t.domain.groups=[],()=>[];const i=j(this.properties.binCount)?this.calculateNiceBins(e,this.properties.binCount):this.properties.bins??this.deriveBins(e),s=i.length;return this.calculatedBins=[...i],t=>{let e=t[0];if(w(e)&&(e=e.getTime()),!j(e))return[];for(let n=0;n<s;n++){const t=i[n];if(e>=t[0]&&e<t[1])return t;if(n===s-1&&e<=t[1])return t}return[]}}}),this.animationState.transition("updateData")}xCoordinateRange(){return[NaN,NaN]}yCoordinateRange(){return[NaN,NaN]}getSeriesDomain(t){var e,i,s;const{processedData:n,dataModel:a}=this;if(!n||!a||!this.calculatedBins.length)return[];const o=a.getDomain(this,"groupAgg","aggregate",n),r=null==(e=this.calculatedBins)?void 0:e[0][0],l=null==(s=this.calculatedBins)?void 0:s[((null==(i=this.calculatedBins)?void 0:i.length)??0)-1][1];return hh("x"===t?[r,l]:o)}getSeriesRange(t,[e,i]){const{dataModel:s,processedData:n}=this;if(!s||"grouped"!==(null==n?void 0:n.type))return[NaN,NaN];const a=this.axes.x.scale;let o=-1/0;return n.groups.forEach((({keys:t,aggregation:s})=>{const[[n,r]=[0,0]]=s,[l,c]=t,[h,d]=St([a.convert(l),a.convert(c)]);if(d>=e&&h<=i){const t=n+r;o=Math.max(o,t)}})),0>o?[NaN,NaN]:[0,o]}createNodeData(){const{id:t,axes:e,processedData:i,dataModel:s}=this,n=e.x,a=e.y;if(!n||!a||!s)return;const{scale:o}=n,{scale:r}=a,{xKey:l,yKey:c,xName:h,yName:d}=this.properties,u=this.properties.label.formatter??(t=>String(t.value)),p=[],g={itemId:this.properties.yKey??this.id,nodeData:p,labelData:p,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return this.visible&&null!=i&&"grouped"===i.type?(i.groups.forEach(((e,n)=>{const{keys:g,datumIndices:m,aggregation:y}=e,[[f,x]=[0,0]]=y,v=m.length,b=g,[M,S]=b,I=[...s.forEachDatum(this,i,e)],D=o.convert(M),A=o.convert(S),L=f+x,N=r.convert(0),k=r.convert(L),w=Math.abs(A-D),C=Math.abs(k-N),T=Math.min(D,A),E=Math.min(N,k);let O;0!==L&&(O={x:T+w/2,y:E+C/2,text:this.cachedDatumCallback(Mp(n,"label"),(()=>u({value:L,datum:I,seriesId:t,xKey:l,yKey:c,xName:h,yName:d})))??String(L)});const R={x:T+w/2,y:E+C/2},j=a.isReversed();p.push({series:this,datumIndex:n,datum:I,aggregatedValue:L,frequency:v,domain:b,yKey:c,xKey:l,x:T,y:E,xValue:D,yValue:k,width:w,height:C,midPoint:R,topLeftCornerRadius:!j,topRightCornerRadius:!j,bottomRightCornerRadius:j,bottomLeftCornerRadius:j,label:O,crisp:!0})})),p.sort(((t,e)=>t.x-e.x)),g):g}nodeFactory(){return new Yp}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t;return i.update(e,void 0,(t=>t.domain.join("_")))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{fill:(null==i?void 0:i.fill)??e.fill,fillOpacity:(null==i?void 0:i.fillOpacity)??e.fillOpacity,stroke:(null==i?void 0:i.stroke)??e.stroke,strokeWidth:(null==i?void 0:i.strokeWidth)??this.getStrokeWidth(e.strokeWidth),strokeOpacity:(null==i?void 0:i.strokeOpacity)??e.strokeOpacity,lineDash:(null==i?void 0:i.lineDash)??e.lineDash,lineDashOffset:(null==i?void 0:i.lineDashOffset)??e.lineDashOffset,cornerRadius:e.cornerRadius}}updateDatumNodes(t){const{isHighlight:e}=t,{shadow:i}=this.properties,s=this.getItemBaseStyle(e);t.datumSelection.each(((t,e)=>{const{cornerRadius:n}=s,{topLeftCornerRadius:a,topRightCornerRadius:o,bottomRightCornerRadius:r,bottomLeftCornerRadius:l}=e;ig(t,s),t.topLeftCornerRadius=a?n:0,t.topRightCornerRadius=o?n:0,t.bottomRightCornerRadius=r?n:0,t.bottomLeftCornerRadius=l?n:0,t.crisp=e.crisp,t.fillShadow=i,t.visible=e.height>0}))}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.pointerEvents=1,t.textAlign="center",t.textBaseline="middle"}))}updateLabelNodes(t){const{fontStyle:e,fontWeight:i,fontFamily:s,fontSize:n,color:a}=this.properties.label,o=this.isLabelEnabled();t.labelSelection.each(((t,r)=>{o&&(null==r?void 0:r.label)?(t.text=r.label.text,t.x=r.label.x,t.y=r.label.y,t.fontStyle=e,t.fontWeight=i,t.fontFamily=s,t.fontSize=n,t.fill=a,t.visible=!0):t.visible=!1}))}initQuadTree(t){const{value:e}=this.contentGroup.children().next();e&&Cy(t,e.children())}pickNodeClosestDatum(t){return Ty(this,t)}getTooltipContent(t){const{id:e,dataModel:i,processedData:s,axes:n,properties:a,ctx:{localeManager:o}}=this,{xKey:r,xName:l,yKey:c,yName:h,tooltip:d}=a,u=n.x,p=n.y;if(!i||"grouped"!==(null==s?void 0:s.type)||!u||!p)return;const g=t.datumIndex,m=s.groups[g],{aggregation:y,datumIndices:f,keys:x}=m,[[v,b]=[0,0]]=y,M=f.length,S=x,[I,D]=S,A=v+b,L={data:[...i.forEachDatum(this,s,m)],aggregatedValue:A,frequency:M,domain:S},N=[{label:l,fallbackLabel:r,value:`${u.formatDatum(I)} - ${u.formatDatum(D)}`},{label:o.t("seriesHistogramTooltipFrequency"),value:p.formatDatum(M)}];if(null!=c){let t;switch(a.aggregation){case"sum":t=o.t("seriesHistogramTooltipSum",{yName:h});break;case"mean":t=o.t("seriesHistogramTooltipMean",{yName:h});break;case"count":t=o.t("seriesHistogramTooltipCount",{yName:h})}N.push({label:t,value:p.formatDatum(A)})}return d.formatTooltip({symbol:this.legendItemSymbol(),data:N},{seriesId:e,datum:L,title:h,xKey:r,xName:l,yKey:c,yName:h,xRange:[I,D],frequency:M,...this.getItemBaseStyle(!1)})}legendItemSymbol(){const{fill:t,fillOpacity:e,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}=this.properties;return{marker:{fill:t??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:e,strokeOpacity:n,strokeWidth:s,lineDash:a,lineDashOffset:o}}}getLegendData(t){if("category"!==t)return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{xKey:n,yName:a,showInLegend:o}=this.properties;return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:n}),label:{text:a??n??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!o}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=Gy(By(!0,this.axes,"normal"));Le(this.id,"datums",this.ctx.animationManager,[t],i),fm(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i,s;const n=null==(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff)?void 0:s[this.id],a=Gy(By(!0,this.axes,"normal"));Le(this.id,"datums",this.ctx.animationManager,[t.datumSelection],a,((t,e)=>Mp(e.domain)),n),fm(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){var e;return Yy(this,null==(e=this.contextNodeData)?void 0:e.nodeData[t])}};ef.className="HistogramSeries",ef.type="histogram";var sf={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:t=>new ef(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},shadow:{enabled:!1,color:kg,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}},nf=class extends Su{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Am,this.marker=new eg,this.label=new Wa,this.tooltip=new Sm,this.connectMissingData=!1,this.sparklineMode=!1}};s([Ti(Fi)],nf.prototype,"xKey",2),s([Ti(Fi)],nf.prototype,"yKey",2),s([Ti(Fi,{optional:!0})],nf.prototype,"xName",2),s([Ti(Fi,{optional:!0})],nf.prototype,"yName",2),s([Ti(Fi,{optional:!0})],nf.prototype,"yFilterKey",2),s([Ti(Fi,{optional:!0})],nf.prototype,"stackGroup",2),s([Ti(Wi,{optional:!0})],nf.prototype,"normalizedTo",2),s([Ti(Fi,{optional:!0})],nf.prototype,"title",2),s([Ti(ts)],nf.prototype,"stroke",2),s([Ti(Wi)],nf.prototype,"strokeWidth",2),s([Ti(Vi)],nf.prototype,"strokeOpacity",2),s([Ti(ds)],nf.prototype,"lineDash",2),s([Ti(Wi)],nf.prototype,"lineDashOffset",2),s([Ti(ji)],nf.prototype,"interpolation",2),s([Ti(ji)],nf.prototype,"marker",2),s([Ti(ji)],nf.prototype,"label",2),s([Ti(ji)],nf.prototype,"tooltip",2),s([Ti(zi)],nf.prototype,"connectMissingData",2),s([Ti(zi)],nf.prototype,"sparklineMode",2);var af=class extends Du{constructor(t){super({moduleCtx:t,directionKeys:vu,directionNames:bu,hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:Ly({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:vm,marker:(t,e)=>({opacity:1,scalingX:1,scalingY:1,...Sy(0,e)})}}),this.clipFocusBox=!1,this.properties=new nf,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(t){var e,i;if(null==this.data||!this.properties.isValid())return;const{data:s,visible:n,seriesGrouping:{groupIndex:a=this.id,stackCount:o=0}={}}=this,{xKey:r,yKey:l,yFilterKey:c,connectMissingData:h,normalizedTo:d}=this.properties,u=!this.ctx.animationManager.isSkipped(),p=null==(e=this.axes.x)?void 0:e.scale,g=null==(i=this.axes.y)?void 0:i.scale,{isContinuousX:m,xScaleType:y,yScaleType:f}=this.getScaleInformation({xScale:p,yScale:g}),x=o>=1||null!=d,v={invalidValue:null};h&&x&&(v.invalidValue=0),x&&!n&&(v.forceValue=0);const b=[];if(m&&!x||b.push(Xu(r,y,{id:"xKey"})),b.push(Qu(r,y,{id:"xValue"}),Qu(l,f,{id:"yValueRaw",...v,invalidValue:void 0})),null!=c&&b.push(Qu(c,f,{id:"yFilterRaw"})),x){const t=[`line-stack-${a}-yValues`,`line-stack-${a}-yValues-trailing`,`line-stack-${a}-yValues-marker`];b.push(...ip(l,"window","current",{id:"yValueEnd",...v,groupId:t[0]},f),...ip(l,"window-trailing","current",{id:"yValueStart",...v,groupId:t[1]},f),...ip(l,"normal","current",{id:"yValueCumulative",...v,groupId:t[2]},f)),L(d)&&b.push(lp([t[0],t[1],t[2]],d))}u&&(b.push(up(m?["xValue"]:void 0)),this.processedData&&b.push(bp(this.id,this.processedData)));const{dataModel:M,processedData:S}=await this.requestDataModel(t,s,{props:b,groupByKeys:x,groupByData:!x});this.dataAggregationFilters=this.aggregateData(M,S),this.animationState.transition("updateData")}xCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.x.scale.convert(t),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}yCoordinateRange(t,e){const{marker:i}=this.properties,s=this.axes.y.scale.convert(t[0]),n=i.enabled?.5*i.size*e:0;return[s-n,s+n]}getSeriesDomain(t){var e;const{dataModel:i,processedData:s}=this;if(!i||!s)return[];if("x"===t){const t=i.resolveProcessedDataDefById(this,"xValue"),e=i.getDomain(this,"xValue","value",s);return"value"===(null==t?void 0:t.def.type)&&"category"===t.def.valueType?e:hh(lu(e))}const n=(null==(e=this.dataModel)?void 0:e.hasColumnById(this,"yValueEnd"))?"yValueEnd":"yValueRaw";return hh(this.domainForClippedRange("y",[n],"xValue",!0))}getSeriesRange(t,e){var i;const s=(null==(i=this.dataModel)?void 0:i.hasColumnById(this,"yValueEnd"))?"yValueEnd":"yValueRaw";return this.domainForVisibleRange("y",[s],"xValue",e,!0)}getVisibleItems(t,e,i){var s;const n=(null==(s=this.dataModel)?void 0:s.hasColumnById(this,"yValueEnd"))?"yValueEnd":"yValueRaw";return this.countVisibleItems("xValue",[n],t,e,i)}aggregateData(t,e){}createNodeData(){var t;const{dataModel:e,processedData:i,axes:s,dataAggregationFilters:n}=this,a=s.x,o=s.y;if(!(e&&i&&a&&o))return;const{xKey:r,yKey:l,yFilterKey:c,xName:h,yName:d,marker:u,label:p,connectMissingData:g,interpolation:m,legendItemName:y}=this.properties,f=null==(t=this.dataModel)?void 0:t.hasColumnById(this,"yValueEnd"),x=a.scale,v=o.scale,b=(x.bandwidth??0)/2,M=(v.bandwidth??0)/2,S=u.enabled?u.size:0,I=i.dataSources.get(this.id)??[],D=e.resolveColumnById(this,"xValue",i),A=e.resolveColumnById(this,"yValueRaw",i),L=f?e.resolveColumnById(this,"yValueEnd",i):void 0,N=f?e.resolveColumnById(this,"yValueCumulative",i):A,k=null!=c?e.resolveColumnById(this,"yFilterRaw",i):void 0,w={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},C=[];let T;const E=t=>{const e=I[t],i=D[t],s=A[t],n=null==L?void 0:L[t],a=null==k?void 0:k[t],o=(c=t,x.convert(D[c])+b);var c;const u=(t=>v.convert(N[t])+M)(t);if(!Number.isFinite(o))return;if(null!=s){const c=p.enabled?this.getLabelText(p,{value:s,datum:e,xKey:r,yKey:l,xName:h,yName:d,legendItemName:y}):void 0;C.push({series:this,datum:e,datumIndex:t,yKey:l,xKey:r,point:{x:o,y:u,size:S},midPoint:{x:o,y:u},cumulativeValue:n,yValue:s,xValue:i,capDefaults:w,labelText:c,selected:a})}if(null==T)return;const m=T[T.length-1];if(null!=s){const t={point:{x:o,y:u},xDatum:i,yDatum:s};Array.isArray(m)?m.push(t):null!=m?(m.skip+=1,T.push([t])):T.push([t])}else g||(Array.isArray(m)||null==m?T.push({skip:0}):m.skip+=1)},[O,R]=x.range,j=R-O,P=null==n?void 0:n.find((t=>t.maxRange>j)),z=null==P?void 0:P.indices;let[B,F]=this.visibleRange("xValue",a.range,z);B=Math.max(B-1,0),F=Math.min(F+1,(null==z?void 0:z.length)??D.length),i.input.count<1e3&&(B=0,F=i.input.count),null==z&&(T=[]);for(let W=B;W<F;W+=1)E((null==z?void 0:z[W])??W);const G=null==T?void 0:T.flatMap((t=>Array.isArray(t)?ry(t,m):[])),U=null!=G?{itemId:l,spans:G}:void 0,Y=(null==k?void 0:k.some(((t,e)=>t===A[e])))??!1;return{itemId:l,nodeData:C,labelData:C,strokeData:U,scales:this.calculateScaling(),visible:this.visible,crossFiltering:Y}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){var e;const{paths:[i],opacity:s,visible:n,animationEnabled:a}=t,o=!0===(null==(e=this.contextNodeData)?void 0:e.crossFiltering);i.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:s,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(o?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),a||(i.visible=n),Ny(this,i)}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0;return{size:i.size,shape:i.shape,fill:(null==s?void 0:s.fill)??i.fill,fillOpacity:(null==s?void 0:s.fillOpacity)??i.fillOpacity,stroke:(null==s?void 0:s.stroke)??i.stroke,strokeWidth:(null==s?void 0:s.strokeWidth)??i.strokeWidth,strokeOpacity:(null==s?void 0:s.strokeOpacity)??i.strokeOpacity,lineDash:(null==s?void 0:s.lineDash)??i.lineDash,lineDashOffset:(null==s?void 0:s.lineDashOffset)??i.lineDashOffset}}getMarkerItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{xKey:o,yKey:r,marker:l}=a,{itemStyler:c}=l;if(null!=c)return this.cachedDatumCallback(Mp(t,s?"highlight":"node"),(()=>{const t=this.getSeriesDomain("x"),a=this.getSeriesDomain("y");return c({seriesId:n,...Ac(e,o,r,t,a),highlighted:s,...i})}))}updateMarkerSelection(t){var e;let{nodeData:i}=t;const{markerSelection:s}=t;return i=this.properties.marker.enabled||!0===(null==(e=this.contextNodeData)?void 0:e.crossFiltering)?i:[],this.properties.marker.isDirty()&&(s.clear(),s.cleanup()),s.update(i,void 0,(t=>Mp(t.xValue)))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,stroke:a,strokeWidth:o,strokeOpacity:r,marker:l,highlightStyle:c}=this.properties,h=this.getSeriesDomain("x"),d=this.getSeriesDomain("y"),u=te(i&&c.item,l.getStyle(),{stroke:a,strokeWidth:o,strokeOpacity:r}),p=this.ctx.animationManager.isSkipped();e.each(((t,e)=>{this.updateMarkerStyle(t,l,{...Ac(e,s,n,h,d),highlighted:i},u,{applyTranslation:p,selected:e.selected})})),i||l.markClean()}updateLabelSelection(t){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}updateLabelNodes(t){const{enabled:e,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,color:o}=this.properties.label;t.labelSelection.each(((t,r)=>{e&&(null==r?void 0:r.labelText)?(t.fontStyle=i,t.fontWeight=s,t.fontSize=n,t.fontFamily=a,t.textAlign="center",t.textBaseline="bottom",t.text=r.labelText,t.x=r.point.x,t.y=r.point.y-10,t.fill=o,t.visible=!0):t.visible=!1}))}getTooltipContent(t){var e;const{id:i,dataModel:s,processedData:n,axes:a,properties:o}=this,{xKey:r,xName:l,yKey:c,yName:h,tooltip:d}=o,u=a.x,p=a.y;if(!(s&&n&&u&&p))return;const{datumIndex:g}=t,m=null==(e=n.dataSources.get(this.id))?void 0:e[g],y=s.resolveColumnById(this,"xValue",n)[g],f=s.resolveColumnById(this,"yValueRaw",n)[g];if(null==y)return;const x=this.getMarkerItemBaseStyle(!1);return Object.assign(x,this.getMarkerItemStyleOverrides(String(g),m,x,!1)),d.formatTooltip({heading:u.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:h,fallbackLabel:c,value:p.formatDatum(f)}]},{seriesId:i,datum:m,title:h,xKey:r,xName:l,yKey:c,yName:h,...x,...this.getModuleTooltipParams()})}legendItemSymbol(){const t="rgba(0, 0, 0, 0)",{stroke:e,strokeOpacity:i,strokeWidth:s,lineDash:n,marker:a}=this.properties;return{marker:{shape:a.shape,fill:a.fill??t,stroke:a.stroke??e??t,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset,enabled:a.enabled},line:{stroke:e??t,strokeOpacity:i,strokeWidth:s,lineDash:n}}}getLegendData(t){if(!this.properties.isValid()||"category"!==t)return[];const{id:e,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:a,title:o,legendItemName:r,showInLegend:l}=this.properties;return[{legendType:"category",id:e,itemId:n,legendItemName:r,seriesId:e,enabled:s&&i.getItemEnabled({seriesId:e,itemId:n}),label:{text:r??o??a??n},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(t){this.updateLinePaths(t.paths,t.contextData)}plotNodeDataPoints(t,e){if(0===e.length)return;const i=e[0].point;t.moveTo(i.x,i.y);for(let s=1;s<e.length;s+=1){const{x:i,y:n}=e[s].point;t.lineTo(i,n)}}updateLinePaths(t,e){var i;const s=null==(i=e.strokeData)?void 0:i.spans,[n]=t;n.path.clear(),null!=s?cy(n,s):this.plotNodeDataPoints(n.path,e.nodeData),n.markDirty()}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s,contextData:n,paths:a}=t,{animationManager:o}=this.ctx;this.updateLinePaths(a,n),Dy(this,o,...a),Cs([e],Sy),by(this,o,e),fm(this,"labels",o,i),fm(this,"annotations",o,...s)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i,s;const{animationManager:n}=this.ctx,{markerSelection:a,labelSelection:o,annotationSelections:r,contextData:l,paths:c,previousContextData:h}=t,[d]=c;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const u=()=>{this.resetPathAnimation(t),this.updateLinePaths(c,l)},p=()=>{n.skipCurrentBatch(),u()};if(null==l||null==h)return u(),xy(this,n,"added",a),Ay(this,"path_properties",n,"add",d),fm(this,"labels",n,o),void fm(this,"annotations",n,...r);if(l.crossFiltering!==h.crossFiltering)return void p();const g=py(l,h,null==(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff)?void 0:s[this.id]);void 0!==g?"no-op"!==g.status&&(Le(this.id,"path_properties",n,[d],g.stroke.pathProperties),"added"===g.status?this.updateLinePaths(c,l):"removed"===g.status?this.updateLinePaths(c,h):ym(this.id,"path_update",n,[d],g.stroke.path),g.hasMotion&&(xy(this,n,void 0,a),fm(this,"labels",n,o),fm(this,"annotations",n,...r))):p()}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new In}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=this.properties,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,{...Ac(t,e,i,s,n),highlighted:!0})}computeFocusBounds(t){return Iy(this,t)}};af.className="LineSeries",af.type="line";var of={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new af(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{const{marker:e}=mm(t);return{stroke:e.fill,marker:e}}},rf=class extends Wa{constructor(){super(...arguments),this.placement="top"}};s([Ti(Ss)],rf.prototype,"placement",2);var lf=class extends Su{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new rf,this.tooltip=new Sm,this.marker=new eg}};s([Ti(Fi)],lf.prototype,"xKey",2),s([Ti(Fi)],lf.prototype,"yKey",2),s([Ti(Fi,{optional:!0})],lf.prototype,"labelKey",2),s([Ti(Fi,{optional:!0})],lf.prototype,"colorKey",2),s([Ti(Fi,{optional:!0})],lf.prototype,"xFilterKey",2),s([Ti(Fi,{optional:!0})],lf.prototype,"yFilterKey",2),s([Ti(Fi,{optional:!0})],lf.prototype,"xName",2),s([Ti(Fi,{optional:!0})],lf.prototype,"yName",2),s([Ti(Fi,{optional:!0})],lf.prototype,"labelName",2),s([Ti(Fi,{optional:!0})],lf.prototype,"colorName",2),s([Ti(ns,{optional:!0})],lf.prototype,"colorDomain",2),s([Ti(is)],lf.prototype,"colorRange",2),s([Ti(Fi,{optional:!0})],lf.prototype,"title",2),s([_n("marker.shape")],lf.prototype,"shape",2),s([_n("marker.size")],lf.prototype,"size",2),s([_n("marker.fill")],lf.prototype,"fill",2),s([_n("marker.fillOpacity")],lf.prototype,"fillOpacity",2),s([_n("marker.stroke")],lf.prototype,"stroke",2),s([_n("marker.strokeWidth")],lf.prototype,"strokeWidth",2),s([_n("marker.strokeOpacity")],lf.prototype,"strokeOpacity",2),s([_n("marker.lineDash")],lf.prototype,"lineDash",2),s([_n("marker.lineDashOffset")],lf.prototype,"lineDashOffset",2),s([_n("marker.itemStyler",{optional:!0})],lf.prototype,"itemStyler",2),s([Ti(ji)],lf.prototype,"label",2),s([Ti(ji)],lf.prototype,"tooltip",2);var cf=class extends Du{constructor(t){super({moduleCtx:t,directionKeys:vu,directionNames:bu,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:My,label:vm},usesPlacedLabels:!0}),this.clipFocusBox=!1,this.properties=new lf,this.colorScale=new Gs}get pickModeAxis(){return"main-category"}async processData(t){var e,i;if(!this.properties.isValid()||null==this.data||!this.visible)return;const s=null==(e=this.axes.x)?void 0:e.scale,n=null==(i=this.axes.y)?void 0:i.scale,{xScaleType:a,yScaleType:o}=this.getScaleInformation({xScale:s,yScale:n}),r=this.colorScale.type,{xKey:l,yKey:c,xFilterKey:h,yFilterKey:d,labelKey:u,colorKey:p,colorDomain:g,colorRange:m}=this.properties,{dataModel:y,processedData:f}=await this.requestDataModel(t,this.data,{props:[Qu(l,a,{id:"xValue"}),Qu(c,o,{id:"yValue"}),...null!=h?[Qu(h,a,{id:"xFilterValue"})]:[],...null!=d?[Qu(d,o,{id:"yFilterValue"})]:[],...p?[Qu(p,r,{id:"colorValue"})]:[],...u?[Qu(u,"band",{id:"labelValue"})]:[]]});if(p){const t=y.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=g??f.domain.values[t]??[],this.colorScale.range=m,this.colorScale.update()}this.animationState.transition("updateData")}xCoordinateRange(t,e){const i=this.axes.x.scale.convert(t),s=.5*this.properties.size*e;return[i-s,i+s]}yCoordinateRange(t,e){const i=this.axes.y.scale.convert(t[0]),s=.5*this.properties.size*e;return[i-s,i+s]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s={x:"xValue",y:"yValue"},n=s[t],a=e.resolveProcessedDataDefById(this,n),o=e.getDomain(this,n,"value",i);if("value"===(null==a?void 0:a.def.type)&&"category"===(null==a?void 0:a.def.valueType))return o;const r=s["x"===t?"y":"x"];return hh(lu(this.domainForClippedRange(t,[n],r,!1)))}getSeriesRange(t,e){return this.domainForVisibleRange("y",["yValue"],"xValue",e,!1)}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["yValue"],t,e,i)}createNodeData(){const{axes:t,dataModel:e,processedData:i,colorScale:s,visible:n}=this,{xKey:a,yKey:o,xFilterKey:r,yFilterKey:l,labelKey:c,colorKey:h,xName:d,yName:u,labelName:p,marker:g,label:m}=this.properties,{placement:y}=m,f=Ad.anchor(g.shape),x=t.x,v=t.y;if(!(e&&i&&n&&x&&v))return;const b=e.resolveColumnById(this,"xValue",i),M=e.resolveColumnById(this,"yValue",i),S=null!=h?e.resolveColumnById(this,"colorValue",i):void 0,I=null!=c?e.resolveColumnById(this,"labelValue",i):void 0,D=null!=r?e.resolveColumnById(this,"xFilterValue",i):void 0,A=null!=l?e.resolveColumnById(this,"yFilterValue",i):void 0,L=x.scale,N=v.scale,k=(L.bandwidth??0)/2,w=(N.bandwidth??0)/2,C=[],T=m.getFont(),E=wn.getMeasurer({font:T});return(i.dataSources.get(this.id)??[]).forEach(((t,e)=>{const i=b[e],n=M[e],r=L.convert(i)+k,l=N.convert(n)+w,h=null!=D&&null!=A?D[e]===i&&A[e]===n:void 0,x=this.getLabelText(m,{value:null!=I?null==I?void 0:I[e]:n,datum:t,xKey:a,yKey:o,labelKey:c,xName:d,yName:u,labelName:p}),v=E.measureText(x),T=null!=S?s.convert(S[e]):void 0;C.push({series:this,itemId:o,yKey:o,xKey:a,datum:t,datumIndex:e,xValue:i,yValue:n,capDefaults:{lengthRatioMultiplier:g.getDiameter(),lengthMax:1/0},point:{x:r,y:l,size:g.size},midPoint:{x:r,y:l},fill:T,label:{text:x,...v},anchor:f,placement:y,selected:h})})),{itemId:o,nodeData:C,labelData:C,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return this.isLabelEnabled()?(null==(t=this.contextNodeData)?void 0:t.labelData)??[]:[]}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,s=t?e.highlightStyle.item:void 0;return{fill:(null==s?void 0:s.fill)??i.fill,fillOpacity:(null==s?void 0:s.fillOpacity)??i.fillOpacity,stroke:(null==s?void 0:s.stroke)??i.stroke,strokeWidth:(null==s?void 0:s.strokeWidth)??i.strokeWidth,strokeOpacity:(null==s?void 0:s.strokeOpacity)??i.strokeOpacity,lineDash:(null==s?void 0:s.lineDash)??i.lineDash,lineDashOffset:(null==s?void 0:s.lineDashOffset)??i.lineDashOffset}}getMarkerItemStyleOverrides(t,e,i,s){const{id:n,properties:a}=this,{xKey:o,yKey:r,labelKey:l,marker:c}=a,{itemStyler:h}=c;if(null!=h)return this.cachedDatumCallback(Mp(t,s?"highlight":"node"),(()=>h({seriesId:n,datum:e,xKey:o,yKey:r,labelKey:l,highlighted:s,...i})))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,labelKey:a,marker:o,highlightStyle:r}=this.properties,l=te(i&&r.item,o.getStyle());e.each(((t,e)=>{this.updateMarkerStyle(t,o,{datum:e,highlighted:i,xKey:s,yKey:n,labelKey:a},l,{selected:e.selected})})),i||o.markClean()}updatePlacedLabelData(t){this.labelSelection.update(t.map((t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}}))),(t=>{t.pointerEvents=1})),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{label:e}=this.properties;t.labelSelection.each(((t,i)=>{var s,n;t.text=i.label.text,t.fill=e.color,t.x=(null==(s=i.point)?void 0:s.x)??0,t.y=(null==(n=i.point)?void 0:n.y)??0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"}))}getTooltipContent(t){var e;const{id:i,dataModel:s,processedData:n,axes:a,properties:o}=this,{xKey:r,xName:l,yKey:c,yName:h,labelKey:d,labelName:u,title:p,tooltip:g}=o,m=a.x,y=a.y;if(!(s&&n&&m&&y))return;const{datumIndex:f}=t,x=null==(e=n.dataSources.get(this.id))?void 0:e[f],v=s.resolveColumnById(this,"xValue",n)[f],b=s.resolveColumnById(this,"yValue",n)[f];if(null==v)return;const M=this.getMarkerItemBaseStyle(!1);return Object.assign(M,this.getMarkerItemStyleOverrides(String(f),x,M,!1)),g.formatTooltip({symbol:this.legendItemSymbol(),title:p,data:[{label:l,fallbackLabel:r,value:m.formatDatum(v)},{label:h,fallbackLabel:c,value:y.formatDatum(b)}]},{seriesId:i,datum:x,title:h,xKey:r,xName:l,yKey:c,yName:h,labelKey:d,labelName:u,...M,...this.getModuleTooltipParams()})}legendItemSymbol(){const{shape:t,fill:e,stroke:i,fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r}=this.properties.marker;return{marker:{shape:t,fill:e??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:s,strokeOpacity:n,strokeWidth:a,lineDash:o,lineDashOffset:r}}}getLegendData(t){if(!this.properties.isValid()||"category"!==t)return[];const{yKey:e,yName:i,title:s,showInLegend:n}=this.properties,{id:a,ctx:{legendManager:o},visible:r}=this;return[{legendType:"category",id:a,itemId:e,seriesId:a,enabled:r&&o.getItemEnabled({seriesId:a,itemId:e}),label:{text:s??i??e},symbol:this.legendItemSymbol(),hideInLegend:!n}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s}=t;vy(this,this.ctx.animationManager,e),fm(this,"labels",this.ctx.animationManager,i),fm(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new In}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,labelKey:s,highlighted:!0})}computeFocusBounds(t){return Iy(this,t)}};cf.className="ScatterSeries",cf.type="scatter";var hf={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:t=>new cf(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:gm},df=class t{constructor(t,e,i,s){this.startAngle=t,this.endAngle=e,this.innerRadius=i,this.outerRadius=s}clone(){const{startAngle:e,endAngle:i,innerRadius:s,outerRadius:n}=this;return new t(e,i,s,n)}equals(t){return this.startAngle===t.startAngle&&this.endAngle===t.endAngle&&this.innerRadius===t.innerRadius&&this.outerRadius===t.outerRadius}[yt](e,i){return new t(this.startAngle*(1-i)+e.startAngle*i,this.endAngle*(1-i)+e.endAngle*i,this.innerRadius*(1-i)+e.innerRadius*i,this.outerRadius*(1-i)+e.outerRadius*i)}};function uf({startAngle:t,endAngle:e,innerRadius:i,outerRadius:s}){let n=1/0,a=1/0,o=-1/0,r=-1/0;const l=(t,e)=>{n=Math.min(t,n),a=Math.min(e,a),o=Math.max(t,o),r=Math.max(e,r)};return l(i*Math.cos(t),i*Math.sin(t)),l(i*Math.cos(e),i*Math.sin(e)),l(s*Math.cos(t),s*Math.sin(t)),l(s*Math.cos(e),s*Math.sin(e)),Zs(0,t,e)&&l(s,0),Zs(.5*Math.PI,t,e)&&l(0,s),Zs(Math.PI,t,e)&&l(-s,0),Zs(1.5*Math.PI,t,e)&&l(0,-s),new Et(n,a,o-n,r-a)}function pf(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:a}=i;if(i.startAngle===i.endAngle||s<Math.min(n,a)||s>Math.max(n,a))return!1;const o=Hs(i.startAngle),r=Hs(i.endAngle),l=Math.atan2(e,t);return o<r?l<=r&&l>=o:l<=r&&l>=-Math.PI||l>=o&&l<=Math.PI}function gf(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=e,o={x:a*Math.cos(i),y:a*Math.sin(i)},r={x:a*Math.cos(s),y:a*Math.sin(s)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=0===n?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return id(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||id(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,c.x,c.y)||ad(0,0,a,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function mf(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},a={x:t.x+t.width,y:t.y+t.height};return gf({start:i,end:s},e)||gf({start:n,end:a},e)}function yf(t,e,i,s){if(0===i&&0===s)return 0;if(Math.asin(Math.abs(1*i)/(t+1*i))+Math.asin(Math.abs(1*s)/(t+1*s))-e<0)return 1;let n=0,a=1;for(let o=0;o<8;o+=1){const o=(n+a)/2;Math.asin(Math.abs(o*i)/(t+o*i))+Math.asin(Math.abs(o*s)/(t+o*s))-e<0?n=o:a=o}return n}function ff(t,e){return Xs(t,e)<1e-6?e:Vs(t-e)+e}function xf(t,e,i=0){const s=Math.abs(e-t)>=2*Math.PI?2*Math.PI:Vs(e-t);return{startAngle:t=ff(t,i),endAngle:e=t+s}}function vf(t,e,i,s,n,a){const o=Math.sin(a),r=Math.cos(a),l=t**2+e**2-i**2;let c,h,d,u;if(r>.5){const i=o/r,s=1+i**2,n=-2*(t+e*i),a=n**2-4*s*l;if(a<0)return;const p=(-n+Math.sqrt(a))/(2*s),g=(-n-Math.sqrt(a))/(2*s);c=p,h=p*i,d=g,u=g*i}else{const i=r/o,s=1+i**2,n=-2*(e+t*i),a=n**2-4*s*l;if(a<0)return;const p=(-n+Math.sqrt(a))/(2*s),g=(-n-Math.sqrt(a))/(2*s);c=p*i,h=p,d=g*i,u=g}const p=d*r+u*o,g=c*r+h*o>0?ff(Math.atan2(h-e,c-t),s):NaN,m=p>0?ff(Math.atan2(u-e,d-t),s):NaN;return g>=s&&g<=n?g:m>=s&&m<=n?m:void 0}function bf(t,e,i,s,n,a){const o=Math.hypot(t,e),r=o-(o**2-i**2+a**2)/(2*o),l=Math.atan2(e,t),c=Math.acos(-r/i),h=ff(l+c,s),d=ff(l-c,s);return h>=s&&h<=n?h:d>=s&&d<=n?d:void 0}var Mf=class{constructor(t,e,i,s,n){this.cx=t,this.cy=e,this.r=i,this.a0=s,this.a1=n,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){null==t||!this.isValid()||t<this.a0||(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){null==t||!this.isValid()||t>this.a1||(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},Sf=class extends pd{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){return uf(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:t}=this;let{innerRadius:e,outerRadius:i}=this;return e=e>0?e+t:0,i=Math.max(i-t,0),{innerRadius:e,outerRadius:i}}normalizedClipSector(){const{clipSector:t}=this;if(null==t)return;const{startAngle:e,endAngle:i}=xf(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:n}=this.normalizedRadii(),a=xf(t.startAngle,t.endAngle,e);return new df(Math.max(e,a.startAngle),Math.min(i,a.endAngle),Math.max(s,t.innerRadius),Math.min(n,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,e,i,s,n,a,o,r){if(t<=0)return;const{startAngle:l,endAngle:c}=xf(this.startAngle,this.endAngle),{innerRadius:h,outerRadius:d}=this.normalizedRadii(),u=this.normalizedClipSector();if(r&&h<=0)return;const p=r?this.getAngleOffset(h+t):this.getAngleOffset(d-t),g=o?l+p+e:c-p-e,m=r?h+t:d-t,y=m*Math.cos(g),f=m*Math.sin(g);if(null!=u){const t=1e-6;if(!(o||g>=l-t&&g<=u.endAngle-t))return;if(o&&!(g>=u.startAngle+t&&g<=c-t))return;if(r&&m<u.innerRadius-t)return;if(!r&&m>u.outerRadius+t)return}const x=new Mf(y,f,t,i,s);if(null!=u){let e,c;if(r?(x.clipStart(vf(y,f,t,i,s,u.endAngle)),x.clipEnd(vf(y,f,t,i,s,u.startAngle))):(x.clipStart(vf(y,f,t,i,s,u.startAngle)),x.clipEnd(vf(y,f,t,i,s,u.endAngle))),o?(e=bf(y,f,t,i,s,u.innerRadius),c=bf(y,f,t,i,s,u.outerRadius)):(e=bf(y,f,t,i,s,u.outerRadius),c=bf(y,f,t,i,s,u.innerRadius)),x.clipStart(e),x.clipEnd(c),null!=e){const{x:t,y:i}=x.pointAt(e),s=ff(Math.atan2(i,t),l);o?null==a||a.clipStart(s):n.clipEnd(s)}if(null!=c){const{x:t,y:e}=x.pointAt(c),i=ff(Math.atan2(e,t),l);o?n.clipStart(i):null==a||a.clipEnd(i)}}if(null!=u){const{x:t,y:e}=x.pointAt((x.a0+x.a1)/2);if(!pf(t,e,u))return}const{x:v,y:b}=x.pointAt(o===r?x.a0:x.a1),M=ff(Math.atan2(b,v),l),S=r?a:n;return o?null==S||S.clipStart(M):null==S||S.clipEnd(M),x}updatePath(){const t=1e-6,{path:e,centerX:i,centerY:s,concentricEdgeInset:n,radialEdgeInset:a}=this;let{startOuterCornerRadius:o,endOuterCornerRadius:r,startInnerCornerRadius:l,endInnerCornerRadius:c}=this;const{startAngle:h,endAngle:d}=xf(this.startAngle,this.endAngle),{innerRadius:u,outerRadius:p}=this.normalizedRadii(),g=this.normalizedClipSector(),m=d-h,y=m>=2*Math.PI-t;if(e.clear(),0===u&&0===p||u>p)return;if(((null==g?void 0:g.startAngle)??h)===((null==g?void 0:g.endAngle)??d))return;if(y&&null==this.clipSector&&0===o&&0===r&&0===l&&0===c)return e.moveTo(i+p*Math.cos(h),s+p*Math.sin(h)),e.arc(i,s,p,h,d),u>n&&(e.moveTo(i+u*Math.cos(d),s+u*Math.sin(d)),e.arc(i,s,u,d,h,!0)),void e.closePath();if(null==this.clipSector&&Math.abs(u-p)<1e-6)return e.arc(i,s,p,h,d,!1),e.arc(i,s,p,d,h,!0),void e.closePath();const f=this.getAngleOffset(u),x=this.getAngleOffset(p);if(m<2*x)return;const v=((null==g?void 0:g.innerRadius)??u)>n,b=u<n||m<2*f,M=p-u,S=Math.max(o,l,r,c),I=S>0?Math.min(M/S,1):1;o*=I,r*=I,l*=I,c*=I;const D=yf(p,m-2*x,-o,-r);if(o*=D,r*=D,!b&&v){const t=yf(u,m-2*f,l,c);l*=t,c*=t}else l=0,c=0;const A=Math.max(o+l,r+c),L=A>0?Math.min(M/A,1):1;o*=L,r*=L,l*=L,c*=L;let N=0,k=0;const w=o/(p-o),C=r/(p-r);if(w>=0&&w<.999999)N=Math.asin(w);else{N=m/2;const t=p/(1/Math.sin(N)+1);o=Math.min(t,o)}if(C>=0&&C<.999999)k=Math.asin(C);else{k=m/2;const t=p/(1/Math.sin(k)+1);r=Math.min(t,r)}const T=Math.asin(l/(u+l)),E=Math.asin(c/(u+c)),O=(null==g?void 0:g.outerRadius)??p,R=this.getAngleOffset(O),j=new Mf(0,0,O,h+R,d-R),P=(null==g?void 0:g.innerRadius)??u,z=this.getAngleOffset(P),B=v?new Mf(0,0,P,h+z,d-z):void 0;null!=g&&(j.clipStart(g.startAngle),j.clipEnd(g.endAngle),null==B||B.clipStart(g.startAngle),null==B||B.clipEnd(g.endAngle));const F=this.arc(o,N,h-.5*Math.PI,h+N,j,B,!0,!1),G=this.arc(r,k,d-k,d+.5*Math.PI,j,B,!1,!1),U=this.arc(c,E,d+.5*Math.PI,d+Math.PI-E,j,B,!1,!0),Y=this.arc(l,T,h+Math.PI+T,h+1.5*Math.PI,j,B,!0,!0);if(b){const t=m<.5*Math.PI?a*(1+Math.cos(m))/Math.sin(m):NaN;let n;n=t>0&&t<p?Math.max(Math.hypot(a,t),u):a,n=Math.max(n,u);const o=h+.5*m;e.moveTo(i+n*Math.cos(o),s+n*Math.sin(o))}else if(!0===(null==Y?void 0:Y.isValid())||!0===(null==B?void 0:B.isValid()));else{const t=h+m/2,n=u*Math.cos(t),a=u*Math.sin(t);e.moveTo(i+n,s+a)}if(!0===(null==F?void 0:F.isValid())){const{cx:t,cy:n,r:a,a0:o,a1:r}=F;e.arc(i+t,s+n,a,o,r)}if(j.isValid()){const{r:t,a0:n,a1:a}=j;e.arc(i,s,t,n,a)}if(!0===(null==G?void 0:G.isValid())){const{cx:t,cy:n,r:a,a0:o,a1:r}=G;e.arc(i+t,s+n,a,o,r)}if(!b){if(!0===(null==U?void 0:U.isValid())){const{cx:t,cy:n,r:a,a0:o,a1:r}=U;e.arc(i+t,s+n,a,o,r)}if(!0===(null==B?void 0:B.isValid())){const{r:t,a0:n,a1:a}=B;e.arc(i,s,t,a,n,!0)}if(!0===(null==Y?void 0:Y.isValid())){const{cx:t,cy:n,r:a,a0:o,a1:r}=Y;e.arc(i+t,s+n,a,o,r)}}e.closePath()}isPointInPath(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=this.clipSector??this;return pf(t-this.centerX,e-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(n,a),outerRadius:Math.max(n,a)})}};Sf.className="Sector",s([ud()],Sf.prototype,"centerX",2),s([ud()],Sf.prototype,"centerY",2),s([ud()],Sf.prototype,"innerRadius",2),s([ud()],Sf.prototype,"outerRadius",2),s([ud()],Sf.prototype,"startAngle",2),s([ud()],Sf.prototype,"endAngle",2),s([ud()],Sf.prototype,"clipSector",2),s([ud()],Sf.prototype,"concentricEdgeInset",2),s([ud()],Sf.prototype,"radialEdgeInset",2),s([ud()],Sf.prototype,"startOuterCornerRadius",2),s([ud()],Sf.prototype,"endOuterCornerRadius",2),s([ud()],Sf.prototype,"startInnerCornerRadius",2),s([ud()],Sf.prototype,"endInnerCornerRadius",2);var If={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Df={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},Af=class extends Qn{constructor(){super(...arguments),this.showInLegend=!1}};s([Ti(zi)],Af.prototype,"showInLegend",2);var Lf=class extends Wa{constructor(){super(...arguments),this.spacing=2}set(t,e){return super.set(t)}};s([Ti(Fi)],Lf.prototype,"text",2),s([Ti(Gi)],Lf.prototype,"spacing",2);var Nf=class extends ki{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};s([Ti(ts)],Nf.prototype,"fill",2),s([Ti(Vi)],Nf.prototype,"fillOpacity",2);var kf=class extends Wa{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};s([Ti(Wi)],kf.prototype,"offset",2),s([Ti(Gi.restrict({min:0,max:360}))],kf.prototype,"minAngle",2),s([Ti(Wi)],kf.prototype,"minSpacing",2),s([Ti(Wi)],kf.prototype,"maxCollisionOffset",2),s([Ti(zi)],kf.prototype,"avoidCollisions",2);var wf=class extends Wa{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};s([Ti(Gi)],wf.prototype,"positionOffset",2),s([Ti(Vi)],wf.prototype,"positionRatio",2);var Cf=class extends ki{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};s([Ti(is,{optional:!0})],Cf.prototype,"colors",2),s([Ti(Wi)],Cf.prototype,"length",2),s([Ti(Wi)],Cf.prototype,"strokeWidth",2);var Tf=class extends xu{constructor(){super(...arguments),this.fills=Object.values(If),this.strokes=Object.values(Df),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new wi(Lf),this.title=new Af,this.innerCircle=new Nf,this.shadow=new bm,this.calloutLabel=new kf,this.sectorLabel=new wf,this.calloutLine=new Cf,this.tooltip=new Sm}isValid(){const t=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(n.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}};function Ef(t,e,i,s){const n=[i.convert(0),i.convert(1)],a=[s.convert(0),s.convert(1)],o=Math.PI/-2+Ks(e),r=t?"initial":"update";return{nodes:{toFn:(t,e,i,{prevLive:s})=>{var a,r;let{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d}=e;const{stroke:u,fill:p}=e.sectorFormat;if("removed"===i&&s?(l=null==(a=s.datum)?void 0:a.endAngle,c=null==(r=s.datum)?void 0:r.endAngle):"removed"!==i||s||(l=o,c=o),"removed"===i){const t=(({radius:t})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*t}))(e);h=t.innerRadius,d=t.outerRadius}return{startAngle:l,endAngle:c,outerRadius:d,innerRadius:h,stroke:u,fill:p}},fromFn:(e,i,s,{prevFromProps:n})=>{let{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d}=e,{fill:u,stroke:p}=i.sectorFormat;if("unknown"===s||"added"===s&&!n?(l=o,c=o,h=i.innerRadius,d=i.outerRadius):"added"===s&&n&&(l=n.endAngle??o,c=n.endAngle??o,h=n.innerRadius??i.innerRadius,d=n.outerRadius??i.outerRadius),"added"===s&&!t){const t=(({radius:t})=>({innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*t}))(i);h=t.innerRadius,d=t.outerRadius}return"updated"===s&&(u=e.fill??u,p=("string"==typeof e.stroke?e.stroke:void 0)??p),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,fill:u,stroke:p,phase:r}}},innerCircle:{fromFn:(t,e)=>{var i;return{size:(null==(i=t.previousDatum)?void 0:i.radius)??t.size??0,phase:r}},toFn:(t,e)=>({size:e.radius??0})}}}function Of(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function Rf(t,e){const i=e.y-t.centerY,s=e.x-t.centerX,n=Math.atan2(i,s),a=t.getItemNodes();for(const o of a)if(!0!==o.datum.missing&&Zs(n,o.startAngle,o.endAngle)){const t=Math.sqrt(s*s+i*i);let e=0;return t<o.innerRadius?e=o.innerRadius-t:t>o.outerRadius&&(e=t-o.outerRadius),{datum:o.datum,distance:e}}}s([Ti(Fi)],Tf.prototype,"angleKey",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"angleName",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"angleFilterKey",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"radiusKey",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"radiusName",2),s([Ti(Wi,{optional:!0})],Tf.prototype,"radiusMin",2),s([Ti(Wi,{optional:!0})],Tf.prototype,"radiusMax",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"calloutLabelKey",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"calloutLabelName",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"sectorLabelKey",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"sectorLabelName",2),s([Ti(Fi,{optional:!0})],Tf.prototype,"legendItemKey",2),s([Ti(is)],Tf.prototype,"fills",2),s([Ti(is)],Tf.prototype,"strokes",2),s([Ti(Vi)],Tf.prototype,"fillOpacity",2),s([Ti(Vi)],Tf.prototype,"strokeOpacity",2),s([Ti(ds)],Tf.prototype,"lineDash",2),s([Ti(Wi)],Tf.prototype,"lineDashOffset",2),s([Ti(Wi)],Tf.prototype,"cornerRadius",2),s([Ti(Bi,{optional:!0})],Tf.prototype,"itemStyler",2),s([Ti(Gi)],Tf.prototype,"rotation",2),s([Ti(Gi)],Tf.prototype,"outerRadiusOffset",2),s([Ti(Vi)],Tf.prototype,"outerRadiusRatio",2),s([Ti(Gi,{optional:!0})],Tf.prototype,"innerRadiusOffset",2),s([Ti(Vi,{optional:!0})],Tf.prototype,"innerRadiusRatio",2),s([Ti(Wi)],Tf.prototype,"strokeWidth",2),s([Ti(Gi)],Tf.prototype,"sectorSpacing",2),s([Ti(zi)],Tf.prototype,"hideZeroValueSectorsInLegend",2),s([Ti(rs)],Tf.prototype,"innerLabels",2),s([Ti(ji)],Tf.prototype,"title",2),s([Ti(ji)],Tf.prototype,"innerCircle",2),s([Ti(ji)],Tf.prototype,"shadow",2),s([Ti(ji)],Tf.prototype,"calloutLabel",2),s([Ti(ji)],Tf.prototype,"sectorLabel",2),s([Ti(ji)],Tf.prototype,"calloutLine",2),s([Ti(ji)],Tf.prototype,"tooltip",2);var jf=(t=>(t[t.BACKGROUND=0]="BACKGROUND",t[t.FOREGROUND=1]="FOREGROUND",t[t.HIGHLIGHT=2]="HIGHLIGHT",t[t.LABEL=3]="LABEL",t))(jf||{}),Pf=class extends uu{constructor({useLabelLayer:t=!1,pickModes:e=[1,0],canHaveAxes:i=!1,animationResetFns:s,...n}){super({...n,useLabelLayer:t,pickModes:e,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:i}),this.itemGroup=this.contentGroup.appendChild(new In),this.nodeData=[],this.itemSelection=Ea.select(this.itemGroup,(()=>this.nodeFactory()),!1),this.labelSelection=Ea.select(this.labelGroup,(()=>this.labelFactory()),!1),this.highlightSelection=Ea.select(this.highlightGroup,(()=>this.nodeFactory())),this.highlightLabelSelection=Ea.select(this.highlightLabel,(()=>this.labelFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=s,this.animationState=new Wn("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(t){return!!super.setSeriesIndex(t)&&(this.contentGroup.zIndex=[t,1],this.highlightGroup.zIndex=[t,2],this.labelGroup.zIndex=[t,3],!0)}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}labelFactory(){const t=new Rn;return t.pointerEvents=1,t}addChartEventListeners(){var t;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",(t=>this.onLegendItemClick(t))))}getInnerRadius(){return 0}computeLabelsBBox(t,e){return null}resetAllAnimation(){const{item:t,label:e}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&Cs([this.itemSelection,this.highlightSelection],t),e&&Cs([this.labelSelection,this.highlightLabelSelection],e),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){const{item:e,label:i}=this.animationResetFns??{};e&&Cs([this.highlightSelection],e),i&&Cs([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(t){var e;const i=null==(e=this.getNodeData())?void 0:e[t.datumIndex];if(void 0!==i)return this.itemSelection.select((t=>t instanceof pd&&t.datum===i))[0]}getSeriesRange(t,e){return[NaN,NaN]}},zf=class extends qh{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Bf=class extends Pf{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:Of,label:vm}}),this.properties=new Tf,this.phantomNodeData=void 0,this.backgroundGroup=new Ln({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new ru,this.radiusScale=new ru,this.phantomGroup=this.backgroundGroup.appendChild(new In({name:"phantom"})),this.phantomSelection=Ea.select(this.phantomGroup,(()=>this.nodeFactory()),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new In({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Ea(this.calloutLabelGroup,In),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new In({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ad({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Ad({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new In({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new In({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=Ea.select(this.innerLabelsGroup,Rn),this.innerCircleSelection=Ea.select(this.innerCircleGroup,(()=>new Ad({shape:"circle"}))),this.surroundingRadius=void 0,this.NodeEvent=zf,this.angleScale=new ru,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2)),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),null==t||t.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),null==t||t.removeChild(this.backgroundGroup)}setSeriesIndex(t){return!!super.setSeriesIndex(t)&&(this.backgroundGroup.zIndex=[0,t],!0)}nodeFactory(){return new Sf}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}async processData(t){var e,i;if(null==this.data||!this.properties.isValid())return;const{visible:s,id:a}=this,{angleKey:o,angleFilterKey:r,radiusKey:l,calloutLabelKey:c,sectorLabelKey:h,legendItemKey:d}=this.properties,u=(t,e,i)=>s&&this.ctx.legendManager.getItemEnabled({seriesId:a,itemId:i}),p=!this.ctx.animationManager.isSkipped(),g=[],m=[];d?g.push(Xu(d,"band",{id:"legendItemKey"})):c?g.push(Xu(c,"band",{id:"calloutLabelKey"})):h&&g.push(Xu(h,"band",{id:"sectorLabelKey"}));const y=this.radiusScale.type,f=this.angleScale.type;l&&m.push(Ju(l,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Qu(l,y,{id:"radiusRaw"}),hp("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),c&&m.push(Qu(c,"band",{id:"calloutLabelValue"})),h&&m.push(Qu(h,"band",{id:"sectorLabelValue"})),d&&m.push(Qu(d,"band",{id:"legendItemValue"})),r&&m.push(tp(r,f,{id:"angleFilterValue",onlyPositive:!0,validation:u,invalidValue:0}),Qu(r,f,{id:"angleFilterRaw"}),hp("angleFilterValue",[0,1],0,0)),p&&this.processedData&&g.length>0&&m.push(bp(this.id,this.processedData)),m.push(up()),await this.requestDataModel(t,this.data,{props:[...g,tp(o,f,{id:"angleValue",onlyPositive:!0,validation:u,invalidValue:0}),Qu(o,f,{id:"angleRaw"}),hp("angleValue",[0,1],0,0),...m]});for(const x of(null==(i=null==(e=this.processedData)?void 0:e.defs)?void 0:i.values)??[]){const{id:t,missing:e,property:i}=x,s=dh(this,e);"angleRaw"!==t&&s>0&&n.warnOnce(`no value was found for the key '${String(i)}' on ${s} data element${s>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:e}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataValues(t,e){return{angleValues:t.resolveColumnById(this,"angleValue",e),angleRawValues:t.resolveColumnById(this,"angleRaw",e),angleFilterValues:null!=this.properties.angleFilterKey?t.resolveColumnById(this,"angleFilterValue",e):void 0,angleFilterRawValues:null!=this.properties.angleFilterKey?t.resolveColumnById(this,"angleFilterRaw",e):void 0,radiusValues:this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",e):void 0,radiusRawValues:this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",e):void 0,calloutLabelValues:this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",e):void 0,sectorLabelValues:this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",e):void 0,legendItemValues:this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",e):void 0}}createNodeData(){var t;const{id:e,processedData:i,dataModel:s,angleScale:n,ctx:{legendManager:a},visible:o}=this,{rotation:r,innerRadiusRatio:l}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:e,nodeData:[],labelData:[]};if(!s||"ungrouped"!==(null==i?void 0:i.type))return;const{angleValues:c,angleRawValues:h,angleFilterValues:d,angleFilterRawValues:u,radiusValues:p,radiusRawValues:g,calloutLabelValues:m,sectorLabelValues:y,legendItemValues:f}=this.getProcessedDataValues(s,i),x=(null==u?void 0:u.some(((t,e)=>t>h[e])))??!1;let v=0,b=0;const M=[],S=null!=u?[]:void 0,I=i.dataSources.get(this.id)??[],D=null==(t=i.invalidData)?void 0:t.get(this.id);return I.forEach(((t,i)=>{if(!0===(null==D?void 0:D[i]))return;const s=x?d[i]:c[i],l=null==u||x?1:Math.sqrt(u[i]/h[i]),I=n.convert(v)+Ks(r);v=s,b+=s;const A=n.convert(v)+Ks(r),L=Math.abs(A-I),N=I+L/2,k=h[i],w=((null==p?void 0:p[i])??1)*l,C=null==g?void 0:g[i],T=null==f?void 0:f[i],E=this.getLabels(t,N,L,!0,null==m?void 0:m[i],null==y?void 0:y[i],T),O=this.getSectorFormat(t,i,!1),R={itemId:i,series:this,datum:t,datumIndex:i,angleValue:k,midAngle:N,midCos:Math.cos(N),midSin:Math.sin(N),startAngle:I,endAngle:A,radius:w,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(w),0),sectorFormat:O,radiusValue:C,legendItemValue:T,enabled:o&&a.getItemEnabled({seriesId:e,itemId:i}),focusable:!0,...E};M.push(R),null!=S&&S.push({...R,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})})),this.zerosumOuterRing.visible=0===b,this.zerosumInnerRing.visible=0===b&&null!=l&&1!==l&&l>0,{itemId:e,nodeData:M,labelData:M,phantomNodeData:S}}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!d&&!c)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>=Ks(r.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(r,{...u,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),d&&(p.sectorLabel={text:this.getLabelText(l,{...u,value:a})}),null!=c&&null!=o&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Hs(t)- -.75*Math.PI;return e[wt(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){const{angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fills:l,strokes:c,itemStyler:h}=this.properties,d=c[e%c.length],{fill:u,fillOpacity:p,stroke:g,strokeWidth:m,strokeOpacity:y,lineDash:f,lineDashOffset:x,cornerRadius:v}=te(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[e%l.length]:void 0,stroke:d,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let b;return h&&(b=this.cachedDatumCallback(this.getDatumId(t,e)+(i?"-highlight":"-hide"),(()=>h({datum:t,angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fill:u,fillOpacity:p,stroke:g,strokeWidth:m,strokeOpacity:y,lineDash:f,lineDashOffset:x,cornerRadius:v,highlighted:i,seriesId:this.id})))),{fill:(null==b?void 0:b.fill)??u,fillOpacity:(null==b?void 0:b.fillOpacity)??p,stroke:(null==b?void 0:b.stroke)??g,strokeWidth:(null==b?void 0:b.strokeWidth)??m,strokeOpacity:(null==b?void 0:b.strokeOpacity)??y,lineDash:(null==b?void 0:b.lineDash)??f,lineDashOffset:(null==b?void 0:b.lineDashOffset)??x,cornerRadius:(null==b?void 0:b.cornerRadius)??v}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){var e;const i=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=i,t&&(this.previousRadiusScale.range=i);const s=t=>({...t,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(t.radius),0)});this.nodeData=this.nodeData.map(s),this.phantomNodeData=null==(e=this.phantomNodeData)?void 0:e.map(s)}getTitleTranslationY(){var t;const e=Math.max(0,this.radiusScale.range[1]);if(0===e)return NaN;return-e-(2+((null==(t=this.properties.title)?void 0:t.spacing)??0))-Math.max(0,-e)}update({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},s=null!=rr(this.nodeDataDependencies,i);if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const t=this.getTitleTranslationY();e.node.y=isFinite(t)?t:0;const i=e.node.getBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i)}for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){var t;const e=t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}};this.nodeData.forEach(e),null==(t=this.phantomNodeData)||t.forEach(e)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:a,innerLabelsSelection:o}=this,r=this.nodeData.map((t=>({...t,sectorFormat:{...t.sectorFormat}}))),l=(t,e)=>{t.update(e,void 0,(t=>this.getDatumId(t.datum,t.datumIndex))),this.ctx.animationManager.isSkipped()&&t.cleanup()};l(t,this.nodeData),l(e,r),l(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,(t=>{const e=new Pa;e.tag=0,e.pointerEvents=1,t.appendChild(e);const i=new Rn;i.tag=1,i.pointerEvents=1,t.appendChild(i)})),a.update(this.nodeData),s.update(r),o.update(this.properties.innerLabels,(t=>{t.pointerEvents=1}))}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),s=1;e=Math.ceil(2*t+s)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){const e=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.highlightLabel.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((t,{radius:e})=>{var i,s;t.setProperties({fill:null==(i=this.properties.innerCircle)?void 0:i.fill,opacity:null==(s=this.properties.innerCircle)?void 0:s.fillOpacity,size:e})}));const s=this.ctx.animationManager.isSkipped(),n=(t,e,i,n)=>{const a=this.getSectorFormat(e.datum,e.itemId,n);e.sectorFormat.fill=a.fill,e.sectorFormat.stroke=a.stroke,s&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(n||s)&&(t.fill=a.fill,t.stroke=a.stroke),t.strokeWidth=a.strokeWidth,t.fillOpacity=a.fillOpacity,t.strokeOpacity=a.strokeOpacity,t.lineDash=a.lineDash,t.lineDashOffset=a.lineDashOffset,t.cornerRadius=a.cornerRadius,t.fillShadow=this.properties.shadow;const o=Math.max((this.properties.sectorSpacing+(null!=a.stroke?a.strokeWidth:0))/2,0);t.inset=o,t.lineJoin=this.properties.sectorSpacing>=0||o>0?"miter":"round"};this.itemSelection.each(((t,e,i)=>n(t,e,0,!1))),this.highlightSelection.each(((t,i,s)=>{n(t,i,0,!0),t.visible=i.itemId===(null==e?void 0:e.itemId)})),this.phantomSelection.each(((t,e,i)=>n(t,e,0,!1))),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:t}=this.properties,e=t.length,i=t.strokeWidth,s=t.colors??this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((t,a)=>{const o=t.datum,{calloutLabel:r,outerRadius:l}=o;if((null==r?void 0:r.text)&&!r.hidden&&0!==l){t.visible=!0,t.strokeWidth=i,t.stroke=s[a%s.length],t.fill=void 0;const c=o.midCos*l,h=o.midSin*l;let d=o.midCos*(l+e),u=o.midSin*(l+e);if((r.collisionTextAlign??0!==r.collisionOffsetY)&&null!=r.box){const t=r.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const s=e-d,a=i-u,o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),l=o-n;l>0&&(d+=s*l/o,u+=a*l/o)}t.x1=c,t.y1=h,t.x2=d,t.y2=u}else t.visible=!1}))}getLabelOverflow(t,e,i){const s=-this.centerX,n=s+i.width,a=-this.centerY,o=a+i.height;let r=1;e.x+1<s?r=(e.x+e.width-s)/e.width:e.x+e.width-1>n&&(r=(n-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>o;return{textLength:1===r?t.length:Math.floor(t.length*r)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){const{surroundingRadius:e}=this;if(null==e)return!1;const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=e**2;return i.some((t=>t.x**2+t.y**2>s))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=this.calloutNodeData,r=o.filter((t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e}));if(r.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),r.length<=1)return;const l=r.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),c=r.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),h=r.filter((t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),d=r.filter((t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=t=>{const e=t.calloutLabel;if(null==e)return Et.zero.clone();const n=t.outerRadius+i.length+s,a=t.midCos*n,o=t.midSin*n+e.collisionOffsetY,r=e.collisionTextAlign??e.textAlign,l=e.textBaseline;return Rn.computeBBox(e.text,a,o,{font:this.properties.calloutLabel,textAlign:r,textBaseline:l})},p=(t,e,i)=>{const s=u(t).grow(n/2),a=u(e).grow(n/2);s.x<a.x+a.width&&s.x+s.width>a.x&&("to-top"===i?s.y<a.y+a.height:s.y+s.height>a.y)&&(e.calloutLabel.collisionOffsetY="to-top"===i?s.y-a.y-a.height:s.y+s.height-a.y)},g=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let s=i-1;s>=0;s--){const e=t[s+1],i=t[s];p(e,i,"to-top")}for(let s=i+1;s<t.length;s++){const e=t[s-1],i=t[s];p(e,i,"to-bottom")}},m=t=>{const e=r.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>u(t))),s=i.map((t=>t.clone().grow(n/2)));let l=!1;for(let n=0;n<s.length&&!l;n++){const e=s[n];for(let i=n+1;i<t.length;i++){const t=s[i];if(e.collidesBBox(t)){l=!0;break}}}const c=o.map((t=>{const{startAngle:e,endAngle:i,outerRadius:s}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:s}})),h=i.some((t=>c.some((e=>mf(t,e)))));(l||e||h)&&t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};g(l),g(c),m(h),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new Rn;this.calloutLabelSelection.selectByTag(1).forEach((s=>{const{datum:l}=s,c=l.calloutLabel,h=e.convert(l.radius),d=Math.max(0,h);if(!(null==c?void 0:c.text)||0===d||c.hidden)return void(s.visible=!1);const u=d+n+a,p=l.midCos*u,g=l.midSin*u+c.collisionOffsetY,m={textAlign:c.collisionTextAlign??c.textAlign,textBaseline:c.textBaseline};r.text=c.text,r.x=p,r.y=g,r.setFont(this.properties.calloutLabel),r.setAlign(m);const y=r.getBBox();let f=c.text,x=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,y,t);f=c.text.length===e?c.text:`${c.text.substring(0,e)}…`,x=!i}s.text=f,s.x=p,s.y=g,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=o,s.visible=x}))}computeLabelsBBox(t,e){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Rn;let h;const{title:d}=this.properties;if((null==d?void 0:d.text)&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(c.text=d.text,c.x=0,c.y=t,c.setFont(d),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach((i=>{const s=i.calloutLabel;if(!s||0===i.outerRadius)return null;const d=i.outerRadius+n+a,u=i.midCos*d,p=i.midSin*d+s.collisionOffsetY;c.text=s.text,c.x=u,c.y=p,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});const g=c.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>o)s.hidden=!0;else{if(h){const t=-this.centerY,e=new Et(h.x-r,t,h.width+2*r,h.y+h.height+r-t);if(g.collidesBBox(e))return void(s.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(s.text,g,e),a=s.text.length>2&&t<2;if(i||a||n)return void(s.hidden=!0)}s.hidden=!1,l.push(g)}})),0===l.length?null:Et.merge(l)}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,c=(t,c)=>{const{sectorLabel:h,outerRadius:d}=c;let u=!1;if(h&&0!==d){const p=e*(1-r)+d*r+o;t.fill=l,t.fontStyle=s,t.fontWeight=n,t.fontSize=i,t.fontFamily=a,t.text=h.text,t.x=c.midCos*p,t.y=c.midSin*p,t.textAlign="center",t.textBaseline="middle";const g=t.getBBox(),m=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:y,endAngle:f}=c,x={startAngle:y,endAngle:f,innerRadius:e,outerRadius:d};m.every((([t,e])=>pf(t,e,x)))&&(u=!0)}t.visible=u};this.labelSelection.each(c),this.highlightLabelSelection.each(c)}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each(((i,s)=>{const{fontStyle:n,fontWeight:a,fontSize:o,fontFamily:r,color:l}=s;i.fontStyle=n,i.fontWeight=a,i.fontSize=o,i.fontFamily=r,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.getBBox()),e.push(s.spacing)}));const i=t=>0===t?0:e[t],s=t=>t===e.length-1?0:e[t],n=t.reduce(((t,e,n)=>t+e.height+i(n)+s(n)),0),a=Math.max(...t.map((t=>t.width))),o=this.getInnerRadius(),r=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),l=[];for(let c=0,h=-n/2;c<t.length;c++){const e=t[c].height+h+i(c);l.push(e),h=e+s(c)}this.innerLabelsSelection.each(((t,e,i)=>{t.y=l[i],t.visible=r}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}pickNodeClosestDatum(t){return Rf(this,t)}getTooltipContent(t){var e;const{id:i,dataModel:s,processedData:n,properties:a}=this,{legendItemKey:o,calloutLabelKey:r,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:p,radiusName:g,tooltip:m}=a,y=this.properties.title.text;if(!s||!n)return;const{datumIndex:f}=t,x=null==(e=n.dataSources.get(this.id))?void 0:e[f],{angleRawValues:v,legendItemValues:b,calloutLabelValues:M,sectorLabelValues:S}=this.getProcessedDataValues(s,n),I=v[f],D=(null==b?void 0:b[f])??(r===d||null==M?void 0:M[f])??(c===d||null==S?void 0:S[f])??u;return m.formatTooltip({title:y,symbol:this.legendItemSymbol(f),data:[{label:D,fallbackLabel:d,value:Fa(I,3)}]},{seriesId:i,datum:x,title:u,legendItemKey:o,calloutLabelKey:r,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:p,radiusName:g,...this.getSectorFormat(x,f,!1)})}legendItemSymbol(t){var e,i;const s=null==(i=null==(e=this.processedData)?void 0:e.dataSources.get(this.id))?void 0:i[t],n=this.getSectorFormat(s,t,!1);return{marker:{fill:n.fill,stroke:n.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}}}getLegendData(t){var e,i,s,n,a,o;const{visible:r,processedData:l,dataModel:c,id:h,ctx:{legendManager:d}}=this;if(!c||!l||!this.properties.isValid()||"category"!==t)return[];const{angleKey:u,calloutLabelKey:p,sectorLabelKey:g,legendItemKey:m,showInLegend:y}=this.properties;if(!(m||p&&p!==u||g&&g!==u))return[];const{angleRawValues:f,calloutLabelValues:x,sectorLabelValues:v,legendItemValues:b}=this.getProcessedDataValues(c,l),M=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,S=[],I=this.properties.hideZeroValueSectorsInLegend,D=l.dataSources.get(this.id),A=null==(i=l.invalidData)?void 0:i.get(this.id);for(let L=0;L<l.input.count;L++){const t=null==D?void 0:D[L],e=f[L];if(!0===(null==A?void 0:A[L])||I&&0===e)continue;const i=[];M&&i.push(M);const l=this.getLabels(t,2*Math.PI,2*Math.PI,!1,null==x?void 0:x[L],null==v?void 0:v[L],null==b?void 0:b[L]);m&&void 0!==l.legendItem?i.push(l.legendItem.text):p&&p!==u&&void 0!==(null==(s=l.calloutLabel)?void 0:s.text)?i.push(null==(n=l.calloutLabel)?void 0:n.text):g&&g!==u&&void 0!==(null==(a=l.sectorLabel)?void 0:a.text)&&i.push(null==(o=l.sectorLabel)?void 0:o.text),0!==i.length&&S.push({legendType:"category",id:h,datum:t,itemId:L,seriesId:h,enabled:r&&d.getItemEnabled({seriesId:h,itemId:L}),label:{text:i.join(" - ")},symbol:this.legendItemSymbol(L),legendItemName:null!=m?t[m]:void 0,hideInLegend:!y})}return S}setLegendState(t){const{id:e,ctx:{legendManager:i,updateService:s}}=this;t.forEach(((t,s)=>i.toggleItem({enabled:t,seriesId:e,itemId:s}))),i.update(),s.update(4)}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=Ef(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Le(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,((t,e)=>this.getDatumId(e.datum,e.datumIndex))),Le(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),fm(this,"callout",e,this.calloutLabelSelection),fm(this,"sector",e,this.labelSelection),fm(this,"highlight",e,this.highlightLabelSelection),fm(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s;const{itemSelection:n,highlightSelection:a,phantomSelection:o,processedData:r,radiusScale:l,previousRadiusScale:c}=this,{animationManager:h}=this.ctx,d=null==(e=null==(t=null==r?void 0:r.reduced)?void 0:t.diff)?void 0:e[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const u=0===((null==d?void 0:d.moved.size)??0),p=((null==r?void 0:r.defs.keys.length)??0)>0,g=(null==(s=null==(i=null==r?void 0:r.reduced)?void 0:i.animationValidation)?void 0:s.uniqueKeys)??!0;u&&p&&g||this.ctx.animationManager.skipCurrentBatch();const m=!this.nodeData.some((t=>t.enabled)),y=Ef(!1,this.properties.rotation,l,c);Le(this.id,"nodes",h,[n,a,o],y.nodes,((t,e)=>this.getDatumId(e.datum,e.datumIndex)),d),Le(this.id,"innerCircle",h,[this.innerCircleSelection],y.innerCircle),fm(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),fm(this,"sector",this.ctx.animationManager,this.labelSelection),fm(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==m&&(this.noVisibleData=m,fm(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:a}=this.ctx,o=Ef(!1,this.properties.rotation,s,n);Le(this.id,"nodes",a,[t,e,i],o.nodes,((t,e)=>this.getDatumId(e.datum,e.datumIndex))),Le(this.id,"innerCircle",a,[this.innerCircleSelection],o.innerCircle),xm(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),xm(this,"sector",this.ctx.animationManager,this.labelSelection),xm(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),xm(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(t,e){var i,s,n;const{calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r}=this.properties;return(null==(n=null==(s=null==(i=this.processedData)?void 0:i.reduced)?void 0:s.animationValidation)?void 0:n.uniqueKeys)?r?Mp(t[r]):a?Mp(t[a]):o?Mp(t[o]):`${e}`:`${e}`}};Bf.className="DonutSeries",Bf.type="donut";var Ff={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:kg,xOffset:3,yOffset:3,blur:5}},legend:{enabled:!0}},Gf=({takeColors:t,colorsCount:e})=>{const{fills:i,strokes:s}=t(e);return{fills:i,strokes:s,calloutLine:{colors:s}}},Uf={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:t=>new Bf(t),tooltipDefaults:{range:"exact"},themeTemplate:{series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:kg,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},legend:{enabled:!0}},paletteFactory:Gf},Yf=class extends Qn{constructor(){super(...arguments),this.showInLegend=!1}};s([Ti(zi)],Yf.prototype,"showInLegend",2);var Wf=class extends Wa{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};s([Ti(Wi)],Wf.prototype,"offset",2),s([Ti(Gi.restrict({min:0,max:360}))],Wf.prototype,"minAngle",2),s([Ti(Wi)],Wf.prototype,"minSpacing",2),s([Ti(Wi)],Wf.prototype,"maxCollisionOffset",2),s([Ti(zi)],Wf.prototype,"avoidCollisions",2);var Vf=class extends Wa{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};s([Ti(Gi)],Vf.prototype,"positionOffset",2),s([Ti(Vi)],Vf.prototype,"positionRatio",2);var _f=class extends ki{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};s([Ti(is,{optional:!0})],_f.prototype,"colors",2),s([Ti(Wi)],_f.prototype,"length",2),s([Ti(Wi)],_f.prototype,"strokeWidth",2);var Hf=class extends xu{constructor(){super(...arguments),this.fills=Object.values(If),this.strokes=Object.values(Df),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new Yf,this.shadow=new bm,this.calloutLabel=new Wf,this.sectorLabel=new Vf,this.calloutLine=new _f,this.tooltip=new Sm}};s([Ti(Fi)],Hf.prototype,"angleKey",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"angleName",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"angleFilterKey",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"radiusKey",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"radiusName",2),s([Ti(Wi,{optional:!0})],Hf.prototype,"radiusMin",2),s([Ti(Wi,{optional:!0})],Hf.prototype,"radiusMax",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"calloutLabelKey",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"calloutLabelName",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"sectorLabelKey",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"sectorLabelName",2),s([Ti(Fi,{optional:!0})],Hf.prototype,"legendItemKey",2),s([Ti(is)],Hf.prototype,"fills",2),s([Ti(is)],Hf.prototype,"strokes",2),s([Ti(Vi)],Hf.prototype,"fillOpacity",2),s([Ti(Vi)],Hf.prototype,"strokeOpacity",2),s([Ti(ds)],Hf.prototype,"lineDash",2),s([Ti(Wi)],Hf.prototype,"lineDashOffset",2),s([Ti(Wi)],Hf.prototype,"cornerRadius",2),s([Ti(Bi,{optional:!0})],Hf.prototype,"itemStyler",2),s([Ti(Gi)],Hf.prototype,"rotation",2),s([Ti(Gi)],Hf.prototype,"outerRadiusOffset",2),s([Ti(Vi)],Hf.prototype,"outerRadiusRatio",2),s([Ti(Wi)],Hf.prototype,"strokeWidth",2),s([Ti(Gi)],Hf.prototype,"sectorSpacing",2),s([Ti(zi)],Hf.prototype,"hideZeroValueSectorsInLegend",2),s([Ti(ji)],Hf.prototype,"title",2),s([Ti(ji)],Hf.prototype,"shadow",2),s([Ti(ji)],Hf.prototype,"calloutLabel",2),s([Ti(ji)],Hf.prototype,"sectorLabel",2),s([Ti(ji)],Hf.prototype,"calloutLine",2),s([Ti(ji)],Hf.prototype,"tooltip",2);var Zf=class extends qh{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Kf=class extends Pf{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:Of,label:vm}}),this.properties=new Hf,this.phantomNodeData=void 0,this.backgroundGroup=new Ln({name:`${this.id}-background`,zIndex:0}),this.previousRadiusScale=new ru,this.radiusScale=new ru,this.phantomGroup=this.backgroundGroup.appendChild(new In({name:"phantom"})),this.phantomSelection=Ea.select(this.phantomGroup,(()=>this.nodeFactory()),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new In({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Ea(this.calloutLabelGroup,In),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new In({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ad({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=Zf,this.angleScale=new ru,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2)),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(t,e,i){super.attachSeries(t,e,i),t.appendChild(this.backgroundGroup)}detachSeries(t,e,i){super.detachSeries(t,e,i),null==t||t.removeChild(this.backgroundGroup)}setSeriesIndex(t){return!!super.setSeriesIndex(t)&&(this.backgroundGroup.zIndex=[0,t],!0)}nodeFactory(){const t=new Sf;return t.miterLimit=1e9,t}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}async processData(t){var e,i,s,a,o;if(null==this.data||!this.properties.isValid())return;const{visible:r,id:l,ctx:{legendManager:c}}=this,{angleKey:h,angleFilterKey:d,radiusKey:u,calloutLabelKey:p,sectorLabelKey:g,legendItemKey:m}=this.properties,y=(t,e,i)=>r&&c.getItemEnabled({seriesId:l,itemId:i}),f=!this.ctx.animationManager.isSkipped(),x=[],v=[];m?x.push(Xu(m,"band",{id:"legendItemKey"})):p?x.push(Xu(p,"band",{id:"calloutLabelKey"})):g&&x.push(Xu(g,"band",{id:"sectorLabelKey"}));const b=this.radiusScale.type,M=this.angleScale.type;u&&v.push(Ju(u,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Qu(u,b,{id:"radiusRaw"}),hp("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),p&&v.push(Qu(p,"band",{id:"calloutLabelValue"})),g&&v.push(Qu(g,"band",{id:"sectorLabelValue"})),m&&v.push(Qu(m,"band",{id:"legendItemValue"})),d&&v.push(tp(d,M,{id:"angleFilterValue",onlyPositive:!0,validation:y,invalidValue:0}),Qu(d,M,{id:"angleFilterRaw"}),hp("angleFilterValue",[0,1],0,0)),f&&(null==(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.animationValidation)?void 0:s.uniqueKeys)&&x.length>0&&v.push(bp(this.id,this.processedData)),v.push(up()),await this.requestDataModel(t,this.data,{props:[...x,tp(h,M,{id:"angleValue",onlyPositive:!0,validation:y,invalidValue:0}),Qu(h,M,{id:"angleRaw"}),hp("angleValue",[0,1],0,0),...v]});for(const S of(null==(o=null==(a=this.processedData)?void 0:a.defs)?void 0:o.values)??[]){const{id:t,missing:e,property:i}=S,s=dh(this,e);"angleRaw"!==t&&s>0&&n.warnOnce(`no value was found for the key '${String(i)}' on ${s} data element${s>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:t=[],phantomNodeData:e}=this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataValues(t,e){return{angleValues:t.resolveColumnById(this,"angleValue",e),angleRawValues:t.resolveColumnById(this,"angleRaw",e),angleFilterValues:null!=this.properties.angleFilterKey?t.resolveColumnById(this,"angleFilterValue",e):void 0,angleFilterRawValues:null!=this.properties.angleFilterKey?t.resolveColumnById(this,"angleFilterRaw",e):void 0,radiusValues:this.properties.radiusKey?t.resolveColumnById(this,"radiusValue",e):void 0,radiusRawValues:this.properties.radiusKey?t.resolveColumnById(this,"radiusRaw",e):void 0,calloutLabelValues:this.properties.calloutLabelKey?t.resolveColumnById(this,"calloutLabelValue",e):void 0,sectorLabelValues:this.properties.sectorLabelKey?t.resolveColumnById(this,"sectorLabelValue",e):void 0,legendItemValues:this.properties.legendItemKey?t.resolveColumnById(this,"legendItemValue",e):void 0}}createNodeData(){var t;const{id:e,processedData:i,dataModel:s,angleScale:n,ctx:{legendManager:a},visible:o}=this,{rotation:r}=this.properties;if(!s||"ungrouped"!==(null==i?void 0:i.type))return;const{angleValues:l,angleRawValues:c,angleFilterValues:h,angleFilterRawValues:d,radiusValues:u,radiusRawValues:p,calloutLabelValues:g,sectorLabelValues:m,legendItemValues:y}=this.getProcessedDataValues(s,i),f=(null==d?void 0:d.some(((t,e)=>t>c[e])))??!1;let x=0,v=0;const b=[],M=null!=d?[]:void 0,S=i.dataSources.get(this.id)??[],I=null==(t=i.invalidData)?void 0:t.get(this.id);return S.forEach(((t,i)=>{if(!0===(null==I?void 0:I[i]))return;const s=f?h[i]:l[i],S=null==d||f?1:Math.sqrt(d[i]/c[i]),D=n.convert(x)+Ks(r);x=s,v+=s;const A=n.convert(x)+Ks(r),L=Math.abs(A-D),N=D+L/2,k=c[i],w=((null==u?void 0:u[i])??1)*S,C=null==p?void 0:p[i],T=null==y?void 0:y[i],E=this.getLabels(t,N,L,!0,null==g?void 0:g[i],null==m?void 0:m[i],T),O=this.getSectorFormat(t,i,!1),R={itemId:i,series:this,datum:t,datumIndex:i,angleValue:k,midAngle:N,midCos:Math.cos(N),midSin:Math.sin(N),startAngle:D,endAngle:A,radius:w,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(w),0),sectorFormat:O,radiusValue:C,legendItemValue:T,enabled:o&&a.getItemEnabled({seriesId:e,itemId:i}),...E};b.push(R),null!=M&&M.push({...R,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})})),this.zerosumOuterRing.visible=0===v,{itemId:e,nodeData:b,labelData:b,phantomNodeData:M}}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!d&&!c)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>=Ks(r.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(r,{...u,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),d&&(p.sectorLabel={text:this.getLabelText(l,{...u,value:a})}),null!=c&&null!=o&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Hs(t)- -.75*Math.PI;return e[wt(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){const{angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fills:l,strokes:c,itemStyler:h}=this.properties,d=c[e%c.length],{fill:u,fillOpacity:p,stroke:g,strokeWidth:m,strokeOpacity:y,lineDash:f,lineDashOffset:x,cornerRadius:v}=te(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[e%l.length]:void 0,stroke:d,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let b;return h&&(b=this.cachedDatumCallback(this.getDatumId(t,e)+(i?"-highlight":"-hide"),(()=>h({datum:t,angleKey:s,radiusKey:n,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r,fill:u,strokeOpacity:y,stroke:g,strokeWidth:m,fillOpacity:p,lineDash:f,lineDashOffset:x,cornerRadius:v,highlighted:i,seriesId:this.id})))),{fill:(null==b?void 0:b.fill)??u,fillOpacity:(null==b?void 0:b.fillOpacity)??p,stroke:(null==b?void 0:b.stroke)??g,strokeWidth:(null==b?void 0:b.strokeWidth)??m,strokeOpacity:(null==b?void 0:b.strokeOpacity)??y,lineDash:(null==b?void 0:b.lineDash)??f,lineDashOffset:(null==b?void 0:b.lineDashOffset)??x,cornerRadius:(null==b?void 0:b.cornerRadius)??v}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){var e;const i=[0,this.getOuterRadius()];this.radiusScale.range=i,t&&(this.previousRadiusScale.range=i);const s=t=>({...t,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(t.radius),0)});this.nodeData=this.nodeData.map(s),this.phantomNodeData=null==(e=this.phantomNodeData)?void 0:e.map(s)}getTitleTranslationY(){var t;const e=Math.max(0,this.radiusScale.range[1]);if(0===e)return NaN;return-e-(2+((null==(t=this.properties.title)?void 0:t.spacing)??0))-Math.max(0,-e)}update({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},s=null!=rr(this.nodeDataDependencies,i);if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const t=this.getTitleTranslationY();e.node.y=isFinite(t)?t:0;const i=e.node.getBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){var t;const e=t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}};this.nodeData.forEach(e),null==(t=this.phantomNodeData)||t.forEach(e)}updateSelections(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:a}=this,o=this.nodeData.map((t=>({...t,sectorFormat:{...t.sectorFormat}}))),r=(t,e)=>{t.update(e,void 0,(t=>this.getDatumId(t.datum,t.datumIndex))),this.ctx.animationManager.isSkipped()&&t.cleanup()};r(t,this.nodeData),r(e,o),r(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,(t=>{const e=new Pa;e.tag=0,e.pointerEvents=1,t.appendChild(e);const i=new Rn;i.tag=1,i.pointerEvents=1,t.appendChild(i)})),a.update(this.nodeData),s.update(o)}updateNodes(t){const e=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.highlightLabel.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const s=this.ctx.animationManager.isSkipped(),n=(t,e,i,n)=>{const a=this.getSectorFormat(e.datum,e.itemId,n);e.sectorFormat.fill=a.fill,e.sectorFormat.stroke=a.stroke,s&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(n||s)&&(t.fill=a.fill,t.stroke=a.stroke),t.strokeWidth=a.strokeWidth,t.fillOpacity=a.fillOpacity,t.strokeOpacity=a.strokeOpacity,t.lineDash=a.lineDash,t.lineDashOffset=a.lineDashOffset,t.cornerRadius=a.cornerRadius,t.fillShadow=this.properties.shadow;const o=Math.max((this.properties.sectorSpacing+(null!=a.stroke?a.strokeWidth:0))/2,0);t.inset=o,t.lineJoin=this.properties.sectorSpacing>=0||o>0?"miter":"round"};this.itemSelection.each(((t,e,i)=>n(t,e,0,!1))),this.highlightSelection.each(((t,i,s)=>{n(t,i,0,!0),t.visible=i.itemId===(null==e?void 0:e.itemId)})),this.phantomSelection.each(((t,e,i)=>n(t,e,0,!1))),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:t}=this.properties,e=t.length,i=t.strokeWidth,s=t.colors??this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((t,a)=>{const o=t.datum,{calloutLabel:r,outerRadius:l}=o;if((null==r?void 0:r.text)&&!r.hidden&&0!==l){t.visible=!0,t.strokeWidth=i,t.stroke=s[a%s.length],t.fill=void 0;const c=o.midCos*l,h=o.midSin*l;let d=o.midCos*(l+e),u=o.midSin*(l+e);if((r.collisionTextAlign??0!==r.collisionOffsetY)&&null!=r.box){const t=r.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const s=e-d,a=i-u,o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),l=o-n;l>0&&(d+=s*l/o,u+=a*l/o)}t.x1=c,t.y1=h,t.x2=d,t.y2=u}else t.visible=!1}))}getLabelOverflow(t,e,i){const s=-this.centerX,n=s+i.width,a=-this.centerY,o=a+i.height;let r=1;e.x+1<s?r=(e.x+e.width-s)/e.width:e.x+e.width-1>n&&(r=(n-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>o;return{textLength:1===r?t.length:Math.floor(t.length*r)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){const{surroundingRadius:e}=this;if(null==e)return!1;const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=e**2;return i.some((t=>t.x**2+t.y**2>s))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=this.calloutNodeData,r=o.filter((t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e}));if(r.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),r.length<=1)return;const l=r.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),c=r.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),h=r.filter((t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),d=r.filter((t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=t=>{const e=t.calloutLabel;if(null==e)return Et.zero.clone();const n=t.outerRadius+i.length+s,a=t.midCos*n,o=t.midSin*n+e.collisionOffsetY,r=e.collisionTextAlign??e.textAlign,l=e.textBaseline;return Rn.computeBBox(e.text,a,o,{font:this.properties.calloutLabel,textAlign:r,textBaseline:l})},p=(t,e,i)=>{const s=u(t).grow(n/2),a=u(e).grow(n/2);s.x<a.x+a.width&&s.x+s.width>a.x&&("to-top"===i?s.y<a.y+a.height:s.y+s.height>a.y)&&(e.calloutLabel.collisionOffsetY="to-top"===i?s.y-a.y-a.height:s.y+s.height-a.y)},g=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let s=i-1;s>=0;s--){const e=t[s+1],i=t[s];p(e,i,"to-top")}for(let s=i+1;s<t.length;s++){const e=t[s-1],i=t[s];p(e,i,"to-bottom")}},m=t=>{const e=r.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>u(t))),s=i.map((t=>t.clone().grow(n/2)));let l=!1;for(let n=0;n<s.length&&!l;n++){const e=s[n];for(let i=n+1;i<t.length;i++){const t=s[i];if(e.collidesBBox(t)){l=!0;break}}}const c=o.map((t=>{const{startAngle:e,endAngle:i,outerRadius:s}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:s}})),h=i.some((t=>c.some((e=>mf(t,e)))));(l||e||h)&&t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};g(l),g(c),m(h),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new Rn;this.calloutLabelSelection.selectByTag(1).forEach((s=>{const{datum:l}=s,c=l.calloutLabel,h=e.convert(l.radius),d=Math.max(0,h);if(!(null==c?void 0:c.text)||0===d||c.hidden)return void(s.visible=!1);const u=d+n+a,p=l.midCos*u,g=l.midSin*u+c.collisionOffsetY,m={textAlign:c.collisionTextAlign??c.textAlign,textBaseline:c.textBaseline};r.text=c.text,r.x=p,r.y=g,r.setFont(this.properties.calloutLabel),r.setAlign(m);const y=r.getBBox();let f=c.text,x=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,y,t);f=c.text.length===e?c.text:`${c.text.substring(0,e)}…`,x=!i}s.text=f,s.x=p,s.y=g,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=o,s.visible=x}))}computeLabelsBBox(t,e){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Rn;let h;const{title:d}=this.properties;if((null==d?void 0:d.text)&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(c.text=d.text,c.x=0,c.y=t,c.setFont(d),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach((i=>{const s=i.calloutLabel;if(!s||0===i.outerRadius)return null;const d=i.outerRadius+n+a,u=i.midCos*d,p=i.midSin*d+s.collisionOffsetY;c.text=s.text,c.x=u,c.y=p,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});const g=c.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>o)s.hidden=!0;else{if(h){const t=-this.centerY,e=new Et(h.x-r,t,h.width+2*r,h.y+h.height+r-t);if(g.collidesBBox(e))return void(s.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(s.text,g,e),a=s.text.length>2&&t<2;if(i||a||n)return void(s.hidden=!0)}s.hidden=!1,l.push(g)}})),0===l.length?null:Et.merge(l)}updateSectorLabelNodes(){var t;const{radiusScale:e}=this,i=e.convert(0),{fontSize:s,fontStyle:n,fontWeight:a,fontFamily:o,positionOffset:r,positionRatio:l,color:c}=this.properties.sectorLabel,h=i>0,d=1===(null==(t=this.ctx.legendManager.getData(this.id))?void 0:t.filter((t=>t.enabled)).length),u=(t,e)=>{const{sectorLabel:u,outerRadius:p,startAngle:g,endAngle:m}=e;let y=!1;if(u&&0!==p){const f=i*(1-l)+p*l+r;t.fill=c,t.fontStyle=n,t.fontWeight=a,t.fontSize=s,t.fontFamily=o,t.text=u.text;!h&&d?(t.x=0,t.y=0):(t.x=e.midCos*f,t.y=e.midSin*f),t.textAlign="center",t.textBaseline="middle";const x=t.getBBox(),v=[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]],b={startAngle:g,endAngle:m,innerRadius:i,outerRadius:p};v.every((([t,e])=>pf(t,e,b)))&&(y=!0)}t.visible=y};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius()}pickNodeClosestDatum(t){return Rf(this,t)}getTooltipContent(t){var e;const{id:i,dataModel:s,processedData:n,properties:a}=this,{legendItemKey:o,calloutLabelKey:r,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:p,radiusName:g,tooltip:m}=a,y=this.properties.title.text;if(!s||!n)return;const{datumIndex:f}=t,x=null==(e=n.dataSources.get(this.id))?void 0:e[f],{angleRawValues:v,legendItemValues:b,calloutLabelValues:M,sectorLabelValues:S}=this.getProcessedDataValues(s,n),I=v[f],D=(null==b?void 0:b[f])??(r===d||null==M?void 0:M[f])??(c===d||null==S?void 0:S[f])??u;return m.formatTooltip({title:y,symbol:this.legendItemSymbol(f),data:[{label:D,fallbackLabel:d,value:Fa(I,3)}]},{seriesId:i,datum:x,title:u,legendItemKey:o,calloutLabelKey:r,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:p,radiusName:g,...this.getSectorFormat(x,f,!1)})}legendItemSymbol(t){var e,i;const s=null==(i=null==(e=this.processedData)?void 0:e.dataSources.get(this.id))?void 0:i[t],n=this.getSectorFormat(s,t,!1);return{marker:{fill:n.fill,stroke:n.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}}}getLegendData(t){var e,i,s,n,a,o;const{id:r,visible:l,processedData:c,dataModel:h,ctx:{legendManager:d}}=this;if(!h||!c||"category"!==t)return[];const{angleKey:u,calloutLabelKey:p,sectorLabelKey:g,legendItemKey:m,showInLegend:y}=this.properties;if(!(m||p&&p!==u||g&&g!==u))return[];const{calloutLabelValues:f,sectorLabelValues:x,legendItemValues:v,angleRawValues:b}=this.getProcessedDataValues(h,c),M=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,S=[],I=this.properties.hideZeroValueSectorsInLegend,D=c.dataSources.get(this.id),A=null==(i=c.invalidData)?void 0:i.get(this.id);for(let L=0;L<c.input.count;L++){const t=null==D?void 0:D[L],e=b[L];if(!0===(null==A?void 0:A[L])||I&&0===e)continue;const i=[];M&&i.push(M);const c=this.getLabels(t,2*Math.PI,2*Math.PI,!1,null==f?void 0:f[L],null==x?void 0:x[L],null==v?void 0:v[L]);m&&void 0!==c.legendItem?i.push(c.legendItem.text):p&&p!==u&&void 0!==(null==(s=c.calloutLabel)?void 0:s.text)?i.push(null==(n=c.calloutLabel)?void 0:n.text):g&&g!==u&&void 0!==(null==(a=c.sectorLabel)?void 0:a.text)&&i.push(null==(o=c.sectorLabel)?void 0:o.text),0!==i.length&&S.push({legendType:"category",id:r,datum:t,itemId:L,seriesId:r,enabled:l&&d.getItemEnabled({seriesId:r,itemId:L}),label:{text:i.join(" - ")},symbol:this.legendItemSymbol(L),legendItemName:null!=m?t[m]:void 0,hideInLegend:!y})}return S}setLegendState(t){const{id:e,ctx:{legendManager:i,updateService:s}}=this;t.forEach(((t,s)=>i.toggleItem({enabled:t,seriesId:e,itemId:s}))),i.update(),s.update(4)}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=Ef(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Le(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,((t,e)=>this.getDatumId(e.datum,e.datumIndex))),fm(this,"callout",e,this.calloutLabelSelection),fm(this,"sector",e,this.labelSelection),fm(this,"highlight",e,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s;const{itemSelection:n,highlightSelection:a,phantomSelection:o,processedData:r,radiusScale:l,previousRadiusScale:c}=this,{animationManager:h}=this.ctx,d=null==(e=null==(t=null==r?void 0:r.reduced)?void 0:t.diff)?void 0:e[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const u=0===((null==d?void 0:d.moved.size)??0),p=((null==r?void 0:r.defs.keys.length)??0)>0,g=(null==(s=null==(i=null==r?void 0:r.reduced)?void 0:i.animationValidation)?void 0:s.uniqueKeys)??!0;u&&p&&g||this.ctx.animationManager.skipCurrentBatch();const m=Ef(!1,this.properties.rotation,l,c);Le(this.id,"nodes",h,[n,a,o],m.nodes,((t,e)=>this.getDatumId(e.datum,e.datumIndex)),d),fm(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),fm(this,"sector",this.ctx.animationManager,this.labelSelection),fm(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:a}=this.ctx,o=Ef(!1,this.properties.rotation,s,n);Le(this.id,"nodes",a,[t,e,i],o.nodes,((t,e)=>this.getDatumId(e.datum,e.datumIndex))),xm(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),xm(this,"sector",this.ctx.animationManager,this.labelSelection),xm(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(t,e){var i,s,n;const{calloutLabelKey:a,sectorLabelKey:o,legendItemKey:r}=this.properties;return(null==(n=null==(s=null==(i=this.processedData)?void 0:i.reduced)?void 0:s.animationValidation)?void 0:n.uniqueKeys)?r?Mp(t[r]):a?Mp(t[a]):o?Mp(t[o]):`${e}`:`${e}`}};Kf.className="PieSeries",Kf.type="pie";var $f={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:t=>new Kf(t),tooltipDefaults:{range:"exact"},themeTemplate:Ff,paletteFactory:Gf};function Xf(){Qo.register(Vp,gg,Ou,wy,Zy,Jy,of,hf,Uf,$f,sf);for(const t of[hu,$o,du,jp,zp])bh.register(t.type,{moduleFactory:e=>new t(e)})}function Qf(){for(const t of Qo.modules){if("enterprise"!==t.packageType||Ih(t)||n.errorOnce("Unexpected enterprise module registered: "+t.identifier),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)wh.set(e,t.themeTemplate);if("series"===t.type){if(t.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${t.identifier}`);Ch.register(t.identifier,t)}if("series-option"===t.type&&t.themeTemplate)for(const e of t.seriesTypes)Ch.setThemeTemplate(e,t.themeTemplate);if("axis-option"===t.type&&t.themeTemplate)for(const e of t.axisTypes){const i=bh.getThemeTemplate(e),s=te(t.themeTemplate,i);bh.setThemeTemplate(e,s)}"axis"===t.type&&bh.register(t.identifier,t),"legend"===t.type&&Dh.register(t.identifier,t)}if(Qo.hasEnterpriseModules()){const t=Mh.filter((({useCount:t})=>null==t||0===t));t.length>0&&n.errorOnce("Enterprise modules expected but not registered: ",t)}}var qf=class extends zo{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}updatePosition(){super.updatePosition();const t=To(Lo(this));this.axisGroup.setProperties(this.getAxisTransform()),this.gridLineGroupSelection.each(t),this.tickLineGroupSelection.each(t),this.tickLabelGroupSelection.each(((t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})))}computeLabelsBBox(t,e){return null}computeRange(){}getAxisLinePoints(){}};s([Ti(Is(["polygon","circle"],"a polar axis shape"))],qf.prototype,"shape",2),s([Ti(Vi)],qf.prototype,"innerRadiusRatio",2);var Jf=class extends $d{constructor(t,e){super(t,e),this.padding=new Lr(40),this.ctx.axisManager.axisGroup.zIndex=6}getChartType(){return"polar"}async performLayout(t){const{layoutBox:e}=t;e.shrink(this.seriesArea.padding.toJson());const i=e.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach((t=>t.update())),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(t,e,i,s){var n;const a=this.axes.find((t=>"x"===t.direction)),o=this.axes.find((t=>"y"===t.direction));if(!(a instanceof qf&&o instanceof qf))return;const r=a.scale,l=o.innerRadiusRatio;a.innerRadiusRatio=l,a.computeRange(),a.gridLength=s,o.gridAngles=null==(n=r.ticks({nice:a.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}))?void 0:n.map((t=>r.convert(t))),o.gridRange=a.range,o.range=[s,s*l],[a,o].forEach((s=>{s.translation.x=t.x+e,s.translation.y=t.y+i,s.calculateLayout()}))}async computeCircle(t){const e=this.series.filter(tx),i=this.axes.filter(ex),s=(i,s,n)=>{this.updateAxes(t,i,s,n),e.forEach((t=>{t.centerX=i,t.centerY=s,t.radius=n}));const a=e.filter((t=>"donut"===t.type||"pie"===t.type));if(a.length>1){const t=a.map((t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}})).sort(((t,e)=>t.innerRadius-e.innerRadius));t.at(-1).series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},n=t.width/2,a=t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let r=o;s(n,a,r);const l=async({hideWhenNecessary:l=!1}={})=>{const c=[];for(const s of I(i,e)){const e=await s.computeLabelsBBox({hideWhenNecessary:l},t);e&&c.push(e)}if(0===c.length)return void s(n,a,o);const h=Et.merge(c),d=this.refineCircle(h,r,t);s(d.centerX,d.centerY,d.radius),r=d.radius};await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0});for(const c of I(i,e))await c.computeLabelsBBox({hideWhenNecessary:!0},t);return{radius:r,centerX:n,centerY:a}}refineCircle(t,e,i){const s=-e,n=-e,a=e,o=e;let r=Math.max(0,s-t.x),l=Math.max(0,n-t.y),c=Math.max(0,t.x+t.width-a),h=Math.max(0,t.y+t.height-o);r=c=Math.max(r,c),l=h=Math.max(l,h);const d=i.width-r-c,u=i.height-l-h;let p=Math.min(d,u)/2;const g=.5*i.width/2,m=.5*i.height/2,y=Math.min(g,m);if(p<y){p=y;const t=r+c;if(2*p+(l+h)>i.height){const t=i.height-2*p;2*Math.min(l,h)>t?(l=t/2,h=t/2):l>h?l=t-h:h=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(r,c)>t?(r=t/2,c=t/2):r>c?r=t-c:c=t-r}}const f=r+2*p+c,x=l+2*p+h;return{centerX:(i.width-f)/2+r+p,centerY:(i.height-x)/2+l+p,radius:p}}};function tx(t){return t instanceof Pf}function ex(t){return t instanceof qf}Jf.className="PolarChart",Jf.type="polar";var ix={type:"chart",name:"polar",detect:Bh,create:(t,e)=>new Jf(t,e)},sx={isEnterprise:!1},nx=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(nx||{}),ax=Symbol("IGNORED_PROP");function ox(t,e){const i={};for(const[s,n]of Object.entries(e))n!==ax&&Object.hasOwn(t,s)&&(i[s]=n);return i}function rx(t){if(void 0===t)return;const{enabled:e,showArrow:i,range:s,position:n,delay:a,wrapping:o}=t,r={enabled:e,showArrow:i,range:s,position:n,delay:a,wrapping:o};return Object.fromEntries(Object.entries(r).filter((([t,e])=>void 0!==e)))}function lx(t,e){if(null==e)return t;const{targets:i,...s}=e;return null!=(t=te(t,s)).targets&&null!=i&&(t.targets=ee(t.targets,i)),t}var cx={stroke:Qg},hx={fill:em},dx={color:"white",fill:Qg},ux={color:Qg},px={color:Jg,fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"}},gx={...px,textAlign:"left"},mx={...px,fontSize:{$ref:"fontSize"},color:nm,fill:im,stroke:sm,strokeWidth:1,divider:{stroke:am,strokeWidth:1,strokeOpacity:.5}},yx={...cx,background:{fill:tm,fillOpacity:.2},handle:{...hx},text:{...ux},statistics:{...mx}},fx={line:{...cx,handle:{...hx},text:{...ux}},"horizontal-line":{...cx,handle:{...hx},axisLabel:{...dx},text:{...ux}},"vertical-line":{...cx,handle:{...hx},axisLabel:{...dx},text:{...ux}},"disjoint-channel":{...cx,background:{fill:tm,fillOpacity:.2},handle:{...hx},text:{...ux}},"parallel-channel":{...cx,background:{fill:tm,fillOpacity:.2},handle:{...hx},text:{...ux}},"fibonacci-retracement":{...cx,strokes:qg,rangeStroke:Qg,handle:{...hx},text:{...ux,position:"center"},label:{...px,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},"fibonacci-retracement-trend-based":{...cx,strokes:qg,rangeStroke:Qg,handle:{...hx},text:{...ux,position:"center"},label:{...px,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},callout:{...cx,...gx,color:{$ref:"textColor"},handle:{...hx},fill:tm,fillOpacity:.2},comment:{...gx,color:"white",fontWeight:700,handle:{...hx},fill:Qg},note:{...gx,color:hm,fill:Qg,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...hx},background:{fill:lm,stroke:cm,strokeWidth:1}},text:{...gx,handle:{...hx}},arrow:{...cx,handle:{...hx},text:{...ux}},"arrow-up":{fill:Og,handle:{...hx,stroke:Qg}},"arrow-down":{fill:Rg,handle:{...hx,stroke:Qg}},"date-range":{...yx},"price-range":{...yx},"date-price-range":{...yx},"quick-date-price-range":{up:{...cx,fill:tm,fillOpacity:.2,handle:{...hx},statistics:{...mx,color:"#fff",fill:tm,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...cx,stroke:rm,fill:om,fillOpacity:.2,handle:{...hx,stroke:rm},statistics:{...mx,color:"#fff",fill:om,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}}};function xx(t,e){if(E(t))return e(t)}var vx=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],bx=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}];var Mx="range-area";function Sx(t,e){return[{type:"candlestick",focusPriority:0,...t,...e}]}function Ix(t,e){return{fill:xx(e,(e=>{var i,s,n;return null==(n=null==(s=null==(i=e.overrides)?void 0:i[t])?void 0:s.series)?void 0:n.fill})),stroke:xx(e,(e=>{var i,s,n;return null==(n=null==(s=null==(i=e.overrides)?void 0:i[t])?void 0:s.series)?void 0:n.stroke}))}}var Dx={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:Hg,lineDash:[0],label:{enabled:!1}}},Ax={...Dx,nice:!1},Lx={position:{type:"sparkline"}},Nx={style:[{stroke:{$ref:"gridLineColor"}}],width:2},kx={number:{gridLine:Nx},time:{gridLine:Nx},category:{gridLine:Nx}},wx={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...Ax,interval:{values:[0]}},log:{...Ax},time:{...Ax},category:{...Dx}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...Lx,range:"nearest"},axes:kx},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3},tooltip:Lx}},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4,tooltip:Lx}}}},Cx=zu((function(t,e){if("string"==typeof t)return{...e,baseTheme:t};if(null!=t)return{...t,baseTheme:Cx(t.baseTheme,e)};return e}));function Tx(t){if(Array.isArray(t)&&0!==t.length){const e=t[0];if("number"==typeof e){return{data:t.map(((t,e)=>({x:e,y:t}))),series:[{xKey:"x",yKey:"y"}],datumKey:"y"}}if(Array.isArray(e)){return{data:t.map((t=>({x:t[0],y:t[1],datum:t}))),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}}return{data:t}}function Ex(t,e){switch(null==t?void 0:t.type){case"number":{const{type:e,min:i,max:s,reverse:n}=t;return ox(t,{type:e,reverse:n,min:i,max:s})}case"time":{const{type:e,min:i,max:s,reverse:n}=t;return ox(t,{type:e,reverse:n,min:i,max:s})}case"category":{const{type:e,paddingInner:i,paddingOuter:s,reverse:n}=t;return ox(t,{type:e,reverse:n,paddingInner:i,paddingOuter:s})}}return{type:e}}function Ox(t,e,i){const s={};return null!=(null==t?void 0:t.stroke)&&(s.style=[{stroke:null==t?void 0:t.stroke}],s.enabled??(s.enabled=!0)),null!=(null==t?void 0:t.strokeWidth)&&(s.width=null==t?void 0:t.strokeWidth,s.enabled??(s.enabled=!0)),"bar"===i.type&&"horizontal"!==i.direction&&(s.enabled??(s.enabled=!0)),null!=(null==t?void 0:t.visible)&&(s.enabled=t.visible),s.enabled??(s.enabled=e),s}var Rx=zu(((t,e,i)=>s=>{var n;const a=s.datum[s.xKey],o=s.datum[s.yKey],r=null!=i?s.datum[i]:s.datum,l=null==(n=null==e?void 0:e.renderer)?void 0:n.call(e,{context:t,datum:r,xValue:a,yValue:o});if("string"==typeof l)return l;const c=null==l?void 0:l.title,h=null==l?void 0:l.content;return null!=c&&null!=h?{heading:c,title:void 0,data:[{label:void 0,value:h}]}:{heading:c??h??o.toFixed(2),title:void 0,data:[]}}));var jx={"price-volume":function(t,e,i){var s,a,o,r;const{dateKey:l="date",highKey:c="high",openKey:h="open",lowKey:d="low",closeKey:u="close",volumeKey:p="volume",chartType:g="candlestick",navigator:m=!1,volume:y=!0,rangeButtons:f=!0,statusBar:x=!0,toolbar:v=!0,zoom:b=!0,theme:M,data:S,...I}=t,D=function(t,e,i,s,a,o,r){const l={xKey:i,openKey:o,closeKey:r,highKey:s,lowKey:a},c={xKey:i,yKey:r},h={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return function(t,e){return[{type:"ohlc",focusPriority:0,...t,...e}]}(h,l);case"line":return function(t,e,i){return[{type:"line",focusPriority:0,...t,...i,stroke:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.stroke}))??jg,marker:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.marker}))??{enabled:!1}}]}(h,t,c);case"step-line":return function(t,e,i){return[{type:"line",focusPriority:0,...t,...i,stroke:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.stroke}))??jg,interpolation:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.interpolation}))??{type:"step"},marker:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.marker}))??{enabled:!1}}]}(h,t,c);case"hlc":return function(t,e,i,{xKey:s,highKey:n,closeKey:a,lowKey:o}){const r=Ix(Mx,e);return[{type:Mx,focusPriority:0,...t,xKey:s,yHighKey:n,yLowKey:a,fill:r.fill??Og,stroke:r.stroke??Tg,fillOpacity:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e["range-area"])?void 0:i.series)?void 0:s.fillOpacity}))??.3,strokeWidth:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e["range-area"])?void 0:i.series)?void 0:s.strokeWidth}))??2},{type:Mx,focusPriority:0,...t,xKey:s,yHighKey:a,yLowKey:o,fill:r.fill??Rg,stroke:r.stroke??Eg,fillOpacity:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e["range-area"])?void 0:i.series)?void 0:s.fillOpacity}))??.3,strokeWidth:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e["range-area"])?void 0:i.series)?void 0:s.strokeWidth}))??2},{type:"line",...t,...i,stroke:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.stroke}))??Yg,strokeWidth:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.strokeWidth}))??2,marker:xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.line)?void 0:i.series)?void 0:s.marker}))??{enabled:!1}}]}(h,t,c,l);case"high-low":return function(t,e,{xKey:i,highKey:s,lowKey:n}){const a=Ix("range-bar",e);return[{type:"range-bar",...t,xKey:i,yHighKey:s,yLowKey:n,fill:a.fill??Pg,stroke:a.stroke??jg,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0}]}(h,t,l);case"candlestick":return Sx(h,l);case"hollow-candlestick":return function(t,e,i){var s;const n=xx(e,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.candlestick)?void 0:i.series)?void 0:s.item}));return[{type:"candlestick",focusPriority:0,...t,...i,item:{up:{fill:(null==(s=null==n?void 0:n.up)?void 0:s.fill)??"transparent"}}}]}(h,t,l);default:return n.warnOnce(`unknown chart type: ${e}; expected one of: ${vx.join(", ")}`),Sx(h,l)}}(M,g,l,c,d,h,u),A=function(t,e,i,s,n,a){if(!n)return[];const o=xx(t,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.bar)?void 0:i.series)?void 0:s.fill})),r=o?{fill:o}:{itemStyler({datum:t}){const{up:n,down:a}=e().palette;return{fill:t[i]<t[s]?null==n?void 0:n.fill:null==a?void 0:a.fill}}};return[{type:"bar",xKey:"date",yKey:a,tooltip:{enabled:!1},highlight:{enabled:!1},fillOpacity:xx(t,(t=>{var e,i,s;return null==(s=null==(i=null==(e=t.overrides)?void 0:e.bar)?void 0:i.series)?void 0:s.fillOpacity}))??.5,...r,focusPriority:1,fastDataProcessing:!0}]}(M,i,h,u,y,p),L={navigator:{enabled:m,...y?{miniChart:{enabled:m,series:[{type:"line",xKey:l,yKey:p,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},N={annotations:{enabled:v,optionsToolbar:{enabled:v},snap:!0,axesButtons:{enabled:"string"==typeof M||((null==(r=null==(o=null==(a=null==(s=null==M?void 0:M.overrides)?void 0:s.common)?void 0:a.annotations)?void 0:o.axesButtons)?void 0:r.enabled)??!0)},toolbar:{enabled:v,buttons:bx,padding:0},data:S,xKey:l,volumeKey:y?p:void 0}},k=x?{statusBar:{enabled:!0,data:S,highKey:c,openKey:h,lowKey:d,closeKey:u,volumeKey:y?p:void 0}}:null,w={zoom:{enabled:b,autoScaling:{enabled:!0},enableIndependentAxes:!0}},C={ranges:{enabled:f}},T=y?[{type:"number",position:"left",keys:[p],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"}}]:[];return{theme:{baseTheme:"string"==typeof M?M:"ag-financial",...te("object"==typeof M?M:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:v},annotations:{...fx}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...A,...D],axes:[{type:"number",position:"right",keys:[h,u,c,d],interval:{maxSpacing:xx(M,(t=>{var e,i,s,n,a;return null==(a=null==(n=null==(s=null==(i=null==(e=t.overrides)?void 0:e.common)?void 0:i.axes)?void 0:s.number)?void 0:n.interval)?void 0:a.maxSpacing}))??45},label:{format:xx(M,(t=>{var e,i,s,n,a;return null==(a=null==(n=null==(s=null==(i=null==(e=t.overrides)?void 0:e.common)?void 0:i.axes)?void 0:s.number)?void 0:n.label)?void 0:a.format}))??".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...T,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:S,...N,...L,...k,...w,...C,...I}},gauge:function(t,e){if(function(t){return"radial-gauge"===t.type}(t)){return function(t){const{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:d,padding:u,subtitle:p,theme:g,title:m,width:y,type:f,cursor:x,nodeClickRange:v,tooltip:b,value:M,scale:S={},startAngle:I,endAngle:D,highlightStyle:A,segmentation:L,bar:N,needle:k,targets:w,outerRadius:C,innerRadius:T,outerRadiusRatio:E,innerRadiusRatio:O,cornerRadius:R,cornerMode:j,label:P,secondaryLabel:z,spacing:B,...F}=t,{fills:G,fillMode:U,fill:Y,fillOpacity:W,stroke:V,strokeWidth:_,strokeOpacity:H,lineDash:Z,lineDashOffset:K,min:$=0,max:X=1,interval:Q={},label:q={}}=S,J=ox(t,{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:d,padding:u,subtitle:p,theme:g,title:m,tooltip:rx(b),width:y}),tt=ox(S,{fills:G,fillMode:U,fill:Y,fillOpacity:W,stroke:V,strokeWidth:_,strokeOpacity:H,lineDash:Z,lineDashOffset:K});return{...J,series:[ox(t,{startAngle:ax,endAngle:ax,needle:null!=k?{enabled:!0,...k}:ax,scale:tt,type:f,cursor:x,nodeClickRange:v,listeners:r,tooltip:b,value:M,highlightStyle:A,segmentation:L,bar:N,targets:w,outerRadius:C,innerRadius:T,outerRadiusRatio:E,innerRadiusRatio:O,cornerRadius:R,cornerMode:j,label:P,secondaryLabel:z,spacing:B,...F})],axes:[{type:"angle-number",min:$,max:X,startAngle:I,endAngle:D,interval:Q??{},label:q??{}},{type:"radius-number"}]}}(lx(t,e))}if(function(t){return"linear-gauge"===t.type}(t)){return function(t){const{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:d,padding:u,subtitle:p,theme:g,title:m,width:y,type:f,cursor:x,nodeClickRange:v,tooltip:b,value:M,scale:S={},direction:I="vertical",thickness:D,highlightStyle:A,segmentation:L,bar:N,targets:k,cornerRadius:w,cornerMode:C,label:T,...E}=t,{fills:O,fillMode:R,fill:j,fillOpacity:P,stroke:z,strokeWidth:B,strokeOpacity:F,lineDash:G,lineDashOffset:U,min:Y=0,max:W=1,interval:V={},label:_={}}=S,H=ox(t,{animation:e,background:i,container:s,contextMenu:n,footnote:a,height:o,listeners:r,locale:l,minHeight:c,minWidth:h,overrideDevicePixelRatio:d,padding:u,subtitle:p,theme:g,title:m,tooltip:rx(b),width:y}),Z=ox(S,{fills:O,fillMode:R,fill:j,fillOpacity:P,stroke:z,strokeWidth:B,strokeOpacity:F,lineDash:G,lineDashOffset:U}),K=ox(t,{scale:Z,type:f,cursor:x,nodeClickRange:v,listeners:r,tooltip:b,value:M,direction:I,thickness:D,highlightStyle:A,segmentation:L,bar:N,targets:k,cornerRadius:w,cornerMode:C,label:T,...E}),{placement:$,...X}=_;let Q,q;const J="horizontal"===I;J?(Q="before"===$?"top":"bottom",q="left"):(Q="after"===$?"right":"left",q="bottom");const tt={type:"number",position:Q,min:Y,max:W,reverse:!J,interval:V,label:X,nice:!1},et={type:"number",position:q,min:0,max:1,label:{enabled:!1}};return{...H,series:[K],axes:J?[tt,et]:[et,tt]}}(lx(t,e))}const{animation:i,background:s,container:n,contextMenu:a,footnote:o,height:r,listeners:l,locale:c,minHeight:h,minWidth:d,padding:u,subtitle:p,theme:g,title:m,tooltip:y,width:f}=t;return ox(t,{animation:i,background:s,container:n,contextMenu:a,footnote:o,height:r,listeners:l,locale:c,minHeight:h,minWidth:d,padding:u,subtitle:p,theme:g,title:m,tooltip:y,width:f})},sparkline:function(t){const{background:e,container:i,height:s,listeners:n,locale:a,minHeight:o,minWidth:r,overrideDevicePixelRatio:l,padding:c,width:h,theme:d,data:u,crosshair:p,axis:g,min:m,max:y,tooltip:f,context:x,...v}=t,b=ox(t,{background:e,container:i,height:s,listeners:n,locale:a,minHeight:o,minWidth:r,overrideDevicePixelRatio:l,padding:c,width:h,tooltip:ax,context:ax,data:ax,crosshair:ax,axis:ax,min:ax,max:ax,theme:ax}),{data:M,series:[S]=[],datumKey:I}=Tx(u),D=v;null!=S&&Object.assign(D,S),D.tooltip={...f,renderer:Rx(x,f,I)},b.theme=Cx(d,wx),b.data=M,b.series=[D];const A="bar"!==D.type||"horizontal"!==D.direction,[L,N]=A?["bottom","left"]:["left","bottom"],k={...Ex(g,"category"),position:L,...ox(t,{crosshair:p})},w={type:"number",gridLine:Ox(g,!1,t),position:N,...ox(t,{min:m,max:y})};return b.axes=A?[w,k]:[k,w],b}},Px={sparkline:Tx};function zx(t,e){var i,s,a,o;let r=[];const l=Wh(t),c=Ph(t),h=c?Nh.get(c):"unknown";for(const n of Mh)if("unknown"===h||n.chartTypes.includes(h))if("root"===n.type||"legend"===n.type){const e=t[n.optionsKey];if(null==e)continue;n.optionsInnerKey?e[n.optionsInnerKey]&&(r.push(`${n.optionsKey}.${n.optionsInnerKey}`),delete e[n.optionsInnerKey]):(r.push(n.optionsKey),delete t[n.optionsKey])}else if("axis"===n.type){if(!("axes"in t)||!(null==(i=t.axes)?void 0:i.some((t=>t.type===n.identifier))))continue;r.push(`axis[type=${n.identifier}]`),t.axes=t.axes.filter((t=>t.type!==n.identifier))}else if("axis-option"===n.type){if(!("axes"in t)||!(null==(s=t.axes)?void 0:s.some((t=>t[n.optionsKey]))))continue;r.push(`axis.${n.optionsKey}`),t.axes.forEach((t=>{t[n.optionsKey]&&delete t[n.optionsKey]}))}else if("series"===n.type){if(n.community)continue;if(!(null==(a=t.series)?void 0:a.some((t=>t.type===n.identifier))))continue;r.push(`series[type=${n.identifier}]`),t.series=t.series.filter((t=>t.type!==n.identifier))}else if("series-option"===n.type){if(!(null==(o=t.series)?void 0:o.some((t=>t[n.optionsKey]))))continue;r.push(`series.${n.optionsKey}`),t.series.forEach((t=>{t[n.optionsKey]&&delete t[n.optionsKey]}))}if(r.length&&!e){l&&(r=["AgCharts.createGauge"]);let e="ag-charts-enterprise",i="https://www.ag-grid.com/charts/javascript/installation/";"integrated"===t.mode&&(e="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",i="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),n.warnOnce([`unable to use these enterprise features as '${e}' has not been loaded:`,"",...r,"",`See: ${i}`].join("\n"))}}function Bx(t){return(null==t?void 0:t.up)||(null==t?void 0:t.down)||(null==t?void 0:t.neutral)?"user-full":(null==t?void 0:t.fills)||(null==t?void 0:t.strokes)?"user-indexed":"inbuilt"}var Fx="white",Gx={get cartesian(){return{seriesTypes:Nh.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Nh.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Nh.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:Nh.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:Nh.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:Nh.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:Nh.gaugeTypes,commonOptions:[]}}},Ux={"radial-gauge":!0,"linear-gauge":!0};function Yx(t){return!0===Ux[t]}var Wx=Object.values(Gx).reduce(((t,{commonOptions:e})=>t.concat(e)),[]),Vx=class t{static getAxisDefaults(t){return te(t,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,style:[{stroke:{$ref:"gridLineColor"},lineDash:[]}]},crossLines:{enabled:!1,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}},crosshair:{enabled:!0}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"backgroundColor"}},padding:{top:{$ref:"padding"},right:{$ref:"padding"},bottom:{$ref:"padding"},left:{$ref:"padding"}},seriesArea:{padding:{top:0,right:0,bottom:0,left:0}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.4166666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:wg,textAlign:Cg},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:wg,textAlign:Cg},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:wg,textAlign:Cg},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}}},tooltip:{enabled:!0,darkTheme:Ig,delay:0},overlays:{darkTheme:Ig},listeners:{}}}constructor(t={}){const{overrides:e,palette:i}=cr(t),s=this.createChartConfigPerChartType(this.getDefaults()),n={};e&&this.mergeOverrides(s,n,e);const{fills:a,strokes:o,...r}=this.getDefaultColors();this.palette=le(te(i,{fills:Object.values(a),strokes:Object.values(o),...r})),this.paletteType=Bx(i),this.config=le(this.templateTheme(s)),this.presets=le(n)}mergeOverrides(t,e,i){for(const{seriesTypes:s,commonOptions:n}of Object.values(Gx)){const e={...i.common};for(const t of Wx)n.includes(t)||delete e[t];if(e)for(const i of s){const s=i;Yx(s)||(t[s]=te(e,t[s]))}}Nh.seriesTypes.forEach((s=>{const n=s,a=i[n];Yx(n)?e[n]=a:t[n]=te(a,t[n])}))}createChartConfigPerChartType(t){for(const[e,{seriesTypes:i}]of Object.entries(Gx)){const s=wh.get(e);for(const e of i)t[e]??(t[e]=cr(s))}return t}getDefaults(){const e=(e,i)=>{const s={},n={axes:{},...Dh.getThemeTemplates(),...this.getChartDefaults(),...wh.get(e)};for(const a of i){s[a]=te(Ch.getThemeTemplate(a),s[a]??cr(n));const{axes:e}=s[a];for(const i of bh.keys())e[i]=te(e[i],bh.getThemeTemplate(i),t.cartesianAxisDefault[i])}return s};return te(e("cartesian",Nh.cartesianTypes),e("polar",Nh.polarTypes),e("hierarchy",Nh.hierarchyTypes),e("topology",Nh.topologyTypes),e("flow-proportion",Nh.flowProportionTypes),e("standalone",Nh.standaloneTypes),e("gauge",Nh.gaugeTypes))}static applyTemplateTheme(t,e,i){if(N(t))for(let s=0;s<t.length;s++){const e=t[s];"symbol"==typeof e&&(null==i?void 0:i.has(e))&&(t[s]=i.get(e))}else for(const[s,n]of Object.entries(t))"symbol"==typeof n&&(null==i?void 0:i.has(n))&&(t[s]=i.get(n))}templateTheme(e,i=!0){const s=i?cr(e):e,n=this.getTemplateParameters();return dr(s,t.applyTemplateTheme,void 0,void 0,n),s}getDefaultColors(){return{fills:If,strokes:Df,up:{fill:If.GREEN,stroke:Df.GREEN},down:{fill:If.RED,stroke:Df.RED},neutral:{fill:If.GRAY,stroke:Df.GRAY},altUp:{fill:If.BLUE,stroke:Df.BLUE},altDown:{fill:If.ORANGE,stroke:Df.ORANGE},altNeutral:{fill:If.GRAY,stroke:Df.GRAY}}}getPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:[.675]},backgroundColor:Fx,borderColor:{$foregroundBackgroundMix:[.818]},foregroundColor:"#464646",fontFamily:"Verdana, sans-serif",fontSize:12,fontWeight:400,gridLineColor:{$foregroundBackgroundAccentMix:[.93,.085]},padding:20,subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:[.975]},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:"#181d1f",chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},inputBackgroundColor:{$ref:"backgroundColor"},inputTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"backgroundColor"}}}getTemplateParameters(){var t,e,i,s,n,a,o,r,l,c,h,d;const{isEnterprise:u}=sx,p=new Map;p.set(Ig,!1),p.set(Ag,u),p.set(Dg,!u),p.set(Lg,"#d9d9d9"),p.set(Ng,Fx),p.set(kg,"#00000080"),p.set(Vg,[If.ORANGE,If.YELLOW,If.GREEN]),p.set(_g,[If.BLUE,If.RED]),p.set(Hg,"#aaa"),p.set(Zg,[If.GREEN,If.YELLOW,If.RED]),p.set(Kg,["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"]),p.set(wg,"block"),p.set(Cg,"center"),p.set($g,["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),p.set(Xg,["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),p.set(qg,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),p.set(Wg,Fx),p.set(Qg,If.BLUE),p.set(tm,If.BLUE),p.set(Jg,If.BLUE),p.set(em,Fx),p.set(im,"#fafafa"),p.set(sm,"#ddd"),p.set(nm,"#000"),p.set(am,"#181d1f"),p.set(om,"#e35c5c"),p.set(rm,"#e35c5c"),p.set(lm,"#fafafa"),p.set(cm,"#ddd"),p.set(hm,"#000"),p.set(dm,"top"),p.set(um,!1);const g=this.getDefaultColors();return p.set(Tg,(null==(t=this.palette.up)?void 0:t.stroke)??g.up.stroke),p.set(Og,(null==(e=this.palette.up)?void 0:e.fill)??g.up.fill),p.set(Eg,(null==(i=this.palette.down)?void 0:i.stroke)??g.down.stroke),p.set(Rg,(null==(s=this.palette.down)?void 0:s.fill)??g.down.fill),p.set(jg,(null==(n=this.palette.neutral)?void 0:n.stroke)??g.neutral.stroke),p.set(Pg,(null==(a=this.palette.neutral)?void 0:a.fill)??g.neutral.fill),p.set(zg,(null==(o=this.palette.altUp)?void 0:o.stroke)??g.up.stroke),p.set(Fg,(null==(r=this.palette.altUp)?void 0:r.fill)??g.up.fill),p.set(Bg,(null==(l=this.palette.altDown)?void 0:l.stroke)??g.down.stroke),p.set(Gg,(null==(c=this.palette.altDown)?void 0:c.fill)??g.down.fill),p.set(Ug,(null==(h=this.palette.altNeutral)?void 0:h.fill)??g.altNeutral.fill),p.set(Yg,(null==(d=this.palette.altNeutral)?void 0:d.stroke)??g.altNeutral.stroke),p}};Vx.cartesianAxisDefault={number:Vx.getAxisDefaults({line:{enabled:!1}}),log:Vx.getAxisDefaults({base:10,line:{enabled:!1},interval:{minSpacing:NaN}}),category:Vx.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:um},crosshair:{enabled:!1}}),"grouped-category":Vx.getAxisDefaults({tick:{enabled:!0,stroke:Lg},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}}),time:Vx.getAxisDefaults({gridLine:{enabled:um}}),"ordinal-time":Vx.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:um}}),"angle-category":Vx.getAxisDefaults({label:{spacing:5},gridLine:{enabled:um}}),"angle-number":Vx.getAxisDefaults({label:{spacing:5},gridLine:{enabled:um}}),"radius-category":Vx.getAxisDefaults({line:{enabled:!1}}),"radius-number":Vx.getAxisDefaults({line:{enabled:!1}})};var _x=Vx,Hx="#192232",Zx={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Kx={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},$x=class extends _x{getDefaultColors(){return{fills:Zx,strokes:Kx,up:{fill:Zx.GREEN,stroke:Kx.GREEN},down:{fill:Zx.RED,stroke:Kx.RED},neutral:{fill:Zx.GRAY,stroke:Kx.GRAY},altUp:{fill:Zx.BLUE,stroke:Kx.BLUE},altDown:{fill:Zx.ORANGE,stroke:Kx.ORANGE},altNeutral:{fill:Zx.GRAY,stroke:Kx.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:[.263]},backgroundColor:Hx,borderColor:{$foregroundBackgroundMix:[.784]},chromeBackgroundColor:{$foregroundBackgroundMix:[.93]},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundAccentMix:[.743,.01]},subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.57]},chromeTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$foregroundBackgroundAccentMix:[.35,.1]}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Ig,!0),t.set(Wg,Hx),t.set(Lg,"#7f8389"),t.set(Vg,[Zx.ORANGE,Zx.YELLOW,Zx.GREEN]),t.set(Zg,[Zx.GREEN,Zx.YELLOW,Zx.RED]),t.set(Kg,["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"]),t.set($g,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.set(Xg,["#192834","#3b5164","#496275","#577287","#668399"]),t.set(Ng,Hx),t.set(Qg,Zx.BLUE),t.set(Jg,"#fff"),t.set(tm,Zx.BLUE),t.set(em,Hx),t.set(im,"#28313e"),t.set(sm,"#4b525d"),t.set(nm,"#fff"),t.set(am,"#fff"),t.set(lm,"#28313e"),t.set(cm,"#4b525d"),t.set(hm,"#fff"),t}constructor(t){super(t)}},Xx={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Qx={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},qx=class extends $x{getDefaultColors(){return{fills:{...Xx},strokes:{...Qx},up:{fill:Xx.GREEN,stroke:Qx.GREEN},down:{fill:Xx.RED,stroke:Qx.RED},neutral:{fill:Xx.BLUE,stroke:Qx.BLUE},altUp:{fill:Xx.GREEN,stroke:Qx.GREEN},altDown:{fill:Xx.RED,stroke:Qx.RED},altNeutral:{fill:Xx.GRAY,stroke:Qx.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.88,.01]},padding:0}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[Xx.GREEN,Xx.BLUE,Xx.RED]),t.set(Qg,Xx.BLUE),t.set(tm,Xx.BLUE),t.set(wg,"overlay"),t.set(Cg,"left"),t.set(dm,"bottom"),t.set(um,!0),t}},Jx={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},tv={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},ev=class extends _x{getDefaultColors(){return{fills:{...Jx},strokes:{...tv},up:{fill:Jx.GREEN,stroke:tv.GREEN},down:{fill:Jx.RED,stroke:tv.RED},neutral:{fill:Jx.BLUE,stroke:tv.BLUE},altUp:{fill:Jx.GREEN,stroke:tv.GREEN},altDown:{fill:Jx.RED,stroke:tv.RED},altNeutral:{fill:Jx.GRAY,stroke:tv.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.94,.01]},padding:0}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[Jx.GREEN,Jx.BLUE,Jx.RED]),t.set(Qg,Jx.BLUE),t.set(tm,Jx.BLUE),t.set(wg,"overlay"),t.set(Cg,"left"),t.set(dm,"bottom"),t.set(um,!0),t}},iv={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},sv={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},nv=class extends $x{getDefaultColors(){return{fills:iv,strokes:sv,up:{fill:iv.GREEN,stroke:sv.GREEN},down:{fill:iv.RED,stroke:sv.RED},neutral:{fill:iv.GRAY,stroke:sv.GRAY},altUp:{fill:iv.BLUE,stroke:sv.BLUE},altDown:{fill:iv.RED,stroke:sv.RED},altNeutral:{fill:iv.GRAY,stroke:sv.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[iv.ORANGE,iv.YELLOW,iv.GREEN]),t.set(Kg,["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"]),t.set(Zg,[iv.GREEN,iv.YELLOW,iv.RED]),t.set(Qg,iv.BLUE),t.set(tm,iv.BLUE),t}},av={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},ov={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},rv=class extends _x{getDefaultColors(){return{fills:av,strokes:ov,up:{fill:av.GREEN,stroke:ov.GREEN},down:{fill:av.RED,stroke:ov.RED},neutral:{fill:av.GRAY,stroke:ov.GRAY},altUp:{fill:av.BLUE,stroke:ov.BLUE},altDown:{fill:av.RED,stroke:ov.RED},altNeutral:{fill:av.GRAY,stroke:ov.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[av.ORANGE,av.YELLOW,av.GREEN]),t.set(Kg,["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"]),t.set(Zg,[av.GREEN,av.YELLOW,av.RED]),t.set(Qg,av.BLUE),t.set(tm,av.BLUE),t}},lv={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},cv={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},hv=class extends $x{getDefaultColors(){return{fills:lv,strokes:cv,up:{fill:lv.GREEN,stroke:cv.GREEN},down:{fill:lv.RED,stroke:cv.RED},neutral:{fill:lv.GRAY,stroke:cv.GRAY},altUp:{fill:lv.BLUE,stroke:cv.BLUE},altDown:{fill:lv.RED,stroke:cv.RED},altNeutral:{fill:lv.GRAY,stroke:cv.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[lv.BLUE,lv.RED]),t.set(Kg,[lv.BLUE,lv.PURPLE,lv.MAGENTA,lv.PINK,lv.RED,lv.ORANGE,lv.YELLOW,lv.GREEN]),t.set(Zg,[lv.BLUE,lv.RED]),t.set(Qg,lv.BLUE),t.set(tm,lv.BLUE),t}},dv={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},uv={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},pv=class extends _x{getDefaultColors(){return{fills:dv,strokes:uv,up:{fill:dv.GREEN,stroke:uv.GREEN},down:{fill:dv.RED,stroke:uv.RED},neutral:{fill:dv.GRAY,stroke:uv.GRAY},altUp:{fill:dv.BLUE,stroke:uv.BLUE},altDown:{fill:dv.RED,stroke:uv.RED},altNeutral:{fill:dv.GRAY,stroke:uv.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[dv.BLUE,dv.RED]),t.set(Kg,[dv.BLUE,dv.PURPLE,dv.MAGENTA,dv.PINK,dv.RED,dv.ORANGE,dv.YELLOW,dv.GREEN]),t.set(Zg,[dv.BLUE,dv.RED]),t.set(Qg,dv.BLUE),t.set(tm,dv.BLUE),t}},gv={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},mv={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},yv=class extends $x{getDefaultColors(){return{fills:{...gv,RED:gv.ORANGE},strokes:{...mv,RED:mv.ORANGE},up:{fill:gv.GREEN,stroke:mv.GREEN},down:{fill:gv.ORANGE,stroke:mv.ORANGE},neutral:{fill:gv.GRAY,stroke:mv.GRAY},altUp:{fill:gv.BLUE,stroke:mv.BLUE},altDown:{fill:gv.ORANGE,stroke:mv.ORANGE},altNeutral:{fill:gv.GRAY,stroke:mv.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[gv.ORANGE,gv.YELLOW,gv.GREEN]),t.set(Zg,[gv.GREEN,gv.YELLOW,gv.ORANGE]),t.set(Qg,gv.BLUE),t.set(tm,gv.BLUE),t}},fv={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},xv={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},vv=class extends _x{getDefaultColors(){return{fills:{...fv,RED:fv.ORANGE},strokes:{...xv,RED:xv.ORANGE},up:{fill:fv.GREEN,stroke:xv.GREEN},down:{fill:fv.ORANGE,stroke:xv.ORANGE},neutral:{fill:xv.GRAY,stroke:xv.GRAY},altUp:{fill:fv.BLUE,stroke:xv.BLUE},altDown:{fill:fv.ORANGE,stroke:xv.ORANGE},altNeutral:{fill:fv.GRAY,stroke:xv.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[fv.ORANGE,fv.YELLOW,fv.GREEN]),t.set(Zg,[fv.GREEN,fv.YELLOW,fv.ORANGE]),t.set(Qg,fv.BLUE),t.set(tm,fv.BLUE),t}},bv={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Mv={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Sv=class extends $x{getDefaultColors(){return{fills:bv,strokes:Mv,up:{fill:bv.GREEN,stroke:Mv.GREEN},down:{fill:bv.RED,stroke:Mv.RED},neutral:{fill:bv.GRAY,stroke:Mv.GRAY},altUp:{fill:bv.BLUE,stroke:Mv.BLUE},altDown:{fill:bv.ORANGE,stroke:Mv.ORANGE},altNeutral:{fill:bv.GRAY,stroke:Mv.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[bv.ORANGE,bv.YELLOW,bv.GREEN]),t.set(Kg,["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"]),t.set(Zg,[bv.GREEN,bv.YELLOW,bv.RED]),t.set(Qg,bv.BLUE),t.set(tm,bv.BLUE),t}},Iv={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Dv={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Av=class extends _x{getDefaultColors(){return{fills:Iv,strokes:Dv,up:{fill:Iv.GREEN,stroke:Dv.GREEN},down:{fill:Iv.RED,stroke:Dv.RED},neutral:{fill:Iv.GRAY,stroke:Dv.GRAY},altUp:{fill:Iv.BLUE,stroke:Dv.BLUE},altDown:{fill:Iv.ORANGE,stroke:Dv.ORANGE},altNeutral:{fill:Iv.GRAY,stroke:Dv.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Vg,[Iv.ORANGE,Iv.YELLOW,Iv.GREEN]),t.set(Kg,["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"]),t.set(Zg,[Iv.GREEN,Iv.YELLOW,Iv.RED]),t.set(Qg,Iv.BLUE),t.set(tm,Iv.BLUE),t}},Lv=zu((()=>new _x)),Nv={"ag-default-dark":zu((()=>new $x)),"ag-sheets-dark":zu((()=>new yv)),"ag-polychroma-dark":zu((()=>new hv)),"ag-vivid-dark":zu((()=>new Sv)),"ag-material-dark":zu((()=>new nv)),"ag-financial-dark":zu((()=>new qx)),null:Lv,undefined:Lv,"ag-default":Lv,"ag-sheets":zu((()=>new vv)),"ag-polychroma":zu((()=>new pv)),"ag-vivid":zu((()=>new Av)),"ag-material":zu((()=>new rv)),"ag-financial":zu((()=>new ev))},kv=zu((function(t){if(t instanceof _x)return t;if(null==t||"string"==typeof t){const e=Nv[t];return e?e():(n.warnOnce(`the theme [${t}] is invalid, using [ag-default] instead.`),Lv())}const{errors:e}=G(t,wv,"theme");if(!e.length){const e=function(t){let e,i,s=t;const n=[];for(;"object"==typeof s;)e??(e=s.palette),i??(i=s.params),s.overrides&&n.push(s.overrides),s=s.baseTheme;return{baseTheme:s,overrides:te(...n),params:i,palette:e}}(t);return new((e.baseTheme?kv(e.baseTheme):Lv()).constructor)(e)}for(const{message:i}of e)n.warnOnce(i);return Lv()}));var wv={baseTheme:V(Z,H),overrides:H,params:H,palette:{fills:et(Z),strokes:et(Z),up:{fill:Z,stroke:Z},down:{fill:Z,stroke:Z},neutral:{fill:Z,stroke:Z}}},Cv=new Set(["map-shape-background","map-line-background"]),Tv=class t{constructor(e,i,s,n,a,o=!1){this.themeParameters={},this.debug=Es.create(!0,"opts"),this.optionMetadata=n??{},this.processedOverrides=i??{};let r,l,c,h,d,u=null;if(e instanceof t){if(u=e,this.specialOverrides=u.specialOverrides,!a)throw new Error("AG Charts - internal error: deltaOptions must be supplied.");this.userOptions=te(a,cr(u.userOptions,t.OPTIONS_CLONE_OPTS))}else this.userOptions=e,this.specialOverrides=this.specialOverridesDefaults({...s});o&&this.removeLeftoverSymbols(this.userOptions),!o&&null!=a&&t.isFastPathDelta(a)&&null!=u?({activeTheme:r,processedOptions:l,defaultAxes:c,fastDelta:h}=this.fastSetup(a,u)):({activeTheme:r,processedOptions:l,defaultAxes:c,themeParameters:d}=this.slowSetup(i,a,o)),this.activeTheme=r,this.processedOptions=l,this.defaultAxes=c,this.fastDelta=h,this.themeParameters=d??{}}static isFastPathDelta(t){for(const e of Object.keys(t))if(!this.FAST_PATH_OPTIONS.has(e))return!1;return!0}fastSetup(t,e){const{activeTheme:i,defaultAxes:s,processedOptions:n}=e,{presetType:a}=this.optionMetadata,o=a?Px[a]:void 0;if(null!=a&&null!=t.data&&null!=o){const{series:e,data:i}=o(t.data);t=te({series:e,data:i},t)}this.fastSeriesSetup(t,n);return{activeTheme:i,defaultAxes:s,processedOptions:te(t,n),fastDelta:t}}fastSeriesSetup(t,e){var i;t.series&&((null==(i=t.series)?void 0:i.every(((t,i)=>{var s;return lr(t,(null==(s=e.series)?void 0:s[i])??{})})))?delete t.series:t.series=t.series.map(((t,i)=>{var s;return te(t,(null==(s=e.series)?void 0:s[i])??{})})))}slowSetup(e,i,s=!1){var n;let a=cr(this.userOptions,t.OPTIONS_CLONE_OPTS);i&&(a=te(i,a),s&&this.removeLeftoverSymbols(a));const{presetType:o}=this.optionMetadata;if(null!=o){const t=jx[o],e=this.userOptions,i=this.userOptions.type,s=null!=i?kv(this.userOptions.theme).presets[i]:void 0;this.debug(">>> AgCharts.createOrUpdate() - applying preset",e),a=(null==t?void 0:t(e,s,(()=>this.activeTheme)))??a}sx.isEnterprise||zx(a);const r=kv(a.theme);this.sanityCheck(a),this.removeDisabledOptions(a);const l=this.optionsType(a),{axes:c={},annotations:h={},series:d,...u}=this.getSeriesThemeConfig(l,r),[p,g]=this.splitAnnotationsOptions(h);this.annotationThemes=cr(g);const m=this.getDefaultAxes(a,d);let y=te(e,a,p,u,m);this.processAxesOptions(y,c),this.processSeriesOptions(y,r),this.processMiniChartSeriesOptions(y,r),y=cr(y,t.OPTIONS_CLONE_OPTS);const f=this.getThemeParameters(r,y);return this.resolveThemeOperations(f,f),this.resolveThemeOperations(f,y),this.resolveThemeOperations(f,this.annotationThemes),(zh(y)||Yh(y)||function(t){const e=Ph(t);return Bh(t)&&"pie"!==e&&"donut"!==e}(y))&&null==(null==(n=y.legend)?void 0:n.enabled)&&(y.legend??(y.legend={}),y.legend.enabled=y.series.length>1),this.enableConfiguredOptions(y,this.userOptions),r.templateTheme(y,!1),this.removeDisabledOptions(a),function(t){const e="mode"in t&&"integrated"===t.mode;for(const i of Qo.byType("root","legend")){const s=t[i.optionsKey],n=null!=s&&!1===s.enabled,a=!("removable"in i)||!0===i.removable||"standalone-only"===i.removable&&!e;n&&a&&delete t[i.optionsKey]}}(y),sx.isEnterprise||zx(y,!0),this.debug("AgCharts.createOrUpdate() - processed options",y),{activeTheme:r,processedOptions:y,defaultAxes:m,themeParameters:f}}diffOptions(t){return this===t?{}:null==t?this.processedOptions:this.fastDelta??rr(t.processedOptions,this.processedOptions)}getSeriesThemeConfig(t,e){return(null==e?void 0:e.config[t])??{}}getDefaultAxes(t,e){var i;const s=this.optionsType(t);let n=(null==(i=t.series)?void 0:i.find((t=>(t.type??"line")===s)))??{};return Ch.isDerivedDefaultAxes(s)&&(n=te(n,e)),Ch.cloneDefaultAxes(s,n)}optionsType(t){var e,i;return(null==(i=null==(e=t.series)?void 0:e[0])?void 0:i.type)??"line"}sanityCheck(t){this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t)}splitAnnotationsOptions(t){const{axesButtons:e=null,enabled:i=null,optionsToolbar:s=null,toolbar:n=null,...a}=t;return null==e&&null==i&&null==s&&null==n?[{},a]:[{annotations:{axesButtons:e,enabled:i,optionsToolbar:s,toolbar:n}},a]}processAxesOptions(t,e){var i;"axes"in t&&(t.axes=null==(i=t.axes)?void 0:i.map((t=>{var i,s,n;const{crossLines:a,...o}=te(null==(i=e[t.type])?void 0:i[t.position],e[t.type]);t.crossLines&&(t.crossLines=ee(t.crossLines,a));const r=null==(s=o.gridLine)?void 0:s.style;(null==(n=t.gridLine)?void 0:n.style)&&(null==r?void 0:r.length)&&(t.gridLine.style=t.gridLine.style.map(((t,e)=>null!=t.stroke||null!=t.lineDash?te(t,r.at(e%r.length)):t)));const{top:l,right:c,bottom:h,left:d,...u}=te(t,o);return u})))}processSeriesOptions(t,e){var i,s;const n=this.getTooltipPositionDefaults(t),a=E(t.theme)?Bx(null==(i=t.theme)?void 0:i.palette):"inbuilt",o={colourIndex:0,userPalette:a},r=null==(s=t.series)?void 0:s.map((i=>{i.type??(i.type=this.getDefaultSeriesType(t));const{innerLabels:s,...r}=this.getSeriesThemeConfig(i.type,e).series??{},l=Cv.has(i.type)?{colourIndex:0,userPalette:a}:o,c=this.getSeriesPalette(i.type,l,e),h=this.getTooltipRangeDefaults(t,i.type),d=te(this.getSeriesGroupingOptions(i),i,n,h,r,c,{visible:!0});return d.innerLabels&&(d.innerLabels=ee(d.innerLabels,s)),d}));t.series=this.setSeriesGroupingOptions(r??[])}processMiniChartSeriesOptions(t,e){var i,s;let n=null==(s=null==(i=t.navigator)?void 0:i.miniChart)?void 0:s.series;if(null==n)return;const a={colourIndex:0,userPalette:E(t.theme)?Bx(t.theme.palette):"inbuilt"};n=n.map((t=>{t.type??(t.type="line");const{innerLabels:i,...s}=this.getSeriesThemeConfig(t.type,e).series??{};return te(this.getSeriesGroupingOptions(t),t,s,this.getSeriesPalette(t.type,a,e))})),t.navigator.miniChart.series=this.setSeriesGroupingOptions(n)}getThemeParameters(t,e){const i=t.getPublicParameters();if(!O(e.theme)||!e.theme.params)return i;const s=Y((t=>R(t)&&Yt.validColorString(t)),"a color"),a={accentColor:s,axisColor:s,backgroundColor:s,borderColor:s,foregroundColor:s,fontFamily:Z,fontSize:_,fontWeight:V(Z,_),gridLineColor:s,padding:_,subtleTextColor:s,textColor:s,chromeBackgroundColor:s,chromeFontFamily:Z,chromeFontSize:_,chromeFontWeight:V(Z,_),chromeSubtleTextColor:s,chromeTextColor:s,inputBackgroundColor:s,inputTextColor:s,crosshairLabelBackgroundColor:s,crosshairLabelTextColor:s},{valid:o,errors:r}=G(e.theme.params,a);for(const{message:l}of r)n.warnOnce(l);return te(o,i)}resolveThemeOperations(t,e){const i=gr(e,t,new Set(["palette","data"]));this.debug("resolveTheme()",i)}getSeriesPalette(t,e,i){const s=Ch.getPaletteFactory(t),{colourIndex:n,userPalette:a}=e,{fills:o=[],strokes:r=[]}=i.palette;return null==s?void 0:s({userPalette:a,colorsCount:Math.max(o.length,r.length),themeTemplateParameters:i.getTemplateParameters(),palette:i.palette,takeColors:t=>(e.colourIndex+=t,{fills:v(o,t,n),strokes:v(r,t,n)})})}getSeriesGroupingOptions(t){const e=Ch.isGroupable(t.type),i=Ch.isStackable(t.type),s=Ch.isStackedByDefault(t.type);t.grouped&&!e&&n.warnOnce(`unsupported grouping of series type "${t.type}".`),!t.stacked&&!t.stackGroup||i||n.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:a,stacked:o}=t;return o??(o=(s||null!=t.stackGroup)&&!(e&&a)),a??(a=!0),{stacked:i&&o,grouped:e&&a&&!(i&&o)}}setSeriesGroupingOptions(t){const e=this.getSeriesGrouping(t);this.debug("setSeriesGroupingOptions() - series grouping: ",e);const i={},s=e.reduce(((t,e)=>{var i;return"default"===e.groupType||(t[i=e.seriesType]??(t[i]=0),t[e.seriesType]+="stack"===e.groupType?1:e.series.length),t}),{});return e.flatMap((t=>{var e;switch(i[e=t.seriesType]??(i[e]=0),t.groupType){case"stack":{const e=i[t.seriesType]++;return t.series.map(((i,n)=>Object.assign(i,{seriesGrouping:{groupId:t.groupId,groupIndex:e,groupCount:s[t.seriesType],stackIndex:n,stackCount:t.series.length}})))}case"group":return t.series.map((e=>Object.assign(e,{seriesGrouping:{groupId:t.groupId,groupIndex:i[t.seriesType]++,groupCount:s[t.seriesType],stackIndex:0,stackCount:0}})))}return t.series})).map((({stacked:t,grouped:e,...i})=>i))}getSeriesGroupId(t){return[t.type,t.xKey,t.stacked?t.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const e=new Map;return t.reduce(((t,i)=>{const s=i.type;if(i.stacked||i.grouped){const n=this.getSeriesGroupId(i);if(!e.has(n)){const a={groupType:i.stacked?"stack":"group",seriesType:s,series:[],groupId:n};e.set(n,a),t.push(a)}e.get(n).series.push(i)}else t.push({groupType:"default",seriesType:s,series:[i],groupId:"__default__"});return t}),[])}getDefaultSeriesType(t){switch(g.detectChartDefinition(t).name){case"cartesian":return"line";case"polar":return"pie";case"hierarchy":return"treemap";case"topology":return"map-shape";case"flow-proportion":return"sankey";case"standalone":return"pyramid";case"gauge":return"radial-gauge";default:throw new Error("Invalid chart options type detected.")}}getTooltipPositionDefaults(t){var e;const i=null==(e=t.tooltip)?void 0:e.position;if(!O(i))return;const{type:s,xOffset:n,yOffset:a}=i,o={};var r,l;return R(s)&&(r=nx,l=s,Object.values(r).includes(l))&&(o.type=s),P(n)&&(o.xOffset=n),P(a)&&(o.yOffset=a),{tooltip:{position:o}}}getTooltipRangeDefaults(t,e){var i,s;return{tooltip:{range:(null==(i=t.tooltip)?void 0:i.range)??(null==(s=Ch.getTooltipDefauls(e))?void 0:s.range)}}}axesTypeIntegrity(t){if("axes"in t&&t.axes){const i=t.axes;for(const{type:s}of i)if(null==(e=s)||!bh.has(e)){delete t.axes;const e=[...bh.keys()].join(", ");n.warnOnce(`unknown axis type: ${s}; expected one of: ${e}`)}}var e}seriesTypeIntegrity(t){var e;t.series=null==(e=t.series)?void 0:e.filter((({type:t})=>{if(null==t||null!=(e=t)&&Nh.has(e)||function(t){return Mh.some((e=>"series"===e.type&&e.identifier===t))}(t))return!0;var e;n.warnOnce(`unknown series type: ${JSON.stringify(t)}; expected one of: ${kh.seriesTypes.join(", ")}`)}))}soloSeriesIntegrity(t){const e=t.series;if(e&&e.length>1&&e.some((t=>Ch.isSolo(t.type)))){const s=this.optionsType(t);if(Ch.isSolo(s))n.warn(`series[0] of type '${s}' is incompatible with other series types. Only processing series[0]`),t.series=e.slice(0,1);else{const{solo:s,nonSolo:a}=f(e,(t=>Ch.isSolo(t.type)?"solo":"nonSolo")),o=(i=s.map((t=>t.type)),Array.from(new Set(i))).join(", ");n.warn(`Unable to mix these series types with the lead series type: ${o}`),t.series=a}}var i}static enableConfiguredJsonOptions(t,e){"object"==typeof e&&"enabled"in e&&!e._enabledFromTheme&&null==t.enabled&&(e.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(t){null!=t._enabledFromTheme&&delete t._enabledFromTheme}enableConfiguredOptions(e,i){dr(i,t.enableConfiguredJsonOptions,new Set(["data","theme"]),e),dr(e,t.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static removeDisabledOptionJson(t){"enabled"in t&&!1===t.enabled&&Object.keys(t).forEach((e=>{"enabled"!==e&&delete t[e]}))}removeDisabledOptions(e){dr(e,t.removeDisabledOptionJson,new Set(["data","theme"]))}static removeLeftoverSymbolsJson(t){if(t&&E(t))for(const[e,i]of Object.entries(t))z(i)&&delete t[e]}removeLeftoverSymbols(e){dr(e,t.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(t){if(null!=t.window?rt(t.window):"undefined"!=typeof window?t.window=window:"undefined"!=typeof global&&(t.window=global.window),null!=t.document?ot(t.document):"undefined"!=typeof document?t.document=document:"undefined"!=typeof global&&(t.document=global.document),null==t.window)throw new Error("AG Charts - unable to resolve global window");if(null==t.document)throw new Error("AG Charts - unable to resolve global document");return t}};Tv.OPTIONS_CLONE_OPTS=new Set(["data","container"]),Tv.FAST_PATH_OPTIONS=new Set(["data","width","height"]);var Ev=Tv,Ov=class t{constructor(t,e,i,s,n,a=100){this.name=t,this.buildItem=e,this.releaseItem=i,this.destroyItem=s,this.maxPoolSize=n,this.cleanupTimeMs=a,this.freePool=[],this.busyPool=new Set}static getPool(e,i,s,n,a){return this.pools.has(e)||this.pools.set(e,new t(e,i,s,n,a)),this.pools.get(e)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}obtain(e){if(0===this.freePool.length&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return null==i?(i=this.buildItem(e),t.debug(`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i)):t.debug(`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}release(e){if(!this.busyPool.has(e))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");t.debug(`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,e),this.releaseItem(e),this.busyPool.delete(e),this.freePool.push(e),t.debug(`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,e),this.cleanPoolTimer&&clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=setTimeout((()=>{this.cleanPool()}),this.cleanupTimeMs)}cleanPool(){const e=this.freePool.splice(0);for(const t of e)this.destroyItem(t);t.debug(`Pool[name=${this.name}]: Cleaned pool of ${e.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`)}destroy(){this.cleanPool();for(const t of this.busyPool.values())this.destroyItem(t);this.busyPool.clear()}};Ov.pools=new Map,Ov.debug=Es.create(!0,"pool");var Rv=Ov;g.registerMany([ku,ix]);var jv=Es.create(!0,"opts"),Pv=class{static licenseCheck(t){var e,i;this.licenseChecked||(this.licenseManager=null==(e=sx.licenseManager)?void 0:e.call(sx,t),null==(i=this.licenseManager)||i.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){var e;return null==(e=sx.licenseManager)?void 0:e.call(sx,{}).getLicenseDetails(t)}static getInstance(t){return Bv.getInstance(t)}static create(t,e){return jv.group("AgCharts.create()",(()=>{var i,s;this.licenseCheck(t);const n=Bv.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:e});return(null==(i=this.licenseManager)?void 0:i.isDisplayWatermark())&&this.licenseManager&&(null==(s=sx.injectWatermark)||s.call(sx,n.chart.ctx.domManager,this.licenseManager.getWatermarkMessage())),n}))}static createFinancialChart(t){return jv.group("AgCharts.createFinancialChart()",(()=>this.create(t,{presetType:"price-volume"})))}static createGauge(t){return jv.group("AgCharts.createGauge()",(()=>this.create(t,{presetType:"gauge"})))}static __createSparkline(t){return jv.group("AgCharts.__createSparkline()",(()=>{const{pool:e,...i}=t;return this.create(i,{presetType:"sparkline",pool:e??!0})}))}};Pv.licenseChecked=!1;var zv=class t{static getInstance(t){const e=$d.getInstance(t);return e?Tu.chartInstances.get(e):void 0}static initialiseModules(){t.initialised||(Xf(),Qf(),t.initialised=!0)}static createOrUpdate(e){var i,s;let{proxy:n}=e;const{userOptions:a,licenseManager:o,processedOverrides:r=(null==n?void 0:n.chart.chartOptions.processedOverrides)??{},specialOverrides:l=(null==n?void 0:n.chart.chartOptions.specialOverrides)??{},optionsMetadata:c=(null==n?void 0:n.chart.chartOptions.optionMetadata)??{},deltaOptions:h,stripSymbols:d=!1}=e,u=null!=sx.styles?[["ag-charts-enterprise",sx.styles]]:[],{presetType:p}=c;t.initialiseModules(),jv((()=>[">>> AgCharts.createOrUpdate() user options",cr(a)]));let m=a;Pv.optionsMutationFn&&m&&(m=Pv.optionsMutationFn(cr(m),p),jv((()=>[">>> AgCharts.createOrUpdate() MUTATED user options",cr(m)])));const{document:y,window:f,styleContainer:x,...v}=m??{},b=(h?null==n?void 0:n.chart.getChartOptions():v)??v,M=new Ev(b,r,{...l,document:y,window:f,styleContainer:x},c,h,d);let S,I=!1,D=null==n?void 0:n.chart;return null!=D&&g.detectChartDefinition(M.processedOptions)===g.detectChartDefinition(D.chartOptions.processedOptions)||(S=null==(i=this.getPool(M))?void 0:i.obtain(M),S?D=S.item:(I=!0,D=t.createChartInstance(M,D)),u.forEach((([t,e])=>{null==D||D.ctx.domManager.addStyles(t,e)}))),null==n?(n=new Tu(D,t.callbackApi,o),n.releaseChart=null==S?void 0:S.release):(S||I)&&(null==(s=n.releaseChart)||s.call(n),n.chart=D,n.releaseChart=null==S?void 0:S.release),jv.check()&&"undefined"!=typeof window&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[D.id]=D),D.queuedUserOptions.push(M.userOptions),D.queuedChartOptions.push(M),D.requestFactoryUpdate((t=>{jv.group(">>>> Chart.applyOptions()",(()=>{t.applyOptions(M);const e=t.queuedUserOptions.indexOf(M.userOptions)+1;t.queuedUserOptions.splice(0,e),t.queuedChartOptions.splice(0,e)}))})),n}static markRemovedProperties(t,e,i=!1){if("object"!=typeof t)return i;for(const[s,n]of Object.entries(t))void 0===n&&(Object.assign(t,{[s]:Symbol("UNSET")}),i||(i=!0));return i}static updateUserDelta(e,i){const s=dr(i=cr(i,new Set(["data"])),t.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);jv((()=>[">>> AgCharts.updateUserDelta() user delta",cr(i)])),t.createOrUpdate({proxy:e,deltaOptions:i,stripSymbols:s})}static createChartInstance(t,e){const i=null==e?void 0:e.destroy({keepTransferableResources:!0});return g.detectChartDefinition(t.processedOptions).create(t,i)}static getPool(t){if(!0===t.optionMetadata.pool)return Rv.getPool(t.optionMetadata.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};zv.caretaker=new rl(nl),zv.initialised=!1,zv.callbackApi={caretaker:zv.caretaker,create:(t,e,i,s)=>zv.createOrUpdate({userOptions:t,processedOverrides:e,specialOverrides:i,optionsMetadata:s}),update:(t,e)=>zv.createOrUpdate({userOptions:t,proxy:e}),updateUserDelta:(t,e)=>zv.updateUserDelta(t,e)},zv.detachAndClear=t=>t.detachAndClear(),zv.destroy=t=>t.destroy();var Bv=zv,Fv={};i(Fv,{Arc:()=>Gv,BBox:()=>Et,Caption:()=>Qn,CategoryScale:()=>Ai,Group:()=>In,Line:()=>Pa,LinearScale:()=>ru,Marker:()=>Ad,Path:()=>pd,RadialColumnShape:()=>Yv,Rect:()=>Yp,Scene:()=>dc,Sector:()=>Sf,Shape:()=>ln,TranslatableGroup:()=>Ln,getRadialColumnWidth:()=>Wv,toRadians:()=>Ks});var Gv=class extends pd{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return At(Vs(this.startAngle),Vs(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?t.closePath():2!==this.type||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new Et(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.getBBox();return 0!==this.type&&i.containsPoint(t,e)&&this.path.isPointInPath(t,e)}};function Uv(t,e,i){const s=Math.sqrt(t**2+e**2),n=Math.atan2(e,t)+i;return{x:Math.cos(n)*s,y:Math.sin(n)*s}}Gv.className="Arc",s([ud()],Gv.prototype,"centerX",2),s([ud()],Gv.prototype,"centerY",2),s([ud()],Gv.prototype,"radius",2),s([ud()],Gv.prototype,"startAngle",2),s([ud()],Gv.prototype,"endAngle",2),s([ud()],Gv.prototype,"counterClockwise",2),s([ud()],Gv.prototype,"type",2);var Yv=class extends pd{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(t){}computeBBox(){const{innerRadius:t,outerRadius:e,columnWidth:i}=this,s=this.getRotation(),n=-i/2,a=i/2,o=-e,r=-t;let l=1/0,c=1/0,h=-1/0,d=-1/0;for(let u=0;u<4;u+=1){const{x:t,y:e}=Uv(u%2==0?n:a,u<2?o:r,s);l=Math.min(t,l),c=Math.min(e,c),h=Math.max(t,h),d=Math.max(e,d)}return new Et(l,c,h-l,d-c)}getRotation(){const{startAngle:t,endAngle:e}=this;return Vs(t+Xs(t,e)/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:s}=this,n=-t/2,a=t/2,o=-i,r=-e,l=this.getRotation(),c=[[n,r],[n,o],[a,o],[a,r]].map((([t,e])=>Uv(t,e,l)));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:a,isRadiusAxisReversed:o}=this,r=At(s,n),l=Math.asin(t/2/s),c=this.getRotation(),h=(t,e)=>Uv(t,e,c),d=(t,e)=>Math.sqrt(t**2+e**2),u=(t,e)=>e>t?0:Math.sqrt(t**2-e**2),p=(t,e,i)=>i?t<e:t>e,g=r&&!isNaN(l)&&l<Math.PI/6;let m=-t/2,y=t/2;const f=-i,x=-s*(g?Math.cos(l):1),v=p(a,d(s,t/2),!o);if(v){const t=u(a,s);m=-t,y=t}e.clear(!0);const b=h(m,x);e.moveTo(b.x,b.y);const M=At(s,i),S=p(a,d(i,t/2),!o);if(M&&g)e.arc(0,0,s,Vs(-l-Math.PI/2)+c,Vs(l-Math.PI/2)+c,!1);else if(S){const s=-u(a,t/2),n=u(a,i);if(!v){const t=h(m,s);e.lineTo(t.x,t.y)}if(e.arc(0,0,a,Math.atan2(s,m)+c,Math.atan2(f,-n)+c,!1),!At(n,0)){const t=h(n,f);e.lineTo(t.x,t.y)}e.arc(0,0,a,Math.atan2(f,n)+c,Math.atan2(s,y)+c,!1)}else{const t=h(m,f),i=h(y,f);e.lineTo(t.x,t.y),e.lineTo(i.x,i.y)}const I=h(y,x);if(e.lineTo(I.x,I.y),g)e.arc(0,0,s,Vs(l-Math.PI/2)+c,Vs(-l-Math.PI/2)+c,!0);else{const t=h(m,x);e.lineTo(t.x,t.y)}e.closePath()}};function Wv(t,e,i,s,n){const a=Xs(t,e),o=a*(1-s)/2;if(t+=o,e-=o,a<.001)return 2*i*n;if(a>=2*Math.PI){const i=t+a/2;t=i-Math.PI,e=i+Math.PI}const r=i*Math.cos(t),l=i*Math.sin(t),c=i*Math.cos(e),h=i*Math.sin(e),d=Math.floor(Math.sqrt((r-c)**2+(l-h)**2)),u=2*i*n;return Math.max(1,Math.min(u,d))}Yv.className="RadialColumnShape",s([ud()],Yv.prototype,"isBeveled",2),s([ud()],Yv.prototype,"columnWidth",2),s([ud()],Yv.prototype,"startAngle",2),s([ud()],Yv.prototype,"endAngle",2),s([ud()],Yv.prototype,"outerRadius",2),s([ud()],Yv.prototype,"innerRadius",2),s([ud()],Yv.prototype,"axisInnerRadius",2),s([ud()],Yv.prototype,"axisOuterRadius",2),s([ud()],Yv.prototype,"isRadiusAxisReversed",2);var Vv={};i(Vv,{ChartTheme:()=>_x,DEFAULT_ANNOTATION_HANDLE_FILL:()=>em,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>nm,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>am,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>om,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>rm,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>im,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>sm,DEFAULT_BACKGROUND_COLOUR:()=>Ng,DEFAULT_CAPTION_ALIGNMENT:()=>Cg,DEFAULT_CAPTION_LAYOUT_STYLE:()=>wg,DEFAULT_COLOR_RANGE:()=>_g,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>Vg,DEFAULT_FIBONACCI_STROKES:()=>qg,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>tm,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Qg,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>Kg,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>Zg,DEFAULT_GRIDLINE_ENABLED:()=>um,DEFAULT_HIERARCHY_FILLS:()=>$g,DEFAULT_HIERARCHY_STROKES:()=>Xg,DEFAULT_POLAR_SERIES_STROKE:()=>Wg,DEFAULT_SEPARATION_LINES_COLOUR:()=>Lg,DEFAULT_SHADOW_COLOUR:()=>kg,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Hg,DEFAULT_TEXTBOX_COLOR:()=>hm,DEFAULT_TEXTBOX_FILL:()=>lm,DEFAULT_TEXTBOX_STROKE:()=>cm,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Jg,DEFAULT_TOOLBAR_POSITION:()=>dm,IS_COMMUNITY:()=>Dg,IS_DARK_THEME:()=>Ig,IS_ENTERPRISE:()=>Ag,PALETTE_ALT_DOWN_FILL:()=>Gg,PALETTE_ALT_DOWN_STROKE:()=>Bg,PALETTE_ALT_NEUTRAL_FILL:()=>Ug,PALETTE_ALT_NEUTRAL_STROKE:()=>Yg,PALETTE_ALT_UP_FILL:()=>Fg,PALETTE_ALT_UP_STROKE:()=>zg,PALETTE_DOWN_FILL:()=>Rg,PALETTE_DOWN_STROKE:()=>Eg,PALETTE_NEUTRAL_FILL:()=>Pg,PALETTE_NEUTRAL_STROKE:()=>jg,PALETTE_UP_FILL:()=>Og,PALETTE_UP_STROKE:()=>Tg,getChartTheme:()=>kv,themeNames:()=>_v,themeSymbols:()=>Sg,themes:()=>Nv});var _v=Object.keys(Nv),Hv={};i(Hv,{Color:()=>Yt,interpolateColor:()=>Wt});function Zv(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");n.warnOnce(i)}}function Kv(t,e){const i=Zv(),s=null==e?void 0:e.default;return Zt(((e,n,a)=>(a!==s&&i(n.toString(),t),a)))}function $v(t,e){const i=Zv();return Zt(((s,n,a)=>(a!==s[t]&&(i(n.toString(),`Use [${t}] instead.`),oe(s,t,e?e(a):a)),Vt)),((e,s)=>(i(s.toString(),`Use [${t}] instead.`),ne(e,t))))}i({},{AND:()=>Oi,ARRAY:()=>Hi,ARRAY_OF:()=>Zi,AbstractBarSeries:()=>Oy,AbstractBarSeriesProperties:()=>Ey,ActionOnSet:()=>Kn,AnchoredPopover:()=>Db,Animation:()=>De,AnimationManager:()=>bc,Arc:()=>Gv,Axis:()=>zo,AxisGroupZIndexMap:()=>jo,AxisInterval:()=>bo,AxisLabel:()=>Mo,AxisTick:()=>Io,AxisTickGenerator:()=>Vo,AxisTicks:()=>ub,BBox:()=>Et,BBoxValues:()=>mt,BOOLEAN:()=>zi,BOOLEAN_ARRAY:()=>ss,Background:()=>Wp,BackgroundModule:()=>Vp,BandScale:()=>Di,BarSeries:()=>Hy,BarSeriesModule:()=>Zy,BaseModuleInstance:()=>Xo,BaseProperties:()=>ki,BaseToolbar:()=>Cb,ButtonWidget:()=>Bl,COLOR_GRADIENT:()=>es,COLOR_STRING:()=>ts,COLOR_STRING_ARRAY:()=>is,CachedTextMeasurer:()=>Cn,CachedTextMeasurerPool:()=>wn,Caption:()=>Qn,CartesianAxis:()=>Zo,CartesianSeries:()=>Du,CartesianSeriesNodeEvent:()=>Mu,CartesianSeriesProperties:()=>Su,CategoryAxis:()=>$o,CategoryScale:()=>Ai,ChangeDetectableProperties:()=>qp,Chart:()=>$d,ChartAxisDirection:()=>qn,ChartEventManager:()=>Mc,ChartOptions:()=>Ev,ChartUpdateType:()=>Xc,CollapseMode:()=>Um,Color:()=>Yt,ColorScale:()=>Gs,ConicGradient:()=>vb,ContextMenuRegistry:()=>Sc,ContinuousScale:()=>Te,DATE:()=>Qi,DATE_ARRAY:()=>os,DATE_OR_DATETIME_MS:()=>qi,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>vu,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>bu,DEFAULT_TOOLTIP_CLASS:()=>kd,DEFAULT_TOOLTIP_DARK_CLASS:()=>wd,DIRECTION:()=>vs,DOMManager:()=>Pl,DataController:()=>vh,DataModel:()=>fh,DataModelSeries:()=>uu,DataService:()=>mc,Debug:()=>Es,Default:()=>xo,Deprecated:()=>Kv,DeprecatedAndRenamedTo:()=>$v,DragInterpreter:()=>Ec,DraggablePopover:()=>Lb,DropShadow:()=>bm,ExtendedPath2D:()=>dd,FONT_SIZE_RATIO:()=>fg,FONT_STYLE:()=>ps,FONT_WEIGHT:()=>gs,FUNCTION:()=>Bi,FloatingToolbar:()=>Ob,GREATER_THAN:()=>Xi,Gradient:()=>Us,Group:()=>In,GroupedCategoryAxis:()=>jp,HdpiCanvas:()=>tc,HierarchyNode:()=>eb,HierarchySeries:()=>ib,HierarchySeriesProperties:()=>sb,HighlightManager:()=>Ic,HighlightProperties:()=>yu,HighlightStyle:()=>fu,INTERACTION_RANGE:()=>Ms,INTERPOLATION_STEP_POSITION:()=>Dm,INTERPOLATION_TYPE:()=>Im,Image:()=>Mb,InteractionManager:()=>xc,InteractionState:()=>fc,InterpolationProperties:()=>Am,Invalidating:()=>Mi,LABEL_PLACEMENT:()=>Ss,LARGEST_KEY_INTERVAL:()=>ap,LESS_THAN:()=>$i,LINE_CAP:()=>ls,LINE_DASH:()=>ds,LINE_JOIN:()=>cs,LINE_STYLE:()=>hs,Label:()=>Wa,LayoutElement:()=>Qr,LayoutManager:()=>qr,LegendMarkerLabel:()=>ag,Line:()=>Pa,LineSeries:()=>af,LineSeriesModule:()=>of,LinearGradient:()=>qs,LinearScale:()=>ru,Listeners:()=>cl,LogScale:()=>iu,LonLatBBox:()=>nb,MARKER_SHAPE:()=>tg,MATCHING_CROSSLINE_TYPE:()=>$a,MAX_SPACING:()=>As,MIN_SPACING:()=>Ds,Marker:()=>Ad,Menu:()=>Ab,MercatorScale:()=>hb,ModuleRegistry:()=>g,Motion:()=>ce,NAN:()=>Yi,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Ae,NUMBER:()=>Gi,NUMBER_ARRAY:()=>ns,NUMBER_OR_NAN:()=>_i,NativeWidget:()=>Yl,NiceMode:()=>Ao,Node:()=>zt,NumberAxis:()=>hu,OBJECT:()=>ji,OBJECT_ARRAY:()=>rs,OR:()=>Ri,OVERFLOW_STRATEGY:()=>xs,ObserveChanges:()=>$n,OrdinalTimeScale:()=>Ta,PHASE_METADATA:()=>be,PHASE_ORDER:()=>ve,PLACEMENT:()=>bs,PLAIN_OBJECT:()=>Pi,POSITION:()=>us,POSITION_TOP_COORDINATES:()=>eo,POSITIVE_NUMBER:()=>Wi,PREV_NEXT_KEYS:()=>vl,Padding:()=>Lr,ParallelStateMachine:()=>Vn,Path:()=>pd,PointerEvents:()=>jt,PolarAxis:()=>qf,PolarSeries:()=>Pf,PolarZIndexMap:()=>jf,Popover:()=>Ib,PropertiesArray:()=>wi,ProxyInteractionService:()=>$l,ProxyOnWrite:()=>Hn,ProxyProperty:()=>_n,ProxyPropertyOnWrite:()=>Zn,QUICK_TRANSITION:()=>xe,RATIO:()=>Vi,REAL_NUMBER:()=>Ui,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>Iu,RadialColumnShape:()=>Yv,Range:()=>Ya,Rect:()=>Yp,RepeatType:()=>Me,Rotatable:()=>mn,RotatableGroup:()=>An,RotatableText:()=>jn,SKIP_JS_BUILTINS:()=>ae,SMALLEST_KEY_INTERVAL:()=>np,SORT_DOMAIN_GROUPS:()=>op,STRING:()=>Fi,STRING_ARRAY:()=>as,Scalable:()=>yn,ScalableGroup:()=>Dn,Scene:()=>dc,SceneChangeDetection:()=>Ot,ScenePathChangeDetection:()=>ud,Sector:()=>Sf,SectorBox:()=>df,Selection:()=>Ea,Series:()=>td,SeriesContentZIndexMap:()=>Xh,SeriesGroupingChangedEvent:()=>Jh,SeriesItemHighlightStyle:()=>pu,SeriesMarker:()=>eg,SeriesNodeEvent:()=>qh,SeriesNodePickMode:()=>Qh,SeriesProperties:()=>xu,SeriesTooltip:()=>Sm,SeriesZIndexMap:()=>$h,Shape:()=>ln,SimpleTextMeasurer:()=>En,SliderWidget:()=>Vl,StateMachine:()=>Wn,StateMachineProperty:()=>Fn,StopProperties:()=>Js,SvgPath:()=>bb,TEXT_ALIGN:()=>ys,TEXT_WRAP:()=>ms,TICK_INTERVAL:()=>vo,Text:()=>Rn,TextUtils:()=>Tn,TextWrapper:()=>Xn,ThemeConstants:()=>mg,ThemeSymbols:()=>Sg,TimeScale:()=>Na,Toolbar:()=>Tb,ToolbarButtonProperties:()=>Nb,ToolbarButtonWidget:()=>kb,ToolbarWidget:()=>Hl,Tooltip:()=>Od,TooltipManager:()=>wc,TooltipPosition:()=>Ed,Transformable:()=>vn,TransformableText:()=>Pn,Translatable:()=>fn,TranslatableGroup:()=>Ln,TranslatableLine:()=>Ro,UNION:()=>Is,UpdateService:()=>Qc,VERTICAL_ALIGN:()=>fs,Validate:()=>Ti,Vec2:()=>Xv,Vec4:()=>jc,WIDGET_HTML_EVENTS:()=>jr,Widget:()=>Xr,WidgetEventUtil:()=>Fr,ZIndexMap:()=>go,ZoomManager:()=>_c,accumulateGroup:()=>mp,accumulateStack:()=>fp,accumulatedValue:()=>Vu,accumulativeValueProperty:()=>tp,addHitTestersToQuadtree:()=>Cy,adjustLabelPlacement:()=>_y,angleBetween:()=>Xs,animationValidation:()=>up,applyShapeStyle:()=>ig,areScalingEqual:()=>ay,area:()=>Wu,buildFormatter:()=>fi,buildResetPathFn:()=>Ly,calculateDefaultTimeTickFormat:()=>bi,calculateDerivativeExtrema:()=>cd,calculateDerivativeExtremaXY:()=>hd,calculateLabelChartPadding:()=>to,calculateLabelTranslation:()=>Ja,calculatePlacement:()=>vd,checkCrisp:()=>Py,clamp:()=>bt,clampArray:()=>Mt,clippedRoundRect:()=>Up,collapsedStartingBarPosition:()=>By,compareDates:()=>ta,computeBarFocusBounds:()=>Yy,computeMarkerFocusBounds:()=>Iy,countExpandingSearch:()=>kc,countFractionDigits:()=>Ct,createButton:()=>pb,createCheckbox:()=>gb,createDatumId:()=>Mp,createDeprecationWarning:()=>Zv,createElement:()=>lt,createElementId:()=>sr,createIcon:()=>fb,createId:()=>pt,createSelect:()=>mb,createSvgElement:()=>ct,createTextArea:()=>yb,dateToNumber:()=>xi,datesSortOrder:()=>ia,datumKeys:()=>gh,datumStylerProperties:()=>Ac,deconstructSelectionsOrNodes:()=>Se,deepClone:()=>cr,deepFreeze:()=>le,defaultTimeTickFormat:()=>vi,diff:()=>bp,downloadUrl:()=>ht,drawCorner:()=>Bp,drawMarkerUnitPolygon:()=>Sd,easing:()=>ce,enterpriseModule:()=>sx,evaluateBezier:()=>od,extent:()=>lu,extractDecoratedProperties:()=>Qt,findMinMax:()=>St,findQuadtreeMatch:()=>Ty,findRangeExtent:()=>It,fixNumericExtent:()=>hh,focusCursorAtEnd:()=>er,formatNumber:()=>Ua,formatPercent:()=>Ga,formatValue:()=>Fa,fromToMotion:()=>Le,generateUUID:()=>gt,getAngleRatioRadians:()=>Qs,getColorStops:()=>en,getDateTicksForInterval:()=>wa,getDatumRefPoint:()=>Nc,getDocument:()=>nt,getElementBBox:()=>tr,getIconClassNames:()=>ar,getLastFocus:()=>Al,getMissCount:()=>dh,getPath:()=>ne,getPathComponents:()=>mh,getRadialColumnWidth:()=>Wv,getWindow:()=>at,groupAccumulativeValueProperty:()=>ip,groupAverage:()=>Yu,groupCount:()=>Uu,groupStackValueProperty:()=>sp,groupSum:()=>Gu,hasNoModifiers:()=>ml,inRange:()=>Dt,initMenuKeyNav:()=>Sl,initRovingTabIndex:()=>bl,interpolatePoints:()=>ry,isAgFlowProportionChartOptions:()=>Uh,isAgGaugeChartOptions:()=>Wh,isAgHierarchyChartOptions:()=>Fh,isAgStandaloneChartOptions:()=>Yh,isAgTopologyChartOptions:()=>Gh,isBetweenAngles:()=>Zs,isButtonClickEvent:()=>Dl,isContinuous:()=>Ha,isDecoratedObject:()=>$t,isDenseInterval:()=>Aa,isInputPending:()=>nr,isInteger:()=>Nt,isNegative:()=>Lt,isNumberEqual:()=>At,isProperties:()=>Ci,isScaleValid:()=>oy,jsonApply:()=>ur,jsonDiff:()=>rr,jsonPropertyCompare:()=>lr,jsonResolveOperations:()=>gr,jsonWalk:()=>dr,keyProperty:()=>Xu,labelDirectionHandling:()=>co,legendSymbolSvg:()=>Ld,lineDistanceSquared:()=>Ra,listDecoratedProperties:()=>Xt,makeAccessibleClickListener:()=>Il,mapValues:()=>ie,markerFadeInAnimation:()=>xy,markerPaletteFactory:()=>mm,markerScaleInAnimation:()=>vy,markerSwipeScaleInAnimation:()=>by,mergeArrayDefaults:()=>ee,mergeDefaults:()=>te,midpointStartingBarPosition:()=>Fy,mod:()=>wt,moduleRegistry:()=>Qo,motion:()=>jb,nearestSquared:()=>xt,nearestSquaredInContainer:()=>vt,normaliseGroupTo:()=>lp,normalisePropertyTo:()=>hp,normalisedExtentWithMetadata:()=>cu,normalizeAngle180:()=>Hs,normalizeAngle360:()=>Vs,normalizeAngle360Inclusive:()=>_s,objectsEqual:()=>qt,objectsEqualWith:()=>Jt,pairUpSpans:()=>iy,partialAssign:()=>re,pathFadeInAnimation:()=>Ay,pathMotion:()=>ym,pathSwipeInAnimation:()=>Dy,pickByMatchingAngle:()=>Rf,plotAreaPathFill:()=>gy,plotInterpolatedAreaSeriesFillSpans:()=>my,plotInterpolatedLinePathStroke:()=>hy,plotLinePathStroke:()=>cy,predicateWithMessage:()=>Ls,prepareAreaFillAnimationFns:()=>yy,prepareAreaPathAnimation:()=>fy,prepareAxisAnimationContext:()=>Lo,prepareAxisAnimationFunctions:()=>wo,prepareBarAnimationFunctions:()=>Gy,prepareLinePathAnimation:()=>py,prepareLinePathPropertyAnimation:()=>uy,prepareLinePathStrokeAnimationFns:()=>dy,preparePieSeriesAnimationFunctions:()=>Ef,range:()=>Da,rangedValueProperty:()=>Ju,resetAxisGroupFn:()=>Co,resetAxisLabelSelectionFn:()=>Eo,resetAxisLineSelectionFn:()=>Oo,resetAxisSelectionFn:()=>To,resetBarSelectionsFn:()=>Uy,resetIds:()=>ut,resetLabelFn:()=>vm,resetMarkerFn:()=>My,resetMarkerPositionFn:()=>Sy,resetMotion:()=>Cs,resetPieSelectionsFn:()=>Of,round:()=>kt,rowCountProperty:()=>qu,sanitizeHtml:()=>Md,scale:()=>Ym,sectorBox:()=>uf,seriesLabelFadeInAnimation:()=>fm,seriesLabelFadeOutAnimation:()=>xm,setAttribute:()=>Tr,setAttributes:()=>Er,setDocument:()=>ot,setElementBBox:()=>Jo,setElementStyle:()=>Rr,setPath:()=>oe,setWindow:()=>rt,shallowClone:()=>hr,singleSeriesPaletteFactory:()=>gm,solveBezier:()=>rd,sortAndUniqueDates:()=>ea,splitBezier:()=>ld,staticFromToMotion:()=>Ne,stopPageScrolling:()=>Ll,sum:()=>Fu,sumValues:()=>Bu,swapAxisCondition:()=>pm,toDegrees:()=>$s,toRadians:()=>Ks,tooltipContentAriaLabel:()=>Cd,trailingAccumulatedValue:()=>_u,trailingAccumulatedValueProperty:()=>ep,updateClipPath:()=>Ny,updateLabelNode:()=>Wy,validateCrossLineValues:()=>Xa,valueProperty:()=>Qu,visibleRangeIndices:()=>Lc,without:()=>se});var Xv={add:function(t,e){if("number"==typeof e)return{x:t.x+e,y:t.y+e};return{x:t.x+e.x,y:t.y+e.y}},angle:function(t,e={x:0,y:0}){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)},apply:function(t,e){return t.x=e.x,t.y=e.y,t},equal:function(t,e){return t.x===e.x&&t.y===e.y},distance:function(t,e){const i=Qv(t,e);return Math.sqrt(i.x*i.x+i.y*i.y)},distanceSquared:function(t,e){const i=Qv(t,e);return i.x*i.x+i.y*i.y},from:function(t,e){if("number"==typeof t)return{x:t,y:e};if("currentX"in t)return{x:t.currentX,y:t.currentY};if("offsetWidth"in t)return{x:t.offsetWidth,y:t.offsetHeight};if("width"in t)return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y+t.height}];if("x1"in t)return[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(t)}] [${e}]`)},gradient:function(t,e,i){const s=e.x-t.x;return(null==i?e.y-t.y:i-e.y-(i-t.y))/s},intercept:function(t,e,i){return(null==i?t.y:i-t.y)-e*t.x},intersectAtX:function(t,e,i=0,s){const n=t===1/0?1/0:t*i+e;return{x:i,y:null==s?n:s-n}},intersectAtY:function(t,e,i=0,s){return{x:t===1/0?1/0:(i-e)/t,y:null==s?i:s-i}},length:qv,lengthSquared:function(t){return t.x*t.x+t.y*t.y},multiply:function(t,e){if("number"==typeof e)return{x:t.x*e,y:t.y*e};return{x:t.x*e.x,y:t.y*e.y}},normalized:function(t){const e=qv(t);return{x:t.x/e,y:t.y/e}},origin:Jv,required:function(t){return{x:(null==t?void 0:t.x)??0,y:(null==t?void 0:t.y)??0}},rotate:function(t,e,i={x:0,y:0}){const s=qv(t);return{x:i.x+s*Math.cos(e),y:i.y+s*Math.sin(e)}},round:function(t){return{x:Math.round(t.x),y:Math.round(t.y)}},sub:Qv};function Qv(t,e){return"number"==typeof e?{x:t.x-e,y:t.y-e}:{x:t.x-e.x,y:t.y-e.y}}function qv(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Jv(){return{x:0,y:0}}var tb=class t{constructor(t,e,i,s,n,a,o,r,l){this.series=t,this.datumIndex=e,this.datum=i,this.sizeValue=s,this.colorValue=n,this.sumSize=a,this.depth=o,this.parent=r,this.children=l,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(e,i=t.Walk.PreOrder){i===t.Walk.PreOrder&&e(this),this.children.forEach((t=>{t.walk(e,i)})),i===t.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}};tb.Walk={PreOrder:0,PostOrder:1};var eb=tb,ib=class extends td{constructor(t){super({moduleCtx:t,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new Gs,this.animationState=new Wn("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}processData(){const{NodeClass:t}=this,{childrenKey:e,sizeKey:i,colorKey:s,colorRange:n}=this.properties;let a=0,o=1/0,r=-1/0;const l=(n,l,h)=>{const d=null!=h.depth?h.depth+1:0,u=null!=e?n[e]:void 0,p=null==u||0===u.length;let g=null!=i?n[i]:void 0;g=Number.isFinite(g)?Math.max(g,0):p?1:0;const m=g;a=Math.max(a,d);const y=null!=s?n[s]:void 0;return"number"==typeof y&&(o=Math.min(o,y),r=Math.max(r,y)),c(new t(this,l,n,g,y,m,d,h,[]),u)},c=(t,e)=>{const{datumIndex:i}=t;return null==e||e.forEach(((e,s)=>{const n=l(e,i.concat(s),t);t.children.push(n),t.sumSize+=n.sumSize})),t},h=c(new t(this,[],void 0,0,void 0,0,void 0,void 0,[]),this.data),d=[o,r];this.colorScale.domain=o<r?[o,r]:[0,1],this.colorScale.range=n??["black"],this.colorScale.update(),this.rootNode=h,this.maxDepth=a,this.colorDomain=d}update({seriesRect:t}){this.updateSelections(),this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)}resetAllAnimation(t){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:s}=this.properties,{id:n,ctx:{legendManager:a},visible:o}=this;return"gradient"===t&&null!=e&&null!=s?[{legendType:"gradient",enabled:o&&a.getItemEnabled({seriesId:n}),seriesId:n,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return t.datumIndex.join(":")}getDatumId(t){return this.getDatumIdFromData(t)}removeMeIndexPathForIndex(t){var e;return(null==(e=this.datumSelection.at(t+1))?void 0:e.datum.datumIndex)??[]}removeMeIndexForIndexPath(t){for(const{index:e,datum:i}of this.datumSelection)if(x(i.datumIndex,t))return e-1;return 0}pickFocus(t){var e;if(!(null==(e=this.rootNode)?void 0:e.children.length))return;const i=bt(0,t.datumIndex-t.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:s,otherIndexDelta:n}=t;let a=this.removeMeIndexPathForIndex(i);const o=a.reduce(((t,e)=>t.children[e]),this.rootNode);if(n>0&&o.hasChildren)a=[...a,0];else if(n<0&&a.length>1)a=a.slice(0,-1);else if(0===n&&0!==s){const t=o.parent.children.length-1;a=a.slice(),a[a.length-1]=bt(0,a[a.length-1]+s,t)}const r=a.reduce(((t,e)=>t.children[e]),this.rootNode),l=this.computeFocusBounds(this.datumSelection.at(i+1));return null!=l?{datum:r,datumIndex:this.removeMeIndexForIndexPath(a),otherIndex:r.depth,bounds:l,clipFocusBox:!0}:void 0}getDatumAriaText(t,e){if(t instanceof this.NodeClass)return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(t.depth??-1)+1,count:t.children.length,description:e});n.error(`datum is not HierarchyNode: ${JSON.stringify(t)}`)}},sb=class extends xu{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(If),this.strokes=Object.values(Df)}};s([Ti(Fi)],sb.prototype,"childrenKey",2),s([Ti(Fi,{optional:!0})],sb.prototype,"sizeKey",2),s([Ti(Fi,{optional:!0})],sb.prototype,"colorKey",2),s([Ti(Fi,{optional:!0})],sb.prototype,"colorName",2),s([Ti(is)],sb.prototype,"fills",2),s([Ti(is)],sb.prototype,"strokes",2),s([Ti(is,{optional:!0})],sb.prototype,"colorRange",2);var nb=class{constructor(t,e,i,s){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=s}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}},ab=Math.PI/180,ob=t=>t*ab,rb=t=>-Math.log(Math.tan(.25*Math.PI+t*ab*.5)),lb=t=>t/ab,cb=t=>(Math.atan(Math.exp(-t))-.25*Math.PI)/(.5*ab),hb=class t extends we{constructor(e,i){super(),this.domain=e,this.range=i,this.type="mercator",this.bounds=t.bounds(e)}static bounds(t){const[[e,i],[s,n]]=t,a=ob(e),o=rb(i),r=ob(s),l=rb(n);return new Et(Math.min(a,r),Math.min(o,l),Math.abs(r-a),Math.abs(l-o))}static fixedScale(){return new t([[lb(0),cb(0)],[lb(1),cb(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...t){let e=-1/0,i=1/0,s=-1/0,n=1/0;for(const a of t)for(const[t,o]of a)e=Math.min(t,e),i=Math.max(t,i),s=Math.min(o,s),n=Math.max(o,n);return{domain:[[e,s],[i,n]],animatable:!0}}convert([t,e]){const[[i,s],[n,a]]=this.range,o=(n-i)/this.bounds.width,r=(a-s)/this.bounds.height;return[(ob(t)-this.bounds.x)*o+i,(rb(e)-this.bounds.y)*r+s]}invert([t,e]){const[[i,s],[n,a]]=this.range,o=(n-i)/this.bounds.width,r=(a-s)/this.bounds.height;return[lb((t-i)/o+this.bounds.x),cb((e-s)/r+this.bounds.y)]}},db=class t{constructor(){this.id=pt(this),this.axisGroup=new Ln({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=Ea.select(this.axisGroup,Rn),this.interval=new bo,this.label=new Mo,this.scale=new ru,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(t){t.appendChild(this.axisGroup)}calculateLayout(){const t=[],e=this.generateTicks(),{translationX:i,translationY:s}=this;return this.labelSelection.update(e.ticks.map((t=>this.createLabelDatum(t))),void 0,(t=>t.tickId)),this.labelSelection.each(((e,i)=>{e.setProperties(i),i.visible&&t.push(e.getBBox())})),this.axisGroup.setProperties({translationX:i,translationY:s}),Et.merge(t)}getLabelParams(t){const{padding:e}=this,{translate:i}=t;switch(this.position){case"top":case"bottom":return{x:i,y:e,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:e,y:i,textAlign:"start",textBaseline:"middle"}}}inRange(t,e=.001){const[i,s]=St(this.scale.range);return t>=i-e&&t<=s+e}createLabelDatum(t){const{x:e,y:i,textBaseline:s,textAlign:n}=this.getLabelParams(t);return{visible:Boolean(t.tickLabel),tickId:t.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:t.tickLabel,textAlign:n,textBaseline:s,x:e,y:i}}generateTicks(){const{minSpacing:e,maxSpacing:i}=this.interval,{maxTickCount:s,minTickCount:n,tickCount:a}=La(It(this.scale.range),1,e,i,t.DefaultTickCount,t.DefaultMinSpacing),o=this.getTicksData({nice:!0,interval:this.interval.step,tickCount:a,minTickCount:n,maxTickCount:s});if("bottom"===this.position||"top"===this.position){const t=wn.getMeasurer({font:this.label}),{domain:e}=this.scale,i=e[0]>e[1]?-1:1;let s=-1/0*i;o.ticks=o.ticks.filter((e=>Math.sign(e.translate-s)===i&&(s=e.translate+t.textWidth(e.tickLabel,!0)*i,!0)))}return o}getTicksData(t){var e,i;const s=[],n=t.nice?this.scale.niceDomain(t):this.scale.domain,a=this.scale.ticks(t,n),o=a.reduce(((t,e)=>Math.max(t,Ct(e))),0),r=Wo(),l=this.label.format?this.scale.tickFormatter({domain:n,ticks:a,fractionDigits:o,specifier:this.label.format}):t=>Fa(t,o);for(let c=0;c<a.length;c++){const t=a[c],n=this.scale.convert(t);if(!this.inRange(n))continue;const h=(null==(i=(e=this.label).formatter)?void 0:i.call(e,{value:t,index:c,fractionDigits:o}))??l(t),d=r(h);s.push({tick:t,tickId:d,tickLabel:h,translate:n})}return{rawTicks:a,fractionDigits:o,ticks:s}}};db.DefaultTickCount=5,db.DefaultMinSpacing=10;var ub=db;function pb(t,e){const i=lt("button",xb("ag-charts-input ag-charts-button",e));return void 0!==t.label?i.append(t.label):(i.append(fb(t.icon)),i.ariaLabel=t.altText),i.addEventListener("click",t.onPress),Er(i,e),i}function gb(t,e){const i=lt("input",xb("ag-charts-input ag-charts-checkbox",e));return i.type="checkbox",i.checked=t.checked,i.addEventListener("change",(e=>t.onChange(i.checked,e))),i.addEventListener("keydown",(t=>{Dl(t)&&(t.preventDefault(),i.click())})),Er(i,e),i}function mb(t,e){const i=lt("select",xb("ag-charts-input ag-charts-select",e));return i.append(...t.options.map((t=>{const e=lt("option");return e.value=t.value,e.textContent=t.label,e}))),Tr(i,"data-preventdefault",!1),i.value=t.value,i.addEventListener("change",(e=>t.onChange(i.value,e))),Er(i,e),i}function yb(t,e){const i=lt("textarea",xb("ag-charts-input ag-charts-textarea",e));return i.value=t.value,i.addEventListener("input",(e=>t.onChange(i.value,e))),Er(i,e),Tr(i,"data-preventdefault",!1),i}function fb(t){const e=lt("span",`ag-charts-icon ag-charts-icon-${t}`);return Tr(e,"aria-hidden",!0),e}function xb(t,e){return null==e?t:`${t} ${e.class}`}var vb=class extends Us{constructor(t,e,i=0,s){super(t,e,s),this.angle=i}createCanvasGradient(t,e){const{angle:i}=this,s=Vs(Ks(i+90)),n=e.x+.5*e.width,a=e.y+.5*e.height;return t.createConicGradient(s,n,a)}},bb=class extends pd{constructor(t=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=t}get d(){return this._d}set d(t){if(t!==this._d){this._d=t,this.commands.length=0;for(const[e,i,s]of t.matchAll(/([A-Z])([0-9. ]*)/g)){const t=s.split(/\s+/g).map(Number);this.commands.push([i,t])}this.checkPathDirty()}}updatePath(){const{path:t,x:e,y:i}=this;t.clear();let s=e,n=i;for(const[a,o]of this.commands)switch(a){case"M":t.moveTo(e+o[0],i+o[1]),s=e+o[0];break;case"C":t.cubicCurveTo(e+o[0],i+o[1],e+o[2],i+o[3],e+o[4],i+o[5]),s=e+o[4],n=i+o[5];break;case"H":t.lineTo(e+o[0],n),s=i+o[0];break;case"L":t.lineTo(e+o[0],i+o[1]),s=e+o[0],n=i+o[1];break;case"V":t.lineTo(s,i+o[0]),n=i+o[0];break;case"Z":t.closePath();break;default:throw new Error(`Could not translate command '${a}' with '${o.join(" ")}'`)}t.closePath()}};s([ud()],bb.prototype,"x",2),s([ud()],bb.prototype,"y",2);var Mb=class extends zt{constructor(t){super(),this.sourceImage=t,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(t){const{ctx:e}=t,i=this.sourceImage;i&&(e.globalAlpha=this.opacity,e.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(t)}};s([Ot()],Mb.prototype,"x",2),s([Ot()],Mb.prototype,"y",2),s([Ot()],Mb.prototype,"width",2),s([Ot()],Mb.prototype,"height",2),s([Ot()],Mb.prototype,"opacity",2);i({},{ButtonWidget:()=>Bl,NativeWidget:()=>Yl,SliderWidget:()=>Vl,ToolbarWidget:()=>Hl,WIDGET_HTML_EVENTS:()=>jr,Widget:()=>Xr,WidgetEventUtil:()=>Fr});var Sb="canvas-overlay",Ib=class extends Xo{constructor(t,e,i){super(),this.ctx=t,this.hideFns=[],this.moduleId=`popover-${e}`,(null==i?void 0:i.detached)?this.element=lt("div"):this.element=t.domManager.addChild(Sb,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push((()=>t.domManager.removeChild(Sb,this.moduleId)))}attachTo(t){this.element.parentElement||t.element.append(this.element)}hide(t){const{lastFocus:e=this.lastFocus}=t??{};0!==this.element.children.length&&(this.hideFns.forEach((t=>t())),null==e||e.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(t,e){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");const i=lt("div","ag-charts-popover");if(null!=e.ariaLabel&&i.setAttribute("aria-label",e.ariaLabel),null!=e.class&&i.classList.add(e.class),i.replaceChildren(...t),this.element.replaceChildren(i),this.hideFns.push((()=>this.removeChildren())),e.onHide&&this.hideFns.push(e.onHide),e.initialFocus&&e.sourceEvent){const t=Al(e.sourceEvent);void 0!==t&&(this.lastFocus=t,this.initialFocus=e.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(t){var e;const i=this.getPopoverElement();i&&(i.style.setProperty("right","unset"),i.style.setProperty("bottom","unset"),null!=t.x&&i.style.setProperty("left",`${Math.floor(t.x)}px`),null!=t.y&&i.style.setProperty("top",`${Math.floor(t.y)}px`),null==(e=this.initialFocus)||e.focus(),this.initialFocus=void 0)}},Db=class extends Ib{setAnchor(t,e){this.anchor=t,this.fallbackAnchor=e,this.updatePosition(t),this.repositionWithinBounds()}showWithChildren(t,e){const i=e.anchor??this.anchor,s=e.fallbackAnchor??this.fallbackAnchor,n=super.showWithChildren(t,e);return i&&this.setAnchor(i,s),at().requestAnimationFrame((()=>{this.repositionWithinBounds()})),n}repositionWithinBounds(){const{anchor:t,ctx:e,fallbackAnchor:i}=this,s=this.getPopoverElement();if(!t||!s)return;const n=e.domManager.getBoundingClientRect(),{offsetWidth:a,offsetHeight:o}=s;let r=bt(0,t.x,n.width-a),l=bt(0,t.y,n.height-o);r!==t.x&&null!=(null==i?void 0:i.x)&&(r=bt(0,i.x-a,n.width-a)),l!==t.y&&null!=(null==i?void 0:i.y)&&(l=bt(0,i.y-o,n.height-o)),this.updatePosition({x:r,y:l})}},Ab=class extends Db{show(t){const e=t.items.map((e=>this.createRow(t,e))),i=this.showWithChildren(e,t);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=Sl({orientation:"vertical",menu:i,buttons:e,sourceEvent:t.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push((()=>{var t;null==(t=this.menuCloser)||t.finishClosing(),this.menuCloser=void 0}))}createRow(t,e){const{menuItemRole:i="menuitem"}=t,s=e.value===t.value,n=lt("div","ag-charts-menu__row");if(n.setAttribute("role",i),"menuitemradio"===i&&n.setAttribute("aria-checked",(t.value===e.value).toString()),"string"==typeof e.value&&(n.dataset.popoverId=e.value),n.classList.toggle("ag-charts-menu__row--active",s),null!=e.icon){const t=lt("span",`ag-charts-menu__icon ${ar(e.icon)}`);n.appendChild(t)}const a=null!=e.strokeWidth;if(a&&(n.classList.toggle("ag-charts-menu__row--stroke-width-visible",a),n.style.setProperty("--strokeWidth",a?`${e.strokeWidth}px`:null)),null!=e.label){const t=lt("span","ag-charts-menu__label");t.textContent=this.ctx.localeManager.t(e.label),n.appendChild(t)}"altText"in e&&(n.ariaLabel=this.ctx.localeManager.t(e.altText));const o=i=>{var s;Dl(i)&&(null==(s=t.onPress)||s.call(t,e),i.preventDefault(),i.stopPropagation())};return n.addEventListener("keydown",o),n.addEventListener("click",o),n.addEventListener("mousemove",(()=>{n.focus({preventScroll:!0})})),n}},Lb=class extends Ib{constructor(){super(...arguments),this.dragged=!1}setDragHandle(t){t.addListener("drag-start",(e=>{t.addClass(this.dragHandleDraggingClass),this.onDragStart(e)})),t.addListener("drag-move",this.onDragMove.bind(this)),t.addListener("drag-end",(()=>{t.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)}))}onDragStart(t){const e=this.getPopoverElement();e&&(t.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:Xv.from(t.clientX,t.clientY),position:Xv.from(Number(e.style.getPropertyValue("left").replace("px","")),Number(e.style.getPropertyValue("top").replace("px","")))})}onDragMove(t){const{dragStartState:e}=this,i=this.getPopoverElement();if(!e||!i)return;const s=Xv.sub(Xv.from(t.clientX,t.clientY),e.client),n=Xv.add(e.position,s),a=this.ctx.domManager.getBoundingClientRect(),o={};n.x>=a.x&&n.x+i.offsetWidth<=a.width&&(o.x=n.x),n.y>=a.y&&n.y+i.offsetHeight<=a.height&&(o.y=n.y),this.updatePosition(o)}onDragEnd(){this.dragStartState=void 0}},Nb=class extends ki{};s([Ti(Fi,{optional:!0})],Nb.prototype,"icon",2),s([Ti(Fi,{optional:!0})],Nb.prototype,"label",2),s([Ti(Fi,{optional:!0})],Nb.prototype,"ariaLabel",2),s([Ti(Fi,{optional:!0})],Nb.prototype,"tooltip",2);var kb=class extends Bl{constructor(t){super(),this.localeManager=t}update(t){const{localeManager:e}=this;t.tooltip&&(this.elem.title=e.t(t.tooltip));let i="";if(null!=t.icon&&(i=`<span class="${ar(t.icon)} ag-charts-toolbar__icon"></span>`),null!=t.label){i=`${i}<span class="ag-charts-toolbar__label">${e.t(t.label)}</span>`}this.elem.innerHTML=i}setChecked(t){Tr(this.elem,"aria-checked",t)}},wb="ag-charts-toolbar__button--active",Cb=class extends Hl{constructor(t,e="horizontal"){super(e),this.localeManager=t,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new cl,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal","horizontal"===e),this.toggleClass("ag-charts-toolbar--vertical","vertical"===e)}addToolbarListener(t,e){return this.events.addListener(t,e)}clearButtons(){for(const t of this.buttonWidgets)t.destroy();this.buttonWidgets.splice(0)}updateButtons(t){const{buttonWidgets:e}=this;for(const[i,s]of t.entries()){(this.buttonWidgets.at(i)??this.createButton(i,s)).update(s)}for(let i=t.length;i<e.length;i++){const t=this.buttonWidgets.at(i);null==t||t.destroy()}this.buttonWidgets.splice(t.length),this.refreshButtonClasses()}updateButtonByIndex(t,e){var i;null==(i=this.buttonWidgets.at(t))||i.update(e)}clearActiveButton(){for(const t of this.buttonWidgets)t.toggleClass(wb,!1)}toggleActiveButtonByIndex(t){if(-1!==t)for(const[e,i]of this.buttonWidgets.entries())i.toggleClass(wb,null!=t&&t===e)}toggleButtonEnabledByIndex(t,e){var i;-1!==t&&(null==(i=this.buttonWidgets.at(t))||i.setEnabled(e))}toggleSwitchCheckedByIndex(t,e){var i;-1!==t&&(null==(i=this.buttonWidgets.at(t))||i.setChecked(e))}getButtonBounds(){return this.buttonWidgets.map((t=>this.getButtonWidgetBounds(t)))}setButtonHiddenByIndex(t,e){var i;null==(i=this.buttonWidgets.at(t))||i.setHidden(e)}getButtonWidgetBounds(t){const e=this.getBounds(),i=t.getBounds();return new Et(i.x+e.x,i.y+e.y,i.width,i.height)}refreshButtonClasses(){var t;const{buttonWidgets:e,hasPrefix:i}=this;let s,n,a;for(const[o,r]of e.entries())s=!i&&0===o||a!=r.section,n=o===e.length-1||r.section!=(null==(t=e.at(o+1))?void 0:t.section),r.toggleClass("ag-charts-toolbar__button--first",s),r.toggleClass("ag-charts-toolbar__button--last",n),r.toggleClass("ag-charts-toolbar__button--gap",o>0&&s),a=r.section}createButton(t,e){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",(s=>{const n={index:t,...e instanceof ki?e.toJson():e},a=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:s,button:n,buttonBounds:a})})),i.addListener("focus",(()=>{this.events.dispatch("button-focused",{button:{index:t}})})),e.section&&(i.section=e.section),this.buttonWidgets.push(i),this.addChild(i),i}},Tb=class extends Cb{createButtonWidget(){return new kb(this.localeManager)}},Eb=class extends Lb{constructor(t,e,i){super(t,e),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(t,e={}){this.showWithChildren(t,{...e,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const t=this.getPopoverElement();return new Et((null==t?void 0:t.offsetLeft)??0,(null==t?void 0:t.offsetTop)??0,(null==t?void 0:t.offsetWidth)??0,(null==t?void 0:t.offsetHeight)??0)}hasBeenDragged(){return this.dragged}setAnchor(t,e,i){const s=this.getPopoverElement();if(!s)return;const n=t.position??"above",{offsetWidth:a,offsetHeight:o}=s;let r=t.y-o-i,l=t.x-a/2;"below"===n?r=t.y+i:"right"===n?(r=t.y-o/2,l=t.x+e):"above-left"===n&&(l=t.x),this.updatePosition({x:l,y:r})}ignorePointerEvents(){const t=this.getPopoverElement();t&&(t.style.pointerEvents="none")}capturePointerEvents(){const t=this.getPopoverElement();t&&(t.style.pointerEvents="unset")}updatePosition(t){const e=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();t.x=Math.floor(bt(0,t.x,i.width-e.width)),t.y=Math.floor(bt(0,t.y,i.height-e.height)),super.updatePosition(t),this.onPopoverMoved()}},Ob=class extends Cb{constructor(t,e){super(t.localeManager),this.hasPrefix=!0,this.popover=new Eb(t,e,this.onPopoverMoved.bind(this)),this.dragHandle=new Rb(t.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(t={}){this.popover.show([this.dragHandle.getElement(),this.getElement()],t)}hide(){this.popover.hide()}setAnchor(t){this.popover.setAnchor(t,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){var t;const e=this.popover.getBounds();if(null==(t=this.popoverBounds)?void 0:t.equals(e))return;this.popoverBounds=e.clone();const i=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:e,buttonBounds:i})}getButtonWidgetBounds(t){const e=this.popover.getBounds(),i=super.getButtonWidgetBounds(t),s=this.dragHandle.getBounds();return new Et(i.x+e.x-s.width,i.y+e.y,i.width,i.height)}},Rb=class extends Yl{constructor(t){super(lt("div","ag-charts-floating-toolbar__drag-handle"));const e=new Yl(lt("span",`${ar("drag-handle")} ag-charts-toolbar__icon`));e.setAriaHidden(!0),this.addChild(e),this.elem.title=t}},jb={...it,...ws};Pv.create.bind(Pv),Pv.__createSparkline.bind(Pv);export{Pv as A};
